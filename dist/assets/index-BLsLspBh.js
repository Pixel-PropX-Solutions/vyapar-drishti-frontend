import{r as g,c as Ft,j as e}from"./react-DrzH4biM.js";import{c as Tl}from"./react-dom-Ba3v9xm_.js";import{u as Fe,a as Ce,P as Al}from"./react-redux-KBKdeUWb.js";import{c as ye,a as oa,b as Pl}from"./@reduxjs-BBl4Unef.js";import{a as vi}from"./axios-upsvKRUO.js";import{j as Ir}from"./jwt-decode-VWaDGczM.js";import{k as Z,c as Va,D as Ml}from"./react-hot-toast-Cwdl-w2c.js";import{u as we,G as I,C as Je,F as ze,P as ne,B as l,L as Rl,T as i,A as rt,S as tr,a as X,I as se,b as At,c as oi,d as J,e as ke,V as si,f as Tr,g as jt,h as Aa,i as ee,D as Pe,j as d,k as Wl,l as zl,m as $l,n as Si,o as Nl,p as Dl,R as Qi,q as ao,r as Bl,E as Fl,s as Ll,t as Ol,v as El,w as Gl,x as Kl,y as ds,z as Hl,H as ql,J as ro,K as Ul,M as Yl,N as Jl,O as Vl,Q as Ql,U as Ge,W as Pt,X as Lt,Y as Mt,Z as le,_ as ct,$ as bt,a0 as ia,a1 as _i,a2 as qe,a3 as ut,a4 as Fa,a5 as ca,a6 as no,a7 as Bt,a8 as Zl,a9 as Xl,aa as at,ab as ed,ac as td,ad,ae as ua,af as xt,ag as pn,ah as Xe,ai as Zt,aj as rd,ak as Ht,al as wo,am as Co,an as Kr,ao as ko,ap as Io,aq as Sn,ar as nd,as as id,at as he,au as cs,av as Zi,aw as $e,ax as tt,ay as To,az as yt,aA as io,aB as us,aC as xa,aD as Kt,aE as li,aF as vt,aG as Ar,aH as Pr,aI as Xt,aJ as Ka,aK as od,aL as sd,aM as Mr,aN as ld,aO as xs,aP as Xi,aQ as ps,aR as wi,aS as Ao,aT as Po,aU as Mo,aV as oo,aW as dd,aX as so,aY as cd,aZ as ud,a_ as xd,a$ as pd,b0 as hd,b1 as Ro,b2 as md,b3 as gd,b4 as bd,b5 as lo,b6 as _n,b7 as Wo,b8 as fd,b9 as yd,ba as hs,bb as Rt,bc as jd,bd as Wi,be as vd,bf as Sd,bg as zo,bh as _d,bi as ms,bj as Ne,bk as Me,bl as Ye,bm as ve,bn as gs,bo as ht,bp as Ta,bq as wd,br as Cd,bs as ea,bt as kd,bu as ar,bv as wa,bw as Tt,bx as co,by as St,bz as uo,bA as Ci,bB as qt,bC as pa,bD as pt,bE as Id,bF as gr,bG as Td,bH as Ad,bI as Pd,bJ as Md,bK as aa,bL as xr,bM as xe,bN as m,bO as Ee,bP as Ha,bQ as Rr,bR as mt,bS as Pa,bT as ba,bU as fa,bV as Ma,bW as pe,bX as Rd,bY as ma,bZ as Wr,b_ as dt,b$ as hn,c0 as ki,c1 as Wd,c2 as nt,c3 as it,c4 as ot,c5 as Ue,c6 as st,c7 as xo,c8 as bs,c9 as zd,ca as pr,cb as Da,cc as na,cd as $d,ce as Nd,cf as fs,cg as da,ch as Dd,ci as Bd,cj as Fd,ck as Ld,cl as Od,cm as kt,cn as wn,co as qr,cp as ys,cq as Hr,cr as Ed,cs as js,ct as di,cu as Gd,cv as Kd,cw as Hd,cx as qd,cy as Ud,cz as Yd,cA as Jd,cB as Vd,cC as Qd,cD as Zd,cE as Xd,cF as ec,cG as tc,cH as ac,cI as vs,cJ as rc,cK as nc,cL as Ss,cM as La,cN as ic,cO as qa,cP as Ua,cQ as oc,cR as _s,cS as mn,cT as cn,cU as sc,cV as lc,cW as dc,cX as cc,cY as uc,cZ as xc,c_ as pc,c$ as po,d0 as hc,d1 as mc,d2 as ws,d3 as gc,d4 as Cs,d5 as ks,d6 as bc,d7 as ci,d8 as Oa,d9 as fc,da as Is,db as Ts,dc as ui,dd as yc,de as jc,df as vc,dg as Sc,dh as _c,di as Ur,dj as $o,dk as No,dl as ho,dm as on,dn as As,dp as eo,dq as sn,dr as Ps,ds as Ms,dt as wc,du as ya,dv as Ut,dw as ln,dx as Rs,dy as Ws,dz as Ea,dA as zi,dB as Cc,dC as kc,dD as Ic,dE as Tc,dF as xi,dG as pi,dH as hi,dI as ka,dJ as mo,dK as zs,dL as Ga,dM as mi,dN as gi,dO as $s,dP as Ns,dQ as go,dR as bo,dS as Ac,dT as Do,dU as $i,dV as bi,dW as Ds,dX as Pc,dY as Bo,dZ as Bs,d_ as Fs,d$ as Ls,e0 as Mc,e1 as Fo,e2 as Rc,e3 as Os,e4 as Dr,e5 as Lo,e6 as fi,e7 as rr,e8 as fo,e9 as Wc,ea as zc,eb as Es,ec as $c,ed as Gs,ee as Nc,ef as Oo,eg as br,eh as Dc,ei as Ni,ej as Bc,ek as Eo,el as Fc,em as Lc}from"./@mui-B6nGRjUu.js";import{u as Ke,a as un,O as Oc,R as Ks,b as We,c as ja,d as Hs,B as Ec}from"./react-router-BSrLMBGZ.js";import{d as Di}from"./dayjs-C6NzR7hv.js";import{m as lt,A as Gc}from"./framer-motion-BfilVau7.js";import{D as Kc,P as Hc}from"./react-pdf-BPq5Bnmh.js";import{d as qc}from"./pdfjs-dist-BLWtn6vf.js";import{c as Uc}from"./clsx-B-dksMZM.js";import{t as Yc}from"./tailwind-merge-CLJs87Zn.js";import{m as yi}from"./motion-BkdV4xOC.js";import"./@babel-DgLgpmp3.js";import"./scheduler-vn6Di64w.js";import"./use-sync-external-store-BCYOXHPt.js";import"./redux-BaZL7JtD.js";import"./immer-DFAsTp4z.js";import"./redux-thunk-ClJT1hhx.js";import"./goober-np-fLvOt.js";import"./@emotion-DoM9OO59.js";import"./hoist-non-react-statics-C-Qo8PK8.js";import"./stylis-FDnFs_-n.js";import"./react-transition-group-BHljhOI1.js";import"./dom-helpers-D0mFdbeO.js";import"./prop-types-DUwSL7Tm.js";import"./date-fns-CxiLeWzS.js";import"./@react-spring-C6RYKmct.js";import"./d3-interpolate-CTcRbmYV.js";import"./d3-color-9lF95FHy.js";import"./d3-shape-C1uyq09P.js";import"./d3-path-CimkQT29.js";import"./d3-scale-Co75sXy1.js";import"./internmap-BkD7Hj8s.js";import"./d3-array-DJclFi1f.js";import"./d3-format-CzD4bSOQ.js";import"./d3-time-format-DZUSPL1N.js";import"./d3-time-Dz5jZYzf.js";import"./@popperjs-FRdid3Df.js";import"./react-is-BPJnJB5S.js";import"./cookie--_YQFYBD.js";import"./motion-dom-Batkyjpi.js";import"./motion-utils-oHHVB9CY.js";import"./make-event-props-BSS3Agxc.js";import"./make-cancellable-promise-BDT7duwA.js";import"./tiny-invariant-CopsF_GD.js";import"./warning-BShWsMhL.js";import"./dequal-tFQomdd2.js";import"./merge-refs-B7wZyJkK.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const p of o.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var Ve=(t=>(t.AUTHENTICATED="AUTHENTICATED",t.INITIALIZING="INITIALIZING",t.IDLE="IDLE",t.ERROR="ERROR",t))(Ve||{}),hr=(t=>(t.ADMIN="admin",t.USER="user",t.NULL="null",t))(hr||{});const be=vi.create({baseURL:"http://localhost:8010/api/v1",withCredentials:!0});be.interceptors.response.use(t=>{if(t.data.accessToken&&t.data.refreshToken){console.log("Response in user api",t),localStorage.setItem("accessToken",t.data.accessToken),localStorage.setItem("refreshToken",t.data.refreshToken);const n=Ir(t.data.accessToken).current_company_id;localStorage.setItem("current_company_id",n)}return t},async t=>{var n;const a=t.config;if(((n=t.response)==null?void 0:n.status)===401&&!a._retry){a._retry=!0;try{const{data:s}=await vi.post("undefined/auth/refresh",{},{withCredentials:!0});console.log("Token refresh response:",s),localStorage.setItem("accessToken",s.accessToken),localStorage.setItem("refreshToken",s.refreshToken);const o=Ir(s.accessToken).current_company_id;return localStorage.setItem("current_company_id",o),be.defaults.headers.common.Authorization=`Bearer ${s.accessToken}`,a.headers.Authorization=`Bearer ${s.accessToken}`,be(a)}catch(s){console.error("Token refresh failed:",s),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("current_company_id"),window.location.href="/"}}return console.error("API response error:",t),Promise.reject(t)});const Cn=ye("user/login",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.post(`/auth/login?user_type=${t.get("user_type")}`,t);if(console.log("Login response:",r),r.data.ok){const o=r.data.accessToken,c=Ir(o).current_company_id;return localStorage.setItem("accessToken",o),localStorage.setItem("current_company_id",c),{accessToken:o,current_company_id:c}}else return a("Login failed: Unknown error.")}catch(r){return console.log("Login API Error",r),(r==null?void 0:r.name)==="AxiosError"&&(r==null?void 0:r.code)==="ERR_NETWORK"?a("Please check your internet connection. If the problem persists, contact support."):a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),kn=ye("user/register",async(t,{rejectWithValue:a})=>{var n,s;try{return(await be.post("/auth/register",t)).data.ok?void 0:a("Registration failed: No access token received.")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),Ia=ye("get/current/user",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.get("/auth/current/user");console.log("Current user response:",r);const o=r.data.data[0];return o?(localStorage.setItem("user",o),{user:o}):a("Login Failed: No access token recieved.")}catch(r){return console.log("Get current user error:",r),a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),jr=ye("get/current/company",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.get("user/company");return r.data.success===!0?{currentCompany:r.data.data[0]}:a("Login Failed: No access token recieved.")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),In=ye("delete/company",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.delete(`/auth/delete/user/company/${t}`);if(console.log("Delete Company Response:",r),r.data.success===!0){const o=r.data.accessToken,p=r.data.company_id,x=Ir(o).current_company_id;return localStorage.setItem("accessToken",o),localStorage.setItem("current_company_id",x),{accessToken:o,current_company_id:x,company_id:p}}else return a("Login Failed: No access token recieved.")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),Tn=ye("delete/account",async(t,{rejectWithValue:a})=>{var n,s;try{return(await be.delete("auth/delete/user")).data.success===!0?(localStorage.clear(),{success:!0}):a("Login Failed: No access token recieved.")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),An=ye("user/forget/password",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.post(`/auth/forgot/password/${t}`);return console.log("Forgot password response:",r),r.data.success===!0?1:a("Forgot password request failed.")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),Pn=ye("user/reset/password",async({email:t,new_password:a,token:n},{rejectWithValue:s})=>{var r,o;try{const p=await be.post("/auth/reset/password",{email:t,new_password:a,token:n});if(console.log("Reset password response:",p),p.data.success===!0){const c=p.data.accessToken,u=Ir(c).current_company_id;return localStorage.setItem("accessToken",c),localStorage.setItem("current_company_id",u),{accessToken:c,current_company_id:u}}else return localStorage.removeItem("accessToken"),localStorage.removeItem("current_company_id"),s("Reset password failed: No access token received.")}catch(p){return s((o=(r=p==null?void 0:p.response)==null?void 0:r.data)==null?void 0:o.message)}}),Mn=ye("switch/company",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.post(`/user/settings/switch-company/${t}`);if(console.log("Switch company response:",r),r.data.success===!0){const o=r.data.accessToken,c=Ir(o).current_company_id;return localStorage.setItem("accessToken",o),localStorage.setItem("current_company_id",c),{accessToken:o,current_company_id:c}}else return a("Login failed: Unknown error.")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),Yr=ye("user/logout",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.post("/auth/logout");return r.status===200?(localStorage.removeItem("accessToken"),localStorage.removeItem("current_company_id"),r.data):a("Login Failed: No access token recieved.")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),Rn=ye("user/verify/email",async({email:t,token:a},{rejectWithValue:n})=>{var s,r;try{const o=await be.post(`/auth/verify/email?email=${t}&token=${a}`);return console.log("Email verification API response:",o),o.status===200?o.data:n("Email verification failed.")}catch(o){return console.log("Email verification error:",o),n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}}),Wn=ye("user/send/query/email",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.post("/auth/send/email/query",t);return console.log("Send query email API response:",r),r.status===200?r.data:a("Send query email failed.")}catch(r){return console.log("Send query email error:",r),a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),Jc={currentCompany:null,email:"",accessToken:localStorage.getItem("accessToken")?localStorage.getItem("accessToken"):null,current_company_id:localStorage.getItem("current_company_id")?localStorage.getItem("current_company_id"):null,authState:Ve.INITIALIZING,isUserFetched:!1,user:null,signupData:{name:{first:"",last:""},email:"",phone:{code:"",number:""},password:""},loading:!1,switchCompanyLoading:!1,deleteCompanyLoading:!1,error:null},qs=oa({name:"auth",initialState:Jc,reducers:{setSignupData(t,a){t.signupData=a.payload},setUser(t,a){t.authState=a.payload.authState??t.authState,t.error=a.payload.error??t.error},setCurrentCompanyId(t,a){t.current_company_id=a.payload,localStorage.setItem("current_company_id",a.payload||"")}},extraReducers:t=>{t.addCase(Cn.pending,a=>{a.authState=Ve.INITIALIZING,a.error=null,a.loading=!0}).addCase(Cn.fulfilled,(a,n)=>{a.authState=Ve.AUTHENTICATED,a.accessToken=n.payload.accessToken,a.current_company_id=n.payload.current_company_id,a.loading=!1}).addCase(Cn.rejected,(a,n)=>{a.authState=Ve.ERROR,a.error=n.payload,a.loading=!1}).addCase(Pn.pending,a=>{a.authState=Ve.INITIALIZING,a.error=null,a.loading=!0}).addCase(Pn.fulfilled,(a,n)=>{a.authState=Ve.AUTHENTICATED,a.accessToken=n.payload.accessToken,a.current_company_id=n.payload.current_company_id,a.loading=!1}).addCase(Pn.rejected,(a,n)=>{a.authState=Ve.ERROR,a.error=n.payload,a.loading=!1}).addCase(Mn.pending,a=>{a.error=null,a.switchCompanyLoading=!0}).addCase(Mn.fulfilled,(a,n)=>{a.accessToken=n.payload.accessToken,a.current_company_id=n.payload.current_company_id,a.switchCompanyLoading=!1}).addCase(Mn.rejected,(a,n)=>{a.error=n.payload,a.switchCompanyLoading=!1}).addCase(In.pending,a=>{a.error=null,a.deleteCompanyLoading=!0}).addCase(In.fulfilled,(a,n)=>{a.accessToken=n.payload.accessToken,a.current_company_id=n.payload.current_company_id,a.deleteCompanyLoading=!1}).addCase(In.rejected,(a,n)=>{a.error=n.payload,a.deleteCompanyLoading=!1}).addCase(Tn.pending,a=>{a.authState=Ve.INITIALIZING,a.error=null,a.loading=!0}).addCase(Tn.fulfilled,a=>{a.authState=Ve.IDLE,a.loading=!1}).addCase(Tn.rejected,(a,n)=>{a.authState=Ve.ERROR,a.error=n.payload,a.loading=!1}).addCase(Ia.pending,a=>{a.error=null,a.loading=!0}).addCase(Ia.fulfilled,(a,n)=>{var s,r,o,p;a.user=n.payload.user,a.current_company_id===null&&(a.current_company_id=(r=(s=n.payload.user)==null?void 0:s.user_settings)==null?void 0:r.current_company_id,localStorage.setItem("current_company_id",((p=(o=n.payload.user)==null?void 0:o.user_settings)==null?void 0:p.current_company_id)||"")),a.isUserFetched=!0,a.loading=!1}).addCase(Ia.rejected,(a,n)=>{a.error=n.payload,a.isUserFetched=!0,a.loading=!1}).addCase(jr.pending,a=>{a.error=null,a.loading=!0}).addCase(jr.fulfilled,(a,n)=>{a.currentCompany=n.payload.currentCompany,a.loading=!1}).addCase(jr.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(kn.pending,a=>{a.error=null,a.loading=!0}).addCase(kn.fulfilled,a=>{a.loading=!1}).addCase(kn.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Yr.pending,a=>{a.authState=Ve.INITIALIZING,a.error=null,a.loading=!0}).addCase(Yr.fulfilled,a=>{a.authState=Ve.IDLE,a.email="",a.accessToken=null,a.loading=!1}).addCase(Yr.rejected,(a,n)=>{a.authState=Ve.ERROR,a.error=n.payload,a.loading=!1}).addCase(An.pending,a=>{a.authState=Ve.INITIALIZING,a.error=null,a.loading=!0}).addCase(An.fulfilled,a=>{a.authState=Ve.IDLE,a.loading=!1}).addCase(An.rejected,(a,n)=>{a.authState=Ve.ERROR,a.error=n.payload,a.loading=!1}).addCase(Rn.pending,a=>{a.error=null,a.loading=!0}).addCase(Rn.fulfilled,a=>{a.loading=!1}).addCase(Rn.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Wn.pending,a=>{a.error=null,a.loading=!0}).addCase(Wn.fulfilled,a=>{a.loading=!1}).addCase(Wn.rejected,(a,n)=>{a.error=n.payload,a.loading=!1})}}),{setUser:Bi,setSignupData:jm,setCurrentCompanyId:Vc}=qs.actions,Qc=qs.reducer,Ya="/assets/Logo-BWH3LdtG.webp",zr="/assets/Logo_Text-HMisnYZs.webp",zn=ye("company/create",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.post("/user/create/company",t);return r.data.success===!0?r.data.data:a("Company creation failed")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),Jr=ye("get/company",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.get("/user/company");if(r.data.success){const o=r.data.data[0];return localStorage.setItem("company",o),{company:o}}else return a(" No access token recieved.")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),$n=ye("get/company/details",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.get(`/user/company/details/${t}`);if(console.log("response get company details",r),r.data.success){const o=r.data.data[0];return localStorage.setItem("company",o),{company:o}}else return a(" No access token recieved.")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),vr=ye("get/all/company",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.get("/user/all/company");return console.log("response get All companies",r),r.data.success?{companies:r.data.data}:a(" No access token recieved.")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),Zc=ye("update/company",async({data:t,id:a},{rejectWithValue:n})=>{var s,r;try{return(await be.put(`/user/update/company/${a}`,t)).data.success===!0?void 0:n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}}),Xc=()=>{const t=Fe(),a=we(),{authState:n}=Ce(P=>P.auth),s=window.location.pathname,[r,o]=g.useState({username:"",password:"",user_type:s==="/admin"?"admin":"user"}),p=Ke(),[c,x]=g.useState(!1),[u,S]=Ft.useState(!1),[f,v]=g.useState(!1),[j,T]=g.useState({}),[k,B]=g.useState(!1),_=s==="/admin",K=()=>{S(!u)};function w(P){const{name:A,value:O}=P.target;o(y=>{const F={...y,[A]:O};return x(N(F)),F}),j[A]&&T(y=>({...y,[A]:""}))}const N=g.useCallback(P=>{const A={},O=P||r;return Object.keys(O).forEach(y=>{const F=y,h=R(F,String(O[F]||""));h&&(A[F]=h)}),T(A),Object.keys(A).length===0},[r]),R=(P,A)=>P==="username"&&!A.trim()?"Username or email is required":P==="username"&&!/\S+@\S+\.\S+/.test(A)?"Please enter a valid email":P==="password"&&!A.trim()?"Password is required":"",L=P=>{if(P.preventDefault(),!N()){const O=Object.values(j)[0];Z.error(O||"Please fill in all required fields correctly.");return}v(!0);const A=new FormData;A.append("username",r.username),A.append("password",r.password),A.append("user_type",r.user_type),t(Cn(A)).unwrap().then(O=>{console.log("Response Login Form",O),t(Ia()),t(Jr()),p("/"),v(!1),k?localStorage.setItem("rememberMe",JSON.stringify({username:r.username,user_type:r.user_type})):localStorage.removeItem("rememberMe")}).catch(O=>{console.error("Login error:",O),v(!1),Z.error(O||"An unexpected error occurred. Please try again later.")})},D=n===Ve.INITIALIZING;return e.jsx(I,{item:!0,lg:12,sx:{display:"flex",width:"100%",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:{xs:2,sm:3,md:4},minHeight:"100vh"},children:e.jsx(Je,{component:"main",maxWidth:!1,sx:{width:{sm:"100%",xs:"100%",md:"550px",lg:"700px"}},children:e.jsx(ze,{in:!0,timeout:800,children:e.jsxs(ne,{elevation:0,sx:{padding:{xs:3,sm:4,md:5},borderRadius:3,border:`1px solid ${a.palette.divider}`,background:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)"},children:[e.jsxs(l,{sx:{display:"flex",width:"100%",mb:2,gap:2,alignItems:"center",justifyContent:"center"},children:[e.jsx(l,{component:"img",src:Ya,alt:"Logo",sx:{height:{xs:"24px",sm:"32px",md:"40px"},borderRadius:"8px"}}),e.jsx(l,{component:"img",src:zr,alt:"Logo Text",sx:{height:{xs:"24px",sm:"30px",md:"32px"}}})]}),e.jsxs(l,{sx:{mb:3,textAlign:"center"},children:[e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:e.jsx(Rl,{color:"primary",sx:{fontSize:{xs:24,sm:32,md:40},mr:1}})}),e.jsx(i,{variant:"h4",sx:{fontWeight:700,background:`linear-gradient(135deg, ${a.palette.primary.main}, ${a.palette.primary.dark})`,backgroundClip:"text",WebkitBackgroundClip:"text",fontSize:{xs:"1.2rem",sm:"1.8rem",md:"2.4rem"},WebkitTextFillColor:"transparent"},children:"Welcome Back"}),e.jsxs(i,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:".9rem",sm:"1.4rem",md:"2rem"},lineHeight:1.6},children:["Sign in to your ",_?"Admin":"User"," Account"]}),e.jsx(i,{variant:"body2",sx:{color:"text.secondary",fontSize:{xs:".8rem",sm:"1rem",md:"1.2rem"}},children:"Empower your business with advanced document handling and insightful billing analysis."})]}),_&&e.jsx(rt,{severity:"info",icon:e.jsx(tr,{}),sx:{mb:3,borderRadius:2,"& .MuiAlert-message":{fontWeight:500}},children:"You are signing in as an Administrator"}),e.jsxs(l,{component:"form",onSubmit:L,sx:{width:"100%"},children:[e.jsx(X,{label:"Username or Email",variant:"outlined",fullWidth:!0,required:!0,value:r.username,onChange:w,error:!!j.username,helperText:j.username||"Enter your email or username",margin:"normal",name:"username",autoComplete:"username",autoFocus:!0,placeholder:"johndoe@gmail.com",disabled:D,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(At,{sx:{color:"text.secondary"}})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.2s ease-in-out","&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:a.palette.primary.main}},"&.Mui-focused":{boxShadow:`0 0 0 3px ${a.palette.primary.main}20`}}}}),e.jsx(X,{onChange:w,margin:"normal",fullWidth:!0,required:!0,name:"password",variant:"outlined",value:r.password,label:"Password",type:u?"text":"password",placeholder:"Enter your password",autoComplete:"current-password",error:!!j.password,helperText:j.password||"Enter your password",disabled:D,sx:{mb:1,"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.3s ease","&:hover":{boxShadow:`0 0 0 2px ${a.palette.primary.main}20`},"&.Mui-focused":{boxShadow:`0 0 0 2px ${a.palette.primary.main}40`}}},InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(oi,{sx:{color:"action.active"}})}),endAdornment:e.jsx(se,{position:"end",children:e.jsx(J,{direction:"row",spacing:1,alignItems:"center",children:e.jsx(ke,{onClick:K,edge:"end",size:"small",children:u?e.jsx(si,{}):e.jsx(Tr,{})})})})}}),e.jsxs(l,{sx:{display:"flex",alignItems:{xs:"flex-start",sm:"center"},flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",mt:1},children:[e.jsx(jt,{control:e.jsx(Aa,{checked:k,onChange:P=>B(P.target.checked),color:"primary",disabled:D}),label:e.jsx(i,{variant:"body2",sx:{color:"text.secondary",fontSize:{xs:".7rem",sm:".9rem",md:"1rem"}},children:"Remember me for 30 days"})}),e.jsxs(i,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:".7rem",sm:".9rem",md:"1rem"}},children:["Can't remember password?"," ",e.jsx(ee,{onClick:()=>p("/forgot-password"),sx:{fontSize:{xs:".7rem",sm:".9rem",md:"1rem"},fontWeight:600,textTransform:"none",p:0,minWidth:"auto","&:hover":{background:"transparent",textDecoration:"underline"}},children:"Reset Password"})]})]}),e.jsx(ee,{type:"submit",fullWidth:!0,variant:"contained",disabled:D||f||!c,size:"large",sx:{mt:1,mb:1,py:1.5,borderRadius:2,fontSize:"1.1rem",fontWeight:600,textTransform:"none",background:c&&!f?_?`linear-gradient(45deg, ${a.palette.error.main}, ${a.palette.warning.main})`:`linear-gradient(135deg, ${a.palette.primary.main}, ${a.palette.primary.dark})`:void 0,boxShadow:c&&!f?`0 4px 20px ${a.palette.primary.main}40`:void 0,transition:"all 0.2s ease-in-out","&:hover":{background:c&&!f?_?`linear-gradient(45deg, ${a.palette.error.dark}, ${a.palette.warning.dark})`:`linear-gradient(135deg, ${a.palette.primary.dark}, ${a.palette.primary.main})`:void 0,transform:"translateY(-1px)",boxShadow:c&&!f?`0 6px 25px ${a.palette.primary.main}50`:void 0},"&:disabled":{background:a.palette.grey[300],color:a.palette.grey[500]}},children:D?"Signing in...":"Sign In"}),e.jsx(Pe,{sx:{my:1},children:e.jsx(i,{variant:"h6",sx:{color:"text.secondary",px:2},children:"or"})}),e.jsxs(l,{sx:{textAlign:"center"},children:[e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Don't have an account yet?"," ",e.jsx(ee,{onClick:()=>p("/signup"),sx:{fontSize:"inherit",fontWeight:600,textTransform:"none",p:0,minWidth:"auto","&:hover":{background:"transparent",textDecoration:"underline"}},children:"Sign Up"})]}),e.jsxs(i,{variant:"caption",sx:{color:"text.secondary"},children:["By signing in, you agree to our"," ",e.jsx(ee,{onClick:()=>p("/terms"),sx:{fontSize:"inherit",p:0,minWidth:"auto",textTransform:"none",textDecoration:"underline","&:hover":{background:"transparent"}},children:"Terms of Service"})," ","and"," ",e.jsx(ee,{onClick:()=>p("/privacy"),sx:{fontSize:"inherit",p:0,minWidth:"auto",textTransform:"none",textDecoration:"underline","&:hover":{background:"transparent"}},children:"Privacy Policy"})]})]})]})]})})})})},eu=(t,a,n)=>({pos:{x:t,y:a},vel:{x:Math.random()*2-1,y:Math.random()*2-1},size:n}),tu=["rgb(255, 182, 193)","rgb(135, 206, 250)","rgb(144, 238, 144)","rgb(221, 160, 221)","rgb(173, 216, 230)","rgb(255, 228, 225)","rgb(240, 230, 140)","rgb(250, 250, 210)","rgb(176, 224, 230)","rgb(255, 255, 224)","rgb(255, 218, 185)","rgb(255, 240, 245)","rgb(230, 230, 250)","rgb(216, 191, 216)","rgb(255, 239, 213)","rgb(255, 245, 238)","rgb(245, 245, 220)","rgb(255, 250, 205)","rgb(175, 238, 238)","rgb(224, 255, 255)","rgb(245, 255, 250)","rgb(255, 228, 196)","rgb(255, 235, 205)","rgb(250, 235, 215)","rgb(253, 245, 230)","rgb(255, 248, 220)","rgb(255, 255, 240)","rgb(240, 248, 255)","rgb(248, 248, 255)","rgb(245, 245, 245)","rgb(255, 250, 250)","rgb(255, 192, 203)","rgb(255, 160, 122)","rgb(255, 182, 193)","rgb(219, 112, 147)","rgb(176, 196, 222)","rgb(173, 216, 230)","rgb(135, 206, 235)","rgb(152, 251, 152)","rgb(144, 238, 144)","rgb(193, 255, 193)","rgb(221, 160, 221)","rgb(238, 130, 238)","rgb(218, 112, 214)","rgb(255, 222, 173)","rgb(250, 240, 230)","rgb(255, 228, 181)","rgb(255, 218, 185)","rgb(244, 164, 96)"],au=["rgb(102, 73, 77)","rgb(54, 82, 100)","rgb(58, 95, 58)","rgb(88, 64, 88)","rgb(69, 86, 92)","rgb(102, 91, 90)","rgb(96, 92, 56)","rgb(100, 100, 84)","rgb(70, 90, 92)","rgb(102, 102, 90)","rgb(102, 87, 74)","rgb(102, 96, 98)","rgb(92, 92, 100)","rgb(86, 76, 86)","rgb(102, 96, 85)","rgb(102, 98, 95)","rgb(98, 98, 88)","rgb(102, 100, 82)","rgb(70, 95, 95)","rgb(90, 102, 102)","rgb(96, 102, 96)","rgb(98, 102, 100)","rgb(102, 91, 78)","rgb(102, 94, 82)","rgb(100, 94, 86)","rgb(101, 98, 92)","rgb(102, 99, 88)","rgb(102, 102, 96)","rgb(96, 99, 102)","rgb(99, 99, 102)","rgb(98, 98, 98)","rgb(102, 100, 100)","rgb(102, 77, 81)","rgb(102, 64, 49)","rgb(102, 73, 77)","rgb(88, 45, 59)","rgb(70, 78, 89)","rgb(69, 86, 92)","rgb(54, 82, 94)","rgb(61, 100, 61)","rgb(58, 95, 58)","rgb(77, 102, 77)","rgb(88, 64, 88)","rgb(95, 52, 95)","rgb(87, 45, 86)","rgb(102, 89, 69)","rgb(100, 96, 92)","rgb(102, 91, 72)","rgb(102, 87, 74)","rgb(98, 66, 38)"];function Us({style:t,children:a,maxSize:n=110}){const s=g.useRef(null),[r,o]=g.useState({width:0,height:0}),c=we().palette.mode==="dark"?au:tu,x=g.useRef(Array.from({length:(a==null?void 0:a.length)??10},()=>Math.floor(Math.random()*20+n-50))).current,[u,S]=g.useState([]),f=g.useRef();return g.useEffect(()=>{const v=()=>{s.current&&o({width:s.current.offsetWidth,height:s.current.offsetHeight})};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]),g.useEffect(()=>{r.width===0||r.height===0||S(x.map(v=>eu(Math.floor(Math.random()*(r.width-v)),Math.floor(Math.random()*(r.height-v)),v)))},[r,x]),g.useEffect(()=>{if(u.length===0||r.width===0)return;const v=()=>{S(T=>T.map((k,B)=>{const _={...k};return _.pos.x+=_.vel.x,_.pos.y+=_.vel.y,(_.pos.x<0||r.width-x[B]<_.pos.x)&&(_.vel.x*=-1,_.pos.x=_.pos.x<0?0:r.width-x[B]),(_.pos.y<0||r.height-x[B]<_.pos.y)&&(_.vel.y*=-1,_.pos.y=_.pos.y<0?0:r.height-x[B]),_}))},j=()=>{v(),f.current=requestAnimationFrame(j)};return f.current=requestAnimationFrame(j),()=>{f.current&&cancelAnimationFrame(f.current)}},[u.length,r,x]),e.jsx("div",{ref:s,style:{position:"absolute",width:"100%",height:"100%",overflow:"hidden",...t},children:u.map((v,j)=>e.jsx("div",{style:{position:"absolute",width:x[j],height:x[j],borderRadius:"50%",backgroundColor:d(c[j],.6),border:`2px solid ${d(c[j],.9)}`,top:v.pos.y,left:v.pos.x,display:"flex",alignItems:"center",justifyContent:"center"},children:(a==null?void 0:a[j])??null},j))})}function Ys({children:t,duration:a=500,delay:n=0,useRandomDelay:s=!1,style:r}){const[o,p]=g.useState(!1),c=s?Math.floor(Math.random()*a*.5):n;return g.useEffect(()=>{const x=setTimeout(()=>{p(!0)},c);return()=>clearTimeout(x)},[c]),e.jsx("div",{style:{position:"relative",opacity:o?1:0,transform:o?"scale(1)":"scale(0.5)",transition:`all ${a}ms ease-out`,...r},children:t})}function Js(){const a=we().palette.mode==="dark"?"white":"black";return[e.jsx(Wl,{sx:{color:a,fontSize:40}}),e.jsx(zl,{sx:{color:a,fontSize:40}}),e.jsx($l,{sx:{color:a,fontSize:40}}),e.jsx(Si,{sx:{color:a,fontSize:40}}),e.jsx(Nl,{sx:{color:a,fontSize:40}}),e.jsx(Dl,{sx:{color:a,fontSize:40}}),e.jsx(Qi,{sx:{color:a,fontSize:40}}),e.jsx(ao,{sx:{color:a,fontSize:40}}),e.jsx(Bl,{sx:{color:a,fontSize:40}}),e.jsx(Fl,{sx:{color:a,fontSize:40}}),e.jsx(Ll,{sx:{color:a,fontSize:40}}),e.jsx(Ol,{sx:{color:a,fontSize:40}}),e.jsx(El,{sx:{color:a,fontSize:40}}),e.jsx(Gl,{sx:{color:a,fontSize:40}}),e.jsx(Kl,{sx:{color:a,fontSize:40}}),e.jsx(ds,{sx:{color:a,fontSize:40}}),e.jsx(Hl,{sx:{color:a,fontSize:40}}),e.jsx(ql,{sx:{color:a,fontSize:40}}),e.jsx(ro,{sx:{color:a,fontSize:40}}),e.jsx(Ul,{sx:{color:a,fontSize:40}}),e.jsx(Yl,{sx:{color:a,fontSize:40}}),e.jsx(Jl,{sx:{color:a,fontSize:40}}),e.jsx(Vl,{sx:{color:a,fontSize:40}}),e.jsx(Ql,{sx:{color:a,fontSize:40}})]}const Go=()=>e.jsxs(I,{container:!0,sx:{height:"100vh",zIndex:1,position:"relative"},children:[e.jsx(Us,{maxSize:110,children:Js().map((t,a)=>e.jsx(Ys,{useRandomDelay:!0,duration:1e3,children:t},a))}),e.jsx(l,{sx:{width:"100%",display:"flex",justifyContent:"center",flexDirection:"row"},children:e.jsx(Xc,{})})]}),It=JSON.parse(`[{"name":"Afghanistan","states":["Badakhshan","Badghis","Baghlan","Balkh","Bamyan","Daykundi","Farah","Faryab","Ghazni","Ghōr","Helmand","Herat","Jowzjan","Kabul","Kandahar","Kapisa","Khost","Kunar","Kunduz Province","Laghman","Logar","Nangarhar","Nimruz","Nuristan","Paktia","Paktika","Panjshir","Parwan","Samangan","Sar-e Pol","Takhar","Urozgan","Zabul"]},{"name":"Aland Islands","states":["Brändö","Eckerö","Finström","Föglö","Geta","Hammarland","Jomala","Kökar","Kumlinge","Lemland","Lumparland","Mariehamn","Saltvik","Sottunga","Sund","Vårdö"]},{"name":"Albania","states":["Berat","Berat","Bulqizë","Delvinë","Devoll","Dibër","Dibër","Durrës","Durrës","Elbasan","Fier","Fier","Gjirokastër","Gjirokastër","Gramsh","Has","Kavajë","Kolonjë","Korçë","Korçë","Krujë","Kuçovë","Kukës","Kukës","Kurbin","Lezhë","Lezhë","Librazhd","Lushnjë","Malësi e Madhe","Mallakastër","Mat","Mirditë","Peqin","Përmet","Pogradec","Pukë","Sarandë","Shkodër","Shkodër","Skrapar","Tepelenë","Tirana","Tirana","Tropojë","Vlorë","Vlorë"]},{"name":"Algeria","states":["Adrar","Aïn Defla","Aïn Témouchent","Algiers","Annaba","Batna","Béchar","Béjaïa","Béni Abbès","Biskra","Blida","Bordj Baji Mokhtar","Bordj Bou Arréridj","Bouïra","Boumerdès","Chlef","Constantine","Djanet","Djelfa","El Bayadh","El M'ghair","El Menia","El Oued","El Tarf","Ghardaïa","Guelma","Illizi","In Guezzam","In Salah","Jijel","Khenchela","Laghouat","M'Sila","Mascara","Médéa","Mila","Mostaganem","Naama","Oran","Ouargla","Ouled Djellal","Oum El Bouaghi","Relizane","Saïda","Sétif","Sidi Bel Abbès","Skikda","Souk Ahras","Tamanghasset","Tébessa","Tiaret","Timimoun","Tindouf","Tipasa","Tissemsilt","Tizi Ouzou","Tlemcen","Touggourt"]},{"name":"American Samoa","states":["Eastern","Manuʻa","Rose","Swains","Western"]},{"name":"Andorra","states":["Andorra la Vella","Canillo","Encamp","Escaldes-Engordany","La Massana","Ordino","Sant Julià de Lòria"]},{"name":"Angola","states":["Bengo","Benguela","Bié","Cabinda","Cuando Cubango","Cuanza","Cuanza Norte","Cunene","Huambo","Huíla","Luanda","Lunda Norte","Lunda Sul","Malanje","Moxico","Uíge","Zaire"]},{"name":"Anguilla","states":["Blowing Point","East End","George Hill","Island Harbour","North Hill","North Side","Sandy Ground","Sandy Hill","South Hill","Stoney Ground","The Farrington","The Quarter","The Valley","West End"]},{"name":"Antigua and Barbuda","states":["Barbuda","Redonda","Saint George","Saint John","Saint Mary","Saint Paul","Saint Peter","Saint Philip"]},{"name":"Argentina","states":["Autonomous City of Buenos Aires","Buenos Aires","Catamarca","Chaco","Chubut","Córdoba","Corrientes","Entre Ríos","Formosa","Jujuy","La Pampa","La Rioja","Mendoza","Misiones","Neuquén","Río Negro","Salta","San Juan","San Luis","Santa Cruz","Santa Fe","Santiago del Estero","Tierra del Fuego","Tucumán"]},{"name":"Armenia","states":["Aragatsotn","Ararat","Armavir","Gegharkunik","Kotayk","Lori","Shirak","Syunik","Tavush","Vayots Dzor","Yerevan"]},{"name":"Aruba","states":["Noord","Oranjestad","Oranjestad East","Oranjestad West","Paradera","San Nicolaas Noord","San Nicolaas Zuid","Santa Cruz","Savaneta"]},{"name":"Australia","states":["Australian Capital Territory","New South Wales","Northern Territory","Queensland","South Australia","Tasmania","Victoria","Western Australia"]},{"name":"Austria","states":["Burgenland","Carinthia","Lower Austria","Salzburg","Styria","Tyrol","Upper Austria","Vienna","Vorarlberg"]},{"name":"Azerbaijan","states":["Absheron","Agdam","Agdash","Aghjabadi","Agstafa","Agsu","Astara","Babek","Baku","Balakan","Barda","Beylagan","Bilasuvar","Dashkasan","Fizuli","Ganja","Gədəbəy","Gobustan","Goranboy","Goychay","Goygol","Hajigabul","Imishli","Ismailli","Jabrayil","Jalilabad","Julfa","Kalbajar","Kangarli","Khachmaz","Khizi","Khojali","Kurdamir","Lachin","Lankaran","Lankaran","Lerik","Martuni","Masally","Mingachevir","Nakhchivan","Neftchala","Oghuz","Ordubad","Qabala","Qakh","Qazakh","Quba","Qubadli","Qusar","Saatly","Sabirabad","Sadarak","Salyan","Samukh","Shabran","Shahbuz","Shaki","Shaki","Shamakhi","Shamkir","Sharur","Shirvan","Shusha","Siazan","Sumqayit","Tartar","Tovuz","Ujar","Yardymli","Yevlakh","Yevlakh","Zangilan","Zaqatala","Zardab"]},{"name":"Bahrain","states":["Capital","Central","Muharraq","Northern","Southern"]},{"name":"Bangladesh","states":["Barisal ","Chittagong ","Dhaka ","Khulna ","Mymensingh ","Rajshahi ","Rangpur ","Sylhet "]},{"name":"Barbados","states":["Christ Church","Saint Andrew","Saint George","Saint James","Saint John","Saint Joseph","Saint Lucy","Saint Michael","Saint Peter","Saint Philip","Saint Thomas"]},{"name":"Belarus","states":["Brest","Gomel","Grodno","Minsk","Minsk","Mogilev","Vitebsk"]},{"name":"Belgium","states":["Antwerp","Brussels-Capital ","East Flanders","Flanders","Flemish Brabant","Hainaut","Liège","Limburg","Luxembourg","Namur","Wallonia","Walloon Brabant","West Flanders"]},{"name":"Belize","states":["Belize","Cayo","Corozal","Orange Walk","Stann Creek","Toledo"]},{"name":"Benin","states":["Alibori","Atakora","Atlantique","Borgou","Collines","Donga","Kouffo","Littoral","Mono","Ouémé","Plateau","Zou"]},{"name":"Bermuda","states":["Devonshire","Hamilton","Paget","Pembroke","Saint George's","Sandys","Smith's","Southampton","Warwick"]},{"name":"Bhutan","states":["Bumthang ","Chukha ","Dagana ","Gasa ","Haa ","Lhuntse ","Mongar ","Paro ","Pemagatshel ","Punakha ","Samdrup Jongkhar ","Samtse ","Sarpang ","Thimphu ","Trashi Yangtse\\t","Trashigang ","Trongsa ","Tsirang ","Wangdue Phodrang ","Zhemgang "]},{"name":"Bolivia","states":["Beni","Chuquisaca","Cochabamba","La Paz","Oruro","Pando","Potosí","Santa Cruz","Tarija"]},{"name":"Bonaire, Sint Eustatius and Saba","states":["Bonaire","Saba","Sint Eustatius"]},{"name":"Bosnia and Herzegovina","states":["Bosnian Podrinje","Brčko","Canton 10","Central Bosnia","Federation of Bosnia and Herzegovina","Herzegovina-Neretva","Posavina","Republika Srpska","Sarajevo","Tuzla","Una-Sana","West Herzegovina","Zenica-Doboj"]},{"name":"Botswana","states":["Central","Ghanzi","Kgalagadi","Kgatleng","Kweneng","Ngamiland","North-East","North-West","South-East","Southern"]},{"name":"Bouvet Island","states":["Bouvet Island"]},{"name":"Brazil","states":["Acre","Alagoas","Amapá","Amazonas","Bahia","Ceará","Distrito Federal","Espírito Santo","Goiás","Maranhão","Mato Grosso","Mato Grosso do Sul","Minas Gerais","Pará","Paraíba","Paraná","Pernambuco","Piauí","Rio de Janeiro","Rio Grande do Norte","Rio Grande do Sul","Rondônia","Roraima","Santa Catarina","São Paulo","Sergipe","Tocantins"]},{"name":"Brunei","states":["Belait","Brunei-Muara","Temburong","Tutong"]},{"name":"Bulgaria","states":["Blagoevgrad","Burgas","Dobrich","Gabrovo","Haskovo","Kardzhali","Kyustendil","Lovech","Montana","Pazardzhik","Pernik","Pleven","Plovdiv","Razgrad","Ruse","Shumen","Silistra","Sliven","Smolyan","Sofia","Sofia City","Stara Zagora","Targovishte","Varna","Veliko Tarnovo","Vidin","Vratsa","Yambol"]},{"name":"Burkina Faso","states":["Balé","Bam","Banwa","Bazèga","Boucle du Mouhoun","Bougouriba","Boulgou","Boulkiemde","Cascades","Centre","Centre-Est","Centre-Nord","Centre-Ouest","Centre-Sud","Comoé","Est","Ganzourgou","Gnagna","Gourma","Hauts-Bassins","Houet","Ioba","Kadiogo","Kénédougou","Komondjari","Kompienga","Kossi","Koulpélogo","Kouritenga","Kourwéogo","Léraba","Loroum","Mouhoun","Nahouri","Namentenga","Nayala","Nord","Noumbiel","Oubritenga","Oudalan","Passoré","Plateau-Central","Poni","Sahel","Sanguié","Sanmatenga","Séno","Sissili","Soum","Sourou","Sud-Ouest","Tapoa","Tuy","Yagha","Yatenga","Ziro","Zondoma","Zoundwéogo"]},{"name":"Burundi","states":["Bubanza","Bujumbura Mairie","Bujumbura Rural","Bururi","Cankuzo","Cibitoke","Gitega","Karuzi","Kayanza","Kirundo","Makamba","Muramvya","Muyinga","Mwaro","Ngozi","Rumonge","Rutana","Ruyigi"]},{"name":"Cambodia","states":["Banteay Meanchey","Battambang","Kampong Cham","Kampong Chhnang","Kampong Speu","Kampong Thom","Kampot","Kandal","Kep","Koh Kong","Kratie","Mondulkiri","Oddar Meanchey","Pailin","Phnom Penh","Preah Vihear","Prey Veng","Pursat","Ratanakiri","Siem Reap","Sihanoukville","Stung Treng","Svay Rieng","Takeo"]},{"name":"Cameroon","states":["Adamawa","Centre","East","Far North","Littoral","North","Northwest","South","Southwest","West"]},{"name":"Canada","states":["Alberta","British Columbia","Manitoba","New Brunswick","Newfoundland and Labrador","Northwest Territories","Nova Scotia","Nunavut","Ontario","Prince Edward Island","Quebec","Saskatchewan","Yukon"]},{"name":"Cape Verde","states":["Barlavento Islands","Boa Vista","Brava","Maio","Mosteiros","Paul","Porto Novo","Praia","Ribeira Brava","Ribeira Grande","Ribeira Grande de Santiago","Sal","Santa Catarina","Santa Catarina do Fogo","Santa Cruz","São Domingos","São Filipe","São Lourenço dos Órgãos","São Miguel","São Vicente","Sotavento Islands","Tarrafal","Tarrafal de São Nicolau"]},{"name":"Cayman Islands","states":["Cayman Brac","Grand Cayman","Little Cayman"]},{"name":"Central African Republic","states":["Bamingui-Bangoran","Bangui","Basse-Kotto","Haut-Mbomou","Haute-Kotto","Kémo","Lobaye","Mambéré-Kadéï","Mbomou","Nana-Grébizi","Nana-Mambéré","Ombella-M'Poko","Ouaka","Ouham","Ouham-Pendé","Sangha-Mbaéré","Vakaga"]},{"name":"Chad","states":["Bahr el Gazel","Batha","Borkou","Chari-Baguirmi","Ennedi-Est","Ennedi-Ouest","Guéra","Hadjer-Lamis","Kanem","Lac","Logone Occidental","Logone Oriental","Mandoul","Mayo-Kebbi Est","Mayo-Kebbi Ouest","Moyen-Chari","N'Djamena","Ouaddaï","Salamat","Sila","Tandjilé","Tibesti","Wadi Fira"]},{"name":"Chile","states":["Aisén del General Carlos Ibañez del Campo","Antofagasta","Arica y Parinacota","Atacama","Biobío","Coquimbo","La Araucanía","Libertador General Bernardo O'Higgins","Los Lagos","Los Ríos","Magallanes y de la Antártica Chilena","Maule","Ñuble","Región Metropolitana de Santiago","Tarapacá","Valparaíso"]},{"name":"China","states":["Anhui","Beijing","Chongqing","Fujian","Gansu","Guangdong","Guangxi Zhuang","Guizhou","Hainan","Hebei","Heilongjiang","Henan","Hong Kong SAR","Hubei","Hunan","Inner Mongolia","Jiangsu","Jiangxi","Jilin","Liaoning","Macau SAR","Ningxia Huizu","Qinghai","Shaanxi","Shandong","Shanghai","Shanxi","Sichuan","Taiwan","Tianjin","Xinjiang","Xizang","Yunnan","Zhejiang"]},{"name":"Christmas Island","states":["Christmas Island"]},{"name":"Cocos (Keeling) Islands","states":["Cocos (Keeling) Islands"]},{"name":"Colombia","states":["Amazonas","Antioquia","Arauca","Atlántico","Bogotá D.C.","Bolívar","Boyacá","Caldas","Caquetá","Casanare","Cauca","Cesar","Chocó","Córdoba","Cundinamarca","Guainía","Guaviare","Huila","La Guajira","Magdalena","Meta","Nariño","Norte de Santander","Putumayo","Quindío","Risaralda","San Andrés, Providencia y Santa Catalina","Santander","Sucre","Tolima","Valle del Cauca","Vaupés","Vichada"]},{"name":"Comoros","states":["Anjouan","Grande Comore","Mohéli"]},{"name":"Congo","states":["Bouenza","Brazzaville","Cuvette","Cuvette-Ouest","Kouilou","Lékoumou","Likouala","Niari","Plateaux","Pointe-Noire","Pool","Sangha"]},{"name":"Cook Islands","states":["Cook Islands"]},{"name":"Costa Rica","states":["Alajuela","Cartago","Guanacaste","Heredia","Limón","Puntarenas","San José"]},{"name":"Cote D'Ivoire (Ivory Coast)","states":["Abidjan","Agnéby","Bafing","Bas-Sassandra","Bas-Sassandra","Comoé","Denguélé","Denguélé","Dix-Huit Montagnes","Fromager","Gôh-Djiboua","Haut-Sassandra","Lacs","Lacs","Lagunes","Lagunes","Marahoué","Montagnes","Moyen-Cavally","Moyen-Comoé","N'zi-Comoé","Sassandra-Marahoué","Savanes","Sud-Bandama","Sud-Comoé","Vallée du Bandama","Vallée du Bandama","Woroba","Worodougou","Yamoussoukro","Zanzan"]},{"name":"Croatia","states":["Bjelovar-Bilogora","Brod-Posavina","Dubrovnik-Neretva","Istria","Karlovac","Koprivnica-Križevci","Krapina-Zagorje","Lika-Senj","Međimurje","Osijek-Baranja","Požega-Slavonia","Primorje-Gorski Kotar","Šibenik-Knin","Sisak-Moslavina","Split-Dalmatia","Varaždin","Virovitica-Podravina","Vukovar-Syrmia","Zadar","Zagreb","Zagreb"]},{"name":"Cuba","states":["Artemisa","Camagüey","Ciego de Ávila","Cienfuegos","Granma","Guantánamo","Havana","Holguín","Isla de la Juventud","Las Tunas","Matanzas","Mayabeque","Pinar del Río","Sancti Spíritus","Santiago de Cuba","Villa Clara"]},{"name":"Curaçao","states":["Curaçao"]},{"name":"Cyprus","states":["Famagusta (Mağusa)","Kyrenia (Keryneia)","Larnaca (Larnaka)","Limassol (Leymasun)","Nicosia (Lefkoşa)","Paphos (Pafos)"]},{"name":"Czech Republic","states":["Benešov","Beroun","Blansko","Břeclav","Brno-město","Brno-venkov","Bruntál","Česká Lípa","České Budějovice","Český Krumlov","Cheb","Chomutov","Chrudim","Děčín","Domažlice","Frýdek-Místek","Havlíčkův Brod","Hodonín","Hradec Králové","Jablonec nad Nisou","Jeseník","Jičín","Jihlava","Jihočeský kraj","Jihomoravský kraj","Jindřichův Hradec","Karlovarský kraj","Karlovy Vary","Karviná","Kladno","Klatovy","Kolín","Kraj Vysočina","Královéhradecký kraj","Kroměříž","Kutná Hora","Liberec","Liberecký kraj","Litoměřice","Louny","Mělník","Mladá Boleslav","Moravskoslezský kraj","Most","Náchod","Nový Jičín","Nymburk","Olomouc","Olomoucký kraj","Opava","Ostrava-město","Pardubice","Pardubický kraj","Pelhřimov","Písek","Plzeň-jih","Plzeň-město","Plzeň-sever","Plzeňský kraj","Prachatice","Praha-východ","Praha-západ","Praha, Hlavní město","Přerov","Příbram","Prostějov","Rakovník","Rokycany","Rychnov nad Kněžnou","Semily","Sokolov","Strakonice","Středočeský kraj","Šumperk","Svitavy","Tábor","Tachov","Teplice","Třebíč","Trutnov","Uherské Hradiště","Ústecký kraj","Ústí nad Labem","Ústí nad Orlicí","Vsetín","Vyškov","Žďár nad Sázavou","Zlín","Zlínský kraj","Znojmo"]},{"name":"Democratic Republic of the Congo","states":["Bas-Uélé","Équateur","Haut-Katanga","Haut-Lomami","Haut-Uélé","Ituri","Kasaï","Kasaï Central","Kasaï Oriental","Kinshasa","Kongo Central","Kwango","Kwilu","Lomami","Lualaba","Mai-Ndombe","Maniema","Mongala","Nord-Kivu","Nord-Ubangi","Sankuru","Sud-Kivu","Sud-Ubangi","Tanganyika","Tshopo","Tshuapa"]},{"name":"Denmark","states":["Central Denmark","Denmark","North Denmark","Southern Denmark","Zealand"]},{"name":"Djibouti","states":["Ali Sabieh","Arta","Dikhil","Djibouti","Obock","Tadjourah"]},{"name":"Dominica","states":["Saint Andrew","Saint David","Saint George","Saint John","Saint Joseph","Saint Luke","Saint Mark","Saint Patrick","Saint Paul","Saint Peter"]},{"name":"Dominican Republic","states":["Azua","Baoruco","Barahona","Dajabón","Distrito Nacional","Duarte","El Seibo","Espaillat","Hato Mayor","Hermanas Mirabal","Independencia","La Altagracia","La Romana","La Vega","María Trinidad Sánchez","Monseñor Nouel","Monte Cristi","Monte Plata","Pedernales","Peravia","Puerto Plata","Samaná","San Cristóbal","San José de Ocoa","San Juan","San Pedro de Macorís","Sánchez Ramírez","Santiago","Santiago Rodríguez","Santo Domingo","Valverde"]},{"name":"Ecuador","states":["Azuay","Bolívar","Cañar","Carchi","Chimborazo","Cotopaxi","El Oro","Esmeraldas","Galápagos","Guayas","Imbabura","Loja","Los Ríos","Manabí","Morona-Santiago","Napo","Orellana","Pastaza","Pichincha","Santa Elena","Santo Domingo de los Tsáchilas","Sucumbíos","Tungurahua","Zamora Chinchipe"]},{"name":"Egypt","states":["Alexandria","Aswan","Asyut","Beheira","Beni Suef","Cairo","Dakahlia","Damietta","Faiyum","Gharbia","Giza","Ismailia","Kafr El-Sheikh","Luxor","Matrouh","Minya","Monufia","New Valley","North Sinai","Port Said","Qalyubia","Qena","Red Sea","Sharqia","Sohag","South Sinai","Suez"]},{"name":"El Salvador","states":["Ahuachapán","Cabañas","Chalatenango","Cuscatlán","La Libertad","La Paz","La Unión ","Morazán","San Miguel","San Salvador","San Vicente","Santa Ana","Sonsonate","Usulután"]},{"name":"Equatorial Guinea","states":["Annobón","Bioko Norte","Bioko Sur","Centro Sur","Insular","Kié-Ntem","Litoral","Río Muni","Wele-Nzas"]},{"name":"Eritrea","states":["Anseba","Debub","Gash-Barka","Maekel","Northern Red Sea","Southern Red Sea"]},{"name":"Estonia","states":["Harju","Hiiu","Ida-Viru","Järva","Jõgeva","Lääne","Lääne-Viru","Pärnu","Põlva","Rapla","Saare","Tartu","Valga","Viljandi","Võru"]},{"name":"Eswatini","states":["Hhohho","Lubombo","Manzini","Shiselweni"]},{"name":"Ethiopia","states":["Addis Ababa","Afar","Amhara","Benishangul-Gumuz","Dire Dawa","Gambela","Harari","Oromia","Somali","Southern Nations, Nationalities, and Peoples'","Tigray"]},{"name":"Falkland Islands","states":["Falkland Islands"]},{"name":"Faroe Islands","states":["Eysturoy","Northern Isles","Sandoy","Streymoy","Suðuroy","Vágar"]},{"name":"Fiji Islands","states":["Ba","Bua","Cakaudrove","Central","Eastern","Kadavu","Lau","Lomaiviti","Macuata","Nadroga-Navosa","Naitasiri","Namosi","Northern","Ra","Rewa","Rotuma","Serua","Tailevu","Western"]},{"name":"Finland","states":["Åland Islands","Central Finland","Central Ostrobothnia","Finland Proper","Kainuu","Kymenlaakso","Lapland","North Karelia","Northern Ostrobothnia","Northern Savonia","Ostrobothnia","Päijänne Tavastia","Pirkanmaa","Satakunta","South Karelia","Southern Ostrobothnia","Southern Savonia","Tavastia Proper","Uusimaa"]},{"name":"France","states":["Ain","Aisne","Allier","Alpes-de-Haute-Provence","Alpes-Maritimes","Alsace","Ardèche","Ardennes","Ariège","Aube","Aude","Auvergne-Rhône-Alpes","Aveyron","Bas-Rhin","Bouches-du-Rhône","Bourgogne-Franche-Comté","Bretagne","Calvados","Cantal","Centre-Val de Loire","Charente","Charente-Maritime","Cher","Clipperton","Corrèze","Corse","Corse-du-Sud","Côte-d'Or","Côtes-d'Armor","Creuse","Deux-Sèvres","Dordogne","Doubs","Drôme","Essonne","Eure","Eure-et-Loir","Finistère","French Guiana","French Polynesia","French Southern and Antarctic Lands","Gard","Gers","Gironde","Grand-Est","Guadeloupe","Haut-Rhin","Haute-Corse","Haute-Garonne","Haute-Loire","Haute-Marne","Haute-Saône","Haute-Savoie","Haute-Vienne","Hautes-Alpes","Hautes-Pyrénées","Hauts-de-France","Hauts-de-Seine","Hérault","Île-de-France","Ille-et-Vilaine","Indre","Indre-et-Loire","Isère","Jura","La Réunion","Landes","Loir-et-Cher","Loire","Loire-Atlantique","Loiret","Lot","Lot-et-Garonne","Lozère","Maine-et-Loire","Manche","Marne","Martinique","Mayenne","Mayotte","Métropole de Lyon","Meurthe-et-Moselle","Meuse","Morbihan","Moselle","Nièvre","Nord","Normandie","Nouvelle-Aquitaine","Occitanie","Oise","Orne","Paris","Pas-de-Calais","Pays-de-la-Loire","Provence-Alpes-Côte-d’Azur","Puy-de-Dôme","Pyrénées-Atlantiques","Pyrénées-Orientales","Rhône","Saint Pierre and Miquelon","Saint-Barthélemy","Saint-Martin","Saône-et-Loire","Sarthe","Savoie","Seine-et-Marne","Seine-Maritime","Seine-Saint-Denis","Somme","Tarn","Tarn-et-Garonne","Territoire de Belfort","Val-d'Oise","Val-de-Marne","Var","Vaucluse","Vendée","Vienne","Vosges","Wallis and Futuna","Yonne","Yvelines"]},{"name":"French Guiana","states":["French Guiana"]},{"name":"French Polynesia","states":["Austral Islands","Leeward Islands","Marquesas Islands","Tuamotu-Gambier","Windward Islands"]},{"name":"French Southern Territories","states":["French Southern Territories"]},{"name":"Gabon","states":["Estuaire","Haut-Ogooué","Moyen-Ogooué","Ngounié","Nyanga","Ogooué-Ivindo","Ogooué-Lolo","Ogooué-Maritime","Woleu-Ntem"]},{"name":"Georgia","states":["Abkhazia","Adjara","Guria","Imereti","Kakheti","Kvemo Kartli","Mtskheta-Mtianeti","Racha-Lechkhumi and Kvemo Svaneti","Samegrelo-Zemo Svaneti","Samtskhe-Javakheti","Shida Kartli","Tbilisi"]},{"name":"Germany","states":["Baden-Württemberg","Bavaria","Berlin","Brandenburg","Bremen","Hamburg","Hessen","Lower Saxony","Mecklenburg-Vorpommern","North Rhine-Westphalia","Rhineland-Palatinate","Saarland","Saxony","Saxony-Anhalt","Schleswig-Holstein","Thuringia"]},{"name":"Ghana","states":["Ahafo","Ashanti","Bono","Bono East","Central","Eastern","Greater Accra","North East","Northern","Oti","Savannah","Upper East","Upper West","Volta","Western","Western North"]},{"name":"Gibraltar","states":["Gibraltar"]},{"name":"Greece","states":["Achaea","Aetolia-Acarnania","Arcadia","Argolis","Attica","Boeotia","Central Greece","Central Macedonia","Chania","Corfu","Corinthia","Crete","Drama","East Attica","East Macedonia and Thrace","Epirus","Euboea","Grevena","Imathia ","Ioannina","Ionian Islands","Karditsa","Kastoria","Kefalonia","Kilkis","Kozani","Laconia","Larissa","Lefkada","Pella","Peloponnese","Phthiotis","Preveza","Serres","South Aegean","Thessaloniki","West Greece","West Macedonia"]},{"name":"Greenland","states":["Avannaata","Kujalleq","Qeqertalik","Qeqqata","Sermersooq"]},{"name":"Grenada","states":["Carriacou","Saint Andrew","Saint David","Saint George","Saint John","Saint Mark","Saint Patrick"]},{"name":"Guadeloupe","states":["Basse-Terre","Pointe-à-Pitre"]},{"name":"Guam","states":["Agana Heights","Asan-Maina","Barrigada","Chalan Pago-Ordot","Dededo","Hågat","Hagåtña","Inarajan (Inalåhan)","Mangilao","Merizo (Malesso)","Mongmong-Toto-Maite","Piti","Santa Rita (Sånta Rita-Sumai)","Sinajana","Talofofo (Talo'fo'fo)","Tamuning","Umatac (Humåtak)","Yigo","Yona"]},{"name":"Guatemala","states":["Alta Verapaz ","Baja Verapaz ","Chimaltenango ","Chiquimula ","El Progreso ","Escuintla ","Guatemala ","Huehuetenango ","Izabal ","Jalapa ","Jutiapa ","Petén ","Quetzaltenango ","Quiché ","Retalhuleu ","Sacatepéquez ","San Marcos ","Santa Rosa ","Sololá ","Suchitepéquez ","Totonicapán ","Zacapa"]},{"name":"Guernsey","states":["Alderney","Castel","Forest","Sark","St Andrew","St Martin","St Peter Port","St Pierre du Bois","St Sampson","St Saviour","Torteval","Vale"]},{"name":"Guinea","states":["Beyla","Boffa","Boké","Boké","Conakry","Coyah","Dabola","Dalaba","Dinguiraye","Dubréka","Faranah","Faranah","Forécariah","Fria","Gaoual","Guéckédou","Kankan","Kankan","Kérouané","Kindia","Kindia","Kissidougou","Koubia","Koundara","Kouroussa","Labé","Labé","Lélouma","Lola","Macenta","Mali","Mamou","Mamou","Mandiana","Nzérékoré","Nzérékoré","Pita","Siguiri","Télimélé","Tougué","Yomou"]},{"name":"Guinea-Bissau","states":["Bafatá","Biombo","Bolama","Cacheu","Gabú","Leste","Norte","Oio","Quinara","Sul","Tombali"]},{"name":"Guyana","states":["Barima-Waini","Cuyuni-Mazaruni","Demerara-Mahaica","East Berbice-Corentyne","Essequibo Islands-West Demerara","Mahaica-Berbice","Pomeroon-Supenaam","Potaro-Siparuni","Upper Demerara-Berbice","Upper Takutu-Upper Essequibo"]},{"name":"Haiti","states":["Artibonite","Centre","Grand'Anse","Nippes","Nord","Nord-Est","Nord-Ouest","Ouest","Sud","Sud-Est"]},{"name":"Heard Island and McDonald Islands","states":["Heard Island and McDonald Islands"]},{"name":"Honduras","states":["Atlántida","Bay Islands","Choluteca","Colón","Comayagua","Copán","Cortés","El Paraíso","Francisco Morazán","Gracias a Dios","Intibucá","La Paz","Lempira","Ocotepeque","Olancho","Santa Bárbara","Valle","Yoro"]},{"name":"Hong Kong S.A.R.","states":["Central and Western","Eastern","Islands","Kowloon City","Kwai Tsing","Kwun Tong","North","Sai Kung","Sha Tin","Sham Shui Po","Southern","Tai Po","Tsuen Wan","Tuen Mun","Wan Chai","Wong Tai Sin","Yau Tsim Mong","Yuen Long"]},{"name":"Hungary","states":["Bács-Kiskun","Baranya","Békés","Békéscsaba","Borsod-Abaúj-Zemplén","Budapest","Csongrád County","Debrecen","Dunaújváros","Eger","Érd","Fejér County","Győr","Győr-Moson-Sopron County","Hajdú-Bihar County","Heves County","Hódmezővásárhely","Jász-Nagykun-Szolnok County","Kaposvár","Kecskemét","Komárom-Esztergom","Miskolc","Nagykanizsa","Nógrád County","Nyíregyháza","Pécs","Pest County","Salgótarján","Somogy County","Sopron","Szabolcs-Szatmár-Bereg County","Szeged","Székesfehérvár","Szekszárd","Szolnok","Szombathely","Tatabánya","Tolna County","Vas County","Veszprém","Veszprém County","Zala County","Zalaegerszeg"]},{"name":"Iceland","states":["Capital","Eastern","Northeastern","Northwestern","Southern","Southern Peninsula","Western","Westfjords"]},{"name":"India","states":["Andaman and Nicobar Islands","Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chandigarh","Chhattisgarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Goa","Gujarat","Haryana","Himachal Pradesh","Jammu and Kashmir","Jharkhand","Karnataka","Kerala","Ladakh","Lakshadweep","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Puducherry","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal"]},{"name":"Indonesia","states":["Aceh","Bali","Banten","Bengkulu","DI Yogyakarta","DKI Jakarta","Gorontalo","Jambi","Jawa Barat","Jawa Tengah","Jawa Timur","Kalimantan Barat","Kalimantan Selatan","Kalimantan Tengah","Kalimantan Timur","Kalimantan Utara","Kepulauan Bangka Belitung","Kepulauan Riau","Lampung","Maluku","Maluku Utara","Nusa Tenggara Barat","Nusa Tenggara Timur","Papua","Papua Barat","Papua Barat Daya","Papua Pegunungan","Papua Selatan","Papua Tengah","Riau","Sulawesi Barat","Sulawesi Selatan","Sulawesi Tengah","Sulawesi Tenggara","Sulawesi Utara","Sumatera Barat","Sumatera Selatan","Sumatera Utara"]},{"name":"Iran","states":["Alborz","Ardabil","Bushehr","Chaharmahal and Bakhtiari","East Azerbaijan","Fars","Gilan","Golestan","Hamadan","Hormozgan","Ilam","Isfahan","Kerman","Kermanshah","Khuzestan","Kohgiluyeh and Boyer-Ahmad","Kurdistan","Lorestan","Markazi","Mazandaran","North Khorasan","Qazvin","Qom","Razavi Khorasan","Semnan","Sistan and Baluchestan","South Khorasan","Tehran","West Azarbaijan","Yazd","Zanjan"]},{"name":"Iraq","states":["Al Anbar","Al Muthanna","Al-Qādisiyyah","Babylon","Baghdad","Basra","Dhi Qar","Diyala","Dohuk","Erbil","Karbala","Kirkuk","Maysan","Najaf","Nineveh","Saladin","Sulaymaniyah","Wasit"]},{"name":"Ireland","states":["Carlow","Cavan","Clare","Connacht","Cork","Donegal","Dublin","Galway","Kerry","Kildare","Kilkenny","Laois","Leinster","Leitrim","Limerick","Longford","Louth","Mayo","Meath","Monaghan","Munster","Offaly","Roscommon","Sligo","Tipperary","Ulster","Waterford","Westmeath","Wexford","Wicklow"]},{"name":"Israel","states":["Central","Haifa","Jerusalem","Northern","Southern","Tel Aviv"]},{"name":"Italy","states":["Abruzzo","Agrigento","Alessandria","Ancona","Aosta Valley","Apulia","Arezzo","Ascoli Piceno","Asti","Avellino","Barletta-Andria-Trani","Basilicata","Belluno","Benevento","Bergamo","Biella","Brescia","Brindisi","Calabria","Caltanissetta","Campania","Campobasso","Caserta","Catanzaro","Chieti","Como","Cosenza","Cremona","Crotone","Cuneo","Emilia-Romagna","Enna","Fermo","Ferrara","Foggia","Forlì-Cesena","Friuli–Venezia Giulia","Frosinone","Gorizia","Grosseto","Imperia","Isernia","L'Aquila","La Spezia","Latina","Lazio","Lecce","Lecco","Liguria","Livorno","Lodi","Lombardy","Lucca","Macerata","Mantua","Marche","Massa and Carrara","Matera","Modena","Molise","Monza and Brianza","Novara","Nuoro","Oristano","Padua","Palermo","Parma","Pavia","Perugia","Pesaro and Urbino","Pescara","Piacenza","Piedmont","Pisa","Pistoia","Pordenone","Potenza","Prato","Ragusa","Ravenna","Reggio Emilia","Rieti","Rimini","Rovigo","Salerno","Sardinia","Sassari","Savona","Sicily","Siena","Siracusa","Sondrio","South Sardinia","Taranto","Teramo","Terni","Trapani","Trentino-South Tyrol","Treviso","Trieste","Tuscany","Udine","Umbria","Varese","Veneto","Verbano-Cusio-Ossola","Vercelli","Verona","Vibo Valentia","Vicenza","Viterbo"]},{"name":"Jamaica","states":["Clarendon","Hanover","Kingston","Manchester","Portland","Saint Andrew","Saint Ann","Saint Catherine","Saint Elizabeth","Saint James","Saint Mary","Saint Thomas","Trelawny","Westmoreland"]},{"name":"Japan","states":["Aichi","Akita","Aomori","Chiba","Ehime","Fukui","Fukuoka","Fukushima","Gifu","Gunma","Hiroshima","Hokkaidō","Hyōgo","Ibaraki","Ishikawa","Iwate","Kagawa","Kagoshima","Kanagawa","Kōchi","Kumamoto","Kyōto","Mie","Miyagi","Miyazaki","Nagano","Nagasaki","Nara","Niigata","Ōita","Okayama","Okinawa","Ōsaka","Saga","Saitama","Shiga","Shimane","Shizuoka","Tochigi","Tokushima","Tokyo","Tottori","Toyama","Wakayama","Yamagata","Yamaguchi","Yamanashi"]},{"name":"Jersey","states":["Grouville","St Brelade","St Clement","St Helier","St John","St Lawrence","St Martin","St Mary","St Ouen","St Peter","St Saviour","Trinity"]},{"name":"Jordan","states":["Ajloun","Amman","Aqaba","Balqa","Irbid","Jerash","Karak","Ma'an","Madaba","Mafraq","Tafilah","Zarqa"]},{"name":"Kazakhstan","states":["Akmola","Aktobe","Almaty","Almaty","Astana","Atyrau","Baikonur","East Kazakhstan","Jambyl","Karaganda","Kostanay","Kyzylorda","Mangystau","North Kazakhstan","Pavlodar","Turkestan","West Kazakhstan"]},{"name":"Kenya","states":["Baringo","Bomet","Bungoma","Busia","Elgeyo-Marakwet","Embu","Garissa","Homa Bay","Isiolo","Kajiado","Kakamega","Kericho","Kiambu","Kilifi","Kirinyaga","Kisii","Kisumu","Kitui","Kwale","Laikipia","Lamu","Machakos","Makueni","Mandera","Marsabit","Meru","Migori","Mombasa","Murang'a","Nairobi City","Nakuru","Nandi","Narok","Nyamira","Nyandarua","Nyeri","Samburu","Siaya","Taita–Taveta","Tana River","Tharaka-Nithi","Trans Nzoia","Turkana","Uasin Gishu","Vihiga","Wajir","West Pokot"]},{"name":"Kiribati","states":["Gilbert","Line","Phoenix"]},{"name":"Kosovo","states":["Ferizaj","Gjakove","Gjilan","Mitrovica","Peja","Pristina","Prizren"]},{"name":"Kuwait","states":["Al Ahmadi","Al Asimah","Al Farwaniyah","Al Jahra","Hawalli","Mubarak Al-Kabeer"]},{"name":"Kyrgyzstan","states":["Batken","Bishkek","Chuy","Issyk-Kul","Jalal-Abad","Naryn","Osh","Osh","Talas"]},{"name":"Laos","states":["Attapeu","Bokeo","Bolikhamsai","Champasak","Houaphanh","Khammouane","Luang Namtha","Luang Prabang","Oudomxay","Phongsaly","Sainyabuli","Salavan","Savannakhet","Sekong","Vientiane","Vientiane","Xaisomboun","Xiangkhouang"]},{"name":"Latvia","states":["Ādaži","Aizkraukle","Alūksne","Augšdaugava","Balvi","Bauska","Cēsis","Daugavpils","Dienvidkurzemes","Dobele","Gulbene","Jēkabpils","Jelgava","Jelgava","Jūrmala","Ķekava","Krāslava","Kuldīga","Liepāja","Limbaži","Līvāni","Ludza","Madona","Mārupe","Ogre","Olaine","Preiļi","Rēzekne","Rēzekne","Riga","Ropaži","Salaspils","Saldus","Saulkrasti","Sigulda","Smiltene","Talsi","Tukums","Valka","Valmiera","Varakļāni","Ventspils","Ventspils"]},{"name":"Lebanon","states":["Akkar","Baalbek-Hermel","Beirut","Beqaa","Mount Lebanon","Nabatieh","North","South"]},{"name":"Lesotho","states":["Berea","Butha-Buthe","Leribe","Mafeteng","Maseru","Mohale's Hoek","Mokhotlong","Qacha's Nek","Quthing","Thaba-Tseka"]},{"name":"Liberia","states":["Bomi","Bong","Gbarpolu","Grand Bassa","Grand Cape Mount","Grand Gedeh","Grand Kru","Lofa","Margibi","Maryland","Montserrado","Nimba","River Cess","River Gee","Sinoe"]},{"name":"Libya","states":["Al Wahat","Benghazi","Derna","Ghat","Jabal al Akhdar","Jabal al Gharbi","Jafara","Jufra","Kufra","Marj","Misrata","Murqub","Murzuq","Nalut","Nuqat al Khams","Sabha","Sirte","Tripoli","Wadi al Hayaa","Wadi al Shatii","Zawiya"]},{"name":"Liechtenstein","states":["Balzers","Eschen","Gamprin","Mauren","Planken","Ruggell","Schaan","Schellenberg","Triesen","Triesenberg","Vaduz"]},{"name":"Lithuania","states":["Akmenė","Alytus","Alytus","Alytus","Anykščiai","Birštonas","Biržai","Druskininkai","Elektrėnai","Ignalina","Jonava","Joniškis","Jurbarkas","Kaišiadorys","Kalvarija","Kaunas","Kaunas","Kaunas","Kazlų Rūda","Kėdainiai","Kelmė","Klaipeda","Klaipėda","Klaipėda","Kretinga","Kupiškis","Lazdijai","Marijampolė","Marijampolė","Mažeikiai","Molėtai","Neringa","Pagėgiai","Pakruojis","Palanga","Panevėžys","Panevėžys","Panevėžys","Pasvalys","Plungė","Prienai","Radviliškis","Raseiniai","Rietavas","Rokiškis","Šakiai","Šalčininkai","Šiauliai","Šiauliai","Šiauliai","Šilalė ","Šilutė","Širvintos","Skuodas","Švenčionys","Tauragė","Tauragė","Telšiai","Telšiai","Trakai","Ukmergė","Utena","Utena","Varėna","Vilkaviškis","Vilnius","Vilnius","Vilnius","Visaginas","Zarasai"]},{"name":"Luxembourg","states":["Capellen","Clervaux","Diekirch","Echternach","Esch-sur-Alzette","Grevenmacher","Luxembourg ","Mersch","Redange","Remich","Vianden","Wiltz"]},{"name":"Macau S.A.R.","states":["Macau S.A.R."]},{"name":"Madagascar","states":["Antananarivo","Antsiranana","Fianarantsoa","Mahajanga","Toamasina","Toliara"]},{"name":"Malawi","states":["Balaka","Blantyre","Central","Chikwawa","Chiradzulu","Chitipa","Dedza","Dowa","Karonga","Kasungu","Likoma","Lilongwe","Machinga","Mangochi","Mchinji","Mulanje","Mwanza","Mzimba","Neno","Nkhata Bay","Nkhotakota","Northern","Nsanje","Ntcheu","Ntchisi","Phalombe","Rumphi","Salima","Southern","Thyolo","Zomba"]},{"name":"Malaysia","states":["Johor","Kedah","Kelantan","Kuala Lumpur","Labuan","Malacca","Negeri Sembilan","Pahang","Penang","Perak","Perlis","Putrajaya","Sabah","Sarawak","Selangor","Terengganu"]},{"name":"Maldives","states":["Addu","Alif Alif","Alif Dhaal","Central","Dhaalu","Faafu","Gaafu Alif","Gaafu Dhaalu","Gnaviyani","Haa Alif","Haa Dhaalu","Kaafu","Laamu","Lhaviyani","Malé","Meemu","Noonu","North Central","Raa","Shaviyani","South","South Central","Thaa","Upper South","Vaavu"]},{"name":"Mali","states":["Bamako","Gao","Kayes","Kidal","Koulikoro","Ménaka","Mopti","Ségou","Sikasso","Taoudénit","Tombouctou"]},{"name":"Malta","states":["Attard","Balzan","Birgu","Birkirkara","Birżebbuġa","Cospicua","Dingli","Fgura","Floriana","Fontana","Għajnsielem","Għarb","Għargħur","Għasri","Għaxaq","Gudja","Gżira","Ħamrun","Iklin","Kalkara","Kerċem","Kirkop","Lija","Luqa","Marsa","Marsaskala","Marsaxlokk","Mdina","Mellieħa","Mġarr","Mosta","Mqabba","Msida","Mtarfa","Munxar","Nadur","Naxxar","Paola","Pembroke","Pietà","Qala","Qormi","Qrendi","Rabat","San Ġwann","San Lawrenz","Sannat","Santa Luċija","Santa Venera","Senglea","Siġġiewi","Sliema","St. Julian's","St. Paul's Bay","Swieqi","Ta' Xbiex","Tarxien","Valletta","Victoria","Xagħra","Xewkija","Xgħajra","Żabbar","Żebbuġ Gozo","Żebbuġ Malta","Żejtun","Żurrieq"]},{"name":"Man (Isle of)","states":["Ayre","Garff","Glenfaba","Michael","Middle","Rushen"]},{"name":"Marshall Islands","states":["Ralik","Ratak"]},{"name":"Martinique","states":["Fort-de-France","La Trinité","Le Marin","Saint-Pierre"]},{"name":"Mauritania","states":["Adrar","Assaba","Brakna","Dakhlet Nouadhibou","Gorgol","Guidimaka","Hodh Ech Chargui","Hodh El Gharbi","Inchiri","Nouakchott-Nord","Nouakchott-Ouest","Nouakchott-Sud","Tagant","Tiris Zemmour","Trarza"]},{"name":"Mauritius","states":["Agalega Islands","Black River","Flacq","Grand Port","Moka","Pamplemousses","Plaines Wilhems","Port Louis","Rivière du Rempart","Rodrigues Island","Saint Brandon Islands","Savanne"]},{"name":"Mayotte","states":["Acoua","Bandraboua","Bandrélé","Boueni","Chiconi","Chirongui","Dembeni","Dzaoudzi","Kani Keli","Koungou","M'Tsangamouji","Mamoudzou","Mtsamboro","Ouangani","Pamandzi","Sada","Tsingoni"]},{"name":"Mexico","states":["Aguascalientes","Baja California","Baja California Sur","Campeche","Chiapas","Chihuahua","Ciudad de México","Coahuila de Zaragoza","Colima","Durango","Estado de México","Guanajuato","Guerrero","Hidalgo","Jalisco","Michoacán de Ocampo","Morelos","Nayarit","Nuevo León","Oaxaca","Puebla","Querétaro","Quintana Roo","San Luis Potosí","Sinaloa","Sonora","Tabasco","Tamaulipas","Tlaxcala","Veracruz de Ignacio de la Llave","Yucatán","Zacatecas"]},{"name":"Micronesia","states":["Chuuk","Kosrae","Pohnpei","Yap"]},{"name":"Moldova","states":["Anenii Noi","Bălți","Basarabeasca","Bender","Briceni","Cahul","Călărași","Cantemir","Căușeni","Chișinău","Cimișlia","Criuleni","Dondușeni","Drochia","Dubăsari","Edineț","Fălești","Florești","Gagauzia","Glodeni","Hîncești","Ialoveni","Nisporeni","Ocnița","Orhei","Rezina","Rîșcani","Sîngerei","Șoldănești","Soroca","Ștefan Vodă","Strășeni","Taraclia","Telenești","Transnistria","Ungheni"]},{"name":"Monaco","states":["La Colle","La Condamine","Moneghetti"]},{"name":"Mongolia","states":["Arkhangai","Bayan-Ölgii","Bayankhongor","Bulgan","Darkhan-Uul","Dornod","Dornogovi","Dundgovi","Govi-Altai","Govisümber","Khentii","Khovd","Khövsgöl","Ömnögovi","Orkhon","Övörkhangai","Selenge","Sükhbaatar","Töv","Uvs","Zavkhan"]},{"name":"Montenegro","states":["Andrijevica","Bar","Berane","Bijelo Polje","Budva","Danilovgrad","Gusinje","Kolašin","Kotor","Mojkovac","Nikšić","Old Royal Capital Cetinje","Petnjica","Plav","Pljevlja","Plužine","Podgorica","Rožaje","Šavnik","Tivat","Ulcinj","Žabljak"]},{"name":"Montserrat","states":["Saint Anthony","Saint Georges","Saint Peter"]},{"name":"Morocco","states":["Agadir-Ida-Ou-Tanane","Al Haouz","Al Hoceïma","Aousserd (EH)","Assa-Zag (EH-partial)","Azilal","Béni Mellal","Béni Mellal-Khénifra","Benslimane","Berkane","Berrechid","Boujdour (EH)","Boulemane","Casablanca","Casablanca-Settat","Chefchaouen","Chichaoua","Chtouka-Ait Baha","Dakhla-Oued Ed-Dahab (EH)","Drâa-Tafilalet","Driouch","El Hajeb","El Jadida","El Kelâa des Sraghna","Errachidia","Es-Semara (EH-partial)","Essaouira","Fahs-Anjra","Fès","Fès-Meknès","Figuig","Fquih Ben Salah","Guelmim","Guelmim-Oued Noun (EH-partial)","Guercif","Ifrane","Inezgane-Ait Melloul","Jerada","Kénitra","Khémisset","Khénifra","Khouribga","L'Oriental","Laâyoune (EH)","Laâyoune-Sakia El Hamra (EH-partial)","Larache","M’diq-Fnideq","Marrakech","Marrakesh-Safi","Médiouna","Meknès","Midelt","Mohammadia","Moulay Yacoub","Nador","Nouaceur","Ouarzazate","Oued Ed-Dahab (EH)","Ouezzane","Oujda-Angad","Rabat","Rabat-Salé-Kénitra","Rehamna","Safi","Salé","Sefrou","Settat","Sidi Bennour","Sidi Ifni","Sidi Kacem","Sidi Slimane","Skhirate-Témara","Souss-Massa","Tan-Tan (EH-partial)","Tanger-Assilah","Tanger-Tétouan-Al Hoceïma","Taounate","Taourirt","Tarfaya (EH-partial)","Taroudannt","Tata","Taza","Tétouan","Tinghir","Tiznit","Youssoufia","Zagora"]},{"name":"Mozambique","states":["Cabo Delgado","Gaza","Inhambane","Manica","Maputo","Maputo","Nampula","Niassa","Sofala","Tete","Zambezia"]},{"name":"Myanmar","states":["Ayeyarwady","Bago","Chin","Kachin","Kayah","Kayin","Magway","Mandalay","Mon State","Naypyidaw","Rakhine","Sagaing","Shan","Tanintharyi","Yangon"]},{"name":"Namibia","states":["Erongo","Hardap","Karas","Kavango East","Kavango West","Khomas","Kunene","Ohangwena","Omaheke","Omusati","Oshana","Oshikoto","Otjozondjupa","Zambezi"]},{"name":"Nauru","states":["Aiwo","Anabar","Anetan","Anibare","Baiti","Boe","Buada","Denigomodu","Ewa","Ijuw","Meneng","Nibok","Uaboe","Yaren"]},{"name":"Nepal","states":["Bagmati","Gandaki","Karnali","Koshi","Lumbini","Madhesh","Sudurpashchim"]},{"name":"Netherlands","states":["Drenthe","Flevoland","Friesland","Gelderland","Groningen","Limburg","North Brabant","North Holland","Overijssel","South Holland","Utrecht","Zeeland"]},{"name":"New Caledonia","states":["Loyalty Islands Province","North Province","South Province"]},{"name":"New Zealand","states":["Auckland","Bay of Plenty","Canterbury","Chatham Islands","Gisborne","Hawke's Bay","Manawatu-Wanganui","Marlborough","Nelson","Northland","Otago","Southland","Taranaki","Tasman","Waikato","Wellington","West Coast"]},{"name":"Nicaragua","states":["Boaco","Carazo","Chinandega","Chontales","Estelí","Granada","Jinotega","León","Madriz","Managua","Masaya","Matagalpa","North Caribbean Coast","Nueva Segovia","Río San Juan","Rivas","South Caribbean Coast"]},{"name":"Niger","states":["Agadez","Diffa","Dosso","Maradi","Tahoua","Tillabéri","Zinder"]},{"name":"Nigeria","states":["Abia","Abuja Federal Capital Territory","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara"]},{"name":"Niue","states":["Alofi North","Alofi South","Avatele","Hakupu","Hikutavake","Lakepa","Liku","Makefu","Mutalau","Namukulu","Tamakautoga","Toi","Tuapa","Vaiea"]},{"name":"Norfolk Island","states":["Norfolk Island"]},{"name":"North Korea","states":["Chagang","Kangwon","North Hamgyong","North Hwanghae","North Pyongan","Pyongyang","Rason","Ryanggang","South Hamgyong","South Hwanghae","South Pyongan"]},{"name":"North Macedonia","states":["Aerodrom","Aračinovo","Berovo","Bitola","Bogdanci","Bogovinje","Bosilovo","Brvenica","Butel","Čair","Čaška","Centar","Centar Župa","Češinovo-Obleševo","Čučer-Sandevo","Debarca","Delčevo","Demir Hisar","Demir Kapija","Dojran","Dolneni","Drugovo","Gazi Baba","Gevgelija","Gjorče Petrov","Gostivar","Gradsko","Greater Skopje","Ilinden","Jegunovce","Karbinci","Karpoš","Kavadarci","Kičevo","Kisela Voda","Kočani","Konče","Kratovo","Kriva Palanka","Krivogaštani","Kruševo","Kumanovo","Lipkovo","Lozovo","Makedonska Kamenica","Makedonski Brod","Mavrovo and Rostuša","Mogila","Negotino","Novaci","Novo Selo","Ohrid","Oslomej ","Pehčevo","Petrovec","Plasnica","Prilep","Probištip","Radoviš","Rankovce","Resen","Rosoman","Saraj","Sopište","Staro Nagoričane","Štip","Struga","Strumica","Studeničani","Šuto Orizari","Sveti Nikole","Tearce","Tetovo","Valandovo","Vasilevo","Veles","Vevčani","Vinica","Vraneštica","Vrapčište","Zajas","Zelenikovo","Želino","Zrnovci"]},{"name":"Northern Mariana Islands","states":["Northern Mariana Islands"]},{"name":"Norway","states":["Agder","Innlandet","Jan Mayen","Møre og Romsdal","Nordland","Oslo","Rogaland","Svalbard","Troms og Finnmark","Trøndelag","Vestfold og Telemark","Vestland","Viken"]},{"name":"Oman","states":["Ad Dakhiliyah","Ad Dhahirah","Al Batinah North","Al Batinah Region","Al Batinah South","Al Buraimi","Al Wusta","Ash Sharqiyah North","Ash Sharqiyah Region","Ash Sharqiyah South","Dhofar","Musandam","Muscat"]},{"name":"Pakistan","states":["Azad Kashmir","Balochistan","Federally Administered Tribal Areas","Gilgit-Baltistan","Islamabad","Khyber Pakhtunkhwa","Punjab","Sindh"]},{"name":"Palau","states":["Aimeliik","Airai","Angaur","Hatohobei","Kayangel","Koror","Melekeok","Ngaraard","Ngarchelong","Ngardmau","Ngatpang","Ngchesar","Ngeremlengui","Ngiwal","Peleliu","Sonsorol"]},{"name":"Palestinian Territory Occupied","states":["Bethlehem","Deir El Balah","Gaza","Hebron","Jenin","Jericho ","Jerusalem (Quds)","Khan Yunis","Nablus","North Gaza","Qalqilya","Rafah","Ramallah","Salfit","Tubas","Tulkarm"]},{"name":"Panama","states":["Bocas del Toro","Chiriquí Province","Coclé","Colón","Darién","Emberá-Wounaan Comarca","Guna","Herrera","Los Santos","Ngöbe-Buglé Comarca","Panamá","Panamá Oeste","Veraguas"]},{"name":"Papua New Guinea","states":["Bougainville","Central","Chimbu","East New Britain","East Sepik","Eastern Highlands","Enga","Gulf","Hela","Jiwaka","Madang","Manus","Milne Bay","Morobe","New Ireland","Oro","Port Moresby","Sandaun","Southern Highlands","West New Britain","Western","Western Highlands"]},{"name":"Paraguay","states":["Alto Paraguay","Alto Paraná","Amambay","Asuncion","Boquerón","Caaguazú","Caazapá","Canindeyú","Central","Concepción","Cordillera","Guairá","Itapúa","Misiones","Ñeembucú","Paraguarí","Presidente Hayes","San Pedro"]},{"name":"Peru","states":["Amazonas","Áncash","Apurímac","Arequipa","Ayacucho","Cajamarca","Callao","Cusco","Huancavelica","Huanuco","Ica","Junín","La Libertad","Lambayeque","Lima","Loreto","Madre de Dios","Moquegua","Pasco","Piura","Puno","San Martín","Tacna","Tumbes","Ucayali"]},{"name":"Philippines","states":["Abra","Agusan del Norte","Agusan del Sur","Aklan","Albay","Antique","Apayao","Aurora","Autonomous Region in Muslim Mindanao","Basilan","Bataan","Batanes","Batangas","Benguet","Bicol","Biliran","Bohol","Bukidnon","Bulacan","Cagayan","Cagayan Valley","Calabarzon","Camarines Norte","Camarines Sur","Camiguin","Capiz","Caraga","Catanduanes","Cavite","Cebu","Central Luzon","Central Visayas","Cordillera Administrative","Cotabato","Davao","Davao de Oro","Davao del Norte","Davao del Sur","Davao Occidental","Davao Oriental","Dinagat Islands","Eastern Samar","Eastern Visayas","Guimaras","Ifugao","Ilocos","Ilocos Norte","Ilocos Sur","Iloilo","Isabela","Kalinga","La Union","Laguna","Lanao del Norte","Lanao del Sur","Leyte","Maguindanao del Norte","Maguindanao del Sur","Marinduque","Masbate","Mimaropa","Misamis Occidental","Misamis Oriental","Mountain Province","National Capital Region (Metro Manila)","Negros Occidental","Negros Oriental","Northern Mindanao","Northern Samar","Nueva Ecija","Nueva Vizcaya","Occidental Mindoro","Oriental Mindoro","Palawan","Pampanga","Pangasinan","Quezon","Quirino","Rizal","Romblon","Sarangani","Siquijor","Soccsksargen","Sorsogon","South Cotabato","Southern Leyte","Sultan Kudarat","Sulu","Surigao del Norte","Surigao del Sur","Tarlac","Tawi-Tawi","Western Samar","Western Visayas","Zambales","Zamboanga del Norte","Zamboanga del Sur","Zamboanga Peninsula","Zamboanga Sibugay"]},{"name":"Pitcairn Island","states":["Pitcairn Island"]},{"name":"Poland","states":["Greater Poland","Holy Cross","Kuyavia-Pomerania","Lesser Poland","Lower Silesia","Lublin","Lubusz","Łódź","Mazovia","Podlaskie","Pomerania","Silesia","Subcarpathia","Upper Silesia","Warmia-Masuria","West Pomerania"]},{"name":"Portugal","states":["Açores","Aveiro","Beja","Braga","Bragança","Castelo Branco","Coimbra","Évora","Faro","Guarda","Leiria","Lisbon","Madeira","Portalegre","Porto","Santarém","Setúbal","Viana do Castelo","Vila Real","Viseu"]},{"name":"Puerto Rico","states":["Adjuntas","Aguada","Aguadilla","Aguas Buenas","Aibonito","Añasco","Arecibo","Arecibo","Arroyo","Barceloneta","Barranquitas","Bayamon","Bayamón","Cabo Rojo","Caguas","Caguas","Camuy","Canóvanas","Carolina","Carolina","Cataño","Cayey","Ceiba","Ciales","Cidra","Coamo","Comerío","Corozal","Culebra","Dorado","Fajardo","Florida","Guánica","Guayama","Guayanilla","Guaynabo","Guaynabo","Gurabo","Hatillo","Hormigueros","Humacao","Isabela","Jayuya","Juana Díaz","Juncos","Lajas","Lares","Las Marías","Las Piedras","Loíza","Luquillo","Manatí","Maricao","Maunabo","Mayagüez","Mayagüez","Moca","Morovis","Naguabo","Naranjito","Orocovis","Patillas","Peñuelas","Ponce","Ponce","Quebradillas","Rincón","Río Grande","Sabana Grande","Salinas","San Germán","San Juan","San Juan","San Lorenzo","San Sebastián","Santa Isabel","Toa Alta","Toa Baja","Toa Baja","Trujillo Alto","Trujillo Alto","Utuado","Vega Alta","Vega Baja","Vieques","Villalba","Yabucoa","Yauco"]},{"name":"Qatar","states":["Al Daayen","Al Khor","Al Rayyan","Al Wakrah","Al-Shahaniya","Doha","Madinat ash Shamal","Umm Salal"]},{"name":"Reunion","states":["Saint-Benoît","Saint-Denis","Saint-Paul","Saint-Pierre"]},{"name":"Romania","states":["Alba","Arad","Arges","Bacău","Bihor","Bistrița-Năsăud","Botoșani","Braila","Brașov","Bucharest","Buzău","Călărași","Caraș-Severin","Cluj","Constanța","Covasna","Dâmbovița","Dolj","Galați","Giurgiu","Gorj","Harghita","Hunedoara","Ialomița","Iași","Ilfov","Maramureș","Mehedinți","Mureș","Neamț","Olt","Prahova","Sălaj","Satu Mare","Sibiu","Suceava","Teleorman","Timiș","Tulcea","Vâlcea","Vaslui","Vrancea"]},{"name":"Russia","states":["Adygea","Altai","Altai","Amur","Arkhangelsk","Astrakhan","Bashkortostan","Belgorod","Bryansk","Buryatia","Chechen","Chelyabinsk","Chukotka","Chuvash","Dagestan","Ingushetia","Irkutsk","Ivanovo","Jewish","Kabardino-Balkar","Kaliningrad","Kalmykia","Kaluga","Kamchatka","Karachay-Cherkess","Karelia","Kemerovo","Khabarovsk","Khakassia","Khanty-Mansi","Kirov","Komi","Kostroma","Krasnodar","Krasnoyarsk","Kurgan","Kursk","Leningrad","Lipetsk","Magadan","Mari El","Mordovia","Moscow","Moscow","Murmansk","Nenets","Nizhny Novgorod","North Ossetia-Alania","Novgorod","Novosibirsk","Omsk","Orenburg","Oryol","Penza","Perm","Primorsky","Pskov","Rostov","Ryazan","Saint Petersburg","Sakha","Sakhalin","Samara","Saratov","Smolensk","Stavropol","Sverdlovsk","Tambov","Tatarstan","Tomsk","Tula","Tuva","Tver","Tyumen","Udmurt","Ulyanovsk","Vladimir","Volgograd Oblast","Vologda","Voronezh","Yamalo-Nenets","Yaroslavl","Zabaykalsky"]},{"name":"Rwanda","states":["Eastern","Kigali","Northern","Southern","Western"]},{"name":"Saint Helena","states":["Alarm Forest","Blue Hill","Half Tree Hollow","Jamestown","Levelwood","Longwood","Saint Paul's","Sandy Bay"]},{"name":"Saint Kitts and Nevis","states":["Christ Church Nichola Town","Nevis","Saint Anne Sandy Point","Saint George Basseterre","Saint George Gingerland","Saint James Windward","Saint John Capisterre","Saint John Figtree","Saint Kitts","Saint Mary Cayon","Saint Paul Capisterre","Saint Paul Charlestown","Saint Peter Basseterre","Saint Thomas Lowland","Saint Thomas Middle Island","Trinity Palmetto Point"]},{"name":"Saint Lucia","states":["Anse la Raye","Canaries","Castries","Choiseul","Dauphin","Dennery","Gros Islet","Laborie","Micoud","Praslin","Soufrière","Vieux Fort"]},{"name":"Saint Pierre and Miquelon","states":["Saint Pierre and Miquelon"]},{"name":"Saint Vincent and the Grenadines","states":["Charlotte","Grenadines","Saint Andrew","Saint David","Saint George","Saint Patrick"]},{"name":"Saint-Barthelemy","states":["Saint-Barthelemy"]},{"name":"Saint-Martin (French part)","states":["Saint-Martin (French part)"]},{"name":"Samoa","states":["A'ana","Aiga-i-le-Tai","Atua","Fa'asaleleaga","Gaga'emauga","Gaga'ifomauga","Palauli","Satupa'itea","Tuamasaga","Va'a-o-Fonoti","Vaisigano"]},{"name":"San Marino","states":["Acquaviva","Borgo Maggiore","Chiesanuova","Domagnano","Faetano","Fiorentino","Montegiardino","San Marino","Serravalle"]},{"name":"Sao Tome and Principe","states":["Príncipe","São Tomé"]},{"name":"Saudi Arabia","states":["'Asir","Al Bahah","Al Jawf","Al Madinah","Al-Qassim","Eastern Province","Ha'il","Jizan","Makkah","Najran","Northern Borders","Riyadh","Tabuk"]},{"name":"Senegal","states":["Dakar","Diourbel Region","Fatick","Kaffrine","Kaolack","Kédougou","Kolda","Louga","Matam","Saint-Louis","Sédhiou","Tambacounda Region","Thiès Region","Ziguinchor"]},{"name":"Serbia","states":["Belgrade","Bor","Braničevo","Central Banat","Jablanica","Kolubara","Mačva","Moravica","Nišava","North Bačka","North Banat","Pčinja","Pirot","Podunavlje","Pomoravlje","Rasina","Raška","South Bačka","South Banat","Srem","Šumadija","Toplica","Vojvodina","West Bačka","Zaječar","Zlatibor"]},{"name":"Seychelles","states":["Anse Boileau","Anse Royale","Anse-aux-Pins","Au Cap","Baie Lazare","Baie Sainte Anne","Beau Vallon","Bel Air","Bel Ombre","Cascade","Glacis","Grand'Anse Mahé","Grand'Anse Praslin","La Digue","La Rivière Anglaise","Les Mamelles","Mont Buxton","Mont Fleuri","Plaisance","Pointe La Rue","Port Glaud","Roche Caiman","Saint Louis","Takamaka"]},{"name":"Sierra Leone","states":["Eastern","Northern","Southern","Western"]},{"name":"Singapore","states":["Central Singapore","North East","North West","South East","South West"]},{"name":"Sint Maarten (Dutch part)","states":["Sint Maarten (Dutch part)"]},{"name":"Slovakia","states":["Banská Bystrica","Bratislava","Košice","Nitra","Prešov","Trenčín","Trnava","Žilina"]},{"name":"Slovenia","states":["Ajdovščina","Ankaran","Apače","Beltinci","Benedikt","Bistrica ob Sotli","Bled","Bloke","Bohinj","Borovnica","Bovec","Braslovče","Brda","Brežice","Brezovica","Cankova","Celje","Cerklje na Gorenjskem","Cerknica","Cerkno","Cerkvenjak","Cirkulane","Črenšovci","Črna na Koroškem","Črnomelj","Destrnik","Divača","Dobje","Dobrepolje","Dobrna","Dobrova–Polhov Gradec","Dobrovnik","Dol pri Ljubljani","Dolenjske Toplice","Domžale","Dornava","Dravograd","Duplek","Gorenja Vas–Poljane","Gorišnica","Gorje","Gornja Radgona","Gornji Grad","Gornji Petrovci","Grad","Grosuplje","Hajdina","Hoče–Slivnica","Hodoš","Horjul","Hrastnik","Hrpelje–Kozina","Idrija","Ig","Ilirska Bistrica","Ivančna Gorica","Izola","Jesenice","Jezersko","Juršinci","Kamnik","Kanal ob Soči","Kidričevo","Kobarid","Kobilje","Kočevje","Komen","Komenda","Koper","Kostanjevica na Krki","Kostel","Kozje","Kranj","Kranjska Gora","Križevci","Krško","Kungota","Kuzma","Laško","Lenart","Lendava","Litija","Ljubljana","Ljubno","Ljutomer","Log–Dragomer","Logatec","Loška Dolina","Loški Potok","Lovrenc na Pohorju","Luče","Lukovica","Majšperk","Makole","Maribor","Markovci","Medvode","Mengeš","Metlika","Mežica","Miklavž na Dravskem Polju","Miren–Kostanjevica","Mirna","Mirna Peč","Mislinja","Mokronog–Trebelno","Moravče","Moravske Toplice","Mozirje","Murska Sobota","Muta","Naklo","Nazarje","Nova Gorica","Novo Mesto","Odranci","Oplotnica","Ormož","Osilnica","Pesnica","Piran","Pivka","Podčetrtek","Podlehnik","Podvelka","Poljčane","Polzela","Postojna","Prebold","Preddvor","Prevalje","Ptuj","Puconci","Rače–Fram","Radeče","Radenci","Radlje ob Dravi","Radovljica","Ravne na Koroškem","Razkrižje","Rečica ob Savinji","Renče–Vogrsko","Ribnica","Ribnica na Pohorju","Rogaška Slatina","Rogašovci","Rogatec","Ruše","Šalovci","Selnica ob Dravi","Semič","Šempeter–Vrtojba","Šenčur","Šentilj","Šentjernej","Šentjur","Šentrupert","Sevnica","Sežana","Škocjan","Škofja Loka","Škofljica","Slovenj Gradec","Slovenska Bistrica","Slovenske Konjice","Šmarje pri Jelšah","Šmarješke Toplice","Šmartno ob Paki","Šmartno pri Litiji","Sodražica","Solčava","Šoštanj","Središče ob Dravi","Starše","Štore","Straža","Sveta Ana","Sveta Trojica v Slovenskih Goricah","Sveti Andraž v Slovenskih Goricah","Sveti Jurij ob Ščavnici","Sveti Jurij v Slovenskih Goricah","Sveti Tomaž","Tabor","Tišina","Tolmin","Trbovlje","Trebnje","Trnovska Vas","Tržič","Trzin","Turnišče","Velika Polana","Velike Lašče","Veržej","Videm","Vipava","Vitanje","Vodice","Vojnik","Vransko","Vrhnika","Vuzenica","Zagorje ob Savi","Žalec","Zavrč","Železniki","Žetale","Žiri","Žirovnica","Zreče","Žužemberk"]},{"name":"Solomon Islands","states":["Central","Choiseul","Guadalcanal","Honiara","Isabel","Makira-Ulawa","Malaita","Rennell and Bellona","Temotu","Western"]},{"name":"Somalia","states":["Awdal","Bakool","Banaadir","Bari","Bay","Galguduud","Gedo","Hiran","Lower Juba","Lower Shebelle","Middle Juba","Middle Shebelle","Mudug","Nugal","Sanaag","Togdheer"]},{"name":"South Africa","states":["Eastern Cape","Free State","Gauteng","KwaZulu-Natal","Limpopo","Mpumalanga","North West","Northern Cape","Western Cape"]},{"name":"South Georgia","states":["South Georgia"]},{"name":"South Korea","states":["Busan","Daegu","Daejeon","Gangwon","Gwangju","Gyeonggi","Incheon","Jeju","North Chungcheong","North Gyeongsang","North Jeolla","Sejong City","Seoul","South Chungcheong","South Gyeongsang","South Jeolla","Ulsan"]},{"name":"South Sudan","states":["Central Equatoria","Eastern Equatoria","Jonglei State","Lakes","Northern Bahr el Ghazal","Unity","Upper Nile","Warrap","Western Bahr el Ghazal","Western Equatoria"]},{"name":"Spain","states":["A Coruña","Albacete","Alicante","Almeria","Andalusia","Araba","Aragon","Asturias","Asturias","Ávila","Badajoz","Balearic Islands","Barcelona","Basque Country","Bizkaia","Burgos","Caceres","Cádiz","Canary Islands","Cantabria","Cantabria","Castellón","Castile and Leon","Castilla-La Mancha","Catalonia","Ceuta","Ciudad Real","Community of Madrid","Córdoba","Cuenca","Estremadura","Galicia","Gipuzkoa","Girona","Granada","Guadalajara","Huelva","Huesca","Islas Baleares","Jaén","La Rioja","La Rioja","Las Palmas","León","Lleida","Lugo","Madrid","Málaga","Melilla","Murcia","Navarra","Navarre","Ourense","Palencia","Pontevedra","Region of Murcia","Salamanca","Santa Cruz de Tenerife","Segovia","Sevilla","Soria","Tarragona","Teruel","Toledo","Valencia","Valencian Community","Valladolid","Zamora","Zaragoza"]},{"name":"Sri Lanka","states":["Ampara","Anuradhapura","Badulla","Batticaloa","Central","Colombo","Eastern","Galle","Gampaha","Hambantota","Jaffna","Kalutara","Kandy","Kegalle","Kilinochchi","Kurunegala","Mannar","Matale","Matara","Monaragala","Mullaitivu","North Central","North Western","Northern","Nuwara Eliya","Polonnaruwa","Puttalam","Ratnapura","Sabaragamuwa","Southern","Trincomalee","Uva","Vavuniya","Western"]},{"name":"Sudan","states":["Al Jazirah","Al Qadarif","Blue Nile","Central Darfur","East Darfur","Kassala","Khartoum","North Darfur","North Kordofan","Northern","Red Sea","River Nile","Sennar","South Darfur","South Kordofan","West Darfur","West Kordofan","White Nile"]},{"name":"Suriname","states":["Brokopondo","Commewijne","Coronie","Marowijne","Nickerie","Para","Paramaribo","Saramacca","Sipaliwini","Wanica"]},{"name":"Svalbard and Jan Mayen Islands","states":["Svalbard and Jan Mayen Islands"]},{"name":"Sweden","states":["Blekinge","Dalarna","Gävleborg","Gotland","Halland","Jämtland","Jönköping","Kalmar","Kronoberg","Norrbotten","Örebro","Östergötland","Skåne","Södermanland","Stockholm","Uppsala","Värmland","Västerbotten","Västernorrland","Västmanland","Västra Götaland"]},{"name":"Switzerland","states":["Aargau","Appenzell Ausserrhoden","Appenzell Innerrhoden","Basel-Land","Basel-Stadt","Bern","Fribourg","Geneva","Glarus","Graubünden","Jura","Lucerne","Neuchâtel","Nidwalden","Obwalden","Schaffhausen","Schwyz","Solothurn","St. Gallen","Thurgau","Ticino","Uri","Valais","Vaud","Zug","Zürich"]},{"name":"Syria","states":["Al-Hasakah","Al-Raqqah","Aleppo","As-Suwayda","Damascus","Daraa","Deir ez-Zor","Hama","Homs","Idlib","Latakia","Quneitra","Rif Dimashq","Tartus"]},{"name":"Taiwan","states":["Changhua","Chiayi","Chiayi","Hsinchu","Hsinchu","Hualien","Kaohsiung","Keelung","Kinmen","Lienchiang","Miaoli","Nantou","New Taipei","Penghu","Pingtung","Taichung","Tainan","Taipei","Taitung","Taoyuan","Yilan","Yunlin"]},{"name":"Tajikistan","states":["Gorno-Badakhshan","Khatlon","Nohiyahoi Tobei Jumhurí ","Sughd "]},{"name":"Tanzania","states":["Arusha","Dar es Salaam","Dodoma","Geita","Iringa","Kagera","Katavi","Kigoma","Kilimanjaro","Lindi","Manyara","Mara","Mbeya","Morogoro","Mtwara","Mwanza","Njombe","Pemba North","Pemba South","Pwani","Rukwa","Ruvuma","Shinyanga","Simiyu","Singida","Songwe","Tabora","Tanga","Zanzibar North","Zanzibar South","Zanzibar West"]},{"name":"Thailand","states":["Amnat Charoen","Ang Thong","Bangkok","Bueng Kan","Buri Ram","Chachoengsao","Chai Nat","Chaiyaphum","Chanthaburi","Chiang Mai","Chiang Rai","Chon Buri","Chumphon","Kalasin","Kamphaeng Phet","Kanchanaburi","Khon Kaen","Krabi","Lampang","Lamphun","Loei","Lop Buri","Mae Hong Son","Maha Sarakham","Mukdahan","Nakhon Nayok","Nakhon Pathom","Nakhon Phanom","Nakhon Ratchasima","Nakhon Sawan","Nakhon Si Thammarat","Nan","Narathiwat","Nong Bua Lam Phu","Nong Khai","Nonthaburi","Pathum Thani","Pattani","Pattaya","Phangnga","Phatthalung","Phayao","Phetchabun","Phetchaburi","Phichit","Phitsanulok","Phra Nakhon Si Ayutthaya","Phrae","Phuket","Prachin Buri","Prachuap Khiri Khan","Ranong","Ratchaburi","Rayong","Roi Et","Sa Kaeo","Sakon Nakhon","Samut Prakan","Samut Sakhon","Samut Songkhram","Saraburi","Satun","Si Sa Ket","Sing Buri","Songkhla","Sukhothai","Suphan Buri","Surat Thani","Surin","Tak","Trang","Trat","Ubon Ratchathani","Udon Thani","Uthai Thani","Uttaradit","Yala","Yasothon"]},{"name":"The Bahamas","states":["Acklins","Acklins and Crooked Islands","Berry Islands","Bimini","Black Point","Cat Island","Central Abaco","Central Andros","Central Eleuthera","Crooked Island","East Grand Bahama","Exuma","Freeport","Fresh Creek","Governor's Harbour","Grand Cay","Green Turtle Cay","Harbour Island","High Rock","Hope Town","Inagua","Kemps Bay","Long Island","Mangrove Cay","Marsh Harbour","Mayaguana","New Providence","Nichollstown and Berry Islands","North Abaco","North Andros","North Eleuthera","Ragged Island","Rock Sound","Rum Cay","San Salvador and Rum Cay","San Salvador Island","Sandy Point","South Abaco","South Andros","South Eleuthera","Spanish Wells","West Grand Bahama"]},{"name":"The Gambia ","states":["Banjul","Central River","Lower River","North Bank","Upper River","West Coast"]},{"name":"Timor-Leste","states":["Aileu","Ainaro","Baucau","Bobonaro","Cova Lima","Dili","Ermera","Lautém","Liquiçá","Manatuto","Manufahi","Viqueque"]},{"name":"Togo","states":["Centrale","Kara","Maritime","Plateaux","Savanes"]},{"name":"Tokelau","states":["Tokelau"]},{"name":"Tonga","states":["Haʻapai","ʻEua","Niuas","Tongatapu","Vavaʻu"]},{"name":"Trinidad and Tobago","states":["Arima","Chaguanas","Couva-Tabaquite-Talparo","Diego Martin","Eastern Tobago","Penal-Debe","Point Fortin","Port of Spain","Princes Town","Rio Claro-Mayaro","San Fernando","San Juan-Laventille","Sangre Grande","Siparia","Tunapuna-Piarco","Western Tobago"]},{"name":"Tunisia","states":["Ariana","Béja","Ben Arous","Bizerte","Gabès","Gafsa","Jendouba","Kairouan","Kasserine","Kebili","Kef","Mahdia","Manouba","Medenine","Monastir","Nabeul","Sfax","Sidi Bouzid","Siliana","Sousse","Tataouine","Tozeur","Tunis","Zaghouan"]},{"name":"Turkey","states":["Adana","Adıyaman","Afyonkarahisar","Ağrı","Aksaray","Amasya","Ankara","Antalya","Ardahan","Artvin","Aydın","Balıkesir","Bartın","Batman","Bayburt","Bilecik","Bingöl","Bitlis","Bolu","Burdur","Bursa","Çanakkale","Çankırı","Çorum","Denizli","Diyarbakır","Düzce","Edirne","Elazığ","Erzincan","Erzurum","Eskişehir","Gaziantep","Giresun","Gümüşhane","Hakkâri","Hatay","Iğdır","Isparta","İstanbul","İzmir","Kahramanmaraş","Karabük","Karaman","Kars","Kastamonu","Kayseri","Kilis","Kırıkkale","Kırklareli","Kırşehir","Kocaeli","Konya","Kütahya","Malatya","Manisa","Mardin","Mersin","Muğla","Muş","Nevşehir","Niğde","Ordu","Osmaniye","Rize","Sakarya","Samsun","Şanlıurfa","Siirt","Sinop","Sivas","Şırnak","Tekirdağ","Tokat","Trabzon","Tunceli","Uşak","Van","Yalova","Yozgat","Zonguldak"]},{"name":"Turkmenistan","states":["Ahal","Ashgabat","Balkan","Daşoguz","Lebap","Mary"]},{"name":"Turks and Caicos Islands","states":["Grand Turk","Middle Caicos","North Caicos","Providenciales","Salt Cay","South Caicos"]},{"name":"Tuvalu","states":["Funafuti","Nanumanga","Nanumea","Niutao Island Council","Nui","Nukufetau","Nukulaelae","Vaitupu"]},{"name":"Uganda","states":["Abim","Adjumani","Agago","Alebtong","Amolatar","Amudat","Amuria","Amuru","Apac","Arua","Budaka","Bududa","Bugiri","Bugweri","Buhweju","Buikwe","Bukedea","Bukomansimbi","Bukwo","Bulambuli","Buliisa","Bundibugyo","Bunyangabu","Bushenyi","Busia","Butaleja","Butambala","Butebo","Buvuma","Buyende","Central","Dokolo","Eastern","Gomba","Gulu","Hoima","Ibanda","Iganga","Isingiro","Jinja","Kaabong","Kabale","Kabarole","Kaberamaido","Kagadi","Kakumiro","Kalaki","Kalangala","Kaliro","Kalungu","Kampala","Kamuli","Kamwenge","Kanungu","Kapchorwa","Kapelebyong","Karenga","Kasanda","Kasese","Katakwi","Kayunga","Kazo","Kibaale","Kiboga","Kibuku","Kikuube","Kiruhura","Kiryandongo","Kisoro","Kitagwenda","Kitgum","Koboko","Kole","Kotido","Kumi","Kwania","Kween","Kyankwanzi","Kyegegwa","Kyenjojo","Kyotera","Lamwo","Lira","Luuka","Luwero","Lwengo","Lyantonde","Madi-Okollo","Manafwa","Maracha","Masaka","Masindi","Mayuge","Mbale","Mbarara","Mitooma","Mityana","Moroto","Moyo","Mpigi","Mubende","Mukono","Nabilatuk","Nakapiripirit","Nakaseke","Nakasongola","Namayingo","Namisindwa","Namutumba","Napak","Nebbi","Ngora","Northern","Ntoroko","Ntungamo","Nwoya","Obongi","Omoro","Otuke","Oyam","Pader","Pakwach","Pallisa","Rakai","Rubanda","Rubirizi","Rukiga","Rukungiri","Rwampara","Sembabule","Serere","Sheema","Sironko","Soroti","Tororo","Wakiso","Western","Yumbe","Zombo"]},{"name":"Ukraine","states":["Autonomous Republic of Crimea","Cherkaska","Chernihivska","Chernivetska","Dnipropetrovska","Donetska","Ivano-Frankivska","Kharkivska","Khersonska","Khmelnytska","Kirovohradska","Kyiv","Kyivska","Luhanska","Lvivska","Mykolaivska","Odeska","Poltavska","Rivnenska","Sevastopol","Sumska","Ternopilska","Vinnytska","Volynska","Zakarpatska","Zaporizka","Zhytomyrska"]},{"name":"United Arab Emirates","states":["Abu Dhabi","Ajman","Dubai","Fujairah","Ras Al Khaimah","Sharjah","Umm Al Quwain"]},{"name":"United Kingdom","states":["Aberdeen","Aberdeenshire","Angus","Antrim","Antrim and Newtownabbey","Ards","Ards and North Down","Argyll and Bute","Armagh","Armagh, Banbridge and Craigavon","Ascension Island","Ballymena","Ballymoney","Banbridge","Barking and Dagenham","Barnet","Barnsley","Bath and North East Somerset","Bedford","Belfast","Bexley","Birmingham","Blackburn with Darwen","Blackpool","Blaenau Gwent","Bolton","Bournemouth","Bracknell Forest","Bradford","Brent","Bridgend","Brighton and Hove","Bristol","Bromley","Buckinghamshire","Bury","Caerphilly","Calderdale","Cambridgeshire","Camden","Cardiff","Carmarthenshire","Carrickfergus","Castlereagh","Causeway Coast and Glens","Central Bedfordshire","Ceredigion","Cheshire East","Cheshire West and Chester","City of Kingston upon Hull","City of Southampton","Clackmannanshire","Coleraine","Conwy","Cookstown","Cornwall","Coventry","Craigavon","Croydon","Cumbria","Darlington","Denbighshire","Derby","Derbyshire","Derry","Derry City and Strabane","Devon","Doncaster","Dorset","Down District Council","Dudley","Dumfries and Galloway","Dundee","Dungannon and South Tyrone","Durham","Ealing","East Ayrshire","East Dunbartonshire","East Lothian","East Renfrewshire","East Riding of Yorkshire","East Sussex","Edinburgh","Enfield","England","Essex","Falkirk","Fermanagh","Fermanagh and Omagh","Fife","Flintshire","Gateshead","Glasgow","Gloucestershire","Greenwich","Gwynedd","Hackney","Halton","Hammersmith and Fulham","Hampshire","Haringey","Harrow","Hartlepool","Havering","Herefordshire","Hertfordshire","Highland","Hillingdon","Hounslow","Inverclyde","Isle of Wight","Isles of Scilly","Islington","Kensington and Chelsea","Kent","Kingston upon Thames","Kirklees","Knowsley","Lambeth","Lancashire","Larne","Leeds","Leicester","Leicestershire","Lewisham","Limavady","Lincolnshire","Lisburn","Lisburn and Castlereagh","Liverpool","London","Magherafelt","Manchester","Medway","Merthyr Tydfil","Merton","Mid and East Antrim","Mid Ulster","Middlesbrough","Midlothian","Milton Keynes","Monmouthshire","Moray","Moyle","Neath Port Talbot","Newcastle upon Tyne","Newham","Newport","Newry and Mourne","Newry, Mourne and Down","Newtownabbey","Norfolk","North Ayrshire","North Down","North East Lincolnshire","North Lanarkshire","North Lincolnshire","North Somerset","North Tyneside","North Yorkshire","Northamptonshire","Northern Ireland","Northumberland","Nottingham","Nottinghamshire","Oldham","Omagh","Orkney Islands","Outer Hebrides","Oxfordshire","Pembrokeshire","Perth and Kinross","Peterborough","Plymouth","Poole","Portsmouth","Powys","Reading","Redbridge","Redcar and Cleveland","Renfrewshire","Rhondda Cynon Taf","Richmond upon Thames","Rochdale","Rotherham","Rutland","Saint Helena","Salford","Sandwell","Scotland","Scottish Borders","Sefton","Sheffield","Shetland Islands","Shropshire","Slough","Solihull","Somerset","South Ayrshire","South Gloucestershire","South Lanarkshire","South Tyneside","Southend-on-Sea","Southwark","St Helens","Staffordshire","Stirling","Stockport","Stockton-on-Tees","Stoke-on-Trent","Strabane","Suffolk","Sunderland","Surrey","Sutton","Swansea","Swindon","Tameside","Telford and Wrekin","Thurrock","Torbay","Torfaen","Tower Hamlets","Trafford","United Kingdom","Vale of Glamorgan","Wakefield","Wales","Walsall","Waltham Forest","Wandsworth","Warrington","Warwickshire","West Berkshire","West Dunbartonshire","West Lothian","West Sussex","Westminster","Wigan","Wiltshire","Windsor and Maidenhead","Wirral","Wokingham","Wolverhampton","Worcestershire","Wrexham","York"]},{"name":"United States","states":["Alabama","Alaska","American Samoa","Arizona","Arkansas","Baker Island","California","Colorado","Connecticut","Delaware","District of Columbia","Florida","Georgia","Guam","Hawaii","Howland Island","Idaho","Illinois","Indiana","Iowa","Jarvis Island","Johnston Atoll","Kansas","Kentucky","Kingman Reef","Louisiana","Maine","Maryland","Massachusetts","Michigan","Midway Atoll","Minnesota","Mississippi","Missouri","Montana","Navassa Island","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Northern Mariana Islands","Ohio","Oklahoma","Oregon","Palmyra Atoll","Pennsylvania","Puerto Rico","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","United States Minor Outlying Islands","United States Virgin Islands","Utah","Vermont","Virginia","Wake Island","Washington","West Virginia","Wisconsin","Wyoming"]},{"name":"United States Minor Outlying Islands","states":["Baker Island","Howland Island","Jarvis Island","Johnston Atoll","Kingman Reef","Midway Islands","Navassa Island","Palmyra Atoll","Wake Island"]},{"name":"Uruguay","states":["Artigas","Canelones","Cerro Largo","Colonia","Durazno","Flores","Florida","Lavalleja","Maldonado","Montevideo","Paysandú","Río Negro","Rivera","Rocha","Salto","San José","Soriano","Tacuarembó","Treinta y Tres"]},{"name":"Uzbekistan","states":["Andijan","Bukhara","Fergana","Jizzakh","Karakalpakstan","Namangan","Navoiy","Qashqadaryo","Samarqand","Sirdaryo","Surxondaryo","Tashkent","Tashkent","Xorazm"]},{"name":"Vanuatu","states":["Malampa","Penama","Sanma","Shefa","Tafea","Torba"]},{"name":"Vatican City State (Holy See)","states":["Vatican City State (Holy See)"]},{"name":"Venezuela","states":["Amazonas","Anzoátegui","Apure","Aragua","Barinas","Bolívar","Carabobo","Cojedes","Delta Amacuro","Distrito Capital","Falcón","Guárico","La Guaira","Lara","Mérida","Miranda","Monagas","Nueva Esparta","Portuguesa","Sucre","Táchira","Trujillo","Venezuela","Yaracuy","Zulia"]},{"name":"Vietnam","states":["An Giang","Bà Rịa-Vũng Tàu","Bắc Giang","Bắc Kạn","Bạc Liêu","Bắc Ninh","Bến Tre","Bình Dương","Bình Định","Bình Phước","Bình Thuận","Cà Mau","Cần Thơ","Cao Bằng","Đà Nẵng","Đắk Lắk","Đắk Nông","Điện Biên","Đồng Nai","Đồng Tháp","Gia Lai","Hà Giang","Hà Nam","Hà Nội","Hà Tĩnh","Hải Dương","Hải Phòng","Hậu Giang","Hồ Chí Minh","Hòa Bình","Hưng Yên","Khánh Hòa","Kiên Giang","Kon Tum","Lai Châu","Lâm Đồng","Lạng Sơn","Lào Cai","Long An","Nam Định","Nghệ An","Ninh Bình","Ninh Thuận","Phú Thọ","Phú Yên","Quảng Bình","Quảng Nam","Quảng Ngãi","Quảng Ninh","Quảng Trị","Sóc Trăng","Sơn La","Tây Ninh","Thái Bình","Thái Nguyên","Thanh Hóa","Thừa Thiên-Huế","Tiền Giang","Trà Vinh","Tuyên Quang","Vĩnh Long","Vĩnh Phúc","Yên Bái"]},{"name":"Virgin Islands (British)","states":["Virgin Islands (British)"]},{"name":"Virgin Islands (US)","states":["Saint Croix","Saint John","Saint Thomas"]},{"name":"Wallis and Futuna Islands","states":["Wallis and Futuna Islands"]},{"name":"Western Sahara","states":["Western Sahara"]},{"name":"Yemen","states":["'Adan","'Amran","Abyan","Al Bayda'","Al Hudaydah","Al Jawf","Al Mahrah","Al Mahwit","Amanat Al Asimah","Dhamar","Hadhramaut","Hajjah","Ibb","Lahij","Ma'rib","Raymah","Saada","Sana'a","Shabwah","Socotra","Ta'izz"]},{"name":"Zambia","states":["Central","Copperbelt","Eastern","Luapula","Lusaka","Muchinga","Northern","Northwestern","Southern","Western"]},{"name":"Zimbabwe","states":["Bulawayo","Harare","Manicaland","Mashonaland Central","Mashonaland East","Mashonaland West","Masvingo","Matabeleland North","Matabeleland South","Midlands"]}]`),ru=Ge(ee)(({theme:t})=>({borderRadius:"8px",fontWeight:600,padding:t.spacing(1,2),transition:"all 0.2s",boxShadow:"none"})),ft=({variant:t,startIcon:a,onClick:n,disabled:s,text:r,size:o="medium"})=>{const p=we();return e.jsx(ru,{size:o,variant:t||"contained",startIcon:a,color:"success",onClick:n,disabled:s,sx:{background:p.palette.mode==="dark"?"#2e7d32":"#e8f5e9",color:p.palette.mode==="dark"?"#fff":"#2e7d32",border:`1px solid ${p.palette.mode==="dark"?"#fff":"#2e7d32"}`,"&:hover":{color:p.palette.mode==="dark"?"#000":"#fff",background:p.palette.mode==="dark"?"#e8f5e9":"#2e7d32"}},children:r??"Submit"})},yo=({open:t,onClose:a,onUpdated:n,onCreated:s,company:r})=>{var ue,je;const o=we(),p=Fe(),[c,x]=g.useState(!1),[u,S]=g.useState(!1),f=g.useRef(null),v=g.useRef(null),[j,T]=g.useState(!1),[k,B]=g.useState(!1),[_,K]=g.useState(null),[w,N]=g.useState(null),[R,L]=g.useState(!1),[D,P]=g.useState(!1),[A,O]=g.useState(!1),[y,F]=g.useState({}),h=()=>`${new Date().getFullYear()}-04-01`,[b,M]=g.useState({user_id:"",name:"",mailing_name:"",address_1:"",address_2:"",pinCode:"",state:"",country:"",financial_year_start:h(),books_begin_from:h(),is_deleted:!1,number:"",code:"",email:"",image:"",tin:"",website:"",account_number:"",account_holder:"",bank_ifsc:"",bank_name:"",bank_branch:"",qr_code_url:""}),W=(q=b)=>{const E={};return q.name.trim()||(E.company_name="Company name is required"),q.country.trim()||(E.country="Country is required"),q.state.trim()||(E.state="State is required"),q.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(q.email)&&(E.email="Please enter a valid email address"),q.website&&!/^https?:\/\/.+/.test(q.website)&&(E.website="Please enter a valid URL (starting with http:// or https://)"),q.number&&!/^\d{10}$/.test(q.number)&&(E.number="Phone number should be 10 digits long"),F(E),Object.keys(E).length===0},C=(q,E)=>{M(te=>{const U={...te,[q]:E};return W(U),U})},$=g.useCallback((q,E)=>{if(!q)return;if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(q.type)){Z.error("Only PNG, JPEG, JPG, or WebP images are allowed.");return}if(q.size>5*1024*1024){Z.error("Image size should be less than 5MB.");return}E==="image"?L(!0):E==="qr_code_url"&&P(!0),M(U=>({...U,[E]:q}));const te=new FileReader;te.onload=U=>{var ie;const H=(ie=U.target)==null?void 0:ie.result;E==="image"?(K(H),L(!1)):E==="qr_code_url"&&(N(H),P(!1))},te.readAsDataURL(q)},[]),G=g.useCallback(q=>{var te;q.preventDefault(),q.stopPropagation(),T(!1);const E=(te=q.dataTransfer.files)==null?void 0:te[0];E&&$(E,"image")},[$]),ge=g.useCallback(q=>{var te;q.preventDefault(),q.stopPropagation(),B(!1);const E=(te=q.dataTransfer.files)==null?void 0:te[0];E&&$(E,"qr_code_url")},[$]),Ae=g.useCallback(q=>{q.preventDefault(),q.stopPropagation(),T(!0)},[]),ae=g.useCallback(q=>{q.preventDefault(),q.stopPropagation(),B(!0)},[]),Y=g.useCallback(q=>{q.preventDefault(),q.stopPropagation(),T(!1)},[]),re=g.useCallback(q=>{q.preventDefault(),q.stopPropagation(),B(!1)},[]),Te=()=>{var q;(q=f.current)==null||q.click()},V=()=>{var q;(q=v.current)==null||q.click()},z=g.useCallback(q=>{q.stopPropagation(),K(null),M(E=>({...E,image:""})),f.current&&(f.current.value="")},[]),de=g.useCallback(q=>{q.stopPropagation(),N(null),M(E=>({...E,qr_code:""})),v.current&&(v.current.value="")},[]),Ie=()=>{M({user_id:"",name:"",mailing_name:"",address_1:"",address_2:"",pinCode:"",state:"",country:"",financial_year_start:h(),books_begin_from:h(),is_deleted:!1,number:"",code:"",email:"",image:"",tin:"",website:"",account_number:"",account_holder:"",bank_ifsc:"",bank_name:"",bank_branch:"",qr_code_url:""}),K(null),N(null),F({}),S(!1),f.current&&(f.current.value=""),v.current&&(v.current.value="")};g.useEffect(()=>{var q,E;t&&r?(M({pinCode:r.pinCode||"",state:r.state||"",financial_year_start:r.financial_year_start||h(),books_begin_from:r.books_begin_from||h(),is_deleted:!1,user_id:(r==null?void 0:r.user_id)||"",name:r.name||"",mailing_name:r.mailing_name||"",tin:(r==null?void 0:r.tin)||"",website:(r==null?void 0:r.website)||"",email:(r==null?void 0:r.email)||"",code:((q=r==null?void 0:r.phone)==null?void 0:q.code)||"",number:((E=r==null?void 0:r.phone)==null?void 0:E.number)||"",address_1:(r==null?void 0:r.address_1)||"",address_2:(r==null?void 0:r.address_2)||"",image:typeof(r==null?void 0:r.image)=="string"?r==null?void 0:r.image:"",country:(r==null?void 0:r.country)||"",account_holder:(r==null?void 0:r.account_holder)||"",account_number:(r==null?void 0:r.account_number)||"",bank_ifsc:(r==null?void 0:r.bank_ifsc)||"",bank_name:(r==null?void 0:r.bank_name)||"",bank_branch:(r==null?void 0:r.bank_branch)||"",qr_code_url:typeof(r==null?void 0:r.qr_code_url)=="string"?r==null?void 0:r.qr_code_url:""}),(r!=null&&r.account_holder||r!=null&&r.account_number||r!=null&&r.bank_ifsc||r!=null&&r.bank_name||r!=null&&r.bank_branch)&&O(!0),K(typeof(r==null?void 0:r.image)=="string"?r.image:null),N(typeof(r==null?void 0:r.qr_code_url)=="string"?r.qr_code_url:null)):t&&!r&&Ie()},[t,r]);const oe=async()=>{if(S(!0),!W()){Z.error("Please fix the form errors before submitting");return}x(!0);const q={name:b.name.trim(),state:b.state.trim(),country:b.country.trim()};b.email&&b.email!==""&&(q.email=b.email.trim()),b.tin&&b.tin!==""&&(q.tin=b.tin.trim()),b.number&&b.number!==""&&(q.number=b.number.trim()),b.code&&b.code!==""&&(q.code=b.code.trim()),b.address_1&&b.address_1!==""&&(q.address_1=b.address_1.trim()),b.address_2&&b.address_2!==""&&(q.address_2=b.address_2.trim()),b.pinCode&&b.pinCode!==""&&(q.pinCode=b.pinCode.trim()),b.financial_year_start&&b.financial_year_start!==""&&(q.financial_year_start=b.financial_year_start.trim()),b.books_begin_from&&b.books_begin_from!==""&&(q.books_begin_from=b.books_begin_from.trim()),b.website&&b.website!==""&&(q.website=b.website.trim()),b.mailing_name&&b.mailing_name!==""&&(q.mailing_name=b.mailing_name.trim()),b.image&&typeof b.image!="string"&&(q.image=b.image),b.account_holder&&b.account_holder!==""&&(q.account_holder=b.account_holder.trim()),b.account_number&&b.account_number!==""&&(q.account_number=b.account_number.trim()),b.bank_ifsc&&b.bank_ifsc!==""&&(q.bank_ifsc=b.bank_ifsc.trim()),b.bank_name&&b.bank_name!==""&&(q.bank_name=b.bank_name.trim()),b.bank_branch&&b.bank_branch!==""&&(q.bank_branch=b.bank_branch.trim()),b.qr_code_url&&typeof b.qr_code_url!="string"&&(q.qr_code_url=b.qr_code_url);const E=new FormData;Object.entries(q).forEach(([te,U])=>{typeof U=="boolean"?E.append(te,U?"true":"false"):(typeof U=="string"||U instanceof Blob)&&E.append(te,U)}),r?await p(Zc({data:E,id:r._id})).unwrap().then(()=>{x(!1),a(),n&&n(),Z.success("Company Details successfully updated! 🎉")}).catch(te=>{x(!1),Z.error(te||"Failed to update company. An unexpected error occurred.")}):await p(zn(E)).unwrap().then(te=>{console.log("Company Create Response",te),x(!1),a(),s&&s(te),n&&n(),Z.success("Company Details successfully created! 🎉")}).catch(te=>{x(!1),Z.error(te||"Failed to create company. An unexpected error occurred.")})};return e.jsx(Pt,{dateAdapter:Lt,children:e.jsxs(Mt,{anchor:"right",PaperProps:{sx:{width:{xs:"100%",sm:650,md:750},backgroundColor:o.palette.background.default,backgroundImage:`linear-gradient(135deg, ${o.palette.background.default} 0%, ${o.palette.background.paper} 100%)`}},sx:{"& .MuiBackdrop-root":{backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)"}},open:t,onClose:a,...t?{}:{inert:""},children:[e.jsxs(l,{sx:{p:3,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${o.palette.divider}`,background:`linear-gradient(135deg, ${o.palette.primary.main}20 0%, ${o.palette.primary.light}15 100%)`,backdropFilter:"blur(20px)",position:"sticky",top:0,zIndex:1},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(le,{title:"Close",arrow:!0,children:e.jsx(ke,{onClick:a,sx:{backgroundColor:o.palette.background.paper,boxShadow:o.shadows[2],"&:hover":{backgroundColor:o.palette.action.hover,transform:"scale(1.05) rotate(90deg)"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:e.jsx(ct,{})})}),e.jsxs(l,{children:[e.jsx(i,{variant:"h5",fontWeight:700,sx:{background:`linear-gradient(135deg, ${o.palette.primary.main} 0%, ${o.palette.secondary.main} 100%)`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:r?"Edit Company Details":"Create New Company"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:r?"Update your company information":"Fill in the details to create a new company"})]})]}),e.jsx(ee,{variant:"contained",color:"primary",onClick:oe,disabled:Object.keys(y).length>0,startIcon:c?e.jsx(bt,{size:20}):e.jsx(ia,{}),sx:{textTransform:"none",fontWeight:600,"&:hover":{backgroundColor:o.palette.primary.dark}},children:c?"Saving...":r?"Update Company":"Create Company"})]}),e.jsx(l,{sx:{flex:1,overflow:"auto",position:"relative","&::-webkit-scrollbar":{width:8},"&::-webkit-scrollbar-track":{backgroundColor:o.palette.background.default},"&::-webkit-scrollbar-thumb":{backgroundColor:o.palette.primary.main,borderRadius:4,"&:hover":{backgroundColor:o.palette.primary.dark}}},children:e.jsx(l,{sx:{p:3},children:e.jsxs(ne,{elevation:8,sx:{p:4,borderRadius:1,background:`linear-gradient(135deg, ${o.palette.background.paper} 0%, ${o.palette.action.hover}30 100%)`,border:`1px solid ${o.palette.divider}`,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:4,background:`linear-gradient(90deg, ${o.palette.primary.main} 0%, ${o.palette.secondary.main} 100%)`},transition:"all 0.1s ease","&:hover":{transform:"translateY(-4px)",boxShadow:o.shadows[12]}},children:[e.jsxs(l,{sx:{mb:4},children:[e.jsxs(i,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1,fontWeight:600,color:o.palette.primary.main},children:[e.jsx(_i,{}),"Company Branding"]}),e.jsx(Pe,{sx:{mb:3}}),e.jsxs(l,{sx:{display:"flex",gap:4,alignItems:"start",flexWrap:"wrap"},children:[e.jsxs(qe,{sx:{width:"45%"},children:[e.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",style:{display:"none"},ref:f,onChange:q=>{var te;const E=(te=q.target.files)==null?void 0:te[0];E&&$(E,"image")}}),e.jsx(l,{onClick:Te,onDrop:G,onDragOver:q=>q.preventDefault(),onDragEnter:Ae,onDragLeave:Y,sx:{border:`3px dashed ${j?o.palette.primary.main:o.palette.divider}`,borderRadius:1,p:2,position:"relative",textAlign:"center",cursor:R?"not-allowed":"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",backgroundColor:j?`${o.palette.primary.main}10`:"transparent",minHeight:100,height:150,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{borderColor:o.palette.primary.main,backgroundColor:`${o.palette.primary.main}05`,transform:"scale(1.02)"}},children:R?e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx(bt,{size:40}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Processing image..."})]}):_?e.jsxs(l,{sx:{position:"relative",display:"inline-block",mx:"auto"},children:[e.jsx("img",{src:_,alt:"Company Logo Preview",style:{maxWidth:200,maxHeight:120,borderRadius:12,boxShadow:o.shadows[4]}}),e.jsx(le,{title:"Remove image",arrow:!0,children:e.jsx(ke,{onClick:z,sx:{position:"absolute",top:-12,right:-12,backgroundColor:o.palette.error.main,color:"white",width:32,height:32,boxShadow:o.shadows[4],"&:hover":{backgroundColor:o.palette.error.dark,transform:"scale(1.1)"}},children:e.jsx(ut,{fontSize:"small"})})})]}):e.jsxs(l,{children:[e.jsx(Fa,{sx:{fontSize:48,color:o.palette.primary.main,mb:1}}),e.jsx(i,{variant:"h6",sx:{fontWeight:600,mb:1},children:"Upload Company Logo"}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Drag & drop your logo here, or click to browse"})]})})]}),e.jsxs(l,{sx:{flex:1,width:"45%"},children:[e.jsxs(i,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1,mb:2,fontWeight:600,color:o.palette.primary.main},children:[e.jsx(ca,{}),"Company Details"]}),e.jsxs(J,{spacing:3,children:[e.jsx(X,{fullWidth:!0,label:"Company Name",placeholder:"Enter your company name",value:b.name,size:"small",onChange:q=>C("name",q.target.value),error:!!y.company_name,helperText:y.company_name,required:!0,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(ca,{color:y.company_name?"error":"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.1s ease","&:hover":{transform:"translateY(-1px)"}}}}),e.jsx(X,{fullWidth:!0,label:"Website URL",placeholder:"https://www.yourcompany.com",type:"url",size:"small",value:b.website,onChange:q=>C("website",q.target.value),error:!!y.website,helperText:y.website,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(no,{color:y.website?"error":"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.1s ease","&:hover":{transform:"translateY(-1px)"}}}})]})]})]})]}),e.jsxs(l,{sx:{mb:4},children:[e.jsxs(i,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1,fontWeight:600,color:o.palette.primary.main},children:[e.jsx(Bt,{}),"Contact Information"]}),e.jsx(Pe,{sx:{mb:3}}),e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:3},children:[e.jsx(X,{fullWidth:!0,label:"Company Email",placeholder:"contact@yourcompany.com",type:"email",size:"small",value:b.email,onChange:q=>C("email",q.target.value),error:!!y.email,helperText:y.email,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Bt,{color:y.email?"error":"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.1s ease","&:hover":{transform:"translateY(-1px)"}}}}),e.jsx(X,{fullWidth:!0,label:"Mailing Name",placeholder:"Your Company Name",type:"text",size:"small",value:b.mailing_name,onChange:q=>C("mailing_name",q.target.value),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(ca,{color:"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.1s ease","&:hover":{transform:"translateY(-1px)"}}}})]}),e.jsxs(l,{sx:{mt:2,display:"flex",flexDirection:"column",gap:3},children:[e.jsx(X,{fullWidth:!0,label:"Street Address 1",placeholder:"123 Main St, Suite 456",type:"text",size:"small",value:b.address_1,onChange:q=>C("address_1",q.target.value),error:!!y.address_1,helperText:y.address_1,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Zl,{color:y.address_1?"error":"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.1s ease","&:hover":{transform:"translateY(-1px)"}}}}),e.jsx(X,{fullWidth:!0,label:"Street Address 2",placeholder:"Apt, Suite, or Building",type:"text",size:"small",value:b.address_2,onChange:q=>C("address_2",q.target.value),error:!!y.address_2,helperText:y.address_2,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Xl,{color:y.address_2?"error":"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.1s ease","&:hover":{transform:"translateY(-1px)"}}}}),e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:3},children:[e.jsx(at,{fullWidth:!0,size:"small","aria-label":"Select country",options:[...(It==null?void 0:It.map(q=>({label:q.name})))??[]],getOptionLabel:q=>typeof q=="string"?q:q.label||"",freeSolo:!0,renderOption:(q,E)=>{const{key:te,...U}=q;return e.jsx("li",{...U,style:{fontWeight:400,color:"inherit",...q.style||{}},children:E.label},te)},renderInput:q=>e.jsx(X,{...q,label:"Country",type:"text",size:"small",autoComplete:"country",placeholder:"e.g., India, Russia",error:!!y.country,helperText:y.country||"Select the country in which company is located",InputProps:{...q.InputProps,startAdornment:e.jsx(se,{position:"start",children:e.jsx(ed,{color:y.country?"error":"primary"})})}}),value:b.country||"",onChange:(q,E)=>{C("country",typeof E=="string"?E:typeof E=="object"&&E!==null&&"label"in E?E.label:""),C("state","")},componentsProps:{paper:{sx:{border:"2px solid #000",borderRadius:1}}},sx:{"& .MuiAutocomplete-endAdornment":{display:"none",border:"1px solid #000",backgroundColor:"linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%)"},"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.1s ease","&:hover":{transform:"translateY(-1px)"}}}}),e.jsx(at,{fullWidth:!0,size:"small",options:b.country?(ue=It.find(q=>q.name===b.country))!=null&&ue.states.length?((je=It.find(q=>q.name===b.country))==null?void 0:je.states)??[]:["No States"]:["Select Country First"],freeSolo:!0,disabled:!b.country,renderOption:(q,E)=>{const{key:te,...U}=q;return e.jsx("li",{...U,style:{fontWeight:400,color:"inherit",...q.style||{}},children:E},te)},renderInput:q=>e.jsx(X,{...q,label:"State/Province",placeholder:b.country?"e.g., Rajasthan, Ontario":"Select country first",size:"small",error:!!y.state,helperText:b.country?y.state||"Select the state in which company is located":"Please select a country first",InputProps:{...q.InputProps,startAdornment:e.jsx(se,{position:"start",children:e.jsx(td,{color:y.country?"error":"primary"})})}}),value:b.state||"",onChange:(q,E)=>{if(!b.country)return;const te=It.find(U=>U.name===b.country);te&&te.states.length<1?C("state",""):C("state",E||"")},componentsProps:{paper:{sx:{border:"2px solid #000",borderRadius:1}}},sx:{"& .MuiAutocomplete-endAdornment":{display:"none"},"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.1s ease","&:hover":{transform:"translateY(-1px)"}}}})]}),e.jsxs(l,{sx:{display:"flex",gap:1,alignItems:"flex-start",justifyContent:"space-between"},children:[e.jsx(l,{sx:{width:"35%",display:"flex",flexDirection:"column",gap:1},children:e.jsx(X,{fullWidth:!0,label:"Postal Code",placeholder:"e.g., 12345, A1B 2C3",type:"text",size:"small",value:b.pinCode,onChange:q=>C("pinCode",q.target.value),error:!!y.pinCode,helperText:y.pinCode||"Postal code or ZIP code",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(ad,{color:y.pinCode?"error":"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.1s ease","&:hover":{transform:"translateY(-1px)"}}}})}),e.jsxs(l,{sx:{display:"flex",gap:1,width:"60%",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(l,{sx:{width:"150px"},children:e.jsx(X,{fullWidth:!0,label:"Country Code",placeholder:"+91",size:"small",value:b.code,onChange:q=>C("code",q.target.value),error:!!y.code,helperText:y.code||"Country code",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(ua,{color:y.code?"error":"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.1s ease","&:hover":{transform:"translateY(-1px)"}}}})}),e.jsx(X,{fullWidth:!0,label:"Phone Number",placeholder:"***** 67890",type:"tel",size:"small",value:b.number,onChange:q=>C("number",q.target.value),error:!!y.number,helperText:y.number||"10 digits",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(ua,{color:y.number?"error":"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,width:"100%",transition:"all 0.1s ease","&:hover":{transform:"translateY(-1px)"}}}})]})]})]})]}),e.jsxs(l,{sx:{mb:4},children:[e.jsxs(i,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1,fontWeight:600,color:o.palette.primary.main},children:[e.jsx(xt,{}),"Legal Information"]}),e.jsx(Pe,{sx:{mb:3}}),e.jsx(X,{fullWidth:!0,label:"TIN Number",placeholder:"15-digit TIN",value:b.tin,size:"small",onChange:q=>C("tin",q.target.value.toUpperCase()),error:!!y.tin,helperText:y.tin||"15 characters including state code. If you enter the TIN then the company will be registered as a TAX-registered company.",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(pn,{color:y.tin?"error":"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.1s ease","&:hover":{transform:"translateY(-1px)"}}}}),e.jsxs(l,{sx:{display:"grid",mt:2,gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:3},children:[e.jsx(Xe,{label:"Financial Year Start",value:typeof b.financial_year_start=="string"?new Date(b.financial_year_start):b.financial_year_start,format:"dd/MM/yyyy",minDate:new Date("2000-01-01"),maxDate:new Date("2100-12-31"),views:["year","month","day"],onChange:q=>{M(q?E=>({...E,financial_year_start:String(q).trim()}):E=>({...E,financial_year_start:new Date().toISOString().split("T")[0]}))},slotProps:{textField:{fullWidth:!0,size:"small",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(xt,{color:y.financial_year_start?"error":"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.1s ease","&:hover":{transform:"translateY(-1px)"}},"& .MuiInputAdornment-root .MuiButtonBase-root":{border:"none",boxShadow:"none"}}}}}),e.jsx(Xe,{label:"Books Beginning Date",value:typeof b.books_begin_from=="string"?new Date(b.books_begin_from):b.books_begin_from,format:"dd/MM/yyyy",minDate:new Date("2000-01-01"),maxDate:new Date("2100-12-31"),views:["year","month","day"],onChange:q=>{M(q?E=>({...E,books_begin_from:String(q).trim()}):E=>({...E,books_begin_from:new Date().toISOString().split("T")[0]}))},slotProps:{textField:{fullWidth:!0,size:"small",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(xt,{color:y.books_begin_from?"error":"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.1s ease","&:hover":{transform:"translateY(-1px)"}},"& .MuiInputAdornment-root .MuiButtonBase-root":{border:"none",boxShadow:"none"}}}}})]})]}),e.jsxs(l,{sx:{mb:4},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(i,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1,fontWeight:600,color:o.palette.primary.main},children:[e.jsx(xt,{}),"Bank Information"]}),e.jsx(ft,{onClick:()=>O(!A),disabled:c,startIcon:e.jsx(Zt,{}),text:A?"Hide Bank Information":"Add Bank Information"})]}),e.jsx(Pe,{sx:{mb:3}}),A&&e.jsxs(l,{children:[e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:3},children:[e.jsx(X,{fullWidth:!0,label:"Account Holder Name",placeholder:"e.g., John Doe",value:b.account_holder,size:"small",onChange:q=>C("account_holder",q.target.value),error:!!y.account_holder,helperText:y.account_holder||"Enter the account holder's name",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(pn,{color:y.account_holder?"error":"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.1s ease","&:hover":{transform:"translateY(-1px)"}}}}),e.jsx(X,{fullWidth:!0,label:"Account Number",placeholder:"123456789012",value:b.account_number,size:"small",onChange:q=>C("account_number",q.target.value),error:!!y.account_number,helperText:y.account_number||"Enter the account number",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(xt,{color:y.account_number?"error":"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.1s ease","&:hover":{transform:"translateY(-1px)"}}}})]}),e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",mt:3},children:[e.jsxs(qe,{sx:{width:"45%"},children:[e.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",style:{display:"none"},ref:v,onChange:q=>{var te;const E=(te=q.target.files)==null?void 0:te[0];E&&$(E,"qr_code_url")}}),e.jsx(l,{onClick:V,onDrop:ge,onDragOver:q=>q.preventDefault(),onDragEnter:ae,onDragLeave:re,sx:{border:`3px dashed ${k?o.palette.primary.main:o.palette.divider}`,borderRadius:1,p:2,position:"relative",textAlign:"center",cursor:D?"not-allowed":"pointer",transition:"all 0.1s cubic-bezier(0.4, 0, 0.2, 1)",backgroundColor:k?`${o.palette.primary.main}10`:"transparent",minHeight:150,height:200,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{borderColor:o.palette.primary.main,backgroundColor:`${o.palette.primary.main}05`,transform:"scale(1.02)"}},children:D?e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx(bt,{size:40}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Processing QR code..."})]}):w?e.jsxs(l,{sx:{position:"relative",display:"inline-block",mx:"auto"},children:[e.jsx("img",{src:w,alt:"Company QR Code Preview",style:{maxWidth:200,maxHeight:150,borderRadius:1,boxShadow:o.shadows[4]}}),e.jsx(le,{title:"Remove image",arrow:!0,children:e.jsx(ke,{onClick:de,sx:{position:"absolute",top:-12,right:-12,backgroundColor:o.palette.error.main,color:"white",width:32,height:32,boxShadow:o.shadows[4],"&:hover":{backgroundColor:o.palette.error.dark,transform:"scale(1.1)"}},children:e.jsx(ut,{fontSize:"small"})})})]}):e.jsxs(l,{children:[e.jsx(Fa,{sx:{fontSize:48,color:o.palette.primary.main,mb:1}}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,mb:1},children:"Upload Company QR Code"}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Drag & drop your QR code here, or click to browse"})]})})]}),e.jsxs(l,{sx:{display:"flex",flexDirection:"column",gap:2,width:"50%"},children:[e.jsx(X,{fullWidth:!0,label:"Bank Name",value:b.bank_name,placeholder:"e.g., ABC Bank",size:"small",onChange:q=>C("bank_name",q.target.value),error:!!y.bank_name,helperText:y.bank_name||"Enter the bank name",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(pn,{color:y.bank_name?"error":"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.1s ease","&:hover":{transform:"translateY(-1px)"}}}}),e.jsx(X,{fullWidth:!0,label:"Bank Branch",placeholder:"e.g., Main Branch",value:b.bank_branch,size:"small",onChange:q=>C("bank_branch",q.target.value),error:!!y.bank_branch,helperText:y.bank_branch||"Enter the bank branch",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(xt,{color:y.bank_branch?"error":"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.1s ease","&:hover":{transform:"translateY(-1px)"}}}}),e.jsx(X,{fullWidth:!0,label:"IFSC Code",value:b.bank_ifsc,placeholder:"e.g., ABCD0123456",size:"small",onChange:q=>C("bank_ifsc",q.target.value),error:!!y.bank_ifsc,helperText:y.bank_ifsc||"Enter the IFSC code",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(pn,{color:y.bank_ifsc?"error":"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.1s ease","&:hover":{transform:"translateY(-1px)"}}}})]})]})]})]}),e.jsxs(l,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(ee,{variant:"outlined",color:"secondary",onClick:a,startIcon:e.jsx(ct,{}),sx:{textTransform:"none",fontWeight:600,"&:hover":{backgroundColor:o.palette.action.hover}},children:"Cancel"}),e.jsx(ee,{variant:"contained",color:"primary",onClick:oe,disabled:Object.keys(y).length>0,startIcon:c?e.jsx(bt,{size:20}):e.jsx(ia,{}),sx:{textTransform:"none",fontWeight:600,"&:hover":{backgroundColor:o.palette.primary.dark}},children:c?"Saving...":r?"Update Company":"Create Company"})]})]})})})]})})},nr=t=>new Date(t).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}),Nt=t=>new Date(t).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}),ha=t=>t?t.split(" ").map(a=>a.charAt(0)).join("").toUpperCase().slice(0,2):"",Gt=t=>{const a=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"],s=(t||"").length%a.length;return a[s]};function ra(t,a){return a==="off"?t:a==="characters"?t.toUpperCase():a==="words"?t.replace(/\b\w/g,n=>n.toUpperCase()):a==="sentences"?t.replace(/(^|[.!?]\s+)([a-z])/g,(n,s,r)=>s+r.toUpperCase()):t}const $t=t=>{const a=new Date(t),n=s=>s.toString().padStart(2,"0");return a.getFullYear()+"-"+n(a.getMonth()+1)+"-"+n(a.getDate())+"T"+n(a.getHours())+":"+n(a.getMinutes())+":"+n(a.getSeconds())+".000Z"},nu=t=>`FY: ${t.slice(0,4)} - ${parseInt(t.slice(0,4),10)+1}`;function iu(t){const a=["January","February","March","April","May","June","July","August","September","October","November","December"];return t<1||t>12?"":a[t-1]}function ou({num:t,digits:a=2}){return(a==null||isNaN(Number(a)))&&(a=2),Number(t.toFixed(a))}function Ko({type:t,party:a,counter:n,amount:s}){let r=0,o=0;switch(t){case"Payment":r=+s,o=-s;break;case"Receipt":r=-s,o=+s;break;case"Sales":r=+s,o=-s;break;case"Purchase":r=-s,o=+s;break}return[{vouchar_id:"",ledger:a.name,ledger_id:a.id,amount:r,order_index:0},{vouchar_id:"",ledger:n.name,ledger_id:n.id,amount:o,order_index:1}]}const Vs=(t,a)=>{const n=[{text:"Dashboard",path:"/dashboard",icon:e.jsx(rd,{}),requiredRole:"admin"}],s=a?[{text:"WareHouse",path:"/warehouses",icon:e.jsx(Ht,{}),requiredRole:"user"},{text:"Timeline",path:"/timeline",icon:e.jsx(wo,{}),requiredRole:"user"},{text:"Products",path:"/products",icon:e.jsx(Co,{}),requiredRole:"user"},{text:"Customers",path:"/customers",icon:e.jsx(Kr,{}),requiredRole:"user"},{text:"Accounts",path:"/accounts",icon:e.jsx(Kr,{}),requiredRole:"user"},{text:"Invoices",path:"/invoices",icon:e.jsx(Qi,{}),requiredRole:"user"},{text:"Expenses",path:"/expenses",icon:e.jsx(ko,{}),requiredRole:"user"},{text:"Transactions",path:"/transactions",icon:e.jsx(Io,{}),requiredRole:"user"},{text:"Reports",path:"/reports",icon:e.jsx(Sn,{}),requiredRole:"user"},{text:"Summary",path:"/summary",icon:e.jsx(Sn,{}),requiredRole:"user"}]:[{text:"WareHouse",path:"/warehouses",icon:e.jsx(Ht,{}),requiredRole:"user"},{text:"Timeline",path:"/timeline",icon:e.jsx(wo,{}),requiredRole:"user"},{text:"Products",path:"/products",icon:e.jsx(Co,{}),requiredRole:"user"},{text:"Customers",path:"/customers",icon:e.jsx(Kr,{}),requiredRole:"user"},{text:"Accounts",path:"/accounts",icon:e.jsx(Kr,{}),requiredRole:"user"},{text:"Invoices",path:"/invoices",icon:e.jsx(Qi,{}),requiredRole:"user"},{text:"Expenses",path:"/expenses",icon:e.jsx(ko,{}),requiredRole:"user"},{text:"Transactions",path:"/transactions",icon:e.jsx(Io,{}),requiredRole:"user"},{text:"Reports",path:"/reports",icon:e.jsx(Sn,{}),requiredRole:"user"}];return t===hr.USER?s:t===hr.ADMIN?n:[]},Qs=[{text:"Profile",path:"/profile",icon:e.jsx(nd,{})},{text:"About",path:"/about",icon:e.jsx(id,{})}],Fi=Ge(he)(({theme:t})=>({borderRadius:2,border:`1px solid ${t.palette.divider}`,backgroundColor:t.palette.background.paper,transition:"all 0.3s ease","&:hover":{boxShadow:t.shadows[2],borderColor:t.palette.primary.main},padding:2,margin:"4px 0"}));function Zs(){var k,B,_,K;const t=Fe(),[a,n]=g.useState(!1),{current_company_id:s,user:r}=Ce(w=>w.auth),o=g.useMemo(()=>{var w;return s||localStorage.getItem("current_company_id")||((w=r==null?void 0:r.user_settings)==null?void 0:w.current_company_id)||""},[s,r]),[p,c]=g.useState({name:"",company:""}),x=g.useRef(null),[u,S]=g.useState((((k=r==null?void 0:r.company)==null?void 0:k.length)??0)===0?"Add Company":o||""),[f,v]=g.useState(!1);g.useEffect(()=>{var w;S((((w=r==null?void 0:r.company)==null?void 0:w.length)??0)===0?"Add Company":o||"")},[o,r==null?void 0:r.company]);const j=w=>{const N=w.target.value;S(N),c({...p,company:N}),T(N)};g.useEffect(()=>{r.user_type!=="admin"&&t(jr())},[t]);const T=async w=>{t(Mn(w)).unwrap().then(N=>{N&&(t(Ia()),r.user_type!=="admin"&&t(jr()),Z.success("Company changed successfully!"))}).catch(N=>{Z.error(N||"An unexpected error occurred. Please try again later.")})};return g.useEffect(()=>{var w;S((((w=r==null?void 0:r.company)==null?void 0:w.length)??0)===0?"Add Company":o||"")},[o,r==null?void 0:r.company]),e.jsxs(e.Fragment,{children:[e.jsxs(cs,{labelId:"company-select",id:"company-simple-select",value:u,defaultValue:"Add Company",onChange:j,ref:x,inputProps:{"aria-label":"Select company"},fullWidth:!0,open:f,onOpen:()=>v(!0),onClose:()=>v(!1),sx:{maxHeight:56,"&.MuiList-root":{p:"8px"},[`& .${Zi.select}`]:{display:"flex",alignItems:"center",gap:"6px",pl:1}},children:[(((B=r==null?void 0:r.company)==null?void 0:B.length)??0)>0?(_=r==null?void 0:r.company)==null?void 0:_.map((w,N)=>e.jsxs(Fi,{value:w.company_id,children:[e.jsx($e,{sx:{width:36,height:36,mr:2,ml:1,objectFit:"contain",bgcolor:Gt(w.company_name),fontSize:".9rem",fontWeight:700,boxShadow:`0 4px 12px ${d(Gt(w.company_name),.3)}`,transition:"all 0.3s ease",transform:"scale(1)","&:hover":{transform:"scale(1.1)"}},src:typeof w.image=="string"?w.image:w.image instanceof File?URL.createObjectURL(w.image):"",children:ha(w.company_name)}),e.jsx(tt,{secondary:nu(w==null?void 0:w.financial_year_start),primary:w.company_name})]},N)):e.jsxs(Fi,{value:"Add Company",onClick:()=>{v(!1),x.current&&x.current.blur(),n(!0)},children:[e.jsx($e,{sx:{width:36,height:36,mr:2,ml:1,objectFit:"contain",bgcolor:Gt("Add Company"),fontSize:".9rem",fontWeight:700,boxShadow:`0 4px 12px ${d(Gt("Add Company"),.3)}`,transition:"all 0.3s ease",transform:"scale(1)","&:hover":{transform:"scale(1.1)"}},children:e.jsx(To,{sx:{fontSize:"1rem",color:"primary.main"}})}),e.jsx(tt,{primary:"Add Company",secondary:"Create New Company"})]}),(((K=r==null?void 0:r.company)==null?void 0:K.length)??0)>0&&e.jsxs(e.Fragment,{children:[e.jsx(Pe,{sx:{my:1}}),e.jsxs(Fi,{value:"Add Company",onClick:()=>{v(!1),x.current&&x.current.blur(),n(!0)},children:[e.jsx($e,{sx:{width:36,height:36,mr:2,ml:1,objectFit:"contain",bgcolor:Gt("Add Company"),fontSize:".9rem",fontWeight:700,boxShadow:`0 4px 12px ${d(Gt("Add Company"),.3)}`,transition:"all 0.3s ease",transform:"scale(1)","&:hover":{transform:"scale(1.1)"}},children:e.jsx(To,{sx:{fontSize:"1rem",color:"primary.main"}})}),e.jsx(tt,{primary:"Add Company",secondary:"Create New Company"})]})]})]}),e.jsx(yo,{open:a,onClose:()=>{n(!1)},company:null,onCreated:async w=>{t(Vc(w)),localStorage.setItem("current_company_id",w),n(!1),t(Ia()),r.user_type!=="admin"&&(t(jr()),t(vr()))}})]})}function su({open:t,toggleDrawer:a}){var w,N,R,L;const n=Fe(),s=Ke(),r=we(),o=un(),p=yt(r.breakpoints.down("sm")),[c,x]=g.useState({}),{user:u,current_company_id:S}=Ce(D=>D.auth),f=S||localStorage.getItem("current_company_id")||((w=u==null?void 0:u.user_settings)==null?void 0:w.current_company_id)||"",v=(N=u==null?void 0:u.company)==null?void 0:N.find(D=>D._id===f),j=(L=(R=v==null?void 0:v.company_settings)==null?void 0:R.features)==null?void 0:L.enable_tax,T=Vs((u==null?void 0:u.user_type)??hr.NULL,j),k=D=>{s(D)},B=()=>{if(!(u!=null&&u.name))return"TD";const{first:D,last:P}=u.name;return`${(D==null?void 0:D[0])??""}${(P==null?void 0:P[0])??""}`.toUpperCase()},_=D=>{D.stopPropagation(),n(Yr()).unwrap().then(()=>{Z.success("Logged out successfully!"),s("/")}).catch(P=>{Z.error(P||"An unexpected error occurred. Please try again later.")})},K=D=>{const P=A=>{Array.isArray(A.children)&&A.children.length>0?(x({[A.text]:!0}),A.children[0]&&A.children[0].path&&(k(A.children[0].path),a(!1))):(x({}),A.path&&(a(!1),k(A.path)))};return e.jsx(xa,{children:D.map((A,O)=>{const y=Array.isArray(A.children)&&A.children.length>0,F=c[A.text];return e.jsxs(Ft.Fragment,{children:[e.jsx(le,{title:A.text,placement:"right",arrow:!0,children:e.jsx(Kt,{onClick:()=>P(A),disablePadding:!0,sx:{display:"block",my:.1,transition:"background-color 0.2s ease","&:hover":{backgroundColor:r.palette.action.hover}},children:e.jsxs(li,{selected:!!A.path&&o.pathname.includes(A.path),sx:{minHeight:38,justifyContent:p?"center":"initial",px:2.5,borderRadius:1,"&.Mui-selected":{backgroundColor:r.palette.primary.light,color:r.palette.mode==="dark"?r.palette.common.white:r.palette.common.black,fontWeight:r.typography.fontWeightBold}},children:[e.jsx(vt,{sx:{minWidth:0,mr:p?0:3,justifyContent:"center"},children:A.icon}),e.jsx(tt,{primary:A.text}),y?F?e.jsx(Ar,{}):e.jsx(Pr,{}):null]})})}),y&&e.jsx(Xt,{in:F,timeout:"auto",unmountOnExit:!0,children:e.jsx(xa,{component:"div",disablePadding:!0,children:A.children.map((h,b)=>e.jsx(Kt,{disablePadding:!0,onClick:()=>h.path&&k(h.path),children:e.jsxs(li,{selected:!!h.path&&o.pathname.includes(h.path),sx:{pl:6,minHeight:36,"&.Mui-selected":{backgroundColor:r.palette.primary.light,fontWeight:r.typography.fontWeightBold}},children:[e.jsx(vt,{sx:{minWidth:0,mr:2},children:h.icon}),e.jsx(tt,{primary:h.text})]})},`${A.text}-${b}`))})})]},O)})})};return e.jsx(Mt,{anchor:"right",open:t,onClose:()=>a(!1),sx:{zIndex:D=>D.zIndex.drawer+1,[`& .${io.paper}`]:{backgroundImage:"none",backgroundColor:"background.paper"}},children:e.jsxs(J,{sx:{maxWidth:"70dvw",height:"100%",position:"relative"},children:[e.jsx(J,{direction:"row",alignItems:"center",sx:{p:2,gap:1},children:e.jsx(J,{direction:"row",sx:{gap:1,alignItems:"center",flexGrow:1},children:e.jsx(l,{sx:{display:"flex"},children:e.jsx(Zs,{})})})}),e.jsx(Pe,{}),e.jsxs(J,{sx:{flexGrow:1},children:[e.jsxs(J,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",px:1},children:[K(T),e.jsx(Pe,{sx:{mb:"auto"}}),e.jsx(Pe,{sx:{mt:"auto"}}),K(Qs)]}),e.jsx(Pe,{})]}),e.jsx(J,{sx:{py:1,px:2},children:e.jsxs(J,{direction:"row",sx:{gap:1,alignItems:"center",justifyContent:"space-between",flexGrow:1},children:[e.jsx($e,{sx:{width:40,height:40,bgcolor:r.palette.primary.main,color:r.palette.primary.contrastText,transition:"transform 0.2s ease",":hover":{transform:"scale(1.1)"}},children:B()}),e.jsx(i,{variant:"body1",children:u!=null&&u.name?`${u.name.first??""} ${u.name.last??""}`.trim():"Vyapar Drishti Team"}),e.jsx(le,{title:"Logout",placement:"top",arrow:!0,children:e.jsx(ke,{size:"small",onClick:_,sx:{color:r.palette.text.secondary,transition:"color 0.2s ease"},children:e.jsx(us,{fontSize:"small"})})})]})})]})})}function xn({showBadge:t=!1,...a}){return e.jsx(Ka,{color:"error",variant:"dot",invisible:!t,sx:{[`& .${od.badge}`]:{right:2,top:2}},children:e.jsx(ke,{size:"small",...a})})}const Li=[{id:1,title:"Project Update",description:"Your project 'Dashboard Redesign' has been approved.",time:"5 mins ago",type:"success"},{id:2,description:"Monthly team meeting scheduled for next Monday.",title:"Meeting Reminder",time:"2 hours ago",type:"info"},{id:3,title:"Resource Alert",description:"Low storage space on your project repository.",time:"Yesterday",type:"error"}];function Xs(){const[t,a]=g.useState(null),n=!!t,s=p=>{a(p.currentTarget)},r=()=>{a(null)},o=p=>{switch(p){case"success":return e.jsx(Xi,{color:"success"});case"error":return e.jsx(xs,{color:"error"});default:return e.jsx(ld,{color:"info"})}};return e.jsxs(g.Fragment,{children:[e.jsx(Ka,{badgeContent:Li.length,color:"primary",overlap:"circular",children:e.jsx(xn,{"data-screenshot":"toggle-mode",onClick:s,disableRipple:!0,size:"small","aria-label":"Open notifications","aria-controls":n?"notifications-menu":void 0,"aria-haspopup":"true","aria-expanded":n?"true":void 0,children:e.jsx(sd,{})})}),e.jsxs(Mr,{anchorEl:t,id:"notifications-menu",open:n,onClose:r,onClick:p=>{p.stopPropagation(),r()},slotProps:{paper:{variant:"outlined",elevation:0,sx:{my:"4px",width:"350px",maxHeight:"400px",overflowY:"auto"}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[e.jsx(i,{variant:"h6",sx:{px:2,py:1,borderBottom:"1px solid",borderColor:"divider"},children:"Notifications"}),Li.map(p=>e.jsxs(he,{sx:{display:"flex",alignItems:"center",gap:2,py:1.5},children:[o(p.type),e.jsxs(l,{sx:{flexGrow:1},children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:"bold"},children:p.title}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"wrap"},children:p.description}),e.jsx(i,{variant:"caption",color:"text.disabled",children:p.time})]})]},p.id)),Li.length===0&&e.jsx(he,{disabled:!0,children:e.jsx(i,{variant:"body2",color:"text.secondary",children:"No notifications"})})]})]})}function jo(t){return e.jsx(ps,{children:e.jsx(lu,{...t})})}function lu(t){const{mode:a,systemMode:n,setMode:s}=wi(),[r,o]=g.useState(null),p=!!r,c=v=>{o(v.currentTarget)},x=()=>{o(null)},u=v=>()=>{s(v),x()};if(!a)return e.jsx(l,{"data-screenshot":"toggle-mode",sx:v=>({verticalAlign:"bottom",display:"inline-flex",width:"2.25rem",height:"2.25rem",borderRadius:v.shape.borderRadius,border:"1px solid",borderColor:v.palette.divider})});const S=n||a,f={light:e.jsx(Po,{"aria-label":"Light mode"}),dark:e.jsx(Mo,{"aria-label":"Dark mode"}),system:e.jsx(Ao,{"aria-label":"System mode"})};return e.jsxs(g.Fragment,{children:[e.jsx(le,{title:"Change color mode",children:e.jsx(ke,{"data-screenshot":"toggle-mode",onClick:c,"aria-controls":p?"color-scheme-menu":void 0,"aria-haspopup":"true","aria-expanded":p?"true":void 0,color:"inherit",size:"small",...t,children:f[S]})}),e.jsxs(Mr,{anchorEl:r,id:"color-scheme-menu",open:p,onClose:x,onClick:v=>{v.stopPropagation(),x()},slotProps:{paper:{elevation:2,sx:{minWidth:"200px",borderRadius:1,boxShadow:"0 4px 6px rgba(0,0,0,0.1)"}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[e.jsxs(he,{selected:a==="system",onClick:u("system"),sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(vt,{children:e.jsx(Ao,{fontSize:"small"})}),e.jsx(tt,{primary:"System",secondary:"Follow device settings"})]}),e.jsxs(he,{selected:a==="light",onClick:u("light"),sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(vt,{children:e.jsx(Po,{fontSize:"small"})}),e.jsx(tt,{primary:"Light",secondary:"Always use light theme"})]}),e.jsxs(he,{selected:a==="dark",onClick:u("dark"),sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(vt,{children:e.jsx(Mo,{fontSize:"small"})}),e.jsx(tt,{primary:"Dark",secondary:"Always use dark theme"})]})]})]})}const du=Ge(oo)({width:"100%",padding:"12px",display:"flex",flexDirection:"column",alignItems:"start",justifyContent:"center",gap:"12px",flexShrink:0,[`& ${dd.flexContainer}`]:{gap:"8px",p:"8px",pb:0}});function cu(){const[t,a]=g.useState(!1);return e.jsx(so,{position:"fixed",sx:{display:{xs:"auto",md:"none"},boxShadow:0,bgcolor:"background.paper",backgroundImage:"none",borderBottom:"1px solid",borderColor:"divider",top:"var(--template-frame-height, 0px)"},children:e.jsx(du,{variant:"regular",children:e.jsxs(J,{direction:"row",sx:{alignItems:"center",flexGrow:1,width:"100%",gap:1},children:[e.jsxs(J,{direction:"row",spacing:1,sx:{justifyContent:"center",mr:"auto"},children:[e.jsx(uu,{}),e.jsx(i,{variant:"h6",sx:{color:"text.primary"},children:"Home"})]}),e.jsx(xn,{"aria-label":"menu",onClick:()=>a(!0),children:e.jsx(cd,{})}),e.jsx(l,{sx:{color:"black"},children:e.jsx(jo,{})}),e.jsx(Xs,{}),e.jsx(su,{open:t,toggleDrawer:a})]})})})}function uu(){return e.jsx(l,{sx:{width:"1.2rem",height:"1.2rem",bgcolor:"black",borderRadius:"999px",display:"flex",justifyContent:"center",alignItems:"center",alignSelf:"center",backgroundImage:"linear-gradient(135deg, hsl(210, 98%, 60%) 0%, hsl(210, 100%, 35%) 100%)",color:"hsla(210, 100%, 95%, 0.9)",border:"1px solid",borderColor:"hsl(210, 100%, 55%)",boxShadow:"inset 0 2px 5px rgba(255, 255, 255, 0.3)"},children:e.jsx(ud,{color:"inherit",sx:{fontSize:".8rem"}})})}function xu(t){const{setOpen:a,label:n,id:s,disabled:r,InputProps:{ref:o}={},inputProps:{"aria-label":p}={}}=t;return e.jsx(ee,{variant:"outlined",id:s,disabled:r,ref:o,"aria-label":p,size:"small",onClick:()=>a==null?void 0:a(c=>!c),startIcon:e.jsx(pd,{fontSize:"small"}),sx:{minWidth:"fit-content"},children:n?`${n}`:"Pick a date"})}function pu(){return e.jsx(Pt,{dateAdapter:xd,children:e.jsx(Xe,{value:Di(new Date),label:Di(new Date)==null?null:Di(new Date).format("MMM DD, YYYY"),slots:{field:xu},slotProps:{nextIconButton:{size:"small"},previousIconButton:{size:"small"}},views:["year","month","day"]})})}const Vr=vi.create({baseURL:"http://localhost:8010/api/v1/admin",withCredentials:!0});Vr.interceptors.response.use(t=>(t.data.adminAccessToken&&t.data.adminRefreshToken&&(localStorage.setItem("accessToken",t.data.adminAccessToken),localStorage.setItem("refreshToken",t.data.adminRefreshToken)),t),async t=>{var n;const a=t.config;if(((n=t.response)==null?void 0:n.status)===401&&!a._retry){a._retry=!0;try{const{data:s}=await vi.post("undefined/auth/refresh",{},{withCredentials:!0});return localStorage.setItem("accessToken",s.adminAccessToken),localStorage.setItem("refreshToken",s.adminRefreshToken),Vr.defaults.headers.common.Authorization=`Bearer ${s.adminAccessToken}`,a.headers.Authorization=`Bearer ${s.adminAccessToken}`,Vr(a)}catch(s){console.error("Token refresh failed:",s),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/"}}return Promise.reject(t)});const Nn=ye("get/entity/name",async({entity:t,id:a},{rejectWithValue:n})=>{var s,r;try{const o=await be.get(`user/entity-name/${t}/${a}`);return o.data.success===!0?{name:o.data.data}:n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}});ye("create/user",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await Vr.post("/create/user",t);return r.data.success===!0?{id:r.data.id}:a("Login Failed: No access token recieved.")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}});const hu=ye("update/user",async({data:t,id:a},{rejectWithValue:n})=>{var s,r;try{return(await be.put(`/user/update/${a}`,t)).data.success===!0?void 0:n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}}),Oi=ye("update/user/settings",async({id:t,data:a},{rejectWithValue:n})=>{var s,r;try{const o=await be.put(`/user/settings/update/${t}`,a);return o.data.success===!0?o.data.data:n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}}),mu=Ge(hd)(({theme:t})=>({margin:t.spacing(1,0),[`& .${Ro.separator}`]:{color:t.palette.action.disabled,margin:1},[`& .${Ro.ol}`]:{alignItems:"center"}}));function gu(){const t=un(),a=Ke(),n=Fe(),[s,r]=g.useState({}),o=t.pathname.split("/").filter(Boolean);return g.useEffect(()=>{(async()=>{const c={};for(let x=0;x<o.length;x++){const u=o[x];if(/^[0-9a-fA-F-]{36}$/.test(u)){const S=o[x-1];if(!S)continue;try{const f=await n(Nn({entity:S,id:u}));f.meta.requestStatus==="fulfilled"?c[u]=f.payload.name:console.error(`Failed to fetch name for ${S} ID ${u}`,f)}catch(f){console.error(`Failed to fetch name for ${S} ID ${u}`,f)}}}r(x=>({...x,...c}))})()},[t.pathname]),e.jsxs(mu,{"aria-label":"breadcrumb",separator:e.jsx(md,{fontSize:"small"}),children:[e.jsx(i,{variant:"body1",sx:{cursor:"pointer",":hover":{textDecoration:"underline"}},onClick:()=>{a("/")},children:"Home"}),o.map((p,c)=>{const x=s[p]||p.charAt(0).toUpperCase()+p.slice(1),u=c===o.length-1,S="/"+o.slice(0,c+1).join("/");return e.jsx(i,{variant:"body1",onClick:()=>!u&&a(S),sx:{color:"text.primary",fontWeight:600,cursor:u?"default":"pointer",":hover":{textDecoration:u?"none":"underline"}},children:x},c)})]})}function bu(){return e.jsx(qe,{sx:{width:{xs:"100%",md:"25ch"}},variant:"outlined",children:e.jsx(gd,{size:"small",id:"search",placeholder:"Search…",sx:{flexGrow:1},startAdornment:e.jsx(se,{position:"start",sx:{color:"text.primary"},children:e.jsx(bd,{fontSize:"small"})}),inputProps:{"aria-label":"search"}})})}function fu(){return e.jsxs(J,{direction:"row",sx:{display:{xs:"none",md:"flex"},width:"100%",alignItems:{xs:"flex-start",md:"center"},justifyContent:"space-between",maxWidth:"100%",pt:1.5},spacing:2,children:[e.jsx(gu,{}),e.jsxs(J,{direction:"row",sx:{gap:1},children:[e.jsx(bu,{}),e.jsx(pu,{}),e.jsx(Xs,{}),e.jsx(jo,{})]})]})}function yu({toggleDrawer:t}){var k,B,_,K;const a=un(),n=Ke(),s=we(),r=yt(s.breakpoints.down("sm")),{user:o,current_company_id:p}=Ce(w=>w.auth),c=p||localStorage.getItem("current_company_id")||((k=o==null?void 0:o.user_settings)==null?void 0:k.current_company_id)||"",x=(B=o==null?void 0:o.company)==null?void 0:B.find(w=>w._id===c),u=(K=(_=x==null?void 0:x.company_settings)==null?void 0:_.features)==null?void 0:K.enable_tax,[S,f]=g.useState({}),v=Vs((o==null?void 0:o.user_type)??hr.NULL,u),j=w=>{n(w)},T=w=>{const N=R=>{Array.isArray(R.children)&&R.children.length>0?(f({[R.text]:!0}),R.children[0]&&R.children[0].path&&(j(R.children[0].path),t&&t(!1))):(f({}),R.path&&(t&&t(!1),j(R.path)))};return e.jsx(xa,{children:w.map((R,L)=>{const D=Array.isArray(R.children)&&R.children.length>0,P=S[R.text];return e.jsxs(Ft.Fragment,{children:[e.jsx(le,{title:R.text,placement:"right",arrow:!0,children:e.jsx(Kt,{onClick:()=>N(R),disablePadding:!0,sx:{display:"block",my:.1,transition:"background-color 0.2s ease","&:hover":{backgroundColor:s.palette.action.hover}},children:e.jsxs(li,{selected:!!R.path&&a.pathname.includes(R.path),sx:{minHeight:38,justifyContent:r?"center":"initial",px:2.5,borderRadius:1,"&.Mui-selected":{backgroundColor:s.palette.primary.light,color:s.palette.mode==="dark"?s.palette.common.white:s.palette.common.black,fontWeight:s.typography.fontWeightBold}},children:[e.jsx(vt,{sx:{minWidth:0,mr:r?0:2,justifyContent:"center"},children:R.icon}),e.jsx(tt,{primary:R.text}),D?P?e.jsx(Ar,{}):e.jsx(Pr,{}):null]})})}),D&&e.jsx(Xt,{in:P,timeout:"auto",unmountOnExit:!0,children:e.jsx(xa,{component:"div",disablePadding:!0,children:R.children.map((A,O)=>e.jsx(Kt,{disablePadding:!0,onClick:()=>A.path&&j(A.path),children:e.jsxs(li,{selected:!!A.path&&a.pathname.includes(A.path),sx:{pl:6,minHeight:36,"&.Mui-selected":{backgroundColor:s.palette.primary.light,fontWeight:s.typography.fontWeightBold}},children:[e.jsx(vt,{sx:{minWidth:0,mr:2},children:A.icon}),e.jsx(tt,{primary:A.text})]})},`${R.text}-${O}`))})})]},L)})})};return e.jsxs(J,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",px:1},children:[T(v),e.jsx(Pe,{sx:{mb:"auto"}}),e.jsx(Pe,{sx:{mt:"auto"}}),T(Qs)]})}const Ho=280,ju=Ge(Mt)(({theme:t})=>({width:Ho,flexShrink:0,zIndex:1100,boxSizing:"border-box",transition:t.transitions.create(["width","transform"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen}),[`& .${io.paper}`]:{width:Ho,boxSizing:"border-box",overflow:"hidden",borderRight:`1px solid ${t.palette.divider}`,boxShadow:t.shadows[1]}}));function vu(){const t=Fe(),{user:a}=Ce(p=>p.auth),n=Ke(),s=we(),r=()=>{if(!(a!=null&&a.name))return"TD";const{first:p,last:c}=a.name;return`${(p==null?void 0:p[0])??""}${(c==null?void 0:c[0])??""}`.toUpperCase()},o=p=>{p.stopPropagation(),t(Yr()).unwrap().then(()=>{Z.success("Logged out successfully!"),n("/")}).catch(c=>{Z.error(c||"An unexpected error occurred. Please try again later.")})};return e.jsxs(ju,{variant:"permanent",sx:{display:{xs:"none",md:"block"},[`& .${io.paper}`]:{backgroundColor:"background.paper"}},children:[e.jsx(l,{sx:{display:"flex",mt:"calc(var(--template-frame-height, 0px) + 4px)",p:1},children:e.jsx(Zs,{})}),e.jsx(Pe,{sx:{my:0}}),e.jsx(l,{sx:{overflow:"auto",height:"100%",display:"flex",flexDirection:"column"},children:e.jsx(yu,{})}),e.jsxs(J,{direction:"row",className:"group",sx:{p:2,gap:1,alignItems:"center",borderTop:`1px solid ${s.palette.divider}`,transition:"background-color 0.2s ease"},children:[e.jsx($e,{sx:{width:40,height:40,bgcolor:s.palette.primary.main,color:s.palette.primary.contrastText,transition:"transform 0.2s ease",":hover":{transform:"scale(1.1)"}},children:r()}),e.jsxs(l,{sx:{mr:"auto",opacity:.8,transition:"opacity 0.2s ease"},children:[e.jsx(i,{variant:"body2",sx:{fontWeight:600,lineHeight:"16px",color:s.palette.text.primary},children:a?`${a.name.first??""} ${a.name.last??""}`.trim():"DristiDocs Team"}),e.jsx(i,{variant:"caption",sx:{color:s.palette.text.secondary,maxWidth:180,overflow:"hidden",textOverflow:"ellipsis"},children:(a==null?void 0:a.email.substring(0,25))??"team@dristidocs.com"})]}),e.jsx(le,{title:"Logout",placement:"top",arrow:!0,children:e.jsx(ke,{size:"small",onClick:o,sx:{color:s.palette.text.secondary,transition:"color 0.2s ease"},children:e.jsx(us,{fontSize:"small"})})})]})]})}const Vt=lo();[...Vt.shadows];const Le={50:"hsl(195, 70%, 95%)",100:"hsl(195, 70%, 90%)",200:"hsl(195, 70%, 80%)",300:"hsl(195, 70%, 65%)",400:"hsl(195, 75%, 50%)",500:"hsl(195, 85%, 40%)",600:"hsl(195, 90%, 32%)",700:"hsl(195, 95%, 25%)",800:"hsl(195, 100%, 18%)",900:"hsl(195, 100%, 12%)"},fe={50:"hsl(220, 35%, 97%)",100:"hsl(220, 30%, 94%)",200:"hsl(220, 20%, 88%)",300:"hsl(220, 20%, 80%)",400:"hsl(220, 20%, 65%)",500:"hsl(220, 20%, 42%)",600:"hsl(220, 20%, 35%)",700:"hsl(220, 20%, 25%)",800:"hsl(220, 30%, 6%)",900:"hsl(220, 35%, 3%)"},Ot={50:"hsl(120, 80%, 98%)",100:"hsl(120, 75%, 94%)",200:"hsl(120, 75%, 87%)",300:"hsl(120, 61%, 77%)",400:"hsl(120, 44%, 53%)",500:"hsl(120, 59%, 30%)",600:"hsl(120, 70%, 25%)",700:"hsl(120, 75%, 16%)",800:"hsl(120, 84%, 10%)",900:"hsl(120, 87%, 6%)"},Qt={50:"hsl(45, 100%, 97%)",100:"hsl(45, 92%, 90%)",200:"hsl(45, 94%, 80%)",300:"hsl(45, 90%, 65%)",400:"hsl(45, 90%, 40%)",500:"hsl(45, 90%, 35%)",600:"hsl(45, 91%, 25%)",700:"hsl(45, 94%, 20%)",800:"hsl(45, 95%, 16%)",900:"hsl(45, 93%, 12%)"},Ct={50:"hsl(0, 100%, 97%)",100:"hsl(0, 92%, 90%)",200:"hsl(0, 94%, 80%)",300:"hsl(0, 90%, 65%)",400:"hsl(0, 90%, 40%)",500:"hsl(0, 90%, 30%)",600:"hsl(0, 91%, 25%)",700:"hsl(0, 94%, 18%)",800:"hsl(0, 95%, 12%)",900:"hsl(0, 93%, 6%)"},qo={light:{palette:{primary:{light:Le[200],main:Le[400],dark:Le[700],contrastText:Le[50]},info:{light:Le[100],main:Le[300],dark:Le[600],contrastText:fe[50]},warning:{light:Qt[300],main:Qt[400],dark:Qt[800]},error:{light:Ct[300],main:Ct[400],dark:Ct[800]},success:{light:Ot[300],main:Ot[400],dark:Ot[800]},grey:{...fe},divider:d(fe[300],.4),background:{default:"hsl(0, 0%, 99%)",paper:"hsl(220, 35%, 97%)"},text:{primary:fe[800],secondary:fe[600],warning:Qt[400],error:Ct[400]},action:{hover:d(fe[200],.2),selected:`${d(fe[200],.3)}`},baseShadow:"hsla(220, 30%, 5%, 0.07) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.07) 0px 8px 16px -5px"}},dark:{palette:{primary:{contrastText:Le[50],light:Le[300],main:Le[400],dark:Le[700]},info:{contrastText:Le[300],light:Le[500],main:Le[700],dark:Le[900]},warning:{light:Qt[400],main:Qt[500],dark:Qt[700]},error:{light:Ct[400],main:Ct[500],dark:Ct[700]},success:{light:Ot[400],main:Ot[500],dark:Ot[700]},grey:{...fe},divider:d(fe[700],.6),background:{default:fe[900],paper:"hsl(220, 30%, 7%)"},text:{primary:"hsl(0, 0%, 100%)",secondary:fe[400],warning:Qt[400],error:Ct[400]},action:{hover:d(fe[600],.2),selected:d(fe[600],.3)},baseShadow:"hsla(220, 30%, 5%, 0.7) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.8) 0px 8px 16px -5px"}}},Su={fontFamily:"Inter, sans-serif",h1:{fontSize:Vt.typography.pxToRem(48),fontWeight:600,lineHeight:1.2,letterSpacing:-.5},h2:{fontSize:Vt.typography.pxToRem(36),fontWeight:600,lineHeight:1.2},h3:{fontSize:Vt.typography.pxToRem(30),lineHeight:1.2},h4:{fontSize:Vt.typography.pxToRem(24),fontWeight:600,lineHeight:1.5},h5:{fontSize:Vt.typography.pxToRem(20),fontWeight:600},h6:{fontSize:Vt.typography.pxToRem(18),fontWeight:600},subtitle1:{fontSize:Vt.typography.pxToRem(18)},subtitle2:{fontSize:Vt.typography.pxToRem(14),fontWeight:500},body1:{fontSize:Vt.typography.pxToRem(14)},body2:{fontSize:Vt.typography.pxToRem(14),fontWeight:400},caption:{fontSize:Vt.typography.pxToRem(12),fontWeight:400}},_u={borderRadius:8},wu=["none","var(--template-palette-baseShadow)",...Vt.shadows.slice(2)],Cu=wu,ku={MuiButtonBase:{defaultProps:{disableTouchRipple:!0,disableRipple:!0},styleOverrides:{root:({theme:t})=>({boxSizing:"border-box",transition:"all 100ms ease-in","&:focus-visible":{outline:`3px solid ${d(t.palette.primary.main,.5)}`,outlineOffset:"2px"}})}},MuiButton:{styleOverrides:{root:({theme:t})=>({boxShadow:"none",borderRadius:t.shape.borderRadius,textTransform:"none",variants:[{props:{size:"small"},style:{height:"2.25rem",padding:"8px 12px"}},{props:{size:"medium"},style:{height:"2.5rem"}},{props:{color:"primary",variant:"contained"},style:{color:"white",backgroundColor:fe[900],backgroundImage:`linear-gradient(to bottom, ${fe[700]}, ${fe[800]})`,boxShadow:`inset 0 1px 0 ${fe[600]}, inset 0 -1px 0 1px hsl(220, 0%, 0%)`,border:`1px solid ${fe[700]}`,"&:hover":{backgroundImage:"none",backgroundColor:fe[700],boxShadow:"none"},"&:active":{backgroundColor:fe[800]},...t.applyStyles("dark",{color:"black",backgroundColor:fe[50],backgroundImage:`linear-gradient(to bottom, ${fe[100]}, ${fe[50]})`,boxShadow:"inset 0 -1px 0  hsl(220, 30%, 80%)",border:`1px solid ${fe[50]}`,"&:hover":{backgroundImage:"none",backgroundColor:fe[300],boxShadow:"none"},"&:active":{backgroundColor:fe[400]}})}},{props:{color:"secondary",variant:"contained"},style:{color:"white",backgroundColor:Le[300],backgroundImage:`linear-gradient(to bottom, ${d(Le[400],.8)}, ${Le[500]})`,boxShadow:`inset 0 2px 0 ${d(Le[200],.2)}, inset 0 -2px 0 ${d(Le[700],.4)}`,border:`1px solid ${Le[500]}`,"&:hover":{backgroundColor:Le[700],boxShadow:"none"},"&:active":{backgroundColor:Le[700],backgroundImage:"none"}}},{props:{variant:"outlined"},style:{color:t.palette.text.primary,border:"1px solid",borderColor:fe[200],backgroundColor:d(fe[50],.3),"&:hover":{backgroundColor:fe[100],borderColor:fe[300]},"&:active":{backgroundColor:fe[200]},...t.applyStyles("dark",{backgroundColor:fe[800],borderColor:fe[700],"&:hover":{backgroundColor:fe[900],borderColor:fe[600]},"&:active":{backgroundColor:fe[900]}})}},{props:{color:"secondary",variant:"outlined"},style:{color:Le[700],border:"1px solid",borderColor:Le[200],backgroundColor:Le[50],"&:hover":{backgroundColor:Le[100],borderColor:Le[400]},"&:active":{backgroundColor:d(Le[200],.7)},...t.applyStyles("dark",{color:Le[50],border:"1px solid",borderColor:Le[900],backgroundColor:d(Le[900],.3),"&:hover":{borderColor:Le[700],backgroundColor:d(Le[900],.6)},"&:active":{backgroundColor:d(Le[900],.5)}})}},{props:{variant:"text"},style:{color:fe[600],"&:hover":{backgroundColor:fe[100]},"&:active":{backgroundColor:fe[200]},...t.applyStyles("dark",{color:fe[50],"&:hover":{backgroundColor:fe[700]},"&:active":{backgroundColor:d(fe[700],.7)}})}},{props:{color:"secondary",variant:"text"},style:{color:Le[700],"&:hover":{backgroundColor:d(Le[100],.5)},"&:active":{backgroundColor:d(Le[200],.7)},...t.applyStyles("dark",{color:Le[100],"&:hover":{backgroundColor:d(Le[900],.5)},"&:active":{backgroundColor:d(Le[900],.3)}})}}]})}},MuiIconButton:{styleOverrides:{root:({theme:t})=>({boxShadow:"none",borderRadius:t.shape.borderRadius,textTransform:"none",fontWeight:t.typography.fontWeightMedium,letterSpacing:0,color:t.palette.text.primary,border:"1px solid ",borderColor:fe[200],backgroundColor:d(fe[50],.3),"&:hover":{backgroundColor:fe[100],borderColor:fe[300]},"&:active":{backgroundColor:fe[200]},...t.applyStyles("dark",{backgroundColor:fe[800],borderColor:fe[700],"&:hover":{backgroundColor:fe[900],borderColor:fe[600]},"&:active":{backgroundColor:fe[900]}}),variants:[{props:{size:"small"},style:{width:"2.25rem",height:"2.25rem",padding:"0.25rem",[`& .${_n.root}`]:{fontSize:"1rem"}}},{props:{size:"medium"},style:{width:"2.5rem",height:"2.5rem"}}]})}},MuiToggleButtonGroup:{styleOverrides:{root:({theme:t})=>({borderRadius:"10px",boxShadow:`0 4px 16px ${d(fe[400],.2)}`,[`& .${Wo.selected}`]:{color:Le[500]},...t.applyStyles("dark",{[`& .${Wo.selected}`]:{color:"#fff"},boxShadow:`0 4px 16px ${d(Le[700],.5)}`})})}},MuiToggleButton:{styleOverrides:{root:({theme:t})=>({padding:"12px 16px",textTransform:"none",borderRadius:"10px",fontWeight:500,...t.applyStyles("dark",{color:fe[400],boxShadow:"0 4px 16px rgba(0, 0, 0, 0.5)",[`&.${fd.selected}`]:{color:Le[300]}})})}}},Iu={MuiList:{styleOverrides:{root:{padding:"8px",display:"flex",flexDirection:"column",gap:0}}},MuiListItem:{styleOverrides:{root:({theme:t})=>({[`& .${_n.root}`]:{width:"1rem",height:"1rem",color:t.palette.text.secondary},[`& .${yd.root}`]:{fontWeight:500},[`& .${hs.root}`]:{display:"flex",gap:8,padding:"2px 8px",borderRadius:t.shape.borderRadius,opacity:.7,"&.Mui-selected":{opacity:1,backgroundColor:d(t.palette.action.selected,.3),[`& .${_n.root}`]:{color:t.palette.text.primary},"&:focus-visible":{backgroundColor:d(t.palette.action.selected,.3)},"&:hover":{backgroundColor:d(t.palette.action.selected,.5)}},"&:focus-visible":{backgroundColor:"transparent"}}})}},MuiListItemText:{styleOverrides:{primary:({theme:t})=>({fontSize:t.typography.body2.fontSize,fontWeight:500,lineHeight:t.typography.body2.lineHeight}),secondary:({theme:t})=>({fontSize:t.typography.caption.fontSize,lineHeight:t.typography.caption.lineHeight})}},MuiListSubheader:{styleOverrides:{root:({theme:t})=>({backgroundColor:"transparent",padding:"4px 8px",fontSize:t.typography.caption.fontSize,fontWeight:500,lineHeight:t.typography.caption.lineHeight})}},MuiListItemIcon:{styleOverrides:{root:{minWidth:0}}},MuiChip:{defaultProps:{size:"small"},styleOverrides:{root:({theme:t})=>({border:"1px solid",borderRadius:"999px",[`& .${Rt.label}`]:{fontWeight:600},variants:[{props:{color:"default"},style:{borderColor:fe[200],backgroundColor:fe[100],[`& .${Rt.label}`]:{color:fe[500]},[`& .${Rt.icon}`]:{color:fe[500]},...t.applyStyles("dark",{borderColor:fe[700],backgroundColor:fe[800],[`& .${Rt.label}`]:{color:fe[300]},[`& .${Rt.icon}`]:{color:fe[300]}})}},{props:{color:"success"},style:{borderColor:Ot[200],backgroundColor:Ot[50],[`& .${Rt.label}`]:{color:Ot[500]},[`& .${Rt.icon}`]:{color:Ot[500]},...t.applyStyles("dark",{borderColor:Ot[800],backgroundColor:Ot[900],[`& .${Rt.label}`]:{color:Ot[300]},[`& .${Rt.icon}`]:{color:Ot[300]}})}},{props:{color:"error"},style:{borderColor:Ct[100],backgroundColor:Ct[50],[`& .${Rt.label}`]:{color:Ct[500]},[`& .${Rt.icon}`]:{color:Ct[500]},...t.applyStyles("dark",{borderColor:Ct[800],backgroundColor:Ct[900],[`& .${Rt.label}`]:{color:Ct[200]},[`& .${Rt.icon}`]:{color:Ct[300]}})}},{props:{size:"small"},style:{maxHeight:20,[`& .${Rt.label}`]:{fontSize:t.typography.caption.fontSize},[`& .${_n.root}`]:{fontSize:t.typography.caption.fontSize}}},{props:{size:"medium"},style:{[`& .${Rt.label}`]:{fontSize:t.typography.caption.fontSize}}}]})}},MuiTablePagination:{styleOverrides:{actions:{display:"flex",gap:8,marginRight:6,[`& .${jd.root}`]:{minWidth:0,width:36,height:36}}}},MuiIcon:{defaultProps:{fontSize:"small"},styleOverrides:{root:{variants:[{props:{fontSize:"small"},style:{fontSize:"1rem"}}]}}}},Tu={MuiAlert:{styleOverrides:{root:({theme:t})=>({borderRadius:10,backgroundColor:Qt[100],color:t.palette.text.primary,border:`1px solid ${d(Qt[300],.5)}`,"& .MuiAlert-icon":{color:Qt[500]},...t.applyStyles("dark",{backgroundColor:`${d(Qt[900],.5)}`,border:`1px solid ${d(Qt[800],.5)}`})})}},MuiDialog:{styleOverrides:{root:({theme:t})=>({"& .MuiDialog-paper":{borderRadius:"10px",border:"1px solid",borderColor:t.palette.divider}})}},MuiLinearProgress:{styleOverrides:{root:({theme:t})=>({height:8,borderRadius:8,backgroundColor:fe[200],...t.applyStyles("dark",{backgroundColor:fe[800]})})}}},Au={MuiMenuItem:{styleOverrides:{root:({theme:t})=>({borderRadius:t.shape.borderRadius,padding:"6px 8px",[`&.${Wi.focusVisible}`]:{backgroundColor:"transparent"},[`&.${Wi.selected}`]:{[`&.${Wi.focusVisible}`]:{backgroundColor:d(t.palette.action.selected,.3)}}})}},MuiMenu:{styleOverrides:{list:{gap:"0px",[`&.${vd.root}`]:{margin:"0 -8px"}},paper:({theme:t})=>({marginTop:"4px",borderRadius:t.shape.borderRadius,border:`1px solid ${t.palette.divider}`,backgroundImage:"none",background:"hsl(0, 0%, 100%)",boxShadow:"hsla(220, 30%, 5%, 0.07) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.07) 0px 8px 16px -5px",[`& .${hs.root}`]:{"&.Mui-selected":{backgroundColor:d(t.palette.action.selected,.3)}},...t.applyStyles("dark",{background:fe[900],boxShadow:"hsla(220, 30%, 5%, 0.7) 0px 4px 16px 0px, hsla(220, 25%, 10%, 0.8) 0px 8px 16px -5px"})})}},MuiSelect:{defaultProps:{IconComponent:g.forwardRef((t,a)=>e.jsx(Sd,{fontSize:"small",...t,ref:a}))},styleOverrides:{root:({theme:t})=>({borderRadius:t.shape.borderRadius,border:"1px solid",borderColor:fe[200],backgroundColor:t.palette.background.paper,boxShadow:"inset 0 1px 0 1px hsla(220, 0%, 100%, 0.6), inset 0 -1px 0 1px hsla(220, 35%, 90%, 0.5)","&:hover":{borderColor:fe[300],backgroundColor:t.palette.background.paper,boxShadow:"none"},[`&.${Zi.select}`]:{outlineOffset:0,borderColor:fe[400]},"&:before, &:after":{display:"none"},...t.applyStyles("dark",{borderRadius:t.shape.borderRadius,borderColor:fe[700],backgroundColor:t.palette.background.paper,boxShadow:`inset 0 1px 0 1px ${d(fe[700],.15)}, inset 0 -1px 0 1px hsla(220, 0%, 0%, 0.7)`,"&:hover":{borderColor:d(fe[700],.7),backgroundColor:t.palette.background.paper,boxShadow:"none"},[`&.${Zi.select}`]:{outlineOffset:0,borderColor:fe[900]},"&:before, &:after":{display:"none"}})}),select:({theme:t})=>({display:"flex",alignItems:"center",...t.applyStyles("dark",{display:"flex",alignItems:"center","&:focus-visible":{backgroundColor:fe[900]}})})}},MuiLink:{defaultProps:{underline:"none"},styleOverrides:{root:({theme:t})=>({color:t.palette.text.primary,fontWeight:500,position:"relative",textDecoration:"none",width:"fit-content","&::before":{content:'""',position:"absolute",width:"100%",height:"1px",bottom:0,left:0,backgroundColor:t.palette.text.secondary,opacity:.3,transition:"width 0.3s ease, opacity 0.3s ease"},"&:hover::before":{width:0},"&:focus-visible":{outline:`3px solid ${d(Le[500],.5)}`,outlineOffset:"4px",borderRadius:"2px"}})}},MuiDrawer:{styleOverrides:{paper:({theme:t})=>({backgroundColor:t.palette.background.default})}},MuiPaginationItem:{styleOverrides:{root:({theme:t})=>({"&.Mui-selected":{color:"white",backgroundColor:t.palette.grey[900]},...t.applyStyles("dark",{"&.Mui-selected":{color:"black",backgroundColor:t.palette.grey[50]}})})}},MuiTabs:{styleOverrides:{root:{minHeight:"fit-content"},indicator:({theme:t})=>({backgroundColor:t.palette.grey[800],...t.applyStyles("dark",{backgroundColor:t.palette.grey[200]})})}},MuiTab:{styleOverrides:{root:({theme:t})=>({padding:"6px 8px",textTransform:"none",minWidth:"fit-content",minHeight:"fit-content",color:t.palette.text.secondary,borderRadius:t.shape.borderRadius,border:"1px solid",borderColor:"transparent",":hover":{color:t.palette.text.primary,backgroundColor:fe[100],borderColor:fe[200]},[`&.${zo.selected}`]:{color:fe[900],fontWeight:600},...t.applyStyles("dark",{":hover":{color:t.palette.text.primary,backgroundColor:fe[800],borderColor:fe[700]},[`&.${zo.selected}`]:{color:"#fff"}})})}},MuiStepConnector:{styleOverrides:{line:({theme:t})=>({borderTop:"1px solid",borderColor:t.palette.divider,flex:1,borderRadius:"99px"})}},MuiStepIcon:{styleOverrides:{root:({theme:t})=>({color:"transparent",border:`1px solid ${fe[400]}`,width:12,height:12,borderRadius:"50%","& text":{display:"none"},"&.Mui-active":{border:"none",color:t.palette.primary.main},"&.Mui-completed":{border:"none",color:t.palette.success.main},...t.applyStyles("dark",{border:`1px solid ${fe[700]}`,"&.Mui-active":{border:"none",color:t.palette.primary.light},"&.Mui-completed":{border:"none",color:t.palette.success.light}}),variants:[{props:{completed:!0},style:{width:12,height:12}}]})}},MuiStepLabel:{styleOverrides:{label:({theme:t})=>({"&.Mui-completed":{opacity:.6,...t.applyStyles("dark",{opacity:.5})}})}}},Pu={MuiAccordion:{defaultProps:{elevation:0,disableGutters:!0},styleOverrides:{root:({theme:t})=>({padding:4,overflow:"clip",backgroundColor:t.palette.background.default,border:"1px solid",borderColor:t.palette.divider,":before":{backgroundColor:"transparent"},"&:not(:last-of-type)":{borderBottom:"none"},"&:first-of-type":{borderTopLeftRadius:t.shape.borderRadius,borderTopRightRadius:t.shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:t.shape.borderRadius,borderBottomRightRadius:t.shape.borderRadius}})}},MuiAccordionSummary:{styleOverrides:{root:({theme:t})=>({border:"none",borderRadius:8,"&:hover":{backgroundColor:fe[50]},"&:focus-visible":{backgroundColor:"transparent"},...t.applyStyles("dark",{"&:hover":{backgroundColor:fe[800]}})})}},MuiAccordionDetails:{styleOverrides:{root:{mb:20,border:"none"}}},MuiPaper:{defaultProps:{elevation:0}},MuiCard:{styleOverrides:{root:({theme:t})=>({padding:16,gap:16,transition:"all 100ms ease",backgroundColor:fe[50],borderRadius:t.shape.borderRadius,border:`1px solid ${t.palette.divider}`,boxShadow:"none",...t.applyStyles("dark",{backgroundColor:fe[800]}),variants:[{props:{variant:"outlined"},style:{border:`1px solid ${t.palette.divider}`,boxShadow:"none",background:"hsl(0, 0%, 100%)",...t.applyStyles("dark",{background:d(fe[900],.4)})}}]})}},MuiCardContent:{styleOverrides:{root:{padding:0,"&:last-child":{paddingBottom:0}}}},MuiCardHeader:{styleOverrides:{root:{padding:0}}},MuiCardActions:{styleOverrides:{root:{padding:0}}}};function el(t){const{children:a,disableCustomTheme:n,themeComponents:s}=t;return e.jsx(ps,{children:e.jsx(Mu,{disableCustomTheme:n,themeComponents:s,children:a})})}function Mu({children:t,disableCustomTheme:a,themeComponents:n}){const{mode:s}=wi(),r=g.useMemo(()=>a?{}:lo({palette:{mode:s==="system"?"light":s,...s==="dark"?qo.dark.palette:qo.light.palette},typography:Su,shadows:Cu,shape:_u,components:{...ku,...Iu,...Tu,...Au,...Pu,...n}}),[a,n,s]);return a?e.jsx(g.Fragment,{children:t}):e.jsx(_d,{theme:r,children:t})}const tl={},al={},rl={},nl={},Ru={...tl,...al,...rl,...nl};function Uo(t){return e.jsxs(el,{...t,themeComponents:Ru,children:[e.jsx(ms,{enableColorScheme:!0}),e.jsxs(l,{sx:{display:"flex",position:"relative"},children:[e.jsx(vu,{}),e.jsx(cu,{}),e.jsx(l,{component:"main",sx:{flexGrow:1,overflow:"auto"},children:e.jsxs(J,{sx:{alignItems:"center",mx:{xs:0,md:5},pb:5,mt:{xs:8,md:0}},children:[e.jsx(fu,{}),e.jsx(Oc,{})]})})]})]})}const Dn=ye("product/uploadAndCreate",async({productData:t},{rejectWithValue:a})=>{var n,s;try{const r=await be.post("/product/create/product",t);return r.data.success===!0?r.data.data:a("Product creation failed")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),Ei=ye("view/allProduct",async({searchQuery:t,company_id:a,category:n,pageNumber:s,limit:r,sortField:o,sortOrder:p},{rejectWithValue:c})=>{var x,u;try{const S=await be.get(`/product/view/all/product?company_id=${a}&search=${t}${n==="All"?"":"&category="+n}&page_no=${s}&limit=${r}&sortField=${o}&sortOrder=${p==="asc"?"1":"-1"}`);if(S.data.success===!0){const f=S.data.data.docs,v=S.data.data.meta;return{productsData:f,pageMeta:v}}else return c("Login Failed: No access token recieved.")}catch(S){return c((u=(x=S==null?void 0:S.response)==null?void 0:x.data)==null?void 0:u.message)}}),Bn=ye("view/all/StockItems",async({searchQuery:t,company_id:a,category:n,group:s,pageNumber:r,limit:o,sortField:p,sortOrder:c},{rejectWithValue:x})=>{var u,S;try{const f=await be.get(`product/view/all/stock/items?company_id=${a}&search=${t}${s==="All"?"":"&group="+s}${n==="All"?"":"&category="+n}&page_no=${r}&limit=${o}&sortField=${p}&sortOrder=${c==="asc"?"1":"-1"}`);if(console.log("View All Stock Items API Response",f),f.data.success===!0){const v=f.data.data.docs,j=f.data.data.meta;return{stockItems:v,stockItemsMeta:j}}else return x("Login Failed: No access token recieved.")}catch(f){return x((S=(u=f==null?void 0:f.response)==null?void 0:u.data)==null?void 0:S.message)}}),Sr=ye("view/product",async({product_id:t,company_id:a},{rejectWithValue:n})=>{var s,r;try{const o=await be.get(`/product/get/product/${t}?company_id=${a}`);return o.data.success===!0?{product:o.data.data[0]}:n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}}),Fn=ye("view/product/detail",async({product_id:t,company_id:a},{rejectWithValue:n})=>{var s,r;try{const o=await be.get(`/product/get/product/details/${t}?company_id=${a}`);return console.log("Get Product Details API Response",o),o.data.success===!0?{item:o.data.data[0]}:n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}}),Ln=ye("view/product/timeline",async({product_id:t,company_id:a},{rejectWithValue:n})=>{var s,r;try{const o=await be.get(`product/get/timeline/${t}?company_id=${a}`);return console.log("Get Product Timeline API Response",o),o.data.success===!0?{timeline:o.data.data[0]}:n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}}),Wu=ye("view/products/withId",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.get(`product/view/products/with_id?company_id=${t}`);return console.log("View Products with ID API Response",r),r.data.success===!0?r.data.data:a("Login Failed: No access token recieved.")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),On=ye("update/product",async({data:t,id:a},{rejectWithValue:n})=>{var s,r;try{return(await be.put(`/product/update/product/${a}`,t)).data.success===!0?void 0:n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}}),Qr=ye("delete/product",async({id:t,company_id:a},{rejectWithValue:n})=>{var s,r;try{const o=await be.delete(`/product/delete/product/${t}${a!==""?"?company_id="+a:""}`);return console.log("Delete product response",o),o.data.success===!0?void 0:o.data.success?n("Login Failed: No access token recieved."):o.data.message}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}}),ir=ye("category/Create",async({categoryData:t},{rejectWithValue:a})=>{var n,s;try{const r=await be.post("/category/create/category",t);return r.data.success===!0?r.data.data:a("Category creation failed")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),_r=ye("view/category",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.get(`/category/get/category?category_id=${t}`);return r.data.success===!0?{productData:r.data.data}:a("Login Failed: No access token recieved.")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),En=ye("view/all/Category",async({searchQuery:t,company_id:a,pageNumber:n,limit:s,sortField:r,sortOrder:o},{rejectWithValue:p})=>{var c,x;try{const u=await be.get(`/category/view/all/category?company_id=${a}${t!==""?"&search="+t:""}&page_no=${n}&limit=${s}&sortField=${r}&sortOrder=${o==="asc"?"1":"-1"}`);if(console.log("View All Category API response",u),u.data.success===!0){const S=u.data.data.docs,f=u.data.data.meta;return{categories:S,pageMeta:f}}else return p("Internal Server Error.")}catch(u){return p((x=(c=u==null?void 0:u.response)==null?void 0:c.data)==null?void 0:x.message)}}),Zr=ye("view/categories",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.get(`/category/view/categories?company_id=${t}`);return r.data.success===!0?{categoryLists:r.data.data}:a("Login Failed: No access token recieved.")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),or=ye("update/category",async({data:t,id:a},{rejectWithValue:n})=>{var s,r;try{return(await be.put(`/category/update/category/${a}`,t)).data.success===!0?void 0:n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}}),sr=ye("delete/category",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.delete(`/category/delete/category/${t}`);return console.log("Category Delete API response",r),r.data.success===!0?void 0:a("Login Failed: No access token recieved.")}catch(r){return console.log("Category Delete API error",r),a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),Et=[{id:"1",unit_name:"BAGS",value:"BAG",symbol:"BAG",si_representation:"integer"},{id:"2",unit_name:"BUNDLES",value:"BDL",symbol:"BDL",si_representation:"integer"},{id:"3",unit_name:"BOX",value:"BOX",symbol:"BOX",si_representation:"integer"},{id:"4",unit_name:"BOTTLES",value:"BTL",symbol:"BTL",si_representation:"integer"},{id:"5",unit_name:"BUNCH",value:"BUN",symbol:"BUN",si_representation:"integer"},{id:"6",unit_name:"CANS",value:"CAN",symbol:"CAN",si_representation:"integer"},{id:"7",unit_name:"CUBIC METER",value:"CBM",symbol:"CBM",si_representation:"decimal"},{id:"8",unit_name:"CUBIC CENTIMETER",value:"CBCM",symbol:"CBCM",si_representation:"decimal"},{id:"9",unit_name:"CENTIMETER",value:"CMS",symbol:"CMS",si_representation:"decimal"},{id:"10",unit_name:"CARTOONS",value:"CTN",symbol:"CTN",si_representation:"integer"},{id:"11",unit_name:"CUBIC FEET",value:"CFT",symbol:"CFT",si_representation:"decimal"},{id:"12",unit_name:"CAPSULES",value:"CPS",symbol:"CPS",si_representation:"integer"},{id:"13",unit_name:"CARATS",value:"CTS",symbol:"CTS",si_representation:"integer"},{id:"14",unit_name:"DOZENS",value:"DOZ",symbol:"DOZ",si_representation:"integer"},{id:"15",unit_name:"DRUM",value:"DRM",symbol:"DRM",si_representation:"integer"},{id:"16",unit_name:"FEET",value:"FT",symbol:"FT",si_representation:"decimal"},{id:"17",unit_name:"GREAT GROSS",value:"GGK",symbol:"GGK",si_representation:"integer"},{id:"18",unit_name:"GRAMS",value:"GMS",symbol:"GMS",si_representation:"integer"},{id:"19",unit_name:"GROSS",value:"GRS",symbol:"GRS",si_representation:"integer"},{id:"20",unit_name:"GROSS YARDS",value:"GYD",symbol:"GYD",si_representation:"integer"},{id:"21",unit_name:"HECTARE",value:"HA",symbol:"HA",si_representation:"decimal"},{id:"22",unit_name:"INCHES",value:"INC",symbol:"INC",si_representation:"decimal"},{id:"23",unit_name:"KILOGRAMS",value:"KGS",symbol:"KGS",si_representation:"decimal"},{id:"24",unit_name:"KILOLITRE",value:"KL",symbol:"KL",si_representation:"decimal"},{id:"25",unit_name:"KILOMETERS",value:"KMS",symbol:"KMS",si_representation:"decimal"},{id:"26",unit_name:"LITRES",value:"LTR",symbol:"LTR",si_representation:"decimal"},{id:"27",unit_name:"MILLILITERS",value:"MLT",symbol:"MLT",si_representation:"decimal"},{id:"28",unit_name:"METERS",value:"MTR",symbol:"MTR",si_representation:"decimal"},{id:"29",unit_name:"METRIC TON",value:"MTS",symbol:"MTS",si_representation:"decimal"},{id:"30",unit_name:"NUMBERS",value:"NOS",symbol:"NOS",si_representation:"integer"},{id:"31",unit_name:"OTHERS",value:"OTH",symbol:"OTH",si_representation:"integer"},{id:"32",unit_name:"PACKS",value:"PAC",symbol:"PAC",si_representation:"integer"},{id:"33",unit_name:"PIECES",value:"PCS",symbol:"PCS",si_representation:"integer"},{id:"34",unit_name:"PAIRS",value:"PRS",symbol:"PRS",si_representation:"integer"},{id:"35",unit_name:"QUINTAL",value:"QTL",symbol:"QTL",si_representation:"decimal"},{id:"36",unit_name:"ROLLS",value:"ROL",symbol:"ROL",si_representation:"integer"},{id:"37",unit_name:"SETS",value:"SET",symbol:"SET",si_representation:"integer"},{id:"38",unit_name:"SQUARE FEETS",value:"SQF",symbol:"SQF",si_representation:"decimal"},{id:"39",unit_name:"SQUARE METERS",value:"SQM",symbol:"SQM",si_representation:"decimal"},{id:"40",unit_name:"SQUARE YARDS",value:"SQY",symbol:"SQY",si_representation:"decimal"},{id:"41",unit_name:"TABLETS",value:"TBS",symbol:"TBS",si_representation:"integer"},{id:"42",unit_name:"TEN GROSS",value:"TGM",symbol:"TGM",si_representation:"integer"},{id:"43",unit_name:"THOUSANDS",value:"THD",symbol:"THD",si_representation:"integer"},{id:"44",unit_name:"TONNES",value:"TON",symbol:"TON",si_representation:"integer"},{id:"45",unit_name:"TUBE",value:"TUB",symbol:"TUB",si_representation:"integer"},{id:"46",unit_name:"US GALLONS",value:"UGS",symbol:"UGS",si_representation:"decimal"},{id:"47",unit_name:"UNT-UNITS",value:"UNT",symbol:"UNT",si_representation:"integer"},{id:"48",unit_name:"YARDS",value:"YDS",symbol:"YDS",si_representation:"decimal"}],Yo=({data:t,handleChange:a,validationErrors:n,theme:s,selectedUnitOption:r,setSelectedUnitOption:o,imagePreview:p,handleImageChange:c,removeImage:x,isDragActive:u,setIsDragActive:S,fileInputRef:f})=>{const v=(w,N)=>{(N==null?void 0:N.value)!=="__add_new__"&&(o(N),a("unit",(N==null?void 0:N.value)||""),a("unit_id",(N==null?void 0:N.id)||""),a("low_stock_alert",""),a("opening_balance",""))},j=w=>{w.preventDefault(),w.stopPropagation(),S(!0)},T=w=>{w.preventDefault(),w.stopPropagation(),S(!1)},k=w=>{w.preventDefault(),w.stopPropagation()},B=w=>{w.preventDefault(),w.stopPropagation(),S(!1);const N=w.dataTransfer.files;N&&N[0]&&c(N[0])},_=()=>{var w;(w=f.current)==null||w.click()},K=w=>{var R;const N=(R=w.target.files)==null?void 0:R[0];N&&c(N)};return e.jsxs(l,{sx:{p:4},children:[e.jsxs(i,{variant:"h5",sx:{mb:3,fontWeight:700,color:s.palette.primary.main,display:"flex",alignItems:"center",gap:1},children:[e.jsx(_i,{}),"Basic Product Details"]}),e.jsxs(l,{sx:{display:"flex",flexDirection:"row",gap:3},children:[e.jsx(Ne,{sx:{background:`linear-gradient(135deg, ${d(s.palette.primary.main,.05)} 0%, ${d(s.palette.secondary.main,.05)} 100%)`,border:`2px dashed ${u?s.palette.primary.main:s.palette.divider}`,width:"50%",alignSelf:"center"},children:e.jsxs(Me,{children:[e.jsx(i,{variant:"h6",sx:{mb:1,fontWeight:600},children:"Product Image"}),e.jsxs(l,{onClick:_,onDragEnter:j,onDragLeave:T,onDragOver:k,onDrop:B,sx:{position:"relative",minHeight:200,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",borderRadius:1,p:2,backgroundColor:u?d(s.palette.primary.main,.1):d(s.palette.background.paper,.5),border:`2px dashed ${u?s.palette.primary.main:s.palette.divider}`},children:[p?e.jsxs(l,{sx:{position:"relative",width:"100%",height:200,p:2},children:[e.jsx("img",{src:p,alt:"Product preview",style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:8}}),e.jsx(le,{title:"Remove Image",TransitionComponent:Ye,children:e.jsx(ke,{onClick:x,sx:{position:"absolute",top:8,right:8,backgroundColor:d(s.palette.error.main,.9),color:"white"},size:"small",children:e.jsx(ut,{fontSize:"small"})})})]}):e.jsxs(J,{alignItems:"center",spacing:2,children:[e.jsx($e,{sx:{width:64,height:64,backgroundColor:s.palette.primary.main,mb:1},children:e.jsx(Fa,{fontSize:"large"})}),e.jsx(i,{variant:"h6",textAlign:"center",sx:{fontWeight:600},children:u?"Drop image here":"Upload Product Image"}),e.jsxs(i,{variant:"body2",color:"text.secondary",textAlign:"center",children:["Click to browse or drag and drop your image here",e.jsx("br",{})]}),e.jsx(ve,{label:"PNG, JPEG, JPG, WebP (Max 5MB)",size:"small",variant:"outlined",sx:{mt:1}})]}),e.jsx("input",{ref:f,type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp",onChange:K,style:{display:"none"}})]})]})}),e.jsx(Ne,{sx:{background:`linear-gradient(135deg, ${d(s.palette.background.paper,.8)} 0%, ${d(s.palette.action.hover,.3)} 100%)`,width:"50%",backdropFilter:"blur(10px)",boxShadow:`0 8px 32px ${d(s.palette.common.black,.1)}`},children:e.jsxs(Me,{sx:{p:1},children:[e.jsxs(i,{variant:"h6",sx:{mb:1,fontWeight:600,display:"flex",alignItems:"center",gap:1},children:[e.jsx(gs,{color:"primary"}),"Product Information"]}),e.jsxs(J,{spacing:3,children:[e.jsx(X,{label:"Product Name",variant:"outlined",fullWidth:!0,required:!0,value:t.stock_item_name,onChange:w=>a("stock_item_name",w.target.value),error:!!n.product_name,helperText:n.product_name,sx:{"& .MuiOutlinedInput-root":{borderRadius:1,"&:hover fieldset":{borderColor:s.palette.primary.main,borderWidth:2},"&.Mui-focused fieldset":{borderWidth:2}}}}),e.jsx(at,{options:Et,value:r,onChange:v,getOptionLabel:w=>w.unit_name,renderOption:(w,N)=>e.jsx(l,{component:"li",...w,sx:{fontWeight:N.value==="__add_new__"?600:400,color:N.value==="__add_new__"?s.palette.primary.main:"inherit",borderTop:N.value==="__add_new__"?`1px solid ${s.palette.divider}`:"none","&:hover":{backgroundColor:N.value==="__add_new__"?d(s.palette.primary.main,.1):d(s.palette.action.hover,.1)}},children:N.unit_name}),renderInput:w=>e.jsx(X,{...w,label:"Unit of Measurement",variant:"outlined",required:!0,fullWidth:!0,helperText:n.selling_price||"e.g., kg, pieces, liters",sx:{"& .MuiOutlinedInput-root":{borderRadius:1,"&:hover fieldset":{borderColor:s.palette.primary.main,borderWidth:2}}}}),sx:{minWidth:250}}),e.jsx(X,{label:"Description (Optional)",variant:"outlined",fullWidth:!0,multiline:!0,rows:3,value:t.description,onChange:w=>a("description",w.target.value),helperText:"Brief description of your product",sx:{"& .MuiOutlinedInput-root":{borderRadius:1,"&:hover fieldset":{borderColor:s.palette.primary.main,borderWidth:2}}}})]})]})})]})]})},zu=({data:t,handleChange:a,validationErrors:n,theme:s,categoryLists:r,inventoryGroupLists:o,selectedCategoryOption:p,setSelectedCategoryOption:c,selectedGroupOption:x,setSelectedGroupOption:u,setOpenGroupModal:S,setOpenCategoryModal:f,calculateStockValue:v})=>{var w,N;const j=(r==null?void 0:r.map(R=>({id:R._id,label:R.category_name,value:R.category_name})))||[],T=(o==null?void 0:o.map(R=>({id:R._id,label:R.inventory_group_name,value:R.inventory_group_name})))||[],k=(R,L)=>{if((L==null?void 0:L.value)==="__add_new__"){f(!0);return}c(L),a("category",(L==null?void 0:L.value)||""),a("category_id",(L==null?void 0:L.id)||"")},B=R=>L=>{var A;const D=L.target.value,P=(A=Et.find(O=>O.value===(t==null?void 0:t.unit)))==null?void 0:A.si_representation;P==="integer"?/^\d*$/.test(D)&&a(R,D):P==="decimal"?/^\d*\.?\d{0,3}$/.test(D)&&a(R,D):a(R,D)},_=(R,L)=>{if((L==null?void 0:L.value)==="__add_new__"){S(!0);return}u(L),a("group",(L==null?void 0:L.value)||""),a("group_id",(L==null?void 0:L.id)||"")},K=v();return e.jsxs(l,{sx:{px:4,py:4},children:[e.jsxs(i,{variant:"h6",sx:{mb:1,fontWeight:700,color:s.palette.primary.main,display:"flex",alignItems:"center",gap:1},children:[e.jsx(ht,{}),"Additional Information"]}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:2},children:"Provide additional details to better organize and categorize your product. All fields in this section are optional."}),e.jsxs(J,{children:[e.jsxs(l,{sx:{display:"flex",flexDirection:"row",gap:2},children:[e.jsx(Ne,{sx:{background:`linear-gradient(135deg, ${d(s.palette.primary.main,.05)} 0%, ${d(s.palette.secondary.main,.05)} 100%)`,width:"50%",border:`1px solid ${d(s.palette.primary.main,.5)}`,boxShadow:`0 8px 32px ${d(s.palette.common.black,.08)}`},children:e.jsxs(Me,{sx:{p:1},children:[e.jsxs(i,{variant:"h6",sx:{mb:2,fontWeight:600,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ta,{color:"primary"}),"Organization & Classification"]}),e.jsxs(J,{spacing:1,children:[e.jsx(at,{options:[...j,{label:"+ Add New Category",value:"__add_new__",id:"__add_new__"}],value:p,onChange:k,getOptionLabel:R=>R.label,isOptionEqualToValue:(R,L)=>R.value===L.value,renderOption:(R,L)=>e.jsx(l,{component:"li",...R,sx:{fontWeight:L.value==="__add_new__"?600:400,color:L.value==="__add_new__"?s.palette.primary.main:"inherit",borderTop:L.value==="__add_new__"?`1px solid ${s.palette.divider}`:"none","&:hover":{backgroundColor:L.value==="__add_new__"?d(s.palette.primary.main,.1):d(s.palette.action.hover,.1)}},children:L.label}),renderInput:R=>e.jsx(X,{...R,label:"Product Category",variant:"outlined",fullWidth:!0,helperText:"Categorize your product for better organization",sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}})}),e.jsx(at,{options:[...T,{label:"+ Add New Group",value:"__add_new__",id:"__add_new__"}],value:x,onChange:_,getOptionLabel:R=>R.label,renderOption:(R,L)=>e.jsx(l,{component:"li",...R,sx:{fontWeight:L.value==="__add_new__"?600:400,color:L.value==="__add_new__"?s.palette.primary.main:"inherit",borderTop:L.value==="__add_new__"?`1px solid ${s.palette.divider}`:"none","&:hover":{backgroundColor:L.value==="__add_new__"?d(s.palette.primary.main,.1):d(s.palette.action.hover,.1)}},children:L.label}),renderInput:R=>e.jsx(X,{...R,label:"Product Group",variant:"outlined",fullWidth:!0,helperText:"Select the type/group that best describes your product",sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}})})]})]})}),e.jsx(Ne,{sx:{background:`linear-gradient(135deg, ${d(s.palette.primary.main,.05)} 0%, ${d(s.palette.secondary.main,.05)} 100%)`,width:"50%",border:`1px solid ${d(s.palette.primary.main,.5)}`,boxShadow:`0 8px 32px ${d(s.palette.common.black,.08)}`},children:e.jsxs(Me,{sx:{p:1},children:[e.jsxs(i,{variant:"h6",sx:{mb:1,fontWeight:600,display:"flex",alignItems:"center",gap:1},children:[e.jsx(wd,{color:"primary"}),"Additional Details"]}),e.jsx(X,{label:"Alternate Name",placeholder:"e.g. PROD-1234",variant:"outlined",fullWidth:!0,value:t.alias_name,onChange:R=>a("alias_name",R.target.value),helperText:"Optional alias for the product, useful for internal references",sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}}),e.jsx(l,{sx:{mt:2},children:e.jsx(X,{fullWidth:!0,label:"Low Stock Alert",placeholder:"Enter minimum stock level",value:t.low_stock_alert||"",onChange:B("low_stock_alert"),type:"text",inputProps:{step:((w=Et.find(R=>R.value===t.unit))==null?void 0:w.si_representation)==="integer"?1:.01,min:0},InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Cd,{color:"action",fontSize:"small"})}),endAdornment:t.unit&&e.jsx(se,{position:"end",children:e.jsx(i,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:t.unit})})},error:!!n.low_stock_alert,helperText:n.low_stock_alert||"Get notified when stock falls below this level. Default is 5 units.",sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}})})]})})]}),e.jsx(Ne,{sx:{background:`linear-gradient(135deg, ${d(s.palette.primary.main,.05)} 0%, ${d(s.palette.secondary.main,.05)} 100%)`,border:`1px solid ${d(s.palette.primary.main,.5)}`,boxShadow:`0 8px 32px ${d(s.palette.common.black,.08)}`,mt:2},children:e.jsx(Me,{sx:{p:1},children:e.jsxs(J,{spacing:1,children:[e.jsx(l,{sx:{mb:2},children:e.jsxs(J,{direction:"row",alignItems:"center",spacing:2,sx:{mb:1},children:[e.jsx(ea,{}),e.jsx(l,{children:e.jsx(i,{variant:"h6",sx:{fontWeight:700,color:s.palette.text.primary},children:"Opening Stock & Pricing"})})]})}),e.jsxs(J,{direction:"row",alignItems:"center",spacing:2,sx:{mb:2},children:[e.jsx(X,{fullWidth:!0,label:" Opening Stock Quantity",placeholder:"Enter opening stock quantity",value:t.opening_balance||"",onChange:B("opening_balance"),type:"text",inputProps:{step:((N=Et.find(R=>R.value===t.unit))==null?void 0:N.si_representation)==="integer"?1:.01,min:0},InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(ea,{color:"action",fontSize:"small"})}),endAdornment:t.unit&&e.jsx(se,{position:"end",children:e.jsx(i,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:t.unit})})},error:!!n.opening_balance,helperText:n.opening_balance||"Current stock quantity in your inventory",sx:{"& .MuiOutlinedInput-root":{borderRadius:1,backgroundColor:d(s.palette.background.paper,.8),"&:hover":{backgroundColor:s.palette.background.paper},"&.Mui-focused":{backgroundColor:s.palette.background.paper,boxShadow:`0 0 0 3px ${d(s.palette.primary.main,.1)}`}}}}),e.jsx(X,{fullWidth:!0,label:"Opening Rate",placeholder:"Enter cost per unit",value:t.opening_rate||"",onChange:R=>a("opening_rate",R.target.value),type:"number",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(kd,{color:"action",fontSize:"small"})}),endAdornment:e.jsx(se,{position:"end",children:e.jsxs(i,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:["per ",t.unit||"unit"]})})},error:!!n.opening_rate,helperText:n.opening_rate||"Cost price per unit of this product",sx:{"& .MuiOutlinedInput-root":{borderRadius:1,backgroundColor:d(s.palette.background.paper,.8),"&:hover":{backgroundColor:s.palette.background.paper},"&.Mui-focused":{backgroundColor:s.palette.background.paper,boxShadow:`0 0 0 3px ${d(s.palette.primary.main,.1)}`}}}})]}),(((t==null?void 0:t.opening_balance)??0)>0||((t==null?void 0:t.opening_rate)??0)>0)&&e.jsxs(e.Fragment,{children:[e.jsx(Pe,{sx:{my:2}}),e.jsx(l,{sx:{p:1,borderRadius:1,background:`linear-gradient(135deg, ${d(s.palette.success.main,.1)} 0%, ${d(s.palette.success.light,.05)} 100%)`,border:`1px solid ${d(s.palette.success.main,.2)}`},children:e.jsxs(J,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(J,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(l,{sx:{p:1,borderRadius:1.5,backgroundColor:d(s.palette.success.main,.2),color:s.palette.success.main},children:e.jsx(ar,{fontSize:"small"})}),e.jsxs(l,{children:[e.jsx(i,{variant:"body1",sx:{fontWeight:600},children:"Opening Stock Value"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Quantity × Rate = Total Value"})]})]}),e.jsxs(l,{sx:{textAlign:"right"},children:[e.jsxs(i,{variant:"subtitle2",sx:{fontWeight:700,color:s.palette.success.main,display:"flex",alignItems:"center",gap:.5},children:["₹ ",K.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:[t.opening_balance||0," × ₹ ",t.opening_rate||0]})]})]})})]})]})})})]})]})},$u=({data:t,handleChange:a,validationErrors:n,showGstFields:s,isHSNRequired:r=!1})=>{const o=we(),p=[{value:"Goods",label:"Goods"},{value:"Services",label:"Services"},{value:"Composite Supply",label:"Composite Supply"},{value:"Mixed Supply",label:"Mixed Supply"}],c=[{value:"Taxable",label:"Taxable"},{value:"Exempt",label:"Exempt"},{value:"Zero Rated",label:"Zero Rated"},{value:"Nil Rated",label:"Nil Rated"}],x=u=>S=>{a(u,S.target.value)};return e.jsx(l,{sx:{p:3},children:e.jsxs(J,{spacing:1,children:[e.jsx(l,{children:e.jsxs(J,{direction:"row",alignItems:"center",spacing:2,sx:{mb:1},children:[e.jsx(wa,{}),e.jsxs(l,{children:[e.jsx(i,{variant:"body1",sx:{fontWeight:700,color:o.palette.text.primary},children:"Advanced Settings"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Configure TAX details and other advanced product settings"})]})]})}),e.jsx(Ne,{sx:{borderRadius:1,boxShadow:`0 8px 32px ${d(o.palette.common.black,.08)}`,border:`1px solid ${o.palette.divider}`,background:`linear-gradient(135deg, ${d(o.palette.background.paper,.8)} 0%, ${d(o.palette.action.hover,.2)} 100%)`,backdropFilter:"blur(10px)"},children:e.jsxs(Me,{sx:{p:0},children:[e.jsx(l,{sx:{p:1,borderBottom:`1px solid ${o.palette.divider}`},children:e.jsx(J,{direction:"row",alignItems:"center",justifyContent:"space-between",children:e.jsxs(J,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(l,{sx:{p:1,borderRadius:1.5,backgroundColor:d(o.palette.primary.main,.1),color:o.palette.primary.main},children:e.jsx(xt,{fontSize:"small"})}),e.jsxs(l,{children:[e.jsx(i,{variant:"body1",sx:{fontWeight:600},children:"TAX Configuration"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Configure TAX details for tax compliance"})]})]})})}),e.jsx(l,{sx:{p:1},children:e.jsxs(J,{spacing:2,children:[e.jsx(X,{fullWidth:!0,label:"HSN/SAC Code",placeholder:"Enter HSN or SAC code",value:t.hsn_code||"",onChange:u=>a("hsn_code",u.target.value),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Tt,{color:"action",fontSize:"small"})})},required:r,error:!!n.hsn_code,helperText:n.hsn_code||"Harmonized System of Nomenclature code for goods/services",sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}}),s&&e.jsxs(e.Fragment,{children:[e.jsx(X,{fullWidth:!0,select:!0,label:"Nature of Goods/Services",value:t.nature_of_goods,onChange:x("nature_of_goods"),sx:{"& .MuiOutlinedInput-root":{borderRadius:1}},InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(co,{color:"action",fontSize:"small"})})},children:p.map(u=>e.jsx(he,{value:u.value,children:u.label},u.value))}),e.jsx(X,{fullWidth:!0,select:!0,label:"Taxability",value:t.taxability,onChange:x("taxability"),sx:{"& .MuiOutlinedInput-root":{borderRadius:1}},InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(xt,{color:"action",fontSize:"small"})})},children:c.map(u=>e.jsx(he,{value:u.value,children:u.label},u.value))}),t.taxability==="Taxable"&&e.jsx(X,{fullWidth:!0,label:"Tax Rate",placeholder:"Enter tax rate",value:t.tax_rate||"",onChange:u=>a("tax_rate",Number(u.target.value)),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Tt,{color:"action",fontSize:"small"})}),endAdornment:e.jsx(se,{position:"end",children:e.jsx(i,{variant:"body2",color:"text.secondary",children:"%"})})},error:!!n.tax_rate,helperText:n.tax_rate||"Tax rate in percentage",type:"number",sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}})]}),e.jsx(rt,{severity:"info",icon:e.jsx(ht,{fontSize:"small"}),sx:{borderRadius:1,backgroundColor:d(o.palette.info.main,.05),border:`1px solid ${d(o.palette.info.main,.1)}`},children:e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"HSN/SAC Code:"})," Enter the 4-8 digit code for your product. Additional Tax fields will appear after entering the HSN code."]})})]})})]})})]})})},il=({open:t,onClose:a,onCreated:n,onUpdated:s,category:r})=>{const o=we(),p=yt(o.breakpoints.down("sm")),c=Fe(),{currentCompany:x}=Ce(C=>C.auth),[u,S]=g.useState(!1),[f,v]=g.useState(0),j=g.useRef(null),[T,k]=g.useState(!1),[B,_]=g.useState(null),[K,w]=g.useState({}),[N,R]=g.useState({name:"",description:"",image:""}),L=()=>{const C={};return N.name.trim()?N.name.length<2&&(C.name="Category name must be at least 2 characters"):C.name="Category name is required",N.description&&N.description.length>500&&(C.description="Description must be less than 500 characters"),w(C),Object.keys(C).length===0},D=(C,$)=>{R(G=>({...G,[C]:$})),K[C]&&w(G=>({...G,[C]:""}))},P=()=>{v(0);const C=setInterval(()=>{v($=>$>=100?(clearInterval(C),100):$+10)},100)},A=g.useCallback(C=>{if(!C)return;if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(C.type)){Z.error("Only PNG, JPEG, JPG, or WebP images are allowed.");return}if(C.size>5*1024*1024){Z.error("Image size should be less than 5MB.");return}P(),R(G=>({...G,image:C}));const $=new FileReader;$.onload=G=>{var Ae;const ge=(Ae=G.target)==null?void 0:Ae.result;_(ge)},$.readAsDataURL(C)},[]),O=g.useCallback(C=>{var G;C.preventDefault(),C.stopPropagation(),k(!1);const $=(G=C.dataTransfer.files)==null?void 0:G[0];$&&A($)},[A]),y=g.useCallback(C=>{C.preventDefault(),C.stopPropagation(),k(!0)},[]),F=g.useCallback(C=>{C.preventDefault(),C.stopPropagation(),k(!1)},[]),h=()=>{var C;(C=j.current)==null||C.click()},b=g.useCallback(C=>{C.stopPropagation(),_(null),v(0),R($=>({...$,image:""})),j.current&&(j.current.value="")},[]),M=()=>{R({name:"",description:"",image:""}),_(null),v(0),w({}),j.current&&(j.current.value="")};g.useEffect(()=>{t&&r?(R({name:r.category_name||"",description:r.description||"",image:r.image||""}),_(typeof(r==null?void 0:r.image)=="string"?r.image:null)):t&&!r&&M()},[t,r,c,x==null?void 0:x._id]);const W=async()=>{if(!L()){Z.error("Please fix the form errors before submitting");return}S(!0);const C={category_name:N.name.trim()};N.description&&N.description!==""&&(C.description=N.description),N.image&&typeof N.image!="string"&&(C.image=N.image);const $=new FormData;Object.entries(C).forEach(([G,ge])=>{typeof ge=="boolean"?$.append(G,ge?"true":"false"):(ge instanceof File||typeof ge=="string")&&$.append(G,ge)}),$.append("company_id",(x==null?void 0:x._id)||""),r&&r._id?await c(or({id:r._id,data:$})).unwrap().then(()=>{S(!1),a(),s&&s(),Z.success("Category successfully updated! 🎉")}).catch(G=>{S(!1),Z.error(G||"An unexpected error occurred. Please try again later.")}):c(ir({categoryData:$})).unwrap().then(G=>{const ge={name:G.category_name,_id:G._id};Z.success("Category successfully created! 🎉"),n(ge),S(!1),M(),a()}).catch(G=>{S(!1),Z.error(G||"An unexpected error occurred. Please try again later.")})};return e.jsxs(Mt,{anchor:"right",PaperProps:{sx:{width:{xs:"100%",sm:600,md:700},backgroundColor:o.palette.background.default,backgroundImage:`linear-gradient(135deg, ${o.palette.background.default} 0%, ${o.palette.background.paper} 100%)`,overflow:"hidden"}},sx:{"& .MuiBackdrop-root":{backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)"}},open:t,onClose:a,transitionDuration:300,...t?{}:{inert:""},children:[e.jsx(ze,{in:u,children:e.jsx(St,{sx:{position:"absolute",top:0,left:0,right:0,zIndex:1e3,height:3}})}),e.jsxs(l,{sx:{p:3,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`2px solid ${o.palette.primary.main}`,background:`linear-gradient(135deg, ${o.palette.primary.main}20 0%, ${o.palette.primary.light}15 100%)`,backdropFilter:"blur(20px)",position:"sticky",top:0,zIndex:100},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(le,{title:"Close",arrow:!0,children:e.jsx(ke,{onClick:a,sx:{backgroundColor:o.palette.background.paper,boxShadow:o.shadows[2],"&:hover":{backgroundColor:o.palette.action.hover,transform:"scale(1.1) rotate(90deg)",boxShadow:o.shadows[4]},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:e.jsx(ct,{})})}),e.jsxs(l,{children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx($e,{sx:{bgcolor:o.palette.primary.main,width:32,height:32},children:e.jsx(Ta,{fontSize:"small"})}),e.jsx(i,{variant:"h6",fontWeight:700,children:r?"Edit Category":"Create Category"})]}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:r?"Update the details of your category":"Create a new category for your products"})]})]}),!p&&e.jsx(ve,{icon:e.jsx(ht,{}),label:"Fill required fields",size:"small",variant:"outlined",sx:{borderColor:o.palette.primary.main,color:o.palette.primary.main}})]}),e.jsx(l,{sx:{flex:1,overflow:"auto",position:"relative","&::-webkit-scrollbar":{width:8},"&::-webkit-scrollbar-track":{backgroundColor:o.palette.background.default},"&::-webkit-scrollbar-thumb":{backgroundColor:o.palette.divider,borderRadius:1,"&:hover":{backgroundColor:o.palette.action.hover}}},children:e.jsx(l,{sx:{p:3},children:e.jsxs(ne,{elevation:3,sx:{px:3,py:2,mb:3,borderRadius:1,background:`linear-gradient(135deg, ${o.palette.background.paper} 0%, ${o.palette.action.hover}20 100%)`,border:`1px solid ${o.palette.divider}`,"&:hover":{boxShadow:o.shadows[8]}},children:[e.jsxs(l,{sx:{mb:2},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(uo,{color:"primary"}),e.jsx(i,{variant:"h6",fontWeight:600,children:"Category Image"})]}),e.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",style:{display:"none"},ref:j,onChange:C=>{var G;const $=(G=C.target.files)==null?void 0:G[0];$&&A($)}}),e.jsx(l,{onClick:h,onDrop:O,onDragOver:C=>C.preventDefault(),onDragEnter:y,onDragLeave:F,sx:{border:`2px dashed ${T?o.palette.primary.main:o.palette.divider}`,borderRadius:1,py:2,position:"relative",textAlign:"center",cursor:"pointer",backgroundColor:T?`${o.palette.primary.main}10`:"transparent",minHeight:200,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{borderColor:o.palette.primary.main,backgroundColor:`${o.palette.primary.main}05`}},children:B?e.jsxs(l,{sx:{position:"relative"},children:[e.jsx("img",{src:B,alt:"Category Preview",style:{maxWidth:150,maxHeight:150,borderRadius:1,boxShadow:o.shadows[4],objectFit:"cover"}}),e.jsx(le,{title:"Remove image",arrow:!0,children:e.jsx(ke,{onClick:b,sx:{position:"absolute",top:-12,right:-12,backgroundColor:o.palette.error.main,color:"white",width:32,height:32,"&:hover":{backgroundColor:o.palette.error.dark,transform:"scale(1.1)"},boxShadow:o.shadows[4]},children:e.jsx(ut,{fontSize:"small"})})})]}):e.jsxs(l,{children:[e.jsx(Fa,{sx:{fontSize:36,color:o.palette.primary.main,mb:1}}),e.jsx(i,{variant:"h6",sx:{fontWeight:600,mb:1},children:"Upload Category Image"}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Drag & drop your image here, or click to browse"}),e.jsxs(l,{sx:{display:"flex",gap:1,justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(ve,{label:"PNG",size:"small",variant:"outlined"}),e.jsx(ve,{label:"JPEG",size:"small",variant:"outlined"}),e.jsx(ve,{label:"JPG",size:"small",variant:"outlined"}),e.jsx(ve,{label:"WebP",size:"small",variant:"outlined"})]}),e.jsx(i,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:"Max 5MB • Recommended 1:1 ratio"})]})})]}),e.jsx(Pe,{sx:{mb:2}}),e.jsxs(J,{spacing:2,children:[e.jsxs(qe,{fullWidth:!0,children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(Ta,{color:"primary",fontSize:"small"}),e.jsx(i,{variant:"body1",fontWeight:600,children:"Category Name *"})]}),e.jsx(X,{fullWidth:!0,placeholder:"Enter category name",value:N.name,onChange:C=>D("name",C.target.value),error:!!K.name,helperText:K.name,sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.3s ease","&:hover":{transform:"translateY(-1px)",boxShadow:o.shadows[2]},"&.Mui-focused":{transform:"translateY(-2px)",boxShadow:o.shadows[4]}}}})]}),e.jsxs(qe,{fullWidth:!0,children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(Ci,{color:"primary",fontSize:"small"}),e.jsx(i,{variant:"body1",fontWeight:600,children:"Description"}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["(",N.description.length,"/500)"]})]}),e.jsx(X,{fullWidth:!0,multiline:!0,rows:3,placeholder:"Describe your category...",value:N.description,onChange:C=>D("description",C.target.value),error:!!K.description,helperText:K.description,sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.3s ease","&:hover":{transform:"translateY(-1px)",boxShadow:o.shadows[2]}}}})]})]})]})})}),e.jsx(l,{sx:{p:3,borderTop:`1px solid ${o.palette.divider}`,backgroundColor:o.palette.background.paper,background:`linear-gradient(135deg, ${o.palette.background.paper} 0%, ${o.palette.action.hover}20 100%)`,backdropFilter:"blur(20px)"},children:e.jsxs(J,{direction:p?"column":"row",spacing:2,justifyContent:"space-between",alignItems:"center",children:[e.jsxs(J,{direction:p?"column":"row",spacing:2,sx:{width:p?"100%":"auto"},children:[e.jsx(ee,{variant:"outlined",onClick:M,disabled:u,fullWidth:p,sx:{textTransform:"none",borderRadius:1,px:3,py:1.5,fontWeight:600,transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:o.shadows[4]}},children:"Reset Form"}),e.jsx(ee,{variant:"contained",startIcon:u?e.jsx(qt,{className:"animate-spin"}):e.jsx(pa,{}),onClick:W,disabled:u||!N.name.trim(),fullWidth:p,sx:{textTransform:"none",px:4,py:1.5,fontSize:"1rem",fontWeight:700,borderRadius:1,background:`linear-gradient(135deg, ${o.palette.primary.main} 0%, ${o.palette.primary.dark} 100%)`,boxShadow:o.shadows[6],"&:hover":{background:`linear-gradient(135deg, ${o.palette.primary.dark} 0%, ${o.palette.primary.main} 100%)`,transform:"translateY(-3px)",boxShadow:o.shadows[12]},"&:disabled":{background:o.palette.action.disabledBackground,color:o.palette.action.disabled,transform:"none",boxShadow:"none"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",minWidth:200},children:u?r?"Updating Category...":"Creating Category...":r?"Update Category":"Create Category"})]}),!p&&N.name.trim()&&e.jsx(Ye,{appear:!0,in:!0,timeout:300,children:e.jsx(ve,{icon:e.jsx(pt,{}),label:"Ready to submit",color:"success",variant:"outlined",sx:{fontWeight:600}})})]})})]})},Nu=ye("Create/inventory/group",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.post("/user/inventory/create/group",t);return r.data.success===!0?r.data.data:a("Group creation failed")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}});ye("view/inventory/group",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.get(`/user/inventory/view/group/${t}`);return r.data.success===!0?{productData:r.data.data}:a("Login Failed: No access token recieved.")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}});const Gn=ye("view/all/inventory/group",async({searchQuery:t,company_id:a,parent:n,pageNumber:s,limit:r,sortField:o,sortOrder:p},{rejectWithValue:c})=>{var x,u;try{const S=await be.get(`/user/inventory/group/view/all?company_id=${a}${t!==""?"&search="+t:""}${n===""||n==="All"?"":"&parent="+n}&page_no=${s}&limit=${r}&sortField=${o}&sortOrder=${p==="asc"?"1":"-1"}`);if(S.data.success===!0){const f=S.data.data.docs,v=S.data.data.meta;return{inventoryGroups:f,inventoryGroupPageMeta:v}}else return c("Internal Server Error.")}catch(S){return c((u=(x=S==null?void 0:S.response)==null?void 0:x.data)==null?void 0:u.message)}}),wr=ye("view/inventory/groups",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.get(`/user/inventory/view/all/groups?company_id=${t}`);return r.data.success===!0?{inventoryGroupLists:r.data.data}:a("Login Failed: No access token recieved.")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),Du=ye("update/inventory/group",async({data:t,id:a},{rejectWithValue:n})=>{var s,r;try{return(await be.put(`/user/update/group/${a}`,t)).data.success===!0?void 0:n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}}),Bu=ye("delete/inventory/group",async(t,{rejectWithValue:a})=>{var n,s;try{return(await be.delete(`/user/delete/group/${t}`)).data.success===!0?void 0:a("Login Failed: No access token recieved.")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),ol=({open:t,onClose:a,onCreated:n,onUpdated:s,inventoryGroup:r})=>{const o=we(),p=yt(o.breakpoints.down("sm")),c=Fe(),{currentCompany:x}=Ce(ae=>ae.auth),{inventoryGroupLists:u}=Ce(ae=>ae.inventoryGroup),[S,f]=g.useState(!1),[v,j]=g.useState(0),T=g.useRef(null),[k,B]=g.useState(!1),[_,K]=g.useState(null),[w,N]=g.useState({}),[R,L]=g.useState(null),[D,P]=g.useState({inventory_group_name:"",description:"",image:"",parent:"Primary Group"}),A=(u==null?void 0:u.map(ae=>({label:ae.inventory_group_name,value:ae.inventory_group_name})))||[],O=()=>{const ae={};return D.inventory_group_name.trim()?D.inventory_group_name.length<2&&(ae.inventory_group_name="Group name must be at least 2 characters"):ae.inventory_group_name="Group name is required",D.description&&D.description.length>500&&(ae.description="Description must be less than 500 characters"),N(ae),Object.keys(ae).length===0},y=(ae,Y)=>{P(re=>({...re,[ae]:Y})),w[ae]&&N(re=>({...re,[ae]:""}))},F=(ae,Y)=>{typeof Y=="string"?(L({label:Y,value:Y}),y("parent",Y)):Y?(L(Y),y("parent",Y.value)):(L(null),y("parent",""))},h=()=>{j(0);const ae=setInterval(()=>{j(Y=>Y>=100?(clearInterval(ae),100):Y+10)},100)},b=g.useCallback(ae=>{if(!ae)return;if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(ae.type)){Z.error("Only PNG, JPEG, JPG, or WebP images are allowed.");return}if(ae.size>5*1024*1024){Z.error("Image size should be less than 5MB.");return}h(),P(re=>({...re,image:ae}));const Y=new FileReader;Y.onload=re=>{var V;const Te=(V=re.target)==null?void 0:V.result;K(Te)},Y.readAsDataURL(ae)},[]),M=g.useCallback(ae=>{var re;ae.preventDefault(),ae.stopPropagation(),B(!1);const Y=(re=ae.dataTransfer.files)==null?void 0:re[0];Y&&b(Y)},[b]),W=g.useCallback(ae=>{ae.preventDefault(),ae.stopPropagation(),B(!0)},[]),C=g.useCallback(ae=>{ae.preventDefault(),ae.stopPropagation(),B(!1)},[]),$=()=>{var ae;(ae=T.current)==null||ae.click()},G=g.useCallback(ae=>{ae.stopPropagation(),K(null),j(0),P(Y=>({...Y,image:""})),T.current&&(T.current.value="")},[]),ge=()=>{P({inventory_group_name:"",description:"",image:"",parent:"Primary Group"}),K(null),j(0),N({}),T.current&&(T.current.value="")};g.useEffect(()=>{c(wr((x==null?void 0:x._id)||"")),t&&r?(P({inventory_group_name:r.inventory_group_name||"",description:r.description||"",image:r.image||"",parent:r.parent||""}),K(typeof(r==null?void 0:r.image)=="string"?r.image:null)):t&&!r&&ge()},[t,r,c,x==null?void 0:x._id]);const Ae=async()=>{if(!O()){Z.error("Please fix the form errors before submitting");return}f(!0);const ae={inventory_group_name:D.inventory_group_name.trim()};D.description&&D.description!==""&&(ae.description=D.description),D.image&&typeof D.image!="string"&&(ae.image=D.image),D.parent&&D.parent!==""&&(ae.parent=D.parent.trim());const Y=new FormData;Object.entries(ae).forEach(([re,Te])=>{typeof Te=="boolean"?Y.append(re,Te?"true":"false"):(Te instanceof File||typeof Te=="string")&&Y.append(re,Te)}),Y.append("company_id",(x==null?void 0:x._id)||""),r&&r._id?await Z.promise(c(Du({id:r._id,data:Y})).unwrap().then(()=>{f(!1),a(),s&&s()}).catch(()=>{f(!1)}),{loading:"Updating your group...",success:e.jsx("b",{children:"Group successfully updated! 🎉"}),error:e.jsx("b",{children:"Failed to update group. Please try again."})}):await Z.promise(c(Nu(Y)).unwrap().then(re=>{const Te={name:re.inventory_group_name,_id:re._id};n(Te),f(!1),ge(),a()}).catch(()=>{f(!1)}),{loading:"Creating your group...",success:e.jsx("b",{children:"Group successfully created! 🎉"}),error:e.jsx("b",{children:"Failed to create group. Please try again."})})};return e.jsxs(Mt,{anchor:"right",PaperProps:{sx:{width:{xs:"100%",sm:600,md:700},backgroundColor:o.palette.background.default,backgroundImage:`linear-gradient(135deg, ${o.palette.background.default} 0%, ${o.palette.background.paper} 100%)`,overflow:"hidden"}},sx:{"& .MuiBackdrop-root":{backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)"}},open:t,onClose:a,transitionDuration:300,children:[e.jsx(ze,{in:S,children:e.jsx(St,{sx:{position:"absolute",top:0,left:0,right:0,zIndex:1e3,height:3}})}),e.jsxs(l,{sx:{p:3,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`2px solid ${o.palette.primary.main}`,background:`linear-gradient(135deg, ${o.palette.primary.main}20 0%, ${o.palette.primary.light}15 100%)`,backdropFilter:"blur(20px)",position:"sticky",top:0,zIndex:100},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(le,{title:"Close",arrow:!0,children:e.jsx(ke,{onClick:a,sx:{backgroundColor:o.palette.background.paper,boxShadow:o.shadows[2],"&:hover":{backgroundColor:o.palette.action.hover,transform:"scale(1.1) rotate(90deg)",boxShadow:o.shadows[4]},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:e.jsx(ct,{})})}),e.jsxs(l,{children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx($e,{sx:{bgcolor:o.palette.primary.main,width:32,height:32},children:e.jsx(Ta,{fontSize:"small"})}),e.jsx(i,{variant:"h6",fontWeight:700,children:r?"Edit Group":"Create Group"})]}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:r?"Update the details of your group":"Create a new group for your products"})]})]}),!p&&e.jsx(ve,{icon:e.jsx(ht,{}),label:"Fill required fields",size:"small",variant:"outlined",sx:{borderColor:o.palette.primary.main,color:o.palette.primary.main}})]}),e.jsx(l,{sx:{flex:1,overflow:"auto",position:"relative","&::-webkit-scrollbar":{width:8},"&::-webkit-scrollbar-track":{backgroundColor:o.palette.background.default},"&::-webkit-scrollbar-thumb":{backgroundColor:o.palette.divider,borderRadius:1,"&:hover":{backgroundColor:o.palette.action.hover}}},children:e.jsx(l,{sx:{p:3},children:e.jsxs(ne,{elevation:3,sx:{px:3,py:2,mb:3,borderRadius:1,background:`linear-gradient(135deg, ${o.palette.background.paper} 0%, ${o.palette.action.hover}20 100%)`,border:`1px solid ${o.palette.divider}`,"&:hover":{boxShadow:o.shadows[8]}},children:[e.jsxs(l,{sx:{mb:2},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(uo,{color:"primary"}),e.jsx(i,{variant:"h6",fontWeight:600,children:"Group Image"})]}),e.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",style:{display:"none"},ref:T,onChange:ae=>{var re;const Y=(re=ae.target.files)==null?void 0:re[0];Y&&b(Y)}}),e.jsx(l,{onClick:$,onDrop:M,onDragOver:ae=>ae.preventDefault(),onDragEnter:W,onDragLeave:C,sx:{border:`2px dashed ${k?o.palette.primary.main:o.palette.divider}`,borderRadius:1,py:2,position:"relative",textAlign:"center",cursor:"pointer",backgroundColor:k?`${o.palette.primary.main}10`:"transparent",minHeight:200,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{borderColor:o.palette.primary.main,backgroundColor:`${o.palette.primary.main}05`}},children:_?e.jsxs(l,{sx:{position:"relative"},children:[e.jsx("img",{src:_,alt:"Category Preview",style:{maxWidth:150,maxHeight:150,borderRadius:1,boxShadow:o.shadows[4],objectFit:"cover"}}),e.jsx(le,{title:"Remove image",arrow:!0,children:e.jsx(ke,{onClick:G,sx:{position:"absolute",top:-12,right:-12,backgroundColor:o.palette.error.main,color:"white",width:32,height:32,"&:hover":{backgroundColor:o.palette.error.dark,transform:"scale(1.1)"},boxShadow:o.shadows[4]},children:e.jsx(ut,{fontSize:"small"})})})]}):e.jsxs(l,{children:[e.jsx(Fa,{sx:{fontSize:36,color:o.palette.primary.main,mb:1}}),e.jsx(i,{variant:"h6",sx:{fontWeight:600,mb:1},children:"Upload Group Image"}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Drag & drop your image here, or click to browse"}),e.jsxs(l,{sx:{display:"flex",gap:1,justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(ve,{label:"PNG",size:"small",variant:"outlined"}),e.jsx(ve,{label:"JPEG",size:"small",variant:"outlined"}),e.jsx(ve,{label:"JPG",size:"small",variant:"outlined"}),e.jsx(ve,{label:"WebP",size:"small",variant:"outlined"})]}),e.jsx(i,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:"Max 5MB • Recommended 1:1 ratio"})]})})]}),e.jsx(Pe,{sx:{mb:2}}),e.jsxs(J,{spacing:2,children:[e.jsxs(qe,{fullWidth:!0,children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(Ta,{color:"primary",fontSize:"small"}),e.jsx(i,{variant:"body1",fontWeight:600,children:"Group Name *"})]}),e.jsx(X,{fullWidth:!0,placeholder:"Enter group name",value:D.inventory_group_name,onChange:ae=>y("inventory_group_name",ae.target.value),error:!!w.inventory_group_name,helperText:w.inventory_group_name,sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.3s ease","&:hover":{transform:"translateY(-1px)",boxShadow:o.shadows[2]},"&.Mui-focused":{transform:"translateY(-2px)",boxShadow:o.shadows[4]}}}})]}),e.jsxs(qe,{fullWidth:!0,children:[e.jsx(i,{variant:"body1",fontWeight:600,sx:{mb:1},children:"Parent Group"}),e.jsx(at,{options:[{label:"Primary Group",value:"Primary Group"},...A],freeSolo:!0,value:R,onChange:F,getOptionLabel:ae=>typeof ae=="string"?ae:ae.label,renderOption:(ae,Y)=>{const{key:re,...Te}=ae;return e.jsx(l,{component:"li",...Te,sx:{fontWeight:400,color:"inherit",borderTop:"none","&:hover":{backgroundColor:d(o.palette.action.hover,.1)}},children:Y.label},re)},renderInput:ae=>e.jsx(X,{...ae,placeholder:"Enter parent group",variant:"outlined",required:!0,fullWidth:!0,helperText:w.parent||"Select a parent group if applicable",error:!!w.parent,sx:{"& .MuiOutlinedInput-root":{borderRadius:1,"&:hover fieldset":{borderColor:o.palette.primary.main,borderWidth:2}}}}),sx:{minWidth:250}})]}),e.jsxs(qe,{fullWidth:!0,children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(Ci,{color:"primary",fontSize:"small"}),e.jsx(i,{variant:"body1",fontWeight:600,children:"Description"}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["(",D.description.length,"/500)"]})]}),e.jsx(X,{fullWidth:!0,multiline:!0,rows:3,placeholder:"Describe your group...",value:D.description,onChange:ae=>y("description",ae.target.value),error:!!w.description,helperText:w.description,sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.3s ease","&:hover":{transform:"translateY(-1px)",boxShadow:o.shadows[2]}}}})]})]})]})})}),e.jsx(l,{sx:{p:3,borderTop:`1px solid ${o.palette.divider}`,backgroundColor:o.palette.background.paper,background:`linear-gradient(135deg, ${o.palette.background.paper} 0%, ${o.palette.action.hover}20 100%)`,backdropFilter:"blur(20px)"},children:e.jsxs(J,{direction:p?"column":"row",spacing:2,justifyContent:"space-between",alignItems:"center",children:[e.jsxs(J,{direction:p?"column":"row",spacing:2,sx:{width:p?"100%":"auto"},children:[e.jsx(ee,{variant:"outlined",onClick:ge,disabled:S,fullWidth:p,sx:{textTransform:"none",borderRadius:1,px:3,py:1.5,fontWeight:600,transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:o.shadows[4]}},children:"Reset Form"}),e.jsx(ee,{variant:"contained",startIcon:S?e.jsx(qt,{className:"animate-spin"}):e.jsx(pa,{}),onClick:Ae,disabled:S||!D.inventory_group_name.trim(),fullWidth:p,sx:{textTransform:"none",px:4,py:1.5,fontSize:"1rem",fontWeight:700,borderRadius:1,background:`linear-gradient(135deg, ${o.palette.primary.main} 0%, ${o.palette.primary.dark} 100%)`,boxShadow:o.shadows[6],"&:hover":{background:`linear-gradient(135deg, ${o.palette.primary.dark} 0%, ${o.palette.primary.main} 100%)`,transform:"translateY(-3px)",boxShadow:o.shadows[12]},"&:disabled":{background:o.palette.action.disabledBackground,color:o.palette.action.disabled,transform:"none",boxShadow:"none"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",minWidth:200},children:S?r?"Updating Group...":"Creating Group...":r?"Update Group":"Create Group"})]}),!p&&D.inventory_group_name.trim()&&e.jsx(Ye,{appear:!0,in:!0,timeout:300,children:e.jsx(ve,{icon:e.jsx(pt,{}),label:"Ready to submit",color:"success",variant:"outlined",sx:{fontWeight:600}})})]})})]})},Fu=Ge(Id)(({theme:t})=>({[`&.${gr.alternativeLabel}`]:{top:22},[`&.${gr.active}`]:{[`& .${gr.line}`]:{backgroundImage:`linear-gradient(95deg, ${t.palette.primary.main} 0%, ${t.palette.primary.light} 100%)`}},[`&.${gr.completed}`]:{[`& .${gr.line}`]:{backgroundImage:`linear-gradient(95deg, ${t.palette.success.main} 0%, ${t.palette.success.light} 100%)`}},[`& .${gr.line}`]:{height:3,border:0,backgroundColor:t.palette.divider,borderRadius:1}})),vo=t=>{var ie,me,Q,ce,De,et;const a=we(),n=Fe(),{setDrawer:s,drawer:r,setRefreshKey:o,product:p,setSelectedProduct:c}=t,{user:x,current_company_id:u}=Ce(Se=>Se.auth),S=u||localStorage.getItem("current_company_id")||((ie=x==null?void 0:x.user_settings)==null?void 0:ie.current_company_id)||"",f=(me=x==null?void 0:x.company)==null?void 0:me.find(Se=>Se._id===S),v=(ce=(Q=f==null?void 0:f.company_settings)==null?void 0:Q.features)==null?void 0:ce.enable_tax,[j,T]=g.useState(0),[k,B]=g.useState(new Set),[_,K]=g.useState(!1),[w,N]=g.useState(!1),[R,L]=g.useState(!1),[D,P]=g.useState({}),[A,O]=g.useState(!1),[y,F]=g.useState(null),[h,b]=g.useState(null),[M,W]=g.useState(null),[C,$]=g.useState(null),[G,ge]=g.useState(!1),{categoryLists:Ae}=Ce(Se=>Se.category),{inventoryGroupLists:ae}=Ce(Se=>Se.inventoryGroup),[Y,re]=g.useState({stock_item_name:"",company_id:"",unit:"",unit_id:"",is_deleted:!1,alias_name:"",category:"",category_id:"",group:"",group_id:"",image:"",description:"",opening_balance:0,opening_rate:0,opening_value:0,nature_of_goods:"",hsn_code:"",taxability:"",tax_rate:0,low_stock_alert:5}),Te=g.useRef(null),V=v?[{label:"Basic Details",icon:aa},{label:"Additional Info",icon:xr},{label:"Advanced Settings",icon:pt}]:[{label:"Basic Details",icon:aa},{label:"Additional Info",icon:xr}],z=g.useCallback(()=>{var Be,He;const Se={};return Y.stock_item_name.trim()||(Se.product_name="Product name is required"),Y.unit.trim()||(Se.selling_price="Product must have a measuring unit"),(He=(Be=f==null?void 0:f.company_settings)==null?void 0:Be.features)!=null&&He.enable_tax&&(Y.hsn_code.trim()||(Se.hsn_code="HSN code is required"),Y.taxability.trim()||(Se.taxability="Taxability is required"),Y.taxability==="Taxable"&&Y.tax_rate<0&&(Se.tax_rate="Tax percentage is required")),P(Se),Se},[(et=(De=f==null?void 0:f.company_settings)==null?void 0:De.features)==null?void 0:et.enable_tax,Y]),de=g.useCallback(()=>{const Se=new Set;Y.stock_item_name.trim()&&Y.unit.trim()&&Se.add(0),(j>0||Y.alias_name||Y.category||Y.group||Y.description)&&Se.add(1),V.length>2&&(j>1||Y.hsn_code||Y.taxability||Y.tax_rate)&&Se.add(2),B(Se)},[Y,j,V.length]);g.useEffect(()=>{de()},[de]);const Ie=g.useCallback((Se,Be)=>{re(He=>({...He,[Se]:Be})),D[Se]&&P(He=>({...He,[Se]:""}))},[D]),oe=g.useCallback(Se=>{if(!Se)return;if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(Se.type)){Va.error("Only PNG, JPEG, JPG, or WebP images are allowed.");return}if(Se.size>5*1024*1024){Va.error("Image size should be less than 5MB.");return}re(He=>({...He,image:Se}));const Be=new FileReader;Be.onload=He=>{var Yt;const Oe=(Yt=He.target)==null?void 0:Yt.result;F(Oe)},Be.readAsDataURL(Se)},[]),ue=g.useCallback(Se=>{Se.stopPropagation(),F(null),re(Be=>({...Be,image:""})),Te.current&&(Te.current.value="")},[]),je=async Se=>{var He,Oe,Yt,_t,wt,Ra,Wa,za;Se&&Se.preventDefault();const Be=z();if(Object.keys(Be).length>0){const _e=Object.keys(Be)[0];_e&&Va.error(Be[_e]);return}L(!0);try{const _e=ou({num:(Number(Y.opening_balance)||0)*(Number(Y.opening_rate)||0),digits:2}),Re={stock_item_name:Y.stock_item_name.trim(),unit:Y.unit.trim(),unit_id:Y.unit_id.trim(),company_id:(S||"").trim(),is_deleted:Y.is_deleted===!1};(He=Y.hsn_code)!=null&&He.trim()&&(Re.hsn_code=Y.hsn_code.trim()),(Oe=Y.taxability)!=null&&Oe.trim()&&(Re.taxability=Y.taxability.trim()),(Yt=Y.nature_of_goods)!=null&&Yt.trim()&&(Re.nature_of_goods=Y.nature_of_goods.trim()),(_t=Y.alias_name)!=null&&_t.trim()&&(Re.alias_name=Y.alias_name.trim()),(wt=Y.category)!=null&&wt.trim()&&(Re.category=Y.category.trim()),(Ra=Y.category_id)!=null&&Ra.trim()&&(Re.category_id=Y.category_id.trim()),(Wa=Y.group)!=null&&Wa.trim()&&(Re.group=Y.group.trim()),(za=Y.description)!=null&&za.trim()&&(Re.description=Y.description.trim()),Y.image&&typeof Y.image!="string"&&(Re.image=Y.image),Y.opening_balance&&(Re.opening_balance=Y.opening_balance),Y.opening_rate&&(Re.opening_rate=Y.opening_rate),_e&&(Re.opening_value=_e),Y.low_stock_alert&&(Re.low_stock_alert=Y.low_stock_alert??5),Y.tax_rate&&(Re.tax_rate=Y.tax_rate);const sa=new FormData;Object.entries(Re).forEach(([va,Il])=>{sa.append(va,Il)}),p&&p._id?await n(On({data:sa,id:p._id})).unwrap().then(()=>{o==null||o(va=>va+1),c==null||c(null),Va.success("Product successfully updated! 🎉")}).catch(va=>{Va.error(va||"An unexpected error occurred. Please try again later.")}):await n(Dn({productData:sa})).unwrap().then(()=>{o==null||o(va=>va+1),c==null||c(null),Va.success("Product successfully created! 🎉")}).catch(va=>{Va.error(va||"An unexpected error occurred. Please try again later.")})}catch(_e){L(!1),console.error("Error creating/updating product:",_e),E()}finally{L(!1),E()}},q=g.useCallback(()=>{re({stock_item_name:"",company_id:"",unit:"",unit_id:"",is_deleted:!1,alias_name:"",category:"",category_id:"",group:"",group_id:"",image:"",description:"",opening_balance:0,opening_rate:0,opening_value:0,nature_of_goods:"",hsn_code:"",taxability:"",low_stock_alert:0,tax_rate:0}),F(null),T(0),B(new Set),Te.current&&(Te.current.value="")},[]),E=g.useCallback(()=>{s(!1),L(!1),c==null||c(null),$(null),b(null),W(null),F(null),o==null||o(Se=>Se+1),q()},[q,s,o,c]);g.useEffect(()=>{if(p){const Se=Et==null?void 0:Et.find(Oe=>Oe.value===p.unit&&Oe.id===p.unit_id);$(Se||null);const Be=ae==null?void 0:ae.map(Oe=>({label:Oe.inventory_group_name,value:Oe._id,id:Oe._id})).find(Oe=>Oe.label===p.group&&Oe.id===p.group_id);W(Be||null);const He=Ae==null?void 0:Ae.map(Oe=>({label:Oe.category_name,value:Oe._id,id:Oe._id})).find(Oe=>Oe.label===p.category&&Oe.id===p.category_id);b(He||null)}},[Ae,ae,p]),g.useEffect(()=>{p&&(re({stock_item_name:p.stock_item_name||"",company_id:p.company_id||"",unit:p.unit||"",unit_id:p.unit_id||"",is_deleted:p.is_deleted||!1,alias_name:p.alias_name||"",category:p.category||"",category_id:p.category_id||"",group:p.group||"",group_id:p.group_id||"",image:p.image||"",description:p.description||"",opening_balance:p.opening_balance||0,opening_rate:p.opening_rate||0,opening_value:p.opening_value||0,nature_of_goods:p.nature_of_goods||"",hsn_code:p.hsn_code||"",taxability:p.taxability||"",low_stock_alert:p.low_stock_alert||0,tax_rate:p.tax_rate||0}),F(typeof(p==null?void 0:p.image)=="string"?p.image:""))},[p]),g.useEffect(()=>{n(Zr(S??""))},[S,n]),g.useEffect(()=>{n(wr(S??""))},[S,n]),g.useEffect(()=>{if(Ae&&Y.category){if(h&&h.value===Y.category)return;const Se=Ae.map(Be=>({label:Be.category_name,value:Be._id,id:Be._id})).find(Be=>Be.value===Y.category);Se?b(Se):Y.category&&Y.category!=="__add_new__"?b({label:Y.category,value:Y.category,id:Y.category_id||""}):b(null)}},[Ae,Y.category,h,Y.category_id]),g.useEffect(()=>{if(ae&&Y.group){if(M&&M.value===Y.group)return;const Se=ae.map(Be=>({label:Be.inventory_group_name,value:Be._id,id:Be._id})).find(Be=>Be.value===Y.group);Se?W(Se):Y.group&&Y.group!=="__add_new__"?W({label:Y.group,value:Y.group,id:Y.group_id||""}):W(null)}},[ae,Y.group,M,Y.group_id]),g.useEffect(()=>{ge(!!Y.hsn_code)},[Y.hsn_code]);const te=()=>{const Se={data:Y,handleChange:Ie,validationErrors:D,theme:a,categoryLists:Ae||[],inventoryGroupLists:ae||[],selectedCategoryOption:h,selectedGroupOption:M,setSelectedCategoryOption:b,setSelectedGroupOption:W,setOpenCategoryModal:K,setOpenGroupModal:N,showGstFields:G,isHSNRequired:v,selectedUnitOption:C,setSelectedUnitOption:$,imagePreview:y,setImagePreview:F,handleImageChange:oe,removeImage:ue,isDragActive:A,setIsDragActive:O,fileInputRef:Te,calculateStockValue:()=>((Y==null?void 0:Y.opening_balance)||0)*((Y==null?void 0:Y.opening_rate)||0)};switch(j){case 0:return e.jsx(Yo,{...Se});case 1:return e.jsx(zu,{...Se});case 2:return e.jsx($u,{...Se});default:return e.jsx(Yo,{...Se})}},U=()=>{switch(j){case 0:return Y.stock_item_name.trim()&&Y.unit.trim();case 1:return!0;case 2:return v?!Y.hsn_code.trim()||!Y.taxability.trim()?!1:Y.taxability==="Taxable"?Y.tax_rate>0:!0:!0;default:return!0}},H=v?Y.hsn_code.trim()!=="":!0;return e.jsxs(e.Fragment,{children:[e.jsxs(Mt,{anchor:"right",open:r,onClose:E,PaperProps:{sx:{width:{xs:"100%",sm:700,md:900},backgroundColor:a.palette.background.default,backgroundImage:`linear-gradient(135deg, ${d(a.palette.primary.main,.02)} 0%, ${d(a.palette.secondary.main,.02)} 100%)`}},sx:{"& .MuiBackdrop-root":{backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)"}},...r?{}:{inert:""},children:[R&&e.jsx(St,{sx:{position:"absolute",top:0,left:0,right:0,zIndex:1201,height:4}}),e.jsx(l,{sx:{p:2,borderBottom:`1px solid ${a.palette.divider}`,background:`linear-gradient(135deg, ${d(a.palette.primary.main,.1)} 0%, ${d(a.palette.primary.light,.05)} 100%)`,backdropFilter:"blur(20px)"},children:e.jsx(J,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:e.jsxs(J,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(le,{title:"Close",children:e.jsx(ke,{onClick:E,sx:{backgroundColor:d(a.palette.background.paper,.8),backdropFilter:"blur(10px)","&:hover":{transform:"rotate(90deg)"},transition:"all 0.3s ease"},children:e.jsx(ct,{})})}),e.jsxs(l,{children:[e.jsx(i,{variant:"h6",sx:{fontWeight:800,background:`linear-gradient(135deg, ${a.palette.primary.main}, ${a.palette.secondary.main})`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:p?"Edit Product":"Create Product"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:p?"Update your product details":"Add a new product to your inventory"})]})]})})}),e.jsx(l,{sx:{px:3,py:2,borderBottom:`1px solid ${a.palette.divider}`,backgroundColor:d(a.palette.background.paper,.7),backdropFilter:"blur(10px)"},children:e.jsx(Td,{activeStep:j,connector:e.jsx(Fu,{}),sx:{"& .MuiStepLabel-root":{cursor:"pointer"}},children:V.map((Se,Be)=>e.jsx(Ad,{completed:k.has(Be),onClick:()=>{U()&&T(Be)},children:e.jsx(Pd,{StepIconComponent:({active:He,completed:Oe})=>e.jsx(l,{sx:{width:30,height:30,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:Oe?a.palette.success.main:He?a.palette.primary.main:a.palette.grey[300],color:"white",boxShadow:He||Oe?`0 4px 20px ${d(Oe?a.palette.success.main:a.palette.primary.main,.4)}`:"none",transition:"all 0.3s ease",transform:He?"scale(1.1)":"scale(1)"},children:Oe?e.jsx(pt,{fontSize:"small"}):He?e.jsx(Se.icon,{fontSize:"small"}):e.jsx(Md,{fontSize:"small"})}),children:e.jsx(i,{variant:"body2",sx:{fontWeight:j===Be?700:500,color:j===Be?a.palette.primary.main:a.palette.text.secondary},children:Se.label})})},Se.label))})}),e.jsx(l,{sx:{flex:1,overflow:"auto","&::-webkit-scrollbar":{width:8},"&::-webkit-scrollbar-track":{backgroundColor:a.palette.background.default},"&::-webkit-scrollbar-thumb":{backgroundColor:a.palette.divider,borderRadius:4,"&:hover":{backgroundColor:a.palette.text.secondary}}},children:e.jsx(l,{children:te()})}),e.jsx(l,{sx:{p:2,borderTop:`1px solid ${a.palette.divider}`,background:`linear-gradient(135deg, ${d(a.palette.background.paper,.9)} 0%, ${d(a.palette.action.hover,.5)} 100%)`,backdropFilter:"blur(20px)"},children:e.jsxs(J,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(J,{direction:"row",spacing:2,children:[e.jsx(ee,{variant:"outlined",onClick:()=>T(Math.max(0,j-1)),disabled:j===0,sx:{textTransform:"none",borderRadius:1,borderWidth:2,"&:hover":{borderWidth:2}},children:"Previous"}),j<V.length-1&&e.jsx(ee,{variant:"contained",onClick:()=>T(Math.min(V.length-1,j+1)),disabled:!U(),sx:{textTransform:"none",borderRadius:1},children:"Next"})]}),e.jsxs(J,{direction:"row",spacing:2,children:[e.jsx(ee,{variant:"outlined",onClick:q,disabled:R,children:"Reset"}),e.jsx(ee,{variant:"contained",size:"large",startIcon:e.jsx(ia,{}),onClick:je,disabled:R||!H||!U(),sx:{textTransform:"none",px:3,py:1,fontSize:"1rem",fontWeight:700,borderRadius:1,"&:disabled":{background:a.palette.action.disabledBackground,color:a.palette.action.disabled}},children:R?p?"Updating...":"Creating...":p?"Update Product":"Create Product"})]})]})})]}),e.jsx(il,{open:_,onClose:()=>K(!1),onCreated:async Se=>{n(Zr(S??"")),b({label:Se.name,value:Se.name,id:Se._id}),re(Be=>({...Be,category_id:Se._id,category:Se.name})),K(!1)}}),e.jsx(ol,{open:w,onClose:()=>N(!1),onCreated:async Se=>{n(wr(S??"")),W({label:Se.name,value:Se.name,id:Se._id}),re(Be=>({...Be,group:Se.name,group_id:Se._id})),N(!1)}})]})},Xa=({children:t,value:a,index:n,...s})=>e.jsx("div",{role:"tabpanel",hidden:a!==n,id:`invoice-tabpanel-${n}`,"aria-labelledby":`invoice-tab-${n}`,...s,style:{padding:"16px 0"},children:a===n&&e.jsx(l,{children:t})}),Lu=({product:t,onDelete:a,onEdit:n,onView:s,index:r})=>{var w,N,R,L;const o=we(),p=Fe(),{user:c,current_company_id:x}=Ce(D=>D.auth),u=x||localStorage.getItem("current_company_id")||((w=c==null?void 0:c.user_settings)==null?void 0:w.current_company_id)||"",S=(N=c==null?void 0:c.company)==null?void 0:N.find(D=>D._id==u),f=(L=(R=S==null?void 0:S.company_settings)==null?void 0:R.features)==null?void 0:L.enable_tax,[v,j]=g.useState(!1),[T,k]=g.useState(!1),B=((t==null?void 0:t.purchase_value)+(t==null?void 0:t.opening_value))/((t==null?void 0:t.purchase_qty)+(t==null?void 0:t.opening_balance))*(t==null?void 0:t.current_stock)||0,_=B?(((t==null?void 0:t.purchase_value)+(t==null?void 0:t.opening_value))/((t==null?void 0:t.purchase_qty)+(t==null?void 0:t.opening_balance))||0).toFixed(2):0 .toFixed(2),K=()=>{a((t==null?void 0:t._id)??""),j(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(ze,{in:!0,timeout:300+r*100,children:e.jsxs(xe,{onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),sx:{cursor:"pointer",width:"100%",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:T?"translateY(-2px)":"translateY(0)",boxShadow:T?`0 8px 25px ${d(o.palette.primary.main,.15)}`:"none","&:hover":{bgcolor:d(o.palette.primary.main,.02)},borderLeft:`4px solid ${T?o.palette.primary.main:"transparent"}`,"& .MuiTableCell-root":{padding:"8px 16px"}},onClick:()=>s(t),children:[e.jsx(m,{sx:{pl:3,pr:1},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start"},children:[e.jsx($e,{sx:{width:36,height:36,mr:2,bgcolor:Gt(t.stock_item_name),fontSize:"1rem",fontWeight:700,boxShadow:`0 4px 12px ${d(Gt(t.stock_item_name),.3)}`,transition:"all 0.3s ease",transform:T?"scale(1.1)":"scale(1)"},src:t!=null&&t.image?t.image:"",children:ha(t.stock_item_name)}),e.jsxs(l,{sx:{flex:1},children:[e.jsx(i,{variant:"body1",sx:{fontWeight:600,color:o.palette.text.primary,mb:.5,transition:"color 0.3s ease"},children:t.stock_item_name}),t.description&&e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1},children:e.jsx(i,{variant:"body2",sx:{color:o.palette.text.primary,mb:.5},children:t.description})})]})]})}),f&&e.jsx(m,{align:"center",sx:{px:1},children:e.jsx(i,{variant:"body1",sx:{fontWeight:600,color:o.palette.text.secondary},children:t.hsn_code?`#${t.hsn_code}`:"-"})}),e.jsx(m,{align:"center",sx:{px:1},children:e.jsxs(i,{variant:"body1",sx:{fontWeight:700,color:o.palette.text.primary},children:[t.opening_balance||0,"  ",t.unit]})}),e.jsx(m,{align:"center",sx:{px:1},children:e.jsxs(i,{variant:"body1",sx:{fontWeight:600,color:o.palette.text.primary},children:[t==null?void 0:t.current_stock," ",t.unit]})}),e.jsx(m,{align:"center",sx:{px:1},children:e.jsxs(i,{variant:"body1",sx:{fontWeight:600,color:o.palette.text.primary},children:[e.jsx(Ee,{sx:{fontSize:"0.875rem",verticalAlign:"middle",mr:1}}),_]})}),e.jsx(m,{align:"center",sx:{px:1},children:e.jsxs(i,{variant:"body1",sx:{fontWeight:600,color:o.palette.text.primary},children:[e.jsx(Ee,{sx:{fontSize:"0.875rem",verticalAlign:"middle",mr:1}}),B.toFixed(2)]})}),e.jsx(m,{align:"center",children:e.jsx(Ye,{appear:!0,in:!0,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:.5,justifyContent:"center"},children:[e.jsx(le,{title:"View Details",arrow:!0,children:e.jsx(ke,{size:"small",onClick:D=>{D.stopPropagation(),s(t)},sx:{bgcolor:d(o.palette.info.main,.1),color:o.palette.info.main,transition:"all 0.3s ease","&:hover":{bgcolor:d(o.palette.info.main,.2),transform:"scale(1.1)"}},children:e.jsx(Ha,{fontSize:"small"})})}),e.jsx(le,{title:"Edit Product",arrow:!0,children:e.jsx(ke,{size:"small",onClick:async D=>{D.stopPropagation(),n(t),p(Sr({product_id:t._id,company_id:(S==null?void 0:S._id)??""}))},sx:{bgcolor:d(o.palette.warning.main,.1),color:o.palette.warning.main,transition:"all 0.3s ease","&:hover":{bgcolor:d(o.palette.warning.main,.2),transform:"scale(1.1)"}},children:e.jsx(Rr,{fontSize:"small"})})}),e.jsx(le,{title:"Delete Product",arrow:!0,children:e.jsx(ke,{size:"small",onClick:D=>{j(!0),D.stopPropagation()},sx:{bgcolor:d(o.palette.error.main,.1),color:o.palette.error.main,transition:"all 0.3s ease","&:hover":{bgcolor:d(o.palette.error.main,.2),transform:"scale(1.1)"}},children:e.jsx(mt,{fontSize:"small"})})})]})})})]})}),e.jsxs(Pa,{open:v,onClose:()=>j(!1),"aria-labelledby":"delete-dialog-title",PaperProps:{sx:{borderRadius:1,boxShadow:`0 24px 50px ${d(o.palette.error.main,.2)}`}},children:[e.jsxs(ba,{id:"delete-dialog-title",sx:{display:"flex",alignItems:"center",gap:2,color:o.palette.error.main,fontWeight:600},children:[e.jsx(mt,{}),"Delete ",t.stock_item_name,"?"]}),e.jsxs(fa,{children:[e.jsx(rt,{severity:"warning",sx:{mb:2},children:"This action cannot be undone. The product will be permanently removed from your inventory."}),e.jsxs(i,{children:['Are you sure you want to delete "',e.jsx("strong",{children:t.stock_item_name}),'"?']})]}),e.jsxs(Ma,{sx:{p:3,gap:1},children:[e.jsx(ee,{onClick:()=>j(!1),variant:"outlined",sx:{borderRadius:2},children:"Cancel"}),e.jsx(ee,{onClick:K,color:"error",variant:"contained",sx:{borderRadius:2},startIcon:e.jsx(mt,{}),children:"Delete Product"})]})]})]})},Ou=()=>{var o,p,c,x;const{user:t,current_company_id:a}=Ce(u=>u.auth),n=a||localStorage.getItem("current_company_id")||((o=t==null?void 0:t.user_settings)==null?void 0:o.current_company_id)||"",s=(p=t==null?void 0:t.company)==null?void 0:p.find(u=>u._id===n),r=(x=(c=s==null?void 0:s.company_settings)==null?void 0:c.features)==null?void 0:x.enable_tax;return e.jsxs(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{children:e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(pe,{variant:"circular",width:36,height:36,sx:{mr:2}}),e.jsxs(l,{sx:{flex:1},children:[e.jsx(pe,{variant:"text",width:140,height:14}),e.jsx(pe,{variant:"text",width:140,height:14})]})]})}),r&&e.jsx(m,{align:"center",children:e.jsx(pe,{variant:"text",width:60,height:20,sx:{mx:"auto"}})}),e.jsx(m,{align:"center",children:e.jsx(pe,{variant:"text",width:80,height:20,sx:{mx:"auto"}})}),e.jsx(m,{align:"center",children:e.jsx(pe,{variant:"text",width:80,height:20,sx:{mx:"auto"}})}),e.jsx(m,{align:"center",children:e.jsx(pe,{variant:"text",width:80,height:20,sx:{mx:"auto"}})}),e.jsx(m,{align:"center",children:e.jsx(pe,{variant:"text",width:80,height:20,sx:{mx:"auto"}})}),e.jsx(m,{align:"center",children:e.jsxs(l,{sx:{display:"flex",justifyContent:"center",gap:.5},children:[e.jsx(pe,{variant:"rectangular",width:32,height:32,sx:{borderRadius:1}}),e.jsx(pe,{variant:"rectangular",width:32,height:32,sx:{borderRadius:1}}),e.jsx(pe,{variant:"rectangular",width:32,height:32,sx:{borderRadius:1}})]})})]})},Eu=({category:t,onDelete:a,onEdit:n})=>{const s=we(),[r,o]=g.useState(!1),[p,c]=g.useState(!1),x=()=>{a((t==null?void 0:t._id)??""),o(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(Ne,{onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),elevation:3,sx:{cursor:"pointer",height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out","&:hover":{transform:"translateY(-4px)",boxShadow:6},overflow:"visible"},children:e.jsxs(Me,{sx:{flexGrow:1},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",mb:2},children:[e.jsx($e,{sx:{width:36,height:36,mr:2,bgcolor:Gt(t.category_name),fontSize:"1rem",fontWeight:700,boxShadow:`0 4px 12px ${d(Gt(t.category_name),.3)}`,transition:"all 0.3s ease",transform:p?"scale(1.1)":"scale(1)"},src:t!=null&&t.image?t.image:"",children:ha(t.category_name)}),e.jsx(i,{variant:"body1",gutterBottom:!0,noWrap:!0,title:t==null?void 0:t.category_name,children:(t==null?void 0:t.category_name)||""})]}),e.jsx(Pe,{sx:{my:1.5}}),e.jsxs(J,{spacing:1,children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Ta,{sx:{mr:1,color:s.palette.info.dark,fontSize:"1.2rem"}}),e.jsx(i,{variant:"body2",noWrap:!0,children:(t==null?void 0:t.description)||"No description provided"})]}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(i,{variant:"h6",noWrap:!0,children:[(t==null?void 0:t.stock_items_count)||0," Products"]}),e.jsx(Ye,{appear:!0,in:!0,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:.5,justifyContent:"flex-end"},children:[e.jsx(le,{title:"Edit Category",arrow:!0,children:e.jsx(ke,{size:"small",onClick:u=>{u.stopPropagation(),n(t)},sx:{bgcolor:d(s.palette.warning.main,.1),color:s.palette.warning.main,transition:"all 0.3s ease","&:hover":{bgcolor:d(s.palette.warning.main,.2),transform:"scale(1.1)"}},children:e.jsx(aa,{fontSize:"small"})})}),e.jsx(le,{title:"Delete Category",arrow:!0,children:e.jsx(ke,{size:"small",onClick:u=>{o(!0),u.stopPropagation()},sx:{bgcolor:d(s.palette.error.main,.1),color:s.palette.error.main,transition:"all 0.3s ease","&:hover":{bgcolor:d(s.palette.error.main,.2),transform:"scale(1.1)"}},children:e.jsx(ut,{fontSize:"small"})})})]})})]})]})]})}),e.jsxs(Pa,{open:r,onClose:()=>o(!1),"aria-labelledby":"delete-dialog-title",PaperProps:{sx:{borderRadius:1,boxShadow:`0 24px 50px ${d(s.palette.error.main,.2)}`}},children:[e.jsxs(ba,{id:"delete-dialog-title",sx:{display:"flex",alignItems:"center",gap:2,color:s.palette.error.main,fontWeight:600},children:[e.jsx(ut,{}),"Delete ",t.category_name,"?"]}),e.jsxs(fa,{children:[e.jsx(rt,{severity:"warning",sx:{mb:2},children:"This action cannot be undone. The category will be permanently removed from your inventory if it is not associated with any products."}),e.jsxs(i,{children:['Are you sure you want to delete "',e.jsx("strong",{children:t.category_name}),'"?']})]}),e.jsxs(Ma,{sx:{p:3,gap:1},children:[e.jsx(ee,{onClick:()=>o(!1),variant:"outlined",sx:{borderRadius:2},children:"Cancel"}),e.jsx(ee,{onClick:x,color:"error",variant:"contained",sx:{borderRadius:2},startIcon:e.jsx(ut,{}),children:"Delete Category"})]})]})]})},Jo=()=>e.jsx(Ne,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:e.jsxs(Me,{sx:{flexGrow:1},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(pe,{variant:"circular",width:36,height:36,sx:{mr:2}}),e.jsx(pe,{variant:"text",width:140,height:14})]}),e.jsxs(l,{sx:{display:"flex",justifyContent:"center",gap:.5},children:[e.jsx(pe,{variant:"rectangular",width:32,height:32,sx:{borderRadius:1}}),e.jsx(pe,{variant:"rectangular",width:32,height:32,sx:{borderRadius:1}}),e.jsx(pe,{variant:"rectangular",width:32,height:32,sx:{borderRadius:1}})]})]}),e.jsx(Pe,{sx:{my:1.5}}),e.jsx(pe,{variant:"text",width:"100%"}),e.jsx(pe,{variant:"text",width:"100%"})]})}),Gu=({group:t,onDelete:a,onEdit:n,onView:s})=>{const r=we(),[o,p]=g.useState(!1),[c,x]=g.useState(!1),u=()=>{a((t==null?void 0:t._id)??""),p(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(Ne,{onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),elevation:3,sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out","&:hover":{transform:"translateY(-4px)",boxShadow:6},overflow:"visible"},children:e.jsxs(Me,{sx:{flexGrow:1},children:[e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx($e,{sx:{width:36,height:36,mr:2,bgcolor:Gt(t.inventory_group_name),fontSize:"1rem",fontWeight:700,boxShadow:`0 4px 12px ${d(Gt(t.inventory_group_name),.3)}`,transition:"all 0.3s ease",transform:c?"scale(1.1)":"scale(1)"},src:t!=null&&t.image?t.image:"",children:ha(t.inventory_group_name)}),e.jsx(i,{variant:"body1",gutterBottom:!0,noWrap:!0,children:(t==null?void 0:t.inventory_group_name)||""})]})}),e.jsx(Pe,{sx:{my:1.5}}),e.jsxs(J,{spacing:1,children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Ta,{sx:{mr:1,color:r.palette.info.dark,fontSize:"1.2rem"}}),e.jsx(i,{variant:"body2",noWrap:!0,children:(t==null?void 0:t.description)||"No description provided"})]}),e.jsx(l,{children:e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Parent: ",(t==null?void 0:t.parent)||"None"]})}),e.jsx(l,{children:e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Created on: ",Nt((t==null?void 0:t.created_at)||"")]})}),e.jsx(Ye,{appear:!0,in:!0,timeout:200,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:.5,justifyContent:"flex-end"},children:[e.jsx(le,{title:"View Details",arrow:!0,children:e.jsx(ke,{size:"small",onClick:S=>{S.stopPropagation(),s(t)},sx:{bgcolor:d(r.palette.info.main,.1),color:r.palette.info.main,transition:"all 0.3s ease","&:hover":{bgcolor:d(r.palette.info.main,.2),transform:"scale(1.1)"}},children:e.jsx(Tr,{fontSize:"small"})})}),e.jsx(le,{title:"Edit Group",arrow:!0,children:e.jsx(ke,{size:"small",onClick:S=>{S.stopPropagation(),n(t)},sx:{bgcolor:d(r.palette.warning.main,.1),color:r.palette.warning.main,transition:"all 0.3s ease","&:hover":{bgcolor:d(r.palette.warning.main,.2),transform:"scale(1.1)"}},children:e.jsx(aa,{fontSize:"small"})})}),e.jsx(le,{title:"Delete Group",arrow:!0,children:e.jsx(ke,{size:"small",onClick:S=>{p(!0),S.stopPropagation()},sx:{bgcolor:d(r.palette.error.main,.1),color:r.palette.error.main,transition:"all 0.3s ease","&:hover":{bgcolor:d(r.palette.error.main,.2),transform:"scale(1.1)"}},children:e.jsx(ut,{fontSize:"small"})})})]})})]})]})}),e.jsxs(Pa,{open:o,onClose:()=>p(!1),"aria-labelledby":"delete-dialog-title",PaperProps:{sx:{borderRadius:1,boxShadow:`0 24px 50px ${d(r.palette.error.main,.2)}`}},children:[e.jsxs(ba,{id:"delete-dialog-title",sx:{display:"flex",alignItems:"center",gap:2,color:r.palette.error.main,fontWeight:600},children:[e.jsx(ut,{}),"Delete ",t.inventory_group_name,"?"]}),e.jsxs(fa,{children:[e.jsx(rt,{severity:"warning",sx:{mb:2},children:"This action cannot be undone. The group will be permanently removed from your inventory if it is not associated with any products."}),e.jsxs(i,{children:['Are you sure you want to delete "',e.jsx("strong",{children:t.inventory_group_name}),'"?']})]}),e.jsxs(Ma,{sx:{p:3,gap:1},children:[e.jsx(ee,{onClick:()=>p(!1),variant:"outlined",sx:{borderRadius:2},children:"Cancel"}),e.jsx(ee,{onClick:u,color:"error",variant:"contained",sx:{borderRadius:2},startIcon:e.jsx(ut,{}),children:"Delete Group"})]})]})]})},Qe=lo();[...Qe.shadows];const Wt={50:"hsl(195, 70%, 95%)",100:"hsl(195, 70%, 90%)",200:"hsl(195, 70%, 80%)",300:"hsl(195, 70%, 65%)",400:"hsl(195, 75%, 50%)",500:"hsl(195, 85%, 40%)",600:"hsl(195, 90%, 32%)",700:"hsl(195, 95%, 25%)",800:"hsl(195, 100%, 18%)",900:"hsl(195, 100%, 12%)"},Jt={50:"hsl(220, 35%, 97%)",100:"hsl(220, 30%, 94%)",200:"hsl(220, 20%, 88%)",300:"hsl(220, 20%, 80%)",400:"hsl(220, 20%, 65%)",500:"hsl(220, 20%, 42%)",600:"hsl(220, 20%, 35%)",700:"hsl(220, 20%, 25%)",800:"hsl(220, 30%, 6%)",900:"hsl(220, 35%, 3%)"},fr={50:"hsl(120, 80%, 98%)",100:"hsl(120, 75%, 94%)",200:"hsl(120, 75%, 87%)",300:"hsl(120, 61%, 77%)",400:"hsl(120, 44%, 53%)",500:"hsl(120, 59%, 30%)",600:"hsl(120, 70%, 25%)",700:"hsl(120, 75%, 16%)",800:"hsl(120, 84%, 10%)",900:"hsl(120, 87%, 6%)"},Qa={50:"hsl(45, 100%, 97%)",100:"hsl(45, 92%, 90%)",200:"hsl(45, 94%, 80%)",300:"hsl(45, 90%, 65%)",400:"hsl(45, 90%, 40%)",500:"hsl(45, 90%, 35%)",600:"hsl(45, 91%, 25%)",700:"hsl(45, 94%, 20%)",800:"hsl(45, 95%, 16%)",900:"hsl(45, 93%, 12%)"},yr={50:"hsl(0, 100%, 97%)",100:"hsl(0, 92%, 90%)",200:"hsl(0, 94%, 80%)",300:"hsl(0, 90%, 65%)",400:"hsl(0, 90%, 40%)",500:"hsl(0, 90%, 30%)",600:"hsl(0, 91%, 25%)",700:"hsl(0, 94%, 18%)",800:"hsl(0, 95%, 12%)",900:"hsl(0, 93%, 6%)"};Wt[200],Wt[400],Wt[700],Wt[50],Wt[100],Wt[300],Wt[600],Jt[50],Qa[300],Qa[400],Qa[800],yr[300],yr[400],yr[800],fr[300],fr[400],fr[800],{...Jt},d(Jt[300],.4),Jt[800],Jt[600],Qa[400],d(Jt[200],.2),`${d(Jt[200],.3)}`,Wt[50],Wt[300],Wt[400],Wt[700],Wt[300],Wt[500],Wt[700],Wt[900],Qa[400],Qa[500],Qa[700],yr[400],yr[500],yr[700],fr[400],fr[500],fr[700],{...Jt},d(Jt[700],.6),Jt[900],Jt[400],d(Jt[600],.2),d(Jt[600],.3);Qe.typography.pxToRem(48),Qe.typography.pxToRem(36),Qe.typography.pxToRem(30),Qe.typography.pxToRem(24),Qe.typography.pxToRem(20),Qe.typography.pxToRem(18),Qe.typography.pxToRem(18),Qe.typography.pxToRem(14),Qe.typography.pxToRem(14),Qe.typography.pxToRem(14),Qe.typography.pxToRem(12);[...Qe.shadows.slice(2)];const Dt=({page:t,total:a,item:n,metaPage:s,onChange:r,rowsPerPage:o})=>e.jsxs(ne,{elevation:0,sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:1,mt:1,borderRadius:1,border:`1px solid ${d(Qe.palette.primary.main,.2)}`,boxShadow:`0 4px 20px ${d("#000",.05)}`},children:[e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:2,py:.5},children:e.jsx(i,{variant:"body2",sx:{mr:2},children:`Showing ${(s-1)*o+1}-${Math.min(s*o,a)} of ${a} ${n}`})}),a>o&&e.jsx(Rd,{count:Math.ceil(a/o),page:t,onChange:r,color:"primary",size:"medium",showFirstButton:!0,showLastButton:!0,sx:{"& .MuiPaginationItem-root":{mx:{xs:.25,sm:.5},borderRadius:1,fontWeight:600,transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:`0 4px 12px ${d(Qe.palette.primary.main,.2)}`},"&.Mui-selected":{boxShadow:`0 4px 12px ${d(Qe.palette.primary.main,.3)}`}}}})]}),zt=({icon:t,title:a,color:n,onClick:s})=>{const r=we(),o=yt(r.breakpoints.down("md"));return e.jsx(le,{title:a,arrow:!0,placement:"top",children:e.jsx(ke,{size:o?"small":"medium",onClick:s,sx:{bgcolor:d(r.palette[n].main,.1),color:r.palette[n].main,border:`1px solid ${d(r.palette[n].main,.2)}`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{bgcolor:d(r.palette[n].main,.15),border:`1px solid ${r.palette[n].main}`,transform:"translateY(-2px)",boxShadow:`0 4px 12px ${d(r.palette[n].main,.3)}`}},children:t})})},Vo=()=>{var Yt,_t,wt,Ra,Wa,za;const t=we(),a=Fe(),n=Ke(),{stockItems:s,stockItemsMeta:r}=Ce(_e=>_e.product);console.log("Stock Items",s);const{categories:o,pageMeta:p}=Ce(_e=>_e.category),{inventoryGroups:c,inventoryGroupPageMeta:x}=Ce(_e=>_e.inventoryGroup),[u,S]=g.useState([]),[f,v]=g.useState({searchTerm:"",categoryFilter:"All",groupFilter:"All",page:1,rowsPerPage:10,sortBy:"created_at",sortOrder:"asc",searchQuery:"",pageNumber:1,limit:10,sortField:"created_at",categorySortOrder:"asc",searchGroupQuery:"",pageGroupNumber:1,limitGroup:10,sortGroupField:"created_at",groupSortOrder:"asc",groupParent:"All"}),{searchTerm:j,categoryFilter:T,groupFilter:k,page:B,rowsPerPage:_,sortBy:K,sortOrder:w,groupParent:N,categorySortOrder:R,sortField:L,limit:D,pageNumber:P,searchQuery:A,searchGroupQuery:O,pageGroupNumber:y,limitGroup:F,sortGroupField:h,groupSortOrder:b}=f,[M,W]=g.useState(!1),[C,$]=g.useState(0),[G,ge]=g.useState(!1),{user:Ae,current_company_id:ae}=Ce(_e=>_e.auth),Y=ae||localStorage.getItem("current_company_id")||((Yt=Ae==null?void 0:Ae.user_settings)==null?void 0:Yt.current_company_id)||"",re=(_t=Ae==null?void 0:Ae.company)==null?void 0:_t.find(_e=>_e._id===Y),Te=(Ra=(wt=re==null?void 0:re.company_settings)==null?void 0:wt.features)==null?void 0:Ra.enable_tax,[V,z]=g.useState(null),[de,Ie]=g.useState(!1),[oe,ue]=g.useState(null),[je,q]=g.useState(!1),[E,te]=g.useState(null),[U,H]=g.useState(0),ie=(_e,Re)=>{v(sa=>({...sa,page:Re})),window.scrollTo({top:0,behavior:"smooth"})},me=_e=>{W(!0),a(Qr({id:_e,company_id:(re==null?void 0:re._id)||""})).unwrap().then(()=>{$(Re=>Re+1),W(!1),Z.success("Product deleted successfully")}).catch(Re=>{$(sa=>sa+1),W(!1),Z.error(Re||"An unexpected error occurred. Please try again later.")})},Q=async _e=>{ge(!0),await a(Sr({product_id:_e._id,company_id:(re==null?void 0:re._id)||""})).unwrap().then(Re=>{z(Re.product)}).catch(Re=>{z(null),Z.error(Re||"An unexpected error occurred. Please try again later.")})},ce=_e=>{n(`/products/${_e._id}`)},De=()=>{W(!0),$(_e=>_e+1)},et=()=>{v({searchTerm:"",categoryFilter:"All",groupFilter:"All",page:1,rowsPerPage:10,sortBy:"created_at",sortOrder:"asc",searchQuery:"",pageNumber:1,limit:10,sortField:"created_at",categorySortOrder:"asc",searchGroupQuery:"",pageGroupNumber:1,limitGroup:10,sortGroupField:"created_at",groupSortOrder:"asc",groupParent:"All"}),$(_e=>_e+1)},Se=(_e,Re)=>{Re===0?(et(),Be()):Re===1?(et(),He()):Re===2&&(et(),Oe()),H(Re)},Be=g.useCallback(async()=>{W(!0),a(Bn({company_id:(re==null?void 0:re._id)||"",searchQuery:j,category:T,group:k,pageNumber:B,limit:_,sortField:K,sortOrder:w})).unwrap().then(()=>{W(!1)})},[a,re==null?void 0:re._id,j,T,k,B,_,K,w]),He=g.useCallback(async()=>{W(!0),a(En({searchQuery:A,pageNumber:P,limit:D,sortField:L,sortOrder:R,company_id:(re==null?void 0:re._id)||""})).unwrap().then(()=>{W(!1)})},[R,re==null?void 0:re._id,a,D,P,A,L]),Oe=g.useCallback(async()=>{W(!0),a(Gn({searchQuery:O,pageNumber:y,limit:F,sortField:h,sortOrder:b,company_id:(re==null?void 0:re._id)||"",parent:N})).unwrap().then(()=>{W(!1)})},[a,O,y,F,h,b,re==null?void 0:re._id,N]);return g.useEffect(()=>{Be()},[B,j,_,w,T,K,C,a,Be,re==null?void 0:re._id]),g.useEffect(()=>{s&&r&&S(s)},[s,r]),e.jsxs(l,{sx:{p:3,minHeight:"100vh",width:"100%"},children:[e.jsx(Ne,{sx:{mb:3,p:2,boxShadow:"0 2px 4px rgba(0,0,0,0.05)",borderRadius:"8px"},children:e.jsx(Me,{children:e.jsxs(I,{container:!0,spacing:2,alignItems:"center",children:[e.jsxs(I,{item:!0,xs:12,md:8,children:[e.jsx(l,{children:e.jsxs(l,{sx:{display:"flex",gap:2,alignItems:"center"},children:[e.jsx(zt,{icon:e.jsx(ma,{fontSize:"small"}),title:"Back",color:"primary",onClick:()=>n(-1)}),e.jsxs(l,{children:[e.jsxs(i,{variant:"h5",component:"h1",fontWeight:"700",color:"text.primary",children:[U===0&&"Products",U===1&&"Categories",U===2&&"Groups"]}),e.jsx(i,{variant:"body2",color:"text.secondary",children:U===0?"Manage your product inventory, add new items, and track stock levels.":U===1?"Organize your products into categories for better management and navigation.":"Group your products for better organization and reporting."})]})]})}),e.jsxs(Wr,{value:U,onChange:Se,"aria-label":"dashboard tabs",sx:{mt:1},children:[e.jsx(dt,{label:"Products"}),e.jsx(dt,{label:"Categories"}),e.jsx(dt,{label:"Groups"})]})]}),e.jsx(I,{item:!0,xs:12,md:4,sx:{textAlign:{xs:"left",md:"right"}},children:e.jsxs(ee,{variant:"contained",color:"primary",startIcon:e.jsx(hn,{fontSize:"large"}),onClick:()=>{if(!(re!=null&&re._id)){Z.error("Please create a company first.");return}U===1?(Ie(!0),ue(null)):U===2?(q(!0),te(null)):(ge(!0),z(null))},sx:{width:"max-content"},children:[U===0&&"Add New Items",U===1&&"Add New Category",U===2&&"Add New Group"]})})]})})}),e.jsxs(I,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(I,{item:!0,xs:12,sm:U===0?5:9,children:e.jsx(X,{fullWidth:!0,size:"small",placeholder:U===0?"Search item name, category, description, barcode...":U===1?"Search category name, description ...":"Search group name, description ...",value:U===0?j:U===1?A:O,onChange:_e=>{v(U===0?Re=>({...Re,searchTerm:_e.target.value}):U===1?Re=>({...Re,searchQuery:_e.target.value}):Re=>({...Re,searchGroupQuery:_e.target.value}))},InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(ki,{sx:{color:t.palette.primary.main}})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,bgcolor:d(t.palette.primary.main,.02),transition:"all 0.3s ease","&:hover":{bgcolor:d(t.palette.primary.main,.04)},"&.Mui-focused":{bgcolor:"white",boxShadow:`0 0 0 3px ${d(t.palette.primary.main,.1)}`}}}})}),U===0&&e.jsx(I,{item:!0,xs:12,sm:2,children:e.jsxs(X,{fullWidth:!0,select:!0,size:"small",label:"Category",value:T,onChange:_e=>v(Re=>({...Re,categoryFilter:_e.target.value})),sx:{"& .MuiOutlinedInput-root":{borderRadius:1}},children:[e.jsx(he,{value:"All",children:"All Categories"}),(Wa=r.unique_categories)==null?void 0:Wa.map(_e=>e.jsx(he,{value:_e,children:_e},_e))]})}),U===0&&e.jsx(I,{item:!0,xs:12,sm:2,children:e.jsxs(X,{fullWidth:!0,select:!0,size:"small",label:"Group",value:k,onChange:_e=>v(Re=>({...Re,groupFilter:_e.target.value})),sx:{"& .MuiOutlinedInput-root":{borderRadius:1}},children:[e.jsx(he,{value:"All",children:"All Groups"}),(za=r.unique_groups)==null?void 0:za.map(_e=>e.jsx(he,{value:_e,children:_e},_e))]})}),e.jsx(I,{item:!0,xs:12,sm:1,children:e.jsx(X,{fullWidth:!0,select:!0,size:"small",label:"Per Page",value:_.toString(),onChange:_e=>v(Re=>({...Re,rowsPerPage:Number(_e.target.value),page:1})),sx:{"& .MuiOutlinedInput-root":{borderRadius:1}},children:[10,25,50].map(_e=>e.jsx(he,{value:_e.toString(),children:_e},_e))})}),e.jsx(I,{item:!0,xs:12,sm:2,children:e.jsx(le,{title:"Refresh Data",arrow:!0,sx:{display:"flex",width:"100%"},children:e.jsx(ee,{variant:"outlined",onClick:De,startIcon:e.jsx(Wd,{}),sx:{whiteSpace:"nowrap",width:"100%"},children:"Refresh Items"})})})]}),e.jsx(Xa,{value:U,index:0,children:e.jsx(nt,{component:ne,elevation:0,sx:{width:"100%",borderRadius:1,border:`1px solid ${d(t.palette.divider,1)}`,boxShadow:`0 4px 20px ${d("#000",.05)}`},children:e.jsxs(it,{sx:{width:"100%"},children:[e.jsx(ot,{children:e.jsxs(xe,{sx:{bgcolor:d(t.palette.grey[50],.8),width:"100%","& .MuiTableCell-head":{borderBottom:`2px solid ${d(t.palette.primary.main,.1)}`},"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{sx:{pl:3,pr:1},children:e.jsx(le,{title:"Sort by Product Name",arrow:!0,children:e.jsx(Ue,{active:K==="stock_item_name",direction:K==="stock_item_name"?w:"asc",onClick:()=>{v(_e=>({..._e,sortBy:"stock_item_name",sortOrder:_e.sortOrder==="asc"?"desc":"asc"}))},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:t.palette.text.primary,fontSize:"0.85rem"},children:"Product Information"})})})}),Te&&e.jsx(m,{align:"center",sx:{px:1},children:e.jsx(le,{title:"Sort by Bar-Code",arrow:!0,children:e.jsx(Ue,{active:K==="hsn_code",direction:K==="hsn_code"?w:"asc",onClick:()=>{v(_e=>({..._e,sortBy:"hsn_code",sortOrder:_e.sortOrder==="asc"?"desc":"asc"}))},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:t.palette.text.primary,fontSize:"0.85rem"},children:"HSN/SAC Code"})})})}),e.jsx(m,{align:"center",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:t.palette.text.primary,fontSize:"0.85rem"},children:"Opening Stock"})}),e.jsx(m,{align:"center",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:t.palette.text.primary,fontSize:"0.85rem"},children:"Closing Stock QTY"})}),e.jsx(m,{align:"center",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:t.palette.text.primary,fontSize:"0.85rem"},children:"Closing Stock Rate"})}),e.jsx(m,{align:"center",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:t.palette.text.primary,fontSize:"0.85rem"},children:"Closing Stock Value"})}),e.jsx(m,{align:"center",children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:t.palette.text.primary,fontSize:"0.85rem"},children:"Actions"})})]})}),e.jsx(st,{children:M?Array([1,2,3,4,5]).map((_e,Re)=>e.jsx(Ou,{},`skeleton-${Re}`)):u.length>0?u.map((_e,Re)=>e.jsx(Lu,{product:_e,onDelete:me,onEdit:Q,onView:ce,index:Re},_e._id)):e.jsx(xe,{children:e.jsx(m,{colSpan:6,sx:{textAlign:"center",py:8},children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx(Ht,{sx:{fontSize:"4rem",color:t.palette.text.disabled}}),e.jsx(i,{variant:"h5",color:"text.secondary",sx:{fontWeight:600},children:"No products found"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Try adjusting your search or filter criteria, or add your first product"}),e.jsx(ee,{variant:"contained",onClick:()=>{if(!(re!=null&&re._id)){Z.error("Please create a company first.");return}ge(!0)},startIcon:e.jsx(hn,{}),sx:{mt:2,borderRadius:1,textTransform:"none",fontWeight:600},children:"Add Your First Product"})]})})})})]})})}),e.jsx(Xa,{value:U,index:1,children:e.jsx(l,{sx:{width:"100%"},children:e.jsx(I,{container:!0,spacing:2,children:M?Array([1,2,3,4,5]).map((_e,Re)=>e.jsx(I,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(Jo,{})},`skeleton-${Re}`)):(o==null?void 0:o.length)>0?o.map(_e=>e.jsx(I,{item:!0,xs:12,sm:6,md:3,children:e.jsx(Eu,{category:_e,onDelete:Re=>{a(sr(Re)).unwrap().then(()=>{He(),W(!1),Z.success("Category deleted successfully")}).catch(sa=>{He(),W(!1),Z.error(sa||"An unexpected error occurred. Please try again later.")})},onEdit:Re=>{Ie(!0),ue(Re)}})},_e._id)):e.jsx(I,{item:!0,xs:12,children:e.jsxs(l,{sx:{borderRadius:1,border:`1px solid ${d(t.palette.divider,1)}`,boxShadow:`0 4px 20px ${d("#000",.05)}`,display:"flex",flexDirection:"column",alignItems:"center",gap:2,py:4},children:[e.jsx(Ht,{sx:{fontSize:"4rem",color:t.palette.text.disabled}}),e.jsx(i,{variant:"h5",color:"text.secondary",sx:{fontWeight:600},children:"No categories found"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Try adjusting your search or filter criteria, or add your first category"}),e.jsx(ee,{variant:"contained",onClick:()=>{if(!(re!=null&&re._id)){Z.error("Please create a company first.");return}Ie(!0),ue(null)},startIcon:e.jsx(hn,{}),sx:{mt:2,borderRadius:1,textTransform:"none",fontWeight:600},children:"Add Your First Category"})]})})})})}),e.jsx(Xa,{value:U,index:2,children:e.jsx(l,{sx:{width:"100%"},children:e.jsx(I,{container:!0,spacing:2,children:M?Array([1,2,3,4,5]).map((_e,Re)=>e.jsx(I,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(Jo,{})},`skeleton-${Re}`)):(c==null?void 0:c.length)>0?c.map(_e=>e.jsx(I,{item:!0,xs:12,sm:6,md:3,children:e.jsx(Gu,{group:_e,onDelete:Re=>{a(Bu(Re)).unwrap().then(()=>{Oe(),W(!1),Z.success("Group deleted successfully")}).catch(sa=>{Oe(),W(!1),Z.error(sa||"An unexpected error occurred. Please try again later.")})},onEdit:Re=>{q(!0),te(Re)},onView:Re=>{q(!0),te(Re)}})},_e._id)):e.jsx(I,{item:!0,xs:12,children:e.jsxs(l,{sx:{borderRadius:1,border:`1px solid ${d(t.palette.divider,1)}`,boxShadow:`0 4px 20px ${d("#000",.05)}`,display:"flex",flexDirection:"column",alignItems:"center",gap:2,py:4},children:[e.jsx(Ht,{sx:{fontSize:"4rem",color:t.palette.text.disabled}}),e.jsx(i,{variant:"h5",color:"text.secondary",sx:{fontWeight:600},children:"No groups found"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Try adjusting your search or filter criteria, or add your first group"}),e.jsx(ee,{variant:"contained",onClick:()=>{if(!(re!=null&&re._id)){Z.error("Please create a company first.");return}Ie(!0),ue(null)},startIcon:e.jsx(hn,{}),sx:{mt:2,borderRadius:1,textTransform:"none",fontWeight:600},children:"Add Your First Group"})]})})})})}),U===0&&e.jsx(Dt,{total:r.total,item:"products",page:B,metaPage:r.page,rowsPerPage:_,onChange:ie}),U===1&&e.jsx(Dt,{total:p.total,item:"categories",page:B,metaPage:p.page,rowsPerPage:_,onChange:ie}),U===2&&e.jsx(Dt,{total:x.total,item:"groups",page:B,metaPage:x.page,rowsPerPage:_,onChange:ie}),e.jsx(vo,{drawer:G,setDrawer:ge,setRefreshKey:$,product:V,setSelectedProduct:z}),e.jsx(il,{open:de,onClose:()=>{Ie(!1),He()},onUpdated:()=>He(),category:oe,onCreated:function(_e){console.log("Category created:",_e)}}),e.jsx(ol,{open:je,inventoryGroup:E,onClose:()=>q(!1),onCreated:async _e=>{console.log("Group created:",_e),await Be()}})]})},So="/assets/herosection-DJtTLafR.webp",Ku={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6}}},Hu=()=>{const t=we(),a=yt(t.breakpoints.down("md")),n=Ke();return e.jsx(l,{component:lt.div,initial:"hidden",animate:"visible",variants:Ku,sx:{py:{xs:6,md:12},background:"linear-gradient(180deg, rgba(46, 125, 50, 0.08) 0%, rgba(255, 255, 255, 0) 100%)"},children:e.jsx(Je,{maxWidth:"lg",children:e.jsxs(I,{container:!0,spacing:4,alignItems:"center",children:[e.jsxs(I,{item:!0,xs:12,md:6,children:[e.jsxs(i,{variant:a?"h3":"h2",component:"h1",gutterBottom:!0,sx:{fontWeight:800,lineHeight:1.2,color:"primary.dark"},children:["Powerful Billing & Inventory Management",e.jsx(l,{component:"span",sx:{color:"secondary.main"},children:" Made Simple"})]}),e.jsx(i,{variant:"h6",component:"p",color:"text.secondary",sx:{mb:4,fontWeight:400},children:"Simplify your business operations with our all-in-one billing and inventory management platform. Effortlessly track stock, generate invoices, and analyze sales with smart automation tools."}),e.jsxs(J,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(ee,{variant:"contained",color:"primary",size:"large",endIcon:e.jsx(xo,{}),onClick:()=>n("/login"),children:"Start Free Trial"}),e.jsx(ee,{variant:"outlined",color:"primary",size:"large",onClick:()=>n("/contact"),children:"Book a Demo"})]})]}),e.jsx(I,{item:!0,xs:12,md:6,children:e.jsx(l,{component:"img",src:So,alt:"Pharmacy management dashboard",sx:{width:"100%",height:"auto",borderRadius:1,boxShadow:"0 8px 40px rgba(0, 0, 0, 0.12)"}})})]})})})},qu=()=>{const t=Ke(),a=["Features","Solutions","Pricing","Updates"],n=["About","Careers","Blog","Contact"],s=["Documentation","Support","FAQs","Community"],r=["Privacy","Terms","Security","Cookies"],o={Features:"/features",Solutions:"/solutions",Pricing:"/pricing",Updates:"/updates",About:"/about",Careers:"/careers",Blog:"/blog",Contact:"/contact",Documentation:"/documentation",Support:"/support",FAQs:"/faqs",Community:"/community",Privacy:"/privacy",Terms:"/terms",Security:"/security",Cookies:"/cookies"};return e.jsx(l,{component:"footer",sx:{py:6,bgcolor:"background.paper",borderTop:"1px solid",borderColor:"divider"},children:e.jsx(Je,{maxWidth:"lg",children:e.jsxs(I,{container:!0,spacing:4,children:[e.jsxs(I,{item:!0,xs:12,md:4,children:[e.jsx(l,{sx:{display:"flex",alignItems:"center",mb:2},children:e.jsxs(l,{sx:{display:"flex",width:"100%",height:"50px",gap:"10px",flexDirection:"row",alignItems:"center",justifyContent:"start"},children:[e.jsx("img",{src:Ya,alt:"Logo",style:{height:"40px"}}),e.jsx("img",{src:zr,alt:"Logo Text",style:{height:"30px",marginTop:"10px"}})]})}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Intelligent billing and inventory management solution that streamlines operations and boosts productivity."}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"©  Vyapar Drishti. All rights reserved."})]}),e.jsxs(I,{item:!0,xs:6,sm:3,md:2,children:[e.jsx(i,{variant:"subtitle1",color:"text.primary",sx:{fontWeight:600,mb:2,px:2},children:"Product"}),e.jsx(J,{spacing:1,children:a.map(p=>e.jsx(ee,{color:"inherit",sx:{justifyContent:"flex-start",px:2,textTransform:"none",color:"text.secondary"},children:p},p))})]}),e.jsxs(I,{item:!0,xs:6,sm:3,md:2,children:[e.jsx(i,{variant:"subtitle1",color:"text.primary",sx:{fontWeight:600,mb:2,px:2},children:"Company"}),e.jsx(J,{spacing:1,children:n.map(p=>e.jsx(ee,{color:"inherit",sx:{justifyContent:"flex-start",px:2,textTransform:"none",color:"text.secondary"},children:p},p))})]}),e.jsxs(I,{item:!0,xs:6,sm:3,md:2,children:[e.jsx(i,{variant:"subtitle1",color:"text.primary",sx:{fontWeight:600,mb:2,px:2},children:"Resources"}),e.jsx(J,{spacing:1,children:s.map(p=>e.jsx(ee,{color:"inherit",sx:{justifyContent:"flex-start",px:2,textTransform:"none",color:"text.secondary"},children:p},p))})]}),e.jsxs(I,{item:!0,xs:6,sm:3,md:2,children:[e.jsx(i,{variant:"subtitle1",color:"text.primary",sx:{fontWeight:600,mb:2,px:2},children:"Legal"}),e.jsx(J,{spacing:1,children:r.map(p=>e.jsx(ee,{color:"inherit",sx:{justifyContent:"flex-start",px:2,textTransform:"none",color:"text.secondary"},onClick:()=>t(o[p]),children:p},p))})]})]})})})},Uu={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6}}},Yu={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},Ju={rest:{scale:1,boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.08)",transition:{duration:.3,ease:"easeInOut"}},hover:{scale:1.03,boxShadow:"0px 10px 30px rgba(0, 0, 0, 0.15)",transition:{duration:.3,ease:"easeInOut"}}},Vu={rest:{y:0},hover:{y:-5,transition:{duration:.3,yoyo:1/0,ease:"easeInOut"}}},Qu=()=>{const t=we(),[a,n]=g.useState(null),[s,r]=g.useState(0),o=[{value:"68%",label:"of businesses struggle with inventory errors"},{value:"12.5",label:"hours wasted weekly on manual billing and data entry"},{value:"42%",label:"experience stockouts due to poor tracking"},{value:"30%",label:"higher costs from inefficient returns"}],p=[{title:"Manual Data Entry",description:"Time-consuming and error-prone manual input of stock data leading to inaccurate inventory records",shortDescription:"Time-consuming and error-prone manual input of stock data",fullDescription:"Pharmacy staff spend hours manually entering inventory data from paper invoices and receipts. This tedious process is highly susceptible to human error, leading to discrepancies between actual stock levels and recorded information. These inaccuracies cascade through your business operations, affecting ordering, sales, and financial reporting.",icon:e.jsx(Fa,{fontSize:"large"}),color:t.palette.primary.main,stat:"23% error rate in manual inventory records",solution:"Automated document scanning and data extraction"},{title:"Disorganized Data",description:"Poor organization of stock and sales information makes it difficult to track trends and make informed decisions",shortDescription:"Poorly structured information makes tracking trends impossible",fullDescription:"Without a unified system, your valuable business data remains scattered across spreadsheets, notebooks, and disconnected software. This fragmentation prevents you from identifying sales patterns, inventory trends, or opportunities for optimization. It's like having puzzle pieces from different sets – impossible to form a complete picture of your pharmacy's performance.",icon:e.jsx(ea,{fontSize:"large"}),color:"#1976D2",stat:"85% of pharmacies can't access historical data easily",solution:"Centralized data management system"},{title:"Lack of Business Insights",description:"Missing valuable insights on sales performance, inventory optimization, and business growth opportunities",shortDescription:"Missing critical information for strategic decision-making",fullDescription:"Without automated analytics, pharmacies make business decisions based on intuition rather than data. You might be missing opportunities to optimize your inventory, unaware of which products drive your profits, or blind to seasonal trends that could inform your purchasing strategy. In today's competitive market, operating without data-driven insights places your pharmacy at a significant disadvantage.",icon:e.jsx(bs,{fontSize:"large"}),color:"#7B1FA2",stat:"42% revenue increase with data-driven decisions",solution:"Advanced analytics and reporting dashboard"},{title:"Inefficient Returns",description:"Delayed or forgotten returns to stockists leading to excess inventory costs and strained supplier relationships",shortDescription:"Lost revenue from forgotten or mismanaged returns",fullDescription:"Expired medications and unsold inventory represent significant financial losses when return processes are managed manually. Without systematic tracking, return deadlines are missed, supplier policies aren't optimized, and your pharmacy absorbs unnecessary costs. Additionally, the administrative burden of processing returns manually diverts staff time away from customer service and other value-adding activities.",icon:e.jsx(zd,{fontSize:"large"}),color:"#C2185B",stat:"$4,200 average monthly losses from missed returns",solution:"Automated returns management system"}];return e.jsx(l,{component:lt.div,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},variants:Uu,sx:{py:{xs:8,md:12},position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"100%",background:"radial-gradient(circle at 10% 20%, rgba(46, 125, 50, 0.03) 0%, rgba(255, 255, 255, 0) 80%)",zIndex:-1}},children:e.jsxs(Je,{maxWidth:"lg",children:[e.jsxs(l,{sx:{textAlign:"center",mb:{xs:6,md:8},position:"relative","&::after":{content:'""',position:"absolute",bottom:-10,left:"50%",transform:"translateX(-50%)",width:"80px",height:"4px",bgcolor:"primary.main",borderRadius:"2px"}},children:[e.jsx(lt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:e.jsx(i,{variant:"overline",component:"div",sx:{color:"primary.main",fontWeight:600,letterSpacing:2,display:"inline-block",background:"linear-gradient(90deg, #2E7D32 0%, #66BB6A 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"THE CHALLENGE"})}),e.jsx(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:e.jsx(i,{variant:"h3",component:"h2",sx:{fontWeight:800,mb:2,backgroundImage:"linear-gradient(135deg, #212121 0%, #424242 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Common Problems in Billing & Inventory Management"})}),e.jsx(lt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.6},children:e.jsx(i,{variant:"h6",component:"p",color:"text.secondary",sx:{maxWidth:700,mx:"auto",fontWeight:400,lineHeight:1.6},children:"Bussiness owners face significant challenges with manual inventory tracking systems that lead to errors, inefficiencies, and missed opportunities."})})]}),e.jsx(l,{sx:{mb:{xs:6,md:8},mx:"auto",maxWidth:800,p:3,bgcolor:"background.paper",borderRadius:4,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,width:"6px",height:"100%",bgcolor:"primary.main",borderRadius:"3px 0 0 3px"}},children:e.jsxs(I,{container:!0,alignItems:"center",spacing:2,children:[e.jsx(I,{item:!0,xs:12,md:5,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",height:"100%"},children:[e.jsx(ht,{sx:{color:"primary.main",mr:1.5,fontSize:28}}),e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600},children:"Industry Insight:"})]})}),e.jsxs(I,{item:!0,xs:12,md:7,children:[e.jsx(l,{sx:{position:"relative",height:60},children:o.map((c,x)=>e.jsx(ze,{in:s===x,timeout:500,style:{position:"absolute",width:"100%",display:s===x?"block":"none"},children:e.jsxs(l,{sx:{display:"flex",alignItems:"baseline"},children:[e.jsx(i,{variant:"h3",component:"span",sx:{fontWeight:700,color:"primary.dark",mr:2},children:c.value}),e.jsx(i,{variant:"body1",children:c.label})]})},x))}),e.jsx(l,{sx:{display:"flex",justifyContent:"center",mt:2},children:o.map((c,x)=>e.jsx(l,{component:"button",onClick:()=>r(x),sx:{width:10,height:10,borderRadius:"50%",mx:.5,bgcolor:s===x?"primary.main":"grey.300",border:"none",cursor:"pointer",transition:"all 0.2s ease","&:hover":{bgcolor:s===x?"primary.dark":"grey.400"}}},x))})]})]})}),e.jsx(I,{container:!0,spacing:3,component:lt.div,variants:Yu,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},children:p.map((c,x)=>e.jsx(I,{item:!0,xs:12,sm:6,md:3,children:e.jsx(lt.div,{initial:"rest",whileHover:"hover",animate:a===x?"hover":"rest",variants:Ju,children:e.jsx(Ne,{sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:1,position:"relative",overflow:"visible",cursor:"pointer",transition:"all 0.3s ease",border:"1px solid",borderColor:"divider","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"6px",bgcolor:c.color,borderRadius:"3px 3px 0 0"}},children:e.jsxs(Me,{sx:{p:3,flexGrow:2},children:[e.jsxs(l,{sx:{textAlign:"center",mb:2},minHeight:240,children:[e.jsx(lt.div,{variants:Vu,children:e.jsx(l,{sx:{display:"inline-flex",p:1.5,borderRadius:"50%",bgcolor:`${c.color}10`,color:c.color,mb:2},children:Ft.cloneElement(c.icon,{sx:{fontSize:36}})})}),e.jsx(i,{variant:"h5",component:"h3",gutterBottom:!0,sx:{fontWeight:700,color:c.color},children:c.title}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:2},children:c.description})]}),e.jsx(pr,{in:a===x,timeout:300,children:e.jsxs(l,{sx:{mt:2,pt:2,borderTop:"1px dashed",borderColor:"divider",display:a===x?"block":"none"},children:[e.jsx(i,{variant:"body2",paragraph:!0,sx:{mb:2},children:c.fullDescription}),e.jsx(Pe,{sx:{mb:2}}),e.jsxs(l,{sx:{mb:2},children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"INDUSTRY STATISTIC"}),e.jsx(i,{variant:"body2",sx:{fontWeight:500},children:c.stat})]}),e.jsxs(l,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"OUR SOLUTION"}),e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(pt,{sx:{color:"success.main",mr:1,fontSize:16}}),e.jsx(i,{variant:"body2",sx:{fontWeight:500},children:c.solution})]})]})]})})]})})})},x))})]})})},Zu={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6}}},Xu=[{title:"Document Upload & AI Data Extraction",description:"Simply upload invoices and receipts. Our AI technology automatically extracts and organizes all relevant data, eliminating manual entry.",icon:e.jsx(Fa,{fontSize:"large"}),benefits:[{text:"Reduce data entry time by 90%",icon:e.jsx(Da,{fontSize:"small"})},{text:"99.8% accuracy on data extraction",icon:e.jsx(pt,{fontSize:"small"})},{text:"Support for all major invoice formats",icon:e.jsx(pt,{fontSize:"small"})}],stats:"Pharmacies save 15+ hours per week on manual data entry",color:"#3f51b5"},{title:"Real-time Stock Tracking",description:"Automatically track stock received, sold, and remaining in real-time. Get alerts for low stock items before they run out.",icon:e.jsx(ea,{fontSize:"large"}),benefits:[{text:"Reduce stockouts by 85%",icon:e.jsx(na,{fontSize:"small"})},{text:"Automated reorder suggestions",icon:e.jsx(pt,{fontSize:"small"})},{text:"Batch and expiry date tracking",icon:e.jsx(pt,{fontSize:"small"})}],stats:"Average inventory holding costs reduced by 23%",color:"#2e7d32"},{title:"Comprehensive Sales Analytics",description:"Access detailed reports on sales trends across different time periods. Identify your best-selling products and optimize your inventory.",icon:e.jsx($d,{fontSize:"large"}),benefits:[{text:"Identify seasonal sales patterns",icon:e.jsx(na,{fontSize:"small"})},{text:"Product profitability analysis",icon:e.jsx(Nd,{fontSize:"small"})},{text:"Customizable reporting dashboard",icon:e.jsx(pt,{fontSize:"small"})}],stats:"Customers report 18% increase in high-margin product sales",color:"#f57c00"},{title:"Interactive Dashboard",description:"Get a bird's-eye view of your entire operation with our intuitive dashboard. Monitor key metrics and make data-driven decisions.",icon:e.jsx(fs,{fontSize:"large"}),benefits:[{text:"Real-time KPI monitoring",icon:e.jsx(na,{fontSize:"small"})},{text:"Customizable widget layout",icon:e.jsx(pt,{fontSize:"small"})},{text:"Role-based access controls",icon:e.jsx(pt,{fontSize:"small"})}],stats:"92% of users report making better business decisions with our dashboard",color:"#9c27b0"}],ex=()=>{const[t,a]=g.useState(null),n=we(),s=yt(n.breakpoints.down("md")),r=x=>{a(t===x?null:x)},o={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},p={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},c={hidden:{opacity:0,height:0},visible:{opacity:1,height:"auto",transition:{duration:.3}}};return e.jsx("section",{id:"solutions",children:e.jsx(l,{sx:{py:{xs:8,md:12},backgroundImage:"linear-gradient(180deg, rgba(46, 125, 50, 0.03) 0%, rgba(46, 125, 50, 0.08) 100%)",position:"relative",overflow:"hidden"},children:e.jsxs(Je,{maxWidth:"lg",sx:{position:"relative",zIndex:1},children:[e.jsxs(l,{component:lt.div,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:Zu,sx:{textAlign:"center",mb:8},children:[e.jsx(ve,{label:"OUR SOLUTION",color:"primary",sx:{fontWeight:600,fontSize:"0.75rem",height:28,mb:2,"& .MuiChip-label":{px:2}}}),e.jsx(i,{variant:"h3",component:"h2",sx:{fontWeight:800,mb:2},children:"Transforming Billng & Inventory Operations"}),e.jsx(i,{variant:"h6",component:"p",color:"text.secondary",sx:{maxWidth:700,mx:"auto",fontWeight:400,lineHeight:1.6},children:"Our comprehensive software solution streamlines the entire inventory management process from stock receipt to returns, helping you save time and boost profitability."})]}),e.jsx(l,{component:lt.div,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:o,children:e.jsx(I,{container:!0,spacing:s?3:4,children:Xu.map((x,u)=>e.jsx(I,{item:!0,xs:12,md:u===4?12:6,component:lt.div,variants:p,children:e.jsxs(ne,{elevation:t===u?4:1,sx:{p:0,height:"100%",borderRadius:1,overflow:"hidden",border:"1px solid",borderColor:t===u?x.color:"divider",transition:"all 0.3s ease",position:"relative","&:hover":{transform:"translateY(-5px)",boxShadow:3}},onClick:()=>r(u),children:[e.jsxs(l,{sx:{p:3},children:[e.jsx(l,{sx:{display:t===u?"none":"block"},children:e.jsxs(l,{sx:{display:"flex",alignItems:"flex-start",mb:2},minHeight:140,children:[e.jsx(l,{sx:{mr:2,p:1.5,borderRadius:"12px",bgcolor:`${x.color}15`,display:"flex",alignItems:"center",justifyContent:"center"},children:Ft.cloneElement(x.icon,{sx:{color:x.color}})}),e.jsxs(J,{display:"flex",children:[e.jsx(i,{variant:"h5",component:"h3",gutterBottom:!0,sx:{fontWeight:600,color:"text.primary"},children:x.title}),e.jsx(i,{variant:"body1",color:"text.secondary",children:x.description})]})]})}),e.jsx(l,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(ee,{variant:"outlined",size:"small",color:"primary",sx:{borderColor:x.color,zIndex:1,color:x.color,position:"relative","&:hover":{borderColor:x.color,backgroundColor:`${x.color}10`}},children:t===u?"Show Less":"Learn More"})})]}),e.jsx(Gc,{children:t===u&&e.jsxs(l,{component:lt.div,variants:c,initial:"hidden",animate:"visible",exit:"hidden",sx:{position:"absolute",bottom:0,width:"100%",zIndex:.9,paddingY:"16px",paddingLeft:"1rem",backgroundColor:`${x.color}10`,display:"block"},children:[e.jsx(i,{variant:"subtitle2",sx:{mb:1.5,color:x.color,fontWeight:600},children:"KEY BENEFITS"}),x.benefits.map((S,f)=>e.jsxs(l,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(l,{sx:{mr:1,color:x.color},children:S.icon}),e.jsx(i,{variant:"body2",children:S.text})]},f)),e.jsx(Pe,{sx:{my:2}}),e.jsx(i,{variant:"subtitle2",sx:{mb:1.5,color:x.color,fontWeight:600},children:"IMPACT"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:x.stats})]})})]})},u))})})]})})})},Qo={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6}}},tx={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},ax=()=>e.jsx(l,{component:lt.div,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:Qo,sx:{py:{xs:6,md:10}},children:e.jsxs(Je,{maxWidth:"lg",children:[e.jsxs(l,{sx:{textAlign:"center",mb:6},children:[e.jsx(i,{variant:"overline",component:"div",sx:{color:"primary.main",fontWeight:600,letterSpacing:1.5},children:"KEY BENEFITS"}),e.jsx(i,{variant:"h3",component:"h2",sx:{fontWeight:700,mb:2},children:"Why Businesses Choose Us"}),e.jsx(i,{variant:"h6",component:"p",color:"text.secondary",sx:{maxWidth:700,mx:"auto",fontWeight:400},children:"Our solution delivers measurable improvements to your billing and inventory operations, helping you save time and increase profitability."})]}),e.jsx(I,{container:!0,spacing:4,component:lt.div,variants:tx,initial:"hidden",whileInView:"visible",viewport:{once:!0},children:["99% reduction in data entry errors","Save 15+ hours per week on billing and inventory management","Real-time access to critical business data","25% average reduction in excess inventory costs","Improved supplier relationships through timely returns","Increased customer satisfaction with accurate billing and stock availability"].map((t,a)=>e.jsx(I,{item:!0,xs:12,sm:6,md:4,component:lt.div,variants:Qo,children:e.jsxs(l,{sx:{display:"flex",alignItems:"flex-start",p:2,borderRadius:1,"&:hover":{bgcolor:"rgba(46, 125, 50, 0.05)"}},children:[e.jsx(da,{sx:{color:"primary.main",mr:2,mt:.5}}),e.jsx(i,{variant:"h6",component:"div",children:t})]})},a))})]})}),rx={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6}}},nx=()=>{const t=Ke();return e.jsx(l,{component:lt.div,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:rx,sx:{py:{xs:8,md:12},borderColor:"primary.dark",borderWidth:1,borderStyle:"solid",borderRadius:{md:4},mx:{md:4},my:4},children:e.jsx(Je,{maxWidth:"lg",children:e.jsxs(l,{sx:{textAlign:"center"},children:[e.jsx(i,{variant:"h3",component:"h2",gutterBottom:!0,sx:{fontWeight:700},children:"Ready to Transform Your Billing & Inventory?"}),e.jsx(i,{variant:"h6",sx:{mb:4,maxWidth:700,mx:"auto",opacity:.9},children:"Join hundreds of businesses who have simplified their billing and inventory operations and increased profitability with our solution."}),e.jsx(J,{direction:{xs:"column",sm:"row"},spacing:3,justifyContent:"center",children:e.jsx(ee,{variant:"contained",color:"secondary",size:"large",sx:{px:4,py:1.5,fontSize:"1.1rem","&:hover":{bgcolor:"rgba(255, 255, 255, 0.1)"}},onClick:()=>t("/contact"),children:"Schedule Demo"})})]})})})},ix=()=>{const t=Ke(),a=un(),[n,s]=g.useState(!1),r=[{label:"Pricing",path:"/pricing"},{label:"About",path:"/about"},{label:"Contact",path:"/contact"}],o=c=>a.pathname===c,p=()=>{s(!n)};return e.jsxs(e.Fragment,{children:[e.jsx(so,{position:"static",color:"transparent",elevation:0,sx:{borderBottom:"1px solid #000"},children:e.jsx(Je,{maxWidth:"xl",children:e.jsxs(oo,{disableGutters:!0,children:[e.jsx(l,{sx:{display:"flex",alignItems:"center",flexGrow:1},onClick:()=>t("/"),children:e.jsxs(l,{sx:{display:"flex",width:"100%",height:"50px",gap:"10px",flexDirection:"row",alignItems:"center",justifyContent:"start"},children:[e.jsx("img",{src:Ya,alt:"Logo",style:{height:"50px",borderRadius:"50%",cursor:"pointer"}}),e.jsx("img",{src:zr,alt:"Logo Text",style:{marginBottom:"-10px",height:"40px",cursor:"pointer"}})]})}),e.jsx(l,{sx:{display:{xs:"none",md:"flex"},gap:3},children:r.map(c=>e.jsx(ee,{color:o(c.path)?"primary":"inherit",onClick:()=>t(c.path),sx:{fontWeight:o(c.path)?"bold":"normal"},children:c.label},c.label))}),e.jsxs(l,{sx:{display:{xs:"none",md:"flex"},ml:3},children:[e.jsx(ee,{variant:"outlined",color:"primary",sx:{mr:2},onClick:()=>t("/login"),children:"Login"}),e.jsx(ee,{variant:"contained",color:"primary",sx:{mr:2},onClick:()=>t("/signup"),children:"Get Started"}),e.jsx(jo,{})]}),e.jsx(ke,{color:"inherit",sx:{display:{xs:"block",md:"none"}},onClick:p,children:e.jsx(Dd,{})})]})})}),e.jsx(Mt,{anchor:"right",open:n,onClose:p,sx:{"& .MuiDrawer-paper":{width:250,backgroundColor:"#fff"}},children:e.jsxs(l,{sx:{width:250},role:"presentation",onClick:p,children:[e.jsx(xa,{children:r.map(c=>e.jsx(Kt,{button:!0,onClick:()=>t(c.path),children:e.jsx(tt,{primary:c.label,sx:{fontWeight:o(c.path)?"bold":"normal",color:o(c.path)?"primary.main":"text.primary"}})},c.label))}),e.jsx(Pe,{}),e.jsxs(xa,{children:[e.jsx(Kt,{button:!0,onClick:()=>t("/login"),children:e.jsx(tt,{primary:"Login"})}),e.jsx(Kt,{button:!0,onClick:()=>t("/signup"),children:e.jsx(tt,{primary:"Get Started"})})]})]})})]})},Kn=()=>{const t=Ke(),[a,n]=g.useState("company"),[s,r]=g.useState(!1),o=[{icon:e.jsx(Bd,{fontSize:"large"}),title:"Innovation First",description:"We continuously push boundaries to create solutions that transform how businesses operate.",color:"#6A1B9A"},{icon:e.jsx(tr,{fontSize:"large"}),title:"Security & Trust",description:"We build on a foundation of enterprise-grade security and transparent relationships.",color:"#1565C0"},{icon:e.jsx(bs,{fontSize:"large"}),title:"Data-Driven",description:"Every feature and decision is backed by data and optimized for measurable impact.",color:"#D84315"},{icon:e.jsx(Fd,{fontSize:"large"}),title:"Quality Code",description:"We believe in clean, maintainable code that provides a solid foundation for rapid innovation.",color:"#2E7D32"}];return g.useEffect(()=>{const p=()=>{r(window.scrollY>100)};return window.addEventListener("scroll",p),()=>window.removeEventListener("scroll",p)},[]),e.jsxs(Je,{maxWidth:"lg",sx:{py:4},children:[e.jsx(l,{sx:{position:"sticky",top:0,zIndex:10,transition:"all 0.3s ease",backgroundColor:s?"rgba(255, 255, 255, 0.9)":"transparent",backdropFilter:s?"blur(10px)":"none",boxShadow:s?"0 4px 12px rgba(0, 0, 0, 0.1)":"none",borderRadius:1,mb:4},children:e.jsxs(I,{container:!0,spacing:2,justifyContent:"center",sx:{p:2},children:[e.jsx(I,{item:!0,children:e.jsx(ee,{variant:a==="company"?"contained":"outlined",color:"primary",onClick:()=>n("company"),sx:{borderRadius:4},children:"Our Company"})}),e.jsx(I,{item:!0,children:e.jsx(ee,{variant:a==="values"?"contained":"outlined",color:"primary",onClick:()=>n("values"),sx:{borderRadius:4},children:"Our Values"})})]})}),e.jsx(ze,{in:a==="company",timeout:800,children:e.jsxs(l,{sx:{display:a==="company"?"block":"none"},children:[e.jsxs(I,{container:!0,spacing:6,alignItems:"center",children:[e.jsxs(I,{item:!0,xs:12,md:6,children:[e.jsx(i,{variant:"h2",component:"h1",gutterBottom:!0,color:"primary",fontWeight:"bold",children:"Transforming Business Data"}),e.jsx(i,{variant:"h5",component:"h2",color:"text.secondary",gutterBottom:!0,children:"We're building the next generation of data analytics tools"}),e.jsx(i,{variant:"body1",paragraph:!0,children:"Founded in 2025, our platform helps businesses transform raw data into actionable insights. We combine powerful analytics with intuitive design to make data accessible to everyone in your organization."}),e.jsx(i,{variant:"body1",paragraph:!0,children:"Our team of experts has deep experience in data science, cloud infrastructure, and enterprise software, allowing us to create solutions that are both powerful and easy to use."}),e.jsx(ee,{variant:"contained",color:"primary",onClick:()=>t("/contact"),size:"large",sx:{mt:2,px:4,py:1.5,borderRadius:8,background:"linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)",boxShadow:"0 3px 5px 2px rgba(33, 203, 243, .3)"},children:"Learn More About Our Platform"})]}),e.jsx(I,{item:!0,xs:12,md:6,children:e.jsx(ne,{elevation:12,sx:{borderRadius:4,overflow:"hidden",transform:"rotate(2deg)",transition:"transform 0.3s ease","&:hover":{transform:"rotate(0deg) scale(1.02)"}},children:e.jsx(l,{sx:{height:400,background:"linear-gradient(135deg, #6a1b9a 0%, #00897b 50%, #1565c0 100%)",display:"flex",alignItems:"center",justifyContent:"center",p:4},children:e.jsx(i,{variant:"h3",component:"div",sx:{color:"white",fontWeight:"bold",textAlign:"center"},children:"Unlocking the Power of Your Data"})})})})]}),e.jsx(I,{container:!0,spacing:3,sx:{mt:8},children:[{label:"Customers",value:"500+",color:"#6A1B9A"},{label:"Data Processed",value:"1.2 PB",color:"#1565C0"},{label:"Countries",value:"32",color:"#D84315"},{label:"Uptime",value:"99.99%",color:"#2E7D32"}].map((p,c)=>e.jsx(I,{item:!0,xs:6,md:3,children:e.jsxs(ne,{elevation:4,sx:{p:3,textAlign:"center",borderTop:`4px solid ${p.color}`,borderRadius:1,transition:"transform 0.3s ease","&:hover":{transform:"translateY(-5px)"}},children:[e.jsx(i,{variant:"h3",component:"div",fontWeight:"bold",color:p.color,children:p.value}),e.jsx(i,{variant:"subtitle1",color:"text.secondary",children:p.label})]})},c))})]})}),e.jsx(ze,{in:a==="values",timeout:800,children:e.jsxs(l,{sx:{display:a==="values"?"block":"none"},children:[e.jsx(i,{variant:"h3",component:"h2",gutterBottom:!0,align:"center",color:"primary",fontWeight:"bold",children:"Our Core Values"}),e.jsx(i,{variant:"h6",component:"p",align:"center",color:"text.secondary",sx:{mb:6,maxWidth:800,mx:"auto"},children:"These principles guide everything we do, from product development to customer relationships"}),e.jsx(I,{container:!0,spacing:4,children:o.map((p,c)=>e.jsx(I,{item:!0,xs:12,md:6,children:e.jsxs(ne,{elevation:4,sx:{p:4,height:"100%",borderRadius:1,transition:"all 0.3s ease",":hover":{transform:"scale(1.03)",boxShadow:8},position:"relative",overflow:"hidden"},children:[e.jsx(l,{sx:{position:"absolute",top:0,left:0,width:8,height:"100%",backgroundColor:p.color}}),e.jsxs(l,{sx:{pl:2},children:[e.jsx(l,{sx:{color:p.color,mb:2},children:p.icon}),e.jsx(i,{variant:"h5",component:"h3",gutterBottom:!0,fontWeight:"bold",children:p.title}),e.jsx(i,{variant:"body1",children:p.description})]})]})},c))}),e.jsxs(ne,{elevation:8,sx:{mt:8,p:6,borderRadius:4,background:"linear-gradient(to right, rgba(106, 27, 154, 0.05), rgba(33, 150, 243, 0.1))"},children:[e.jsx(i,{variant:"h4",component:"h3",gutterBottom:!0,align:"center",fontWeight:"bold",children:"Our Mission"}),e.jsx(i,{variant:"h6",component:"p",align:"center",sx:{maxWidth:800,mx:"auto"},children:'"To empower organizations of all sizes with accessible, actionable data insights that drive growth and innovation in an increasingly complex digital world."'})]})]})})]})},sl=()=>{const t=[{id:"necessary",name:"Necessary",description:"These cookies are essential for the website to function properly. They enable basic functions like page navigation and access to secure areas of the website.",required:!0,defaultEnabled:!0},{id:"preferences",name:"Preferences",description:"Preference cookies enable a website to remember information that changes the way the website behaves or looks, like your preferred language or the region you are in.",required:!1,defaultEnabled:!0},{id:"analytics",name:"Analytics",description:"Analytics cookies help website owners understand how visitors interact with websites by collecting and reporting information anonymously.",required:!1,defaultEnabled:!1},{id:"marketing",name:"Marketing",description:"Marketing cookies are used to track visitors across websites. The intention is to display ads that are relevant and engaging for the individual user.",required:!1,defaultEnabled:!1}],a=[{name:"session_id",purpose:"Maintains user session",provider:"Our Website",expiry:"Session",category:"necessary"},{name:"csrf_token",purpose:"Prevents cross-site request forgery",provider:"Our Website",expiry:"Session",category:"necessary"},{name:"auth_token",purpose:"Authentication",provider:"Our Website",expiry:"30 days",category:"necessary"},{name:"language",purpose:"Stores language preference",provider:"Our Website",expiry:"1 year",category:"preferences"},{name:"theme",purpose:"Stores theme preference",provider:"Our Website",expiry:"1 year",category:"preferences"},{name:"_ga",purpose:"Distinguishes users",provider:"Google Analytics",expiry:"2 years",category:"analytics"},{name:"_gid",purpose:"Distinguishes users",provider:"Google Analytics",expiry:"24 hours",category:"analytics"},{name:"_fbp",purpose:"Stores and tracks visits across websites",provider:"Facebook",expiry:"3 months",category:"marketing"},{name:"ads_id",purpose:"Used for advertising",provider:"Google Ads",expiry:"3 months",category:"marketing"}],[n,s]=g.useState(t.reduce((j,T)=>(j[T.id]=T.defaultEnabled,j),{})),[r,o]=g.useState(!1),[p,c]=g.useState(!1),x="March 1, 2025",u=j=>T=>{j!=="necessary"&&s({...n,[j]:T.target.checked})},S=()=>{c(!0)},f=()=>{const j=t.reduce((T,k)=>(T[k.id]=!0,T),{});s(j),c(!0)},v=()=>{c(!1)};return e.jsxs(Je,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(l,{display:"flex",alignItems:"center",mb:4,children:[e.jsx(Ld,{sx:{fontSize:40,mr:2,color:"primary.main"}}),e.jsx(i,{variant:"h4",component:"h1",fontWeight:"bold",children:"Cookie Policy"})]}),e.jsxs(ne,{elevation:2,sx:{p:4,mb:4},children:[e.jsxs(i,{variant:"body2",color:"text.secondary",paragraph:!0,children:["Last updated: ",x]}),e.jsx(i,{variant:"body1",paragraph:!0,children:"This Cookie Policy explains how Vyapar Drishti uses cookies and similar technologies to recognize you when you visit our website. It explains what these technologies are and why we use them, as well as your rights to control our use of them."}),e.jsx(i,{variant:"body1",paragraph:!0,children:"Cookies are small data files that are placed on your computer or mobile device when you visit a website. Cookies are widely used by website owners in order to make their websites work, or to work more efficiently, as well as to provide reporting information."}),e.jsx(Pe,{sx:{my:3}}),e.jsx(i,{variant:"h5",component:"h2",gutterBottom:!0,children:"Cookie Preferences"}),e.jsx(Od,{sx:{mb:4},children:t.map(j=>e.jsx(l,{sx:{mb:2,p:2,bgcolor:"background.default",borderRadius:1},children:e.jsx(jt,{control:e.jsx(kt,{checked:n[j.id],onChange:u(j.id),disabled:j.required}),label:e.jsxs(l,{children:[e.jsxs(i,{variant:"subtitle1",component:"span",children:[j.name,j.required&&e.jsx(i,{component:"span",color:"text.secondary",variant:"caption",sx:{ml:1},children:"(Required)"})]}),e.jsx(i,{variant:"body2",color:"text.secondary",children:j.description})]}),sx:{alignItems:"flex-start",m:0}})},j.id))}),e.jsxs(l,{display:"flex",justifyContent:"space-between",mb:4,children:[e.jsx(ee,{variant:"outlined",onClick:S,children:"Save Preferences"}),e.jsx(ee,{variant:"contained",color:"primary",onClick:f,children:"Accept All"})]}),e.jsxs(l,{mb:3,children:[e.jsxs(l,{display:"flex",alignItems:"center",onClick:()=>o(!r),sx:{cursor:"pointer",mb:2},children:[e.jsx(i,{variant:"h6",component:"h3",children:"Detailed Cookie Information"}),e.jsx(ke,{size:"small",children:r?e.jsx(wn,{}):e.jsx(qr,{})})]}),e.jsx(Xt,{in:r,children:e.jsx(nt,{component:ne,variant:"outlined",children:e.jsxs(it,{size:"small",children:[e.jsx(ot,{children:e.jsxs(xe,{children:[e.jsx(m,{children:"Name"}),e.jsx(m,{children:"Purpose"}),e.jsx(m,{children:"Provider"}),e.jsx(m,{children:"Expiry"}),e.jsx(m,{children:"Category"})]})}),e.jsx(st,{children:a.map((j,T)=>e.jsxs(xe,{children:[e.jsx(m,{children:j.name}),e.jsx(m,{children:j.purpose}),e.jsx(m,{children:j.provider}),e.jsx(m,{children:j.expiry}),e.jsx(m,{children:e.jsx(ve,{label:j.category.charAt(0).toUpperCase()+j.category.slice(1),size:"small",color:j.category==="necessary"?"primary":"default",variant:j.category==="necessary"?"filled":"outlined"})})]},T))})]})})})]}),e.jsx(i,{variant:"h6",component:"h3",gutterBottom:!0,children:"How to Control Cookies"}),e.jsx(i,{variant:"body1",paragraph:!0,children:"In addition to the controls provided above, you can choose to block or delete cookies through your browser settings. However, if you choose to delete or block certain cookies, you might not be able to use some features of our services."}),e.jsxs(l,{sx:{bgcolor:"background.default",p:2,borderRadius:1,mb:3},children:[e.jsxs(i,{variant:"subtitle1",gutterBottom:!0,display:"flex",alignItems:"center",children:[e.jsx(ys,{fontSize:"small",sx:{mr:1,color:"primary.main"}}),"Browser Settings"]}),e.jsx(i,{variant:"body2",children:"To learn how to manage cookies in your browser, please visit:"}),e.jsxs(l,{component:"ul",sx:{pl:4,mb:0},children:[e.jsxs(i,{component:"li",variant:"body2",children:["Chrome: ",e.jsx(Hr,{href:"https://support.google.com/chrome/answer/95647",target:"_blank",children:"Managing cookies in Chrome"})]}),e.jsxs(i,{component:"li",variant:"body2",children:["Firefox: ",e.jsx(Hr,{href:"https://support.mozilla.org/en-US/kb/cookies-information-websites-store-on-your-computer",target:"_blank",children:"Cookies in Firefox"})]}),e.jsxs(i,{component:"li",variant:"body2",children:["Safari: ",e.jsx(Hr,{href:"https://support.apple.com/guide/safari/manage-cookies-sfri11471/mac",target:"_blank",children:"Managing cookies in Safari"})]}),e.jsxs(i,{component:"li",variant:"body2",children:["Edge: ",e.jsx(Hr,{href:"https://support.microsoft.com/en-us/microsoft-edge/delete-cookies-in-microsoft-edge-63947406-40ac-c3b8-57b9-2a946a29ae09",target:"_blank",children:"View and delete cookies in Microsoft Edge"})]})]})]}),e.jsx(i,{variant:"h6",component:"h3",gutterBottom:!0,children:"Changes to Our Cookie Policy"}),e.jsx(i,{variant:"body1",children:"We may update this Cookie Policy from time to time in order to reflect changes to the cookies we use or for other operational, legal, or regulatory reasons. Please visit this Cookie Policy regularly to stay informed about our use of cookies and related technologies."})]}),e.jsx(Ed,{open:p,autoHideDuration:6e3,onClose:v,children:e.jsx(rt,{onClose:v,severity:"success",sx:{width:"100%"},children:"Your cookie preferences have been saved!"})})]})},ll=()=>{const t=we(),a=yt(t.breakpoints.down("md")),[n,s]=g.useState(null),[r,o]=g.useState(!1),p=g.useRef({}),c=[{id:"introduction",title:"Introduction",icon:e.jsx(tr,{})},{id:"information-collected",title:"Information We Collect",icon:e.jsx(di,{})},{id:"use-of-information",title:"How We Use Your Information",icon:e.jsx(Gd,{})},{id:"sharing-information",title:"Sharing Your Information",icon:e.jsx(Kd,{})},{id:"international-transfers",title:"International Data Transfers",icon:e.jsx(Hd,{})},{id:"data-retention",title:"Data Retention and Deletion",icon:e.jsx(ut,{})},{id:"user-rights",title:"Your Rights and Choices",icon:e.jsx(di,{})},{id:"updates",title:"Updates to This Policy",icon:e.jsx(tr,{})},{id:"contact",title:"Contact Information",icon:e.jsx(tr,{})}];g.useEffect(()=>{const f=()=>{const v=window.scrollY+100;v>300?o(!0):o(!1);let j=null;Object.entries(p.current).forEach(([T,k])=>{k&&k.offsetTop<=v&&(j=T)}),s(j)};return window.addEventListener("scroll",f),()=>window.removeEventListener("scroll",f)},[]);const x=f=>{const v=p.current[f];v&&window.scrollTo({top:v.offsetTop-80,behavior:"smooth"})},u=()=>{window.scrollTo({top:0,behavior:"smooth"})};return e.jsxs(Je,{maxWidth:"lg",sx:{py:6},children:[e.jsxs(ne,{elevation:0,sx:{p:4,mb:4,bgcolor:"primary.light",color:"primary.contrastText",borderRadius:2},children:[e.jsx(i,{variant:"h3",component:"h1",gutterBottom:!0,fontWeight:"bold",children:"Privacy Policy"}),e.jsxs(i,{variant:"subtitle1",children:["Last Updated: ","March 15, 2025"]}),e.jsx(i,{variant:"body1",sx:{mt:2},children:"We value your privacy and are committed to protecting your personal data. This privacy policy will inform you about how we look after your personal data and tell you about your privacy rights."})]}),e.jsxs(I,{container:!0,spacing:4,children:[!a&&e.jsx(I,{item:!0,xs:12,md:3,children:e.jsxs(l,{component:ne,elevation:2,sx:{p:2,borderRadius:1,position:"sticky",top:80},children:[e.jsx(i,{variant:"h6",gutterBottom:!0,fontWeight:"medium",children:"Table of Contents"}),e.jsx(Pe,{sx:{mb:2}}),e.jsx(xa,{sx:{p:0},children:c.map(f=>e.jsxs(Kt,{button:!0,selected:n===f.id,onClick:()=>x(f.id),sx:{borderRadius:1,mb:.5,"&.Mui-selected":{bgcolor:"primary.light",color:"primary.main","&:hover":{bgcolor:"primary.light"}}},children:[f.icon&&e.jsx(vt,{sx:{minWidth:32,color:n===f.id?"primary.main":"inherit"},children:f.icon}),e.jsx(tt,{primary:f.title,primaryTypographyProps:{variant:"body2",fontWeight:n===f.id?"medium":"regular"}})]},f.id))})]})}),e.jsx(I,{item:!0,xs:12,md:9,children:e.jsxs(ne,{elevation:2,sx:{p:4,borderRadius:2},children:[e.jsxs(l,{ref:f=>p.current.introduction=f,id:"introduction",sx:{scrollMarginTop:"80px"},children:[e.jsx(i,{variant:"h4",component:"h2",gutterBottom:!0,color:"primary",fontWeight:"medium",children:"1. Introduction"}),e.jsx(i,{variant:"body1",paragraph:!0,children:"This privacy policy applies to all users of our SaaS platform. Our platform is designed to help businesses manage and analyze their data effectively while maintaining the highest standards of privacy and security."}),e.jsx(i,{variant:"body1",paragraph:!0,children:"We respect your privacy and are committed to protecting your personal data. This privacy policy will inform you about how we look after your personal data when you visit our website or use our services, and tell you about your privacy rights and how the law protects you."}),e.jsx(i,{variant:"body1",paragraph:!0,children:"Please read this privacy policy carefully. By using our services, you acknowledge that you have read and understood this privacy policy."})]}),e.jsx(Pe,{sx:{my:4}}),e.jsxs(l,{ref:f=>p.current["information-collected"]=f,id:"information-collected",sx:{scrollMarginTop:"80px"},children:[e.jsx(i,{variant:"h4",component:"h2",gutterBottom:!0,color:"primary",fontWeight:"medium",children:"2. Information We Collect"}),e.jsx(i,{variant:"body1",paragraph:!0,children:"We collect different types of information from and about users of our platform, including:"}),e.jsxs(l,{component:"ul",sx:{pl:2},children:[e.jsxs(i,{component:"li",variant:"body1",paragraph:!0,children:[e.jsx("strong",{children:"Personal Identification Information:"})," Name, email address, phone number, company name, and other similar contact information when you create an account."]}),e.jsxs(i,{component:"li",variant:"body1",paragraph:!0,children:[e.jsx("strong",{children:"Usage Data:"})," Information about how you use our platform, including features accessed, time spent, actions taken, and other similar metrics."]}),e.jsxs(i,{component:"li",variant:"body1",paragraph:!0,children:[e.jsx("strong",{children:"Technical Data:"})," IP address, browser type and version, time zone setting, browser plug-in types and versions, operating system and platform, and other technology on the devices you use to access our platform."]}),e.jsxs(i,{component:"li",variant:"body1",paragraph:!0,children:[e.jsx("strong",{children:"Customer Data:"})," The data you upload, create, or process through our platform, which may include personal data of your own customers or employees."]})]}),e.jsx(i,{variant:"body1",paragraph:!0,children:"We collect this information through direct interactions (when you fill out forms or correspond with us), automated technologies or interactions (as you navigate through our platform), and from third parties or publicly available sources."})]}),e.jsx(Pe,{sx:{my:4}}),e.jsxs(l,{ref:f=>p.current["use-of-information"]=f,id:"use-of-information",sx:{scrollMarginTop:"80px"},children:[e.jsx(i,{variant:"h4",component:"h2",gutterBottom:!0,color:"primary",fontWeight:"medium",children:"3. How We Use Your Information"}),e.jsx(i,{variant:"body1",paragraph:!0,children:"We use the information we collect for various purposes, including:"}),e.jsx(l,{sx:{mb:3},children:e.jsx(I,{container:!0,spacing:2,children:[{title:"Providing our services",description:"To deliver the functionality of our platform and meet our contractual obligations"},{title:"Improving our services",description:"To understand how users interact with our platform and identify areas for improvement"},{title:"Customer support",description:"To respond to your inquiries, troubleshoot problems, and provide technical assistance"},{title:"Communications",description:"To send administrative emails, updates, and marketing messages (where permitted)"},{title:"Security",description:"To detect, prevent, and address technical issues and security threats"},{title:"Legal compliance",description:"To comply with applicable laws, regulations, and legal processes"}].map((f,v)=>e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsxs(l,{sx:{p:2,border:1,borderColor:"divider",borderRadius:1,height:"100%"},children:[e.jsx(i,{variant:"subtitle1",fontWeight:"medium",gutterBottom:!0,children:f.title}),e.jsx(i,{variant:"body2",children:f.description})]})},v))})}),e.jsx(i,{variant:"body1",paragraph:!0,children:"We process your personal data only when we have a valid legal basis to do so, such as your consent, the necessity to perform a contract, compliance with a legal obligation, or our legitimate interests (where these don't override your rights and freedoms)."})]}),e.jsx(Pe,{sx:{my:4}}),e.jsxs(l,{ref:f=>p.current["sharing-information"]=f,id:"sharing-information",sx:{scrollMarginTop:"80px"},children:[e.jsx(i,{variant:"h4",component:"h2",gutterBottom:!0,color:"primary",fontWeight:"medium",children:"4. Sharing Your Information"}),e.jsx(i,{variant:"body1",paragraph:!0,children:"We may share your information with:"}),e.jsxs(l,{component:"ul",sx:{pl:2},children:[e.jsxs(i,{component:"li",variant:"body1",paragraph:!0,children:[e.jsx("strong",{children:"Service Providers:"})," Third-party vendors who perform services on our behalf, such as hosting providers, payment processors, and analytics services."]}),e.jsxs(i,{component:"li",variant:"body1",paragraph:!0,children:[e.jsx("strong",{children:"Business Partners:"})," Companies we partner with to offer integrated or co-branded services."]}),e.jsxs(i,{component:"li",variant:"body1",paragraph:!0,children:[e.jsx("strong",{children:"Legal Authorities:"})," When required by law, in response to legal processes, or to protect our rights."]}),e.jsxs(i,{component:"li",variant:"body1",paragraph:!0,children:[e.jsx("strong",{children:"Corporate Transactions:"})," In connection with a merger, acquisition, or sale of assets."]})]}),e.jsx(i,{variant:"body1",paragraph:!0,children:"We require all third parties to respect the security of your personal data and to treat it in accordance with the law. We do not allow our third-party service providers to use your personal data for their own purposes and only permit them to process your personal data for specified purposes and in accordance with our instructions."})]}),e.jsx(Pe,{sx:{my:4}}),e.jsxs(l,{ref:f=>p.current["international-transfers"]=f,id:"international-transfers",sx:{scrollMarginTop:"80px"},children:[e.jsx(i,{variant:"h4",component:"h2",gutterBottom:!0,color:"primary",fontWeight:"medium",children:"5. International Data Transfers"}),e.jsx(i,{variant:"body1",paragraph:!0,children:"We operate globally and may transfer your personal data to countries other than your country of residence. When we do so, we ensure appropriate safeguards are in place to protect your data and comply with applicable data protection laws."}),e.jsx(i,{variant:"body1",paragraph:!0,children:"These safeguards include:"}),e.jsxs(l,{component:"ul",sx:{pl:2},children:[e.jsx(i,{component:"li",variant:"body1",paragraph:!0,children:"Standard Contractual Clauses approved by the European Commission"}),e.jsx(i,{component:"li",variant:"body1",paragraph:!0,children:"Binding Corporate Rules for transfers within our corporate group"}),e.jsx(i,{component:"li",variant:"body1",paragraph:!0,children:"Adequacy decisions by the European Commission for certain countries"}),e.jsx(i,{component:"li",variant:"body1",paragraph:!0,children:"Your explicit consent in certain circumstances"})]}),e.jsx(i,{variant:"body1",paragraph:!0,children:"By using our services, you acknowledge that your personal data may be transferred to our servers and third-party service providers located in different countries around the world."})]}),e.jsx(Pe,{sx:{my:4}}),e.jsxs(l,{ref:f=>p.current["data-retention"]=f,id:"data-retention",sx:{scrollMarginTop:"80px"},children:[e.jsx(i,{variant:"h4",component:"h2",gutterBottom:!0,color:"primary",fontWeight:"medium",children:"6. Data Retention and Deletion"}),e.jsx(i,{variant:"body1",paragraph:!0,children:"We retain your personal data only for as long as necessary to fulfill the purposes for which we collected it, including for the purposes of satisfying any legal, regulatory, tax, accounting, or reporting requirements."}),e.jsx(i,{variant:"body1",paragraph:!0,children:"The criteria used to determine our retention periods include:"}),e.jsxs(l,{component:"ul",sx:{pl:2},children:[e.jsx(i,{component:"li",variant:"body1",paragraph:!0,children:"The time needed to provide you with our services"}),e.jsx(i,{component:"li",variant:"body1",paragraph:!0,children:"Legal obligations that require us to keep data for a certain period"}),e.jsx(i,{component:"li",variant:"body1",paragraph:!0,children:"Statutes of limitations, resolution of disputes, and enforcement of agreements"})]}),e.jsx(i,{variant:"body1",paragraph:!0,children:"When we no longer need to retain your personal data, we will securely delete it. For customer data you add or upload to our platform, you can delete this data at any time through your account settings."})]}),e.jsx(Pe,{sx:{my:4}}),e.jsxs(l,{ref:f=>p.current["user-rights"]=f,id:"user-rights",sx:{scrollMarginTop:"80px"},children:[e.jsx(i,{variant:"h4",component:"h2",gutterBottom:!0,color:"primary",fontWeight:"medium",children:"7. Your Rights and Choices"}),e.jsx(i,{variant:"body1",paragraph:!0,children:"Depending on your location, you may have various rights regarding your personal data, including:"}),e.jsx(I,{container:!0,spacing:2,sx:{mb:3},children:[{right:"Access",description:"Request access to your personal data"},{right:"Rectification",description:"Request correction of inaccurate data"},{right:"Erasure",description:"Request deletion of your personal data"},{right:"Restriction",description:"Request restriction of processing"},{right:"Portability",description:"Request transfer of your data"},{right:"Objection",description:"Object to processing of your data"}].map((f,v)=>e.jsx(I,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(l,{sx:{p:2,border:1,borderColor:"primary.light",borderRadius:1,bgcolor:"background.paper",height:"100%"},children:[e.jsx(i,{variant:"subtitle1",fontWeight:"medium",gutterBottom:!0,color:"primary",children:f.right}),e.jsx(i,{variant:"body2",children:f.description})]})},v))}),e.jsx(i,{variant:"body1",paragraph:!0,children:'To exercise these rights, please contact us using the information provided in the "Contact Information" section. We will respond to your request within the timeframe required by applicable law.'}),e.jsx(i,{variant:"body1",paragraph:!0,children:"Please note that certain rights may be limited in some circumstances, such as when we have a legal obligation to retain data or when the rights of others would be violated."})]}),e.jsx(Pe,{sx:{my:4}}),e.jsxs(l,{ref:f=>p.current.updates=f,id:"updates",sx:{scrollMarginTop:"80px"},children:[e.jsx(i,{variant:"h4",component:"h2",gutterBottom:!0,color:"primary",fontWeight:"medium",children:"8. Updates to This Policy"}),e.jsx(i,{variant:"body1",paragraph:!0,children:"We may update this privacy policy from time to time to reflect changes in our practices, technology, legal requirements, and other factors. When we make material changes to this policy, we will notify you by:"}),e.jsxs(l,{component:"ul",sx:{pl:2},children:[e.jsx(i,{component:"li",variant:"body1",paragraph:!0,children:"Posting a notice on our website"}),e.jsx(i,{component:"li",variant:"body1",paragraph:!0,children:"Sending an email to the address associated with your account"}),e.jsx(i,{component:"li",variant:"body1",paragraph:!0,children:"Displaying a notification within our platform"})]}),e.jsx(i,{variant:"body1",paragraph:!0,children:'We encourage you to review this policy periodically to stay informed about our privacy practices. The "Last Updated" date at the top of this policy indicates when it was last revised.'}),e.jsx(i,{variant:"body1",paragraph:!0,children:"Your continued use of our services after any changes to this privacy policy constitutes your acceptance of the revised policy."})]}),e.jsx(Pe,{sx:{my:4}}),e.jsxs(l,{ref:f=>p.current.contact=f,id:"contact",sx:{scrollMarginTop:"80px"},children:[e.jsx(i,{variant:"h4",component:"h2",gutterBottom:!0,color:"primary",fontWeight:"medium",children:"9. Contact Information"}),e.jsx(i,{variant:"body1",paragraph:!0,children:"If you have any questions, concerns, or requests regarding this privacy policy or our privacy practices, please contact us at:"}),e.jsxs(l,{sx:{p:3,border:1,borderColor:"divider",borderRadius:1,mb:3,bgcolor:"background.paper"},children:[e.jsx(i,{variant:"subtitle1",fontWeight:"medium",gutterBottom:!0,children:"Our Data Protection Officer"}),e.jsx(i,{variant:"body1",children:"Email: tohidkhan1193407@gmail.com"}),e.jsx(i,{variant:"body1",children:"Phone: +91 63670 97548"}),e.jsx(i,{variant:"body1",children:"Address: Near JNV, Rajsamand, Rajasthan, 313324, India"})]}),e.jsx(i,{variant:"body1",paragraph:!0,children:"We are committed to addressing your concerns and resolving any complaints about our collection or use of your personal data."}),e.jsx(i,{variant:"body1",paragraph:!0,children:"If you are not satisfied with our response, you may have the right to lodge a complaint with a data protection authority or other regulatory agency."})]})]})})]}),e.jsx(ze,{in:r,children:e.jsx(l,{onClick:u,sx:{position:"fixed",bottom:20,right:20,zIndex:100,bgcolor:"primary.main",color:"white",width:50,height:50,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:3,transition:"all 0.3s","&:hover":{bgcolor:"primary.dark",transform:"translateY(-3px)"}},children:e.jsx(js,{})})})]})},dl=()=>{const t=[{title:"Data Encryption",icon:e.jsx(Zd,{color:"primary"}),content:["All data transmitted between your device and our servers is encrypted using TLS 1.3 protocol with strong ciphers.","Data at rest is encrypted using AES-256 industry standard encryption.","We implement perfect forward secrecy to ensure that encrypted sessions cannot be decrypted even if the server key is compromised."]},{title:"Authentication & Access",icon:e.jsx(Xd,{color:"primary"}),content:["We support multi-factor authentication (MFA) for all user accounts and strongly encourage its use.","Access to our systems is strictly controlled through role-based access control (RBAC).","Failed login attempts are monitored, with automatic account locking after multiple failures to prevent brute force attacks.","All authentication tokens are securely hashed and have configurable expiration times."]},{title:"Infrastructure Security",icon:e.jsx(ec,{color:"primary"}),content:["Our infrastructure is hosted in SOC 2 Type II and ISO 27001 certified data centers.","We employ network segmentation, firewalls, and intrusion detection/prevention systems.","Regular vulnerability scans and penetration tests are conducted by independent third parties.","Security patches are applied promptly following a rigorous testing and deployment procedure."]},{title:"Monitoring & Incident Response",icon:e.jsx(tc,{color:"primary"}),content:["24/7 security monitoring of all systems and networks.","Automated alerting for suspicious activities and potential security incidents.","Comprehensive incident response plan with defined roles and procedures.","Regular security drills and tabletop exercises to ensure our team is prepared to respond effectively."]}],a=[{question:"How do you protect my personal information?",answer:"Your personal information is protected through a combination of encryption, access controls, and secure development practices. We only collect the minimum information necessary, store it securely with encryption, and strictly limit access to authorized personnel."},{question:"Do you share my data with third parties?",answer:"We only share your data with third parties when necessary to provide our services, and only with providers who maintain similarly strict security standards. All third-party providers are carefully vetted and bound by data processing agreements."},{question:"What should I do if I discover a security vulnerability?",answer:"If you believe you've found a security vulnerability, please contact our security team immediately at security@vyapardrishti.in. We have a responsible disclosure policy and appreciate the security community's efforts to help us maintain a secure platform."},{question:"How can I make my account more secure?",answer:"We recommend enabling multi-factor authentication, using a unique and strong password, regularly reviewing your account activity, and keeping your devices and software up to date."}],n=[{name:"ISO 27001",description:"Information security management"},{name:"SOC 2 Type II",description:"Service organization controls"},{name:"GDPR Compliant",description:"European data protection standards"},{name:"HIPAA Compliant",description:"Healthcare information protection"}];return e.jsxs(Je,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(l,{display:"flex",alignItems:"center",mb:4,children:[e.jsx(qd,{sx:{fontSize:40,mr:2,color:"primary.main"}}),e.jsx(i,{variant:"h4",component:"h1",fontWeight:"bold",children:"Security Policy"})]}),e.jsxs(ne,{elevation:2,sx:{p:4,mb:4},children:[e.jsxs(i,{variant:"body2",color:"text.secondary",paragraph:!0,children:["Last updated: ","February 28, 2025"]}),e.jsx(i,{variant:"body1",paragraph:!0,children:"At Vyapar Drishti, security is our top priority. We employ industry-leading practices to ensure your data remains safe, private, and accessible only to authorized parties. This document outlines our security measures and commitment to protecting your information."}),e.jsx(Pe,{sx:{my:3}}),e.jsx(I,{container:!0,spacing:3,sx:{mb:4},children:t.map((r,o)=>e.jsx(I,{item:!0,xs:12,md:6,children:e.jsx(Ne,{variant:"outlined",sx:{height:"100%"},children:e.jsxs(Me,{children:[e.jsxs(l,{display:"flex",alignItems:"center",mb:2,children:[r.icon,e.jsx(i,{variant:"h6",fontWeight:"medium",ml:1,children:r.title})]}),e.jsx(xa,{dense:!0,children:r.content.map((p,c)=>e.jsxs(Kt,{children:[e.jsx(vt,{sx:{minWidth:"28px"},children:e.jsx(Ud,{fontSize:"small",color:"action"})}),e.jsx(tt,{primary:p})]},c))})]})})},o))}),e.jsx(i,{variant:"h5",component:"h2",sx:{mb:3},children:"Certifications & Compliance"}),e.jsx(l,{sx:{mb:4},children:n.map((r,o)=>e.jsx(ve,{icon:e.jsx(Yd,{}),label:r.name,variant:"outlined",color:"primary",sx:{m:.5,p:1},title:r.description},o))}),e.jsx(i,{variant:"h5",component:"h2",sx:{mb:3},children:"Security FAQ"}),a.map((r,o)=>e.jsxs(Jd,{sx:{mb:1},children:[e.jsx(Vd,{expandIcon:e.jsx(qr,{}),children:e.jsx(i,{fontWeight:"medium",children:r.question})}),e.jsx(Qd,{children:e.jsx(i,{children:r.answer})})]},o)),e.jsxs(l,{mt:4,children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Report a Security Issue"}),e.jsxs(i,{variant:"body1",children:["If you discover a potential security issue, please contact us immediately at ",e.jsx(Hr,{href:"mailto:security@example.com",children:"security@example.com"}),". We take all security concerns seriously and will respond promptly."]})]})]})]})},cl=()=>{const t=[{title:"1. Acceptance of Terms",content:["By accessing or using our services, you agree to be bound by these Terms of Service and all applicable laws and regulations.","If you do not agree with any of these terms, you are prohibited from using or accessing this site."]},{title:"2. Use License",content:["Permission is granted to temporarily download one copy of the materials on our website for personal, non-commercial transitory viewing only.","This is the grant of a license, not a transfer of title, and under this license you may not:","• Modify or copy the materials","• Use the materials for any commercial purpose","• Attempt to decompile or reverse engineer any software contained on our website","• Remove any copyright or other proprietary notations from the materials","• Transfer the materials to another person or 'mirror' the materials on any other server"]},{title:"3. Disclaimer",content:["The materials on our website are provided on an 'as is' basis.","We make no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights.","Further, we do not warrant or make any representations concerning the accuracy, likely results, or reliability of the use of the materials on our website or otherwise relating to such materials or on any sites linked to this site."]},{title:"4. Limitations",content:["In no event shall our company or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption) arising out of the use or inability to use the materials on our website, even if we or an authorized representative has been notified orally or in writing of the possibility of such damage."]},{title:"5. Revisions and Errata",content:["The materials appearing on our website could include technical, typographical, or photographic errors.","We do not warrant that any of the materials on our website are accurate, complete, or current.","We may make changes to the materials contained on our website at any time without notice."]},{title:"6. Links",content:["We have not reviewed all of the sites linked to our website and are not responsible for the contents of any such linked site.","The inclusion of any link does not imply endorsement by us of the site.","Use of any such linked website is at the user's own risk."]},{title:"7. Modifications to Terms of Service",content:["We may revise these terms of service for our website at any time without notice.","By using this website, you are agreeing to be bound by the then-current version of these terms of service."]},{title:"8. Governing Law",content:["These terms and conditions are governed by and construed in accordance with the laws of our jurisdiction and you irrevocably submit to the exclusive jurisdiction of the courts in that location."]}];return e.jsxs(Je,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(l,{display:"flex",alignItems:"center",mb:4,children:[e.jsx(ac,{sx:{fontSize:40,mr:2,color:"primary.main"}}),e.jsx(i,{variant:"h4",component:"h1",fontWeight:"bold",children:"Terms of Service"})]}),e.jsxs(ne,{elevation:2,sx:{p:4,mb:4},children:[e.jsxs(i,{variant:"body2",color:"text.secondary",paragraph:!0,children:["Last updated: ","March 15, 2025"]}),e.jsx(i,{variant:"body1",paragraph:!0,children:"Please read these Terms of Service carefully before using our website and services. Your access to and use of the service is conditioned on your acceptance of and compliance with these Terms."}),e.jsx(Pe,{sx:{my:3}}),t.map((n,s)=>e.jsxs(l,{mb:4,children:[e.jsx(i,{variant:"h6",fontWeight:"medium",gutterBottom:!0,children:n.title}),n.content.map((r,o)=>e.jsx(i,{variant:"body1",paragraph:!0,children:r},o))]},s))]}),e.jsxs(l,{display:"flex",justifyContent:"space-between",mt:4,children:[e.jsx(ee,{variant:"outlined",href:"/privacy",children:"Privacy Policy"}),e.jsx(ee,{variant:"contained",color:"primary",children:"Accept Terms"})]})]})},ul=()=>{const t=we(),a=Ke(),[n,s]=g.useState(!0),[r,o]=g.useState("INR"),[p,c]=g.useState(null),x=[{title:"Starter",subtitle:"Perfect for small businesses and startups",priceMonthlyINR:100,priceYearlyINR:1100,priceMonthlyUSD:2,priceYearlyUSD:23,features:["Single Company","Only Non Tax Functionality","Basic analytics","Email support","Email Notifications"],buttonText:"Start Free Trial",navigateTo:"/signup",color:"#3f51b5",icon:e.jsx(rc,{fontSize:"large"})},{title:"Professional",subtitle:"Ideal for growing businesses",priceMonthlyINR:200,priceYearlyINR:2200,priceMonthlyUSD:4,priceYearlyUSD:45,features:["Up to 2 company","Both Tax and Non Tax Functionality","Basic analytics","Priority email support","Email Notifications"],buttonText:"Start Free Trial",highlighted:!0,navigateTo:"/signup",color:"#7e57c2",icon:e.jsx(nc,{fontSize:"large"})},{title:"Enterprise",subtitle:"For large organizations with complex needs",priceMonthlyINR:300,priceYearlyINR:3300,priceMonthlyUSD:6,priceYearlyUSD:70,features:["Unlimited Companies","Both Tax and Non Tax Functionality","Advanced analytics","Enterprise analytics","24/7 phone & email support","Phone & email notifications","Custom integrations","Dedicated account manager","SSO & advanced security"],buttonText:"Contact Sales",color:"#5e35b1",navigateTo:"/contact",icon:e.jsx(Ss,{fontSize:"large"})}],u=[{name:"Company",starter:!0,professional:!0,enterprise:!0,tooltip:"Number of companies"},{name:"Data storage",starter:!0,professional:!0,enterprise:!0,tooltip:"Cloud storage for your data"},{name:"Basic analytics",starter:!0,professional:!0,enterprise:!0},{name:"Advanced analytics",starter:!1,professional:!1,enterprise:!0,tooltip:"Includes trend analysis, forecasting, and custom reports"},{name:"Enterprise analytics",starter:!1,professional:!1,enterprise:!0,tooltip:"AI-powered insights and recommendations"},{name:"Email support",starter:!0,professional:!0,enterprise:!0},{name:"Email notifications",starter:!0,professional:!0,enterprise:!0},{name:"Priority support",starter:!1,professional:!0,enterprise:!0},{name:"24/7 phone support",starter:!1,professional:!1,enterprise:!0},{name:"Phone notifications",starter:!1,professional:!1,enterprise:!0},{name:"Custom dashboards",starter:!1,professional:!1,enterprise:!0},{name:"Custom integrations",starter:!1,professional:!1,enterprise:!0,tooltip:"Connect with your existing tools and software"},{name:"Dedicated account manager",starter:!1,professional:!1,enterprise:!0},{name:"SSO & advanced security",starter:!1,professional:!1,enterprise:!0,tooltip:"Single Sign-On, SAML, and enhanced security features"}],S=(j,T)=>T==="INR"?e.jsxs("span",{children:[e.jsx("span",{style:{fontFamily:"Arial, sans-serif"},children:"₹"})," ",j.toLocaleString("en-IN")]}):e.jsxs("span",{children:[e.jsx("span",{style:{fontFamily:"Arial, sans-serif"},children:"$"})," ",j.toLocaleString("en-US")]}),f=(j,T)=>{const k=j*12,_=k-T;return Math.round(_/k*100)},v=()=>{o(r==="INR"?"USD":"INR")};return e.jsxs(Je,{maxWidth:"lg",sx:{py:8},children:[e.jsxs(l,{textAlign:"center",mb:8,children:[e.jsx(i,{variant:"h2",component:"h1",gutterBottom:!0,fontWeight:"bold",color:"primary",children:"Simple, Transparent Pricing"}),e.jsx(i,{variant:"h6",component:"p",color:"text.secondary",sx:{maxWidth:600,mx:"auto",mb:4},children:"Choose the perfect plan for your business needs. All plans include a 14-day free trial."}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:2,mb:2},children:[e.jsx(jt,{control:e.jsx(kt,{checked:n,onChange:()=>s(!n),color:"primary"}),label:e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(i,{variant:"body1",children:n?"Yearly billing":"Monthly billing"}),n&&e.jsx(ve,{size:"small",label:`Save ${f(r==="INR"?x[0].priceMonthlyINR:x[0].priceMonthlyUSD,r==="INR"?x[0].priceYearlyINR:x[0].priceYearlyUSD)}%`,color:"success",sx:{ml:1}})]})}),e.jsx(Pe,{orientation:"vertical",flexItem:!0}),e.jsx(jt,{control:e.jsx(kt,{checked:r==="USD",onChange:v,color:"primary"}),label:e.jsx(i,{variant:"body1",children:r==="INR"?e.jsxs(e.Fragment,{children:["INR (",e.jsx("span",{dangerouslySetInnerHTML:{__html:"&#8377;"}}),")"]}):e.jsxs(e.Fragment,{children:["USD (",e.jsx("span",{dangerouslySetInnerHTML:{__html:"&#36;"}}),")"]})})})]}),e.jsx(i,{variant:"body2",color:"text.secondary",children:r==="INR"?e.jsxs(e.Fragment,{children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:"&#8377;"}}),"1 =",e.jsx("span",{dangerouslySetInnerHTML:{__html:"&#36;"}}),"0.012 USD"]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:"&#36;"}}),"1 =",e.jsx("span",{dangerouslySetInnerHTML:{__html:"&#8377;"}}),"82.5 INR"]})})]}),e.jsx(I,{container:!0,spacing:4,justifyContent:"center",children:x.map((j,T)=>{const k=n?r==="INR"?j.priceYearlyINR:j.priceYearlyUSD:r==="INR"?j.priceMonthlyINR:j.priceMonthlyUSD,B=f(r==="INR"?j.priceMonthlyINR:j.priceMonthlyUSD,r==="INR"?j.priceYearlyINR:j.priceYearlyUSD);return e.jsx(I,{item:!0,xs:12,md:4,children:e.jsx(Ye,{appear:!0,in:!0,style:{transitionDelay:`${T*100}ms`},children:e.jsxs(Ne,{raised:j.highlighted||p===T,sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:4,transition:"all 0.3s ease",transform:j.highlighted||p===T?"scale(1.05)":"scale(1)",position:"relative",overflow:"hidden",border:j.highlighted?`2px solid ${j.color}`:"none","&:hover":{transform:"scale(1.05)",boxShadow:8}},onMouseEnter:()=>c(T),onMouseLeave:()=>c(null),children:[j.highlighted&&e.jsx(l,{sx:{position:"absolute",top:15,right:-35,transform:"rotate(45deg)",backgroundColor:j.color,color:"white",px:4,py:.5,width:150,textAlign:"center",zIndex:1},children:e.jsx(i,{variant:"body2",fontWeight:"bold",children:"Popular"})}),e.jsx(vs,{title:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(l,{sx:{color:j.color},children:j.icon}),e.jsx(i,{variant:"h5",fontWeight:"bold",children:j.title})]}),subheader:j.subtitle,titleTypographyProps:{align:"center"},subheaderTypographyProps:{align:"center"},sx:{backgroundColor:`${j.color}15`,pb:3,borderBottom:`1px solid ${t.palette.divider}`}}),e.jsxs(Me,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsxs(l,{sx:{textAlign:"center",mb:3},children:[e.jsx(i,{variant:"h3",component:"h2",color:j.color,fontWeight:"bold",children:S(k,r)}),e.jsxs(i,{variant:"subtitle1",color:"text.secondary",children:["per ",n?"year":"month"]}),n&&e.jsxs(i,{variant:"body2",color:"success.main",sx:{mt:1},children:["Save ",B,"% with yearly billing"]})]}),e.jsx(xa,{sx:{mb:3,flexGrow:1},children:j.features.map((_,K)=>e.jsxs(Kt,{dense:!0,children:[e.jsx(vt,{sx:{minWidth:30},children:e.jsx(da,{sx:{color:j.color}})}),e.jsx(tt,{primary:_})]},K))}),e.jsx(ee,{variant:j.highlighted?"contained":"outlined",color:"primary",size:"large",fullWidth:!0,onClick:()=>a(j.navigateTo),sx:{py:1.5,borderRadius:1,background:j.highlighted?`linear-gradient(45deg, ${j.color} 30%, ${j.color}99 90%)`:"transparent","&:hover":{background:j.highlighted?`linear-gradient(45deg, ${j.color} 30%, ${j.color}99 90%)`:`${j.color}15`}},endIcon:e.jsx(xo,{}),children:j.buttonText})]})]})})},T)})}),e.jsxs(ne,{elevation:3,sx:{mt:10,p:4,borderRadius:4,overflow:"hidden",position:"relative"},children:[e.jsx(i,{variant:"h4",component:"h2",gutterBottom:!0,align:"center",fontWeight:"bold",sx:{mb:4},children:"Feature Comparison"}),e.jsxs(I,{container:!0,sx:{mb:2,pb:1,borderBottom:`1px solid ${t.palette.divider}`},children:[e.jsx(I,{item:!0,xs:4,children:e.jsx(i,{variant:"subtitle1",fontWeight:"bold",children:"Feature"})}),e.jsx(I,{item:!0,xs:8,children:e.jsxs(I,{container:!0,children:[e.jsx(I,{item:!0,xs:4,sx:{textAlign:"center"},children:e.jsx(i,{variant:"subtitle1",fontWeight:"bold",color:x[0].color,children:"Starter"})}),e.jsx(I,{item:!0,xs:4,sx:{textAlign:"center"},children:e.jsx(i,{variant:"subtitle1",fontWeight:"bold",color:x[1].color,children:"Professional"})}),e.jsx(I,{item:!0,xs:4,sx:{textAlign:"center"},children:e.jsx(i,{variant:"subtitle1",fontWeight:"bold",color:x[2].color,children:"Enterprise"})})]})})]}),u.map((j,T)=>e.jsxs(I,{container:!0,sx:{py:1.5,borderBottom:T<u.length-1?`1px solid ${t.palette.divider}`:"none","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.03)"}},children:[e.jsx(I,{item:!0,xs:4,sx:{display:"flex",alignItems:"center"},children:e.jsxs(i,{variant:"body1",children:[j.name,j.tooltip&&e.jsx(le,{title:j.tooltip,arrow:!0,children:e.jsx(ht,{fontSize:"small",sx:{ml:1,color:"text.secondary",verticalAlign:"middle"}})})]})}),e.jsx(I,{item:!0,xs:8,children:e.jsxs(I,{container:!0,children:[e.jsx(I,{item:!0,xs:4,sx:{textAlign:"center"},children:j.starter?e.jsx(da,{sx:{color:"success.main"}}):e.jsx(ct,{sx:{color:"text.disabled"}})}),e.jsx(I,{item:!0,xs:4,sx:{textAlign:"center"},children:j.professional?e.jsx(da,{sx:{color:"success.main"}}):e.jsx(ct,{sx:{color:"text.disabled"}})}),e.jsx(I,{item:!0,xs:4,sx:{textAlign:"center"},children:j.enterprise?e.jsx(da,{sx:{color:"success.main"}}):e.jsx(ct,{sx:{color:"text.disabled"}})})]})})]},T))]}),e.jsxs(l,{sx:{mt:8,textAlign:"center"},children:[e.jsx(i,{variant:"h5",gutterBottom:!0,children:"Have Questions?"}),e.jsx(i,{variant:"body1",gutterBottom:!0,children:"Our team is here to help you choose the right plan for your business."}),e.jsx(ee,{variant:"outlined",color:"primary",size:"large",onClick:()=>a("/contact"),sx:{mt:2,borderRadius:2},children:"Contact Sales"})]})]})},Br=({icon:t,title:a,content:n,link:s})=>e.jsx(Ne,{elevation:0,sx:{p:1,mb:2,border:"1px solid",borderColor:"divider",borderRadius:1,transition:"all 0.3s ease","&:hover":{boxShadow:3,transform:"translateY(-2px)"}},children:e.jsx(Me,{children:e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:48,height:48,borderRadius:1,bgcolor:"primary.light",color:"primary.contrastText",mr:2},children:t}),e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle2",color:"text.secondary",children:a}),s?e.jsx(i,{component:"a",href:s,variant:"body1",sx:{fontWeight:500,color:"primary.main",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:n}):e.jsx(i,{variant:"body1",sx:{fontWeight:500},children:n})]})]})})}),ox=()=>e.jsx(Ne,{elevation:0,sx:{p:2,border:"1px solid",borderColor:"divider",borderRadius:1,mt:4},children:e.jsxs(Me,{children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Da,{sx:{color:"primary.main",mr:1}}),e.jsx(i,{variant:"h6",sx:{fontWeight:600},children:"Business Hours"})]}),e.jsx(Pe,{sx:{mb:2}}),e.jsxs(I,{container:!0,spacing:1,children:[e.jsx(I,{item:!0,xs:6,children:e.jsx(i,{variant:"body2",color:"text.secondary",children:"Monday - Friday:"})}),e.jsx(I,{item:!0,xs:6,children:e.jsx(i,{variant:"body2",sx:{fontWeight:500},children:"9:00 AM - 6:00 PM IST"})}),e.jsx(I,{item:!0,xs:6,children:e.jsx(i,{variant:"body2",color:"text.secondary",children:"Saturday:"})}),e.jsx(I,{item:!0,xs:6,children:e.jsx(i,{variant:"body2",sx:{fontWeight:500},children:"10:00 AM - 2:00 PM IST"})}),e.jsx(I,{item:!0,xs:6,children:e.jsx(i,{variant:"body2",color:"text.secondary",children:"Sunday:"})}),e.jsx(I,{item:!0,xs:6,children:e.jsx(i,{variant:"body2",sx:{fontWeight:500},children:"Closed"})})]})]})}),xl=()=>{const t=Fe(),[a,n]=g.useState({firstName:"",lastName:"",email:"",phone:"",company:"",industry:"",employees:"",queryType:"",message:"",marketingConsent:!0,time:nr(new Date().toISOString())}),[s,r]=g.useState({}),[o,p]=g.useState(!1),c=["Healthcare","Finance","Education","Manufacturing","Retail","Technology","Hospitality","Transportation","Government","Other"],x=["1-5 employees","6-10 employees","11-25 employees","26-50 employees","51-100 employees","100+ employees"],u=["General Inquiry","Technical","Billing","Consultation","Feedback","Support","Sales","Other"],S=k=>{const{name:B,value:_}=k.target;n({...a,[B]:_}),s[B]&&r({...s,[B]:""})},f=()=>{const k={};return a.firstName.trim()||(k.firstName="First name is required"),a.email.trim()?/\S+@\S+\.\S+/.test(a.email)||(k.email="Please enter a valid email address"):k.email="Email is required",a.phone&&!/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/.test(a.phone)&&(k.phone="Please enter a valid phone number"),a.industry||(k.industry="Please select your industry"),a.queryType||(k.queryType="Please select a query type"),a.message.trim()?a.message.trim().length<10&&(k.message="Message should be at least 10 characters"):k.message="Please enter your message",r(k),Object.keys(k).length===0},v=async k=>{if(k.preventDefault(),!!f()){p(!0);try{await t(Wn(a)).then(B=>{B.meta.requestStatus==="fulfilled"?Z.success("Thank you for contacting us! We will get back to you shortly."):Z.error("Something went wrong. Please try again later."),n({firstName:"",lastName:"",email:"",phone:"",queryType:"",company:"",industry:"",employees:"",message:"",marketingConsent:!0,time:nr(new Date().toISOString())})})}catch(B){console.log("Error",B),Z.error("Something went wrong. Please try again later.")}finally{p(!1)}}},j={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},T={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}};return e.jsxs(l,{sx:{py:{xs:6,md:10},bgcolor:"background.default",position:"relative",overflow:"hidden"},children:[e.jsx(l,{sx:{position:"absolute",top:-100,right:-100,width:400,height:400,borderRadius:"50%",background:"radial-gradient(circle, rgba(54, 126, 56, 0.3) 0%, rgba(46, 125, 50, 0) 70%)",zIndex:0}}),e.jsx(l,{sx:{position:"absolute",top:100,left:100,width:400,height:400,borderRadius:"50%",background:"radial-gradient(circle, rgba(54, 126, 56, 0.3) 0%, rgba(46, 125, 50, 0) 70%)",zIndex:0}}),e.jsx(l,{sx:{position:"absolute",bottom:100,right:100,width:400,height:400,borderRadius:"50%",background:"radial-gradient(circle, rgba(54, 126, 56, 0.3) 0%, rgba(46, 125, 50, 0) 70%)",zIndex:0}}),e.jsx(l,{sx:{position:"absolute",bottom:-50,left:-50,width:400,height:400,borderRadius:"50%",background:"radial-gradient(circle, rgba(54, 126, 56, 0.3) 0%, rgba(46, 125, 50, 0) 70%)",zIndex:0}}),e.jsxs(Je,{maxWidth:"lg",sx:{position:"relative",zIndex:1},children:[e.jsxs(l,{component:lt.div,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},sx:{textAlign:"center",mb:6},children:[e.jsx(ve,{label:"CONTACT US",color:"primary",sx:{fontWeight:600,fontSize:"0.75rem",height:28,mb:2,p:2}}),e.jsx(i,{variant:"h3",component:"h1",gutterBottom:!0,sx:{fontWeight:700},children:"Get in Touch"}),e.jsx(i,{variant:"h6",component:"p",color:"text.secondary",sx:{maxWidth:700,mx:"auto",mb:4,fontWeight:400},children:"Have questions about our inventory management solution? Our team is here to help you streamline your operations."})]}),e.jsxs(I,{container:!0,spacing:1,component:lt.div,variants:j,initial:"hidden",animate:"visible",children:[e.jsx(I,{item:!0,xs:12,md:7.5,component:lt.div,variants:T,children:e.jsxs(ne,{elevation:0,sx:{p:{xs:2,md:3},borderRadius:1,height:"100%",border:"1px solid",borderColor:"divider",bgcolor:"background.paper"},children:[e.jsx(i,{variant:"h5",component:"h2",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:"Tell us about your needs"}),e.jsx("form",{onSubmit:v,children:e.jsxs(I,{container:!0,spacing:3,children:[e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsx(X,{fullWidth:!0,label:"First Name",name:"firstName",value:a.firstName,onChange:S,error:!!s.firstName,helperText:s.firstName,required:!0,variant:"outlined"})}),e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsx(X,{fullWidth:!0,label:"Last Name",name:"lastName",value:a.lastName,onChange:S,error:!!s.lastName,helperText:s.lastName,variant:"outlined"})}),e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsx(X,{fullWidth:!0,label:"Email",name:"email",type:"email",value:a.email,onChange:S,error:!!s.email,helperText:s.email,required:!0,variant:"outlined"})}),e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsx(X,{fullWidth:!0,label:"Phone Number",name:"phone",value:a.phone,onChange:S,error:!!s.phone,helperText:s.phone,placeholder:"Optional",variant:"outlined"})}),e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsx(X,{fullWidth:!0,label:"Company Name",name:"company",value:a.company,onChange:S,error:!!s.company,helperText:s.company,variant:"outlined"})}),e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsx(X,{fullWidth:!0,label:"Industry",name:"industry",value:a.industry,onChange:S,error:!!s.industry,helperText:s.industry,required:!0,select:!0,variant:"outlined",children:c.map(k=>e.jsx(he,{value:k,children:k},k))})}),e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsx(X,{fullWidth:!0,label:"Company Size",name:"employees",value:a.employees,onChange:S,error:!!s.employees,helperText:s.employees,select:!0,variant:"outlined",children:x.map(k=>e.jsx(he,{value:k,children:k},k))})}),e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsx(X,{fullWidth:!0,label:"Query Type",name:"queryType",value:a.queryType,onChange:S,error:!!s.queryType,helperText:s.queryType,required:!0,select:!0,variant:"outlined",children:u.map(k=>e.jsx(he,{value:k,children:k},k))})}),e.jsx(I,{item:!0,xs:12,children:e.jsx(X,{fullWidth:!0,label:"How can we help you?",name:"message",value:a.message,onChange:S,error:!!s.message,helperText:s.message,multiline:!0,rows:4,required:!0,variant:"outlined",placeholder:"Tell us about your specific needs or questions..."})}),e.jsxs(I,{item:!0,xs:12,children:[e.jsx(ee,{type:"submit",variant:"contained",color:"primary",size:"large",fullWidth:!0,disabled:o,sx:{py:1.5,mt:2,fontWeight:600},children:o?e.jsx(bt,{}):e.jsxs(e.Fragment,{children:["Submit Request ",e.jsx(xo,{sx:{ml:1}})]})}),e.jsx(i,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1,textAlign:"center"},children:"We'll get back to you within 24 business hours"})]})]})})]})}),e.jsx(I,{item:!0,xs:12,md:4.5,component:lt.div,variants:T,children:e.jsxs(ne,{elevation:0,sx:{p:{xs:3,md:4},borderRadius:1,height:"100%",border:"1px solid",borderColor:"divider",bgcolor:"background.paper"},children:[e.jsx(i,{variant:"h5",component:"h2",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:"Contact Information"}),e.jsx(Br,{icon:e.jsx(Bt,{}),title:"Email Us",content:"support@vyapardrishti.in",link:"mailto:vyapardrishti@gmail.com"}),e.jsx(Br,{icon:e.jsx(ua,{}),title:"Call Us",content:"+91 63670 97548",link:"tel:+916367097548"}),e.jsx(Br,{icon:e.jsx(La,{}),title:"Our Office",content:"Udaipur, Rajasthan, India"}),e.jsx(Br,{icon:e.jsx(Ss,{}),title:"Technical Support",content:"help@vyapardrishti.in",link:"mailto:vyapardrishti@gmail.com"}),e.jsx(Br,{icon:e.jsx(ic,{}),title:"Sales Inquiries",content:"sales@vyapardrishti.in",link:"mailto:vyapardrishti@gmail.com"}),e.jsx(ox,{})]})})]}),e.jsxs(l,{component:lt.div,initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:.3},sx:{mt:8},children:[e.jsx(i,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,textAlign:"center",mb:4},children:"Frequently Asked Questions"}),e.jsx(I,{container:!0,spacing:3,children:[{question:"Is your platform HIPAA compliant?",answer:"Absolutely. Our entire system is built with HIPAA compliance as a foundational requirement. We maintain strict data security protocols and regular compliance audits."},{question:"What kind of support do you provide?",answer:"We offer 24/7 technical support via email and phone during business hours. All clients are assigned a dedicated account manager for ongoing assistance and training."}].map((k,B)=>e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsxs(Ne,{elevation:0,sx:{p:3,height:"100%",borderRadius:1,border:"1px solid",borderColor:"divider"},children:[e.jsx(i,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:600,color:"primary.main"},children:k.question}),e.jsx(i,{variant:"body2",color:"text.secondary",children:k.answer})]})},B))})]})]})]})},sx=()=>e.jsx(e.Fragment,{children:e.jsxs(l,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[e.jsx(ix,{}),e.jsx(l,{component:"main",sx:{flexGrow:1},children:e.jsxs(Ks,{children:[e.jsx(We,{path:"/contact",element:e.jsx(xl,{})}),e.jsx(We,{path:"/about",element:e.jsx(Kn,{})}),e.jsx(We,{path:"/pricing",element:e.jsx(ul,{})}),e.jsx(We,{path:"/privacy",element:e.jsx(ll,{})}),e.jsx(We,{path:"/terms",element:e.jsx(cl,{})}),e.jsx(We,{path:"/security",element:e.jsx(dl,{})}),e.jsx(We,{path:"/cookies",element:e.jsx(sl,{})}),e.jsx(We,{path:"/",element:e.jsxs(e.Fragment,{children:[e.jsx(Hu,{}),e.jsx(Qu,{}),e.jsx(ex,{}),e.jsx(ax,{}),e.jsx(Je,{children:e.jsx(nx,{})})]})})]})}),e.jsx(qu,{})]})}),Hn=ye("view/timeline",async({search:t,category:a,company_id:n,page_no:s,limit:r,startDate:o,endDate:p,sortField:c,sortOrder:x},{rejectWithValue:u})=>{var S,f;try{const v=await be.get(`/invoices/get/timeline?${n?`company_id=${n}&`:""}${t?`search=${t}&`:""}${a!=="all"?`category=${a}&`:""}${o?`start_date=${o}&`:""}${p?`end_date=${p}&`:""}page_no=${s}&limit=${r}&sortField=${c}&sortOrder=${x==="asc"?"1":"-1"}`);if(console.log("View StockMovement response",v),v.data.success===!0){const j=v.data.data.docs,T=v.data.data.meta;return{stockMovement:j,timelinePageMeta:T}}else return u("Login Failed: No access token recieved.")}catch(v){return u((f=(S=v==null?void 0:v.response)==null?void 0:S.data)==null?void 0:f.message)}}),qn=ye("view/Inventory/Stats",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.get(`/product/view/inventory/stats?company_id=${t}`);return console.log("View Inventory Stock Stats response",r),r.data.success===!0?{statsData:r.data.data}:a("Login Failed: No access token recieved.")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),Un=ye("view/Inventory/Items",async({company_id:t,search:a,category:n,group:s,stock_status:r,page_no:o,limit:p,sortField:c,sortOrder:x},{rejectWithValue:u})=>{var S,f;try{const v=await be.get(`/product/view/inventory/items?company_id=${t}&search=${a}${n==="all"?"":"&category="+n}${s==="all"?"":"&group="+s}${r==="all"?"":"&stock_status="+r}&page_no=${o}&limit=${p}&sortField=${c}&sortOrder=${x==="asc"?"1":"-1"}`);if(console.log("View InventoryStockItems response",v),v.data.success===!0){const j=v.data.data.docs,T=v.data.data.meta;return{InventoryItems:j,inventoryPageMeta:T}}else return u("Login Failed: No access token recieved.")}catch(v){return u((f=(S=v==null?void 0:v.response)==null?void 0:S.data)==null?void 0:f.message)}}),Yn=ye("view/hsn/summary",async({search:t,category:a,company_id:n,page_no:s,limit:r,startDate:o,endDate:p,sortField:c,sortOrder:x},{rejectWithValue:u})=>{var S,f;try{const v=await be.get(`/invoices/get/hsn/summary?${n?`company_id=${n}&`:""}${t?`search=${t}&`:""}${a!=="all"?`category=${a}&`:""}${o?`start_date=${o}&`:""}${p?`end_date=${p}&`:""}page_no=${s}&limit=${r}&sortField=${c}&sortOrder=${x==="asc"?"1":"-1"}`);if(console.log("View getSummary response",v),v.data.success===!0){const j=v.data.data.docs,T=v.data.data.meta;return{hsnSummaryData:j,hsnPageMeta:T}}else return u("Login Failed: No access token recieved.")}catch(v){return u((f=(S=v==null?void 0:v.response)==null?void 0:S.data)==null?void 0:f.message)}}),Jn=ye("view/summary/stats",async({company_id:t,startDate:a,endDate:n},{rejectWithValue:s})=>{var r,o;try{const p=await be.get(`/invoices/get/summary/stats?${t?`company_id=${t}&`:""}${a?`start_date=${a}&`:""}${n?`end_date=${n}&`:""}`);return console.log("View getSummaryStats response",p),p.data.success===!0?{summaryStats:p.data.data}:s("Login Failed: No access token recieved.")}catch(p){return s((o=(r=p==null?void 0:p.response)==null?void 0:r.data)==null?void 0:o.message)}}),Vn=ye("view/party/summary",async({search:t,company_id:a,page_no:n,limit:s,startDate:r,endDate:o,sortField:p,sortOrder:c},{rejectWithValue:x})=>{var u,S;try{const f=await be.get(`/invoices/get/party/summary?${a?`company_id=${a}&`:""}${t?`search=${t}&`:""}${r?`start_date=${r}&`:""}${o?`end_date=${o}&`:""}page_no=${n}&limit=${s}&sortField=${p}&sortOrder=${c==="asc"?"1":"-1"}`);if(console.log("View getPartySummary response",f),f.data.success===!0){const v=f.data.data.docs,j=f.data.data.meta;return{partySummaryData:v,partyPageMeta:j}}else return x("Login Failed: No access token recieved.")}catch(f){return x((S=(u=f==null?void 0:f.response)==null?void 0:u.data)==null?void 0:S.message)}}),Qn=ye("view/bill/summary",async({search:t,company_id:a,page_no:n,limit:s,startDate:r,endDate:o,sortField:p,sortOrder:c},{rejectWithValue:x})=>{var u,S;try{const f=await be.get(`/invoices/get/invoice/summary?${a?`company_id=${a}&`:""}${t?`search=${t}&`:""}${r?`start_date=${r}&`:""}${o?`end_date=${o}&`:""}page_no=${n}&limit=${s}&sortField=${p}&sortOrder=${c==="asc"?"1":"-1"}`);if(console.log("View getBillSummary response",f),f.data.success===!0){const v=f.data.data.docs,j=f.data.data.meta;return{invoiceSummaryData:v,invoicePageMeta:j}}else return x("Login Failed: No access token recieved.")}catch(f){return x((S=(u=f==null?void 0:f.response)==null?void 0:u.data)==null?void 0:S.message)}});function Ja({title:t,subtitle:a,children:n}){const s=Ke();return e.jsx(Ne,{sx:{mb:3,p:2,boxShadow:"0 2px 4px rgba(0,0,0,0.05)",borderRadius:"8px"},children:e.jsx(Me,{children:e.jsxs(I,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(I,{item:!0,xs:12,md:8,children:e.jsxs(l,{sx:{display:"flex",gap:2,alignItems:"center"},children:[e.jsx(zt,{icon:e.jsx(ma,{fontSize:"small"}),title:"Back",color:"primary",onClick:()=>s(-1)}),e.jsxs(l,{children:[e.jsx(i,{variant:"h5",component:"h1",fontWeight:"700",color:"text.primary",children:t}),e.jsx(i,{variant:"body2",color:"text.secondary",children:a})]})]})}),e.jsx(I,{item:!0,xs:12,md:4,sx:{textAlign:{xs:"left",md:"right"}},children:e.jsx(l,{sx:{display:"flex",justifyContent:"flex-end",gap:1,flexWrap:"wrap"},children:n})})]})})})}const lx=()=>{var F;const t=we(),a=Fe(),{stockMovement:n,timelinePageMeta:s}=Ce(h=>h.inventory),[r,o]=g.useState(""),{user:p,current_company_id:c}=Ce(h=>h.auth),x=c||localStorage.getItem("current_company_id")||((F=p==null?void 0:p.user_settings)==null?void 0:F.current_company_id)||"",[u,S]=g.useState(!1),[f,v]=g.useState({search:"",category:"all",page_no:1,limit:30,startDate:new Date("2025-04-01"),endDate:new Date("2026-03-31"),sortField:"item",sortOrder:"desc"}),{search:j,page_no:T,limit:k,startDate:B,endDate:_,category:K,sortField:w,sortOrder:N}=f,R=h=>{const b=w===h&&N==="asc";v(M=>({...M,sortOrder:b?"desc":"asc",sortField:h}))},L=g.useCallback(async()=>{S(!0),a(Hn({search:r,page_no:T,company_id:x,category:K==="all"?"":K,limit:k,startDate:B.toISOString(),endDate:_.toISOString(),sortField:w,sortOrder:N})).unwrap().then(()=>{S(!1)}).catch(h=>{S(!1),console.error("Error fetching stock movement:",h)})},[a,r,T,k,B,x,K,_,w,N]);g.useEffect(()=>{const h=setTimeout(()=>{o(j)},300);return()=>clearTimeout(h)},[j]);const D=(h,b)=>{v(M=>({...M,page_no:b}))},P=(h,b)=>{v(M=>({...M,[h]:b}))},A=()=>{v({search:"",category:"all",startDate:new Date("2025-04-01"),endDate:new Date("2026-03-31"),page_no:1,sortField:"item",sortOrder:"desc",limit:30})};g.useEffect(()=>{L()},[]),g.useEffect(()=>{L()},[a,_,k,T,K,r,w,x,N,B,L]);const O=(h,b=2)=>h==null?"0.00":Number(h).toLocaleString("en-IN",{minimumFractionDigits:b,maximumFractionDigits:b}),y=h=>h==null?"₹ 0.00":`₹ ${O(h)}`;return e.jsx(Pt,{dateAdapter:Lt,children:e.jsxs(l,{sx:{width:"100%",p:{xs:2,md:3}},children:[e.jsx(Ja,{title:"Inventory Timeline",subtitle:"Track all stock movements, analyze trends, and monitor inventory performance."}),e.jsx(I,{container:!0,spacing:2,sx:{mb:2},children:e.jsx(I,{item:!0,xs:12,md:12,children:e.jsxs(J,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",children:[e.jsx(I,{item:!0,xs:12,sm:5,md:5,children:e.jsx(X,{fullWidth:!0,placeholder:"Search by Order ID or Stockist Name",value:j,onChange:h=>P("search",h.target.value),size:"small",InputProps:{startAdornment:e.jsx(qa,{color:"action",sx:{mr:1}}),sx:{borderRadius:"8px"}}})}),e.jsxs(I,{item:!0,xs:12,sm:4,flexDirection:"row",display:"flex",gap:2,alignItems:"center",children:[e.jsx(Xe,{label:"Start Date",value:B,format:"dd/MM/yyyy",views:["year","month","day"],onChange:h=>P("startDate",h),slotProps:{textField:{fullWidth:!0,size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"},"& .MuiInputAdornment-root .MuiButtonBase-root":{border:"none",boxShadow:"none"}}}}}),e.jsx(Xe,{label:"End Date",value:_,format:"dd/MM/yyyy",views:["year","month","day"],onChange:h=>P("endDate",h),slotProps:{textField:{fullWidth:!0,size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"},"& .MuiInputAdornment-root .MuiButtonBase-root":{border:"none",boxShadow:"none"}}}}})]}),e.jsx(I,{item:!0,xs:12,md:1.5,children:e.jsxs(X,{select:!0,fullWidth:!0,label:"Show",value:k,onChange:h=>P("limit",h.target.value),size:"small",children:[e.jsx(he,{value:30,children:"30"}),e.jsx(he,{value:50,children:"50"}),e.jsx(he,{value:100,children:"100"}),e.jsx(he,{value:500,children:"500"})]})}),e.jsx(I,{item:!0,xs:12,md:1.5,children:e.jsx(ee,{variant:"outlined",color:"primary",size:"medium",startIcon:e.jsx(Ua,{}),onClick:()=>A(),sx:{fontWeight:"600",py:1,width:"100%",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",borderColor:"#1976d2"},children:"Reset Filters"})})]})})}),e.jsx(ne,{elevation:0,sx:{border:"1px solid",borderColor:"divider",borderRadius:1,overflow:"hidden"},children:e.jsx(nt,{sx:{},children:e.jsxs(it,{stickyHeader:!0,sx:{minWidth:1400},children:[e.jsxs(ot,{children:[e.jsxs(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{rowSpan:2,sx:{fontWeight:700,backgroundColor:"primary.main",color:"primary.contrastText",borderRight:"1px solid rgba(255,255,255,0.2)",zIndex:3},children:"Sr. No."}),e.jsx(m,{rowSpan:2,sx:{fontWeight:700,backgroundColor:"primary.main",color:"primary.contrastText",borderRight:"1px solid rgba(255,255,255,0.2)",minWidth:200,position:"sticky",left:0,zIndex:3},children:e.jsx(Ue,{sx:{"&.MuiTableSortLabel-root":{color:"inherit"},"&.MuiTableSortLabel-root:hover":{color:"inherit"},"& .MuiTableSortLabel-icon":{color:"inherit !important"}},onClick:()=>R("item"),children:"Item Details (Unit)"})}),[{title:"Opening Balance",color:"info.main"},{title:"Purchases",color:"success.main"},{title:"Sales",color:"error.main"},{title:"Gross Profit",color:"warning.main"},{title:"Current Stock",color:"primary.main"}].map((h,b)=>e.jsx(m,{align:"center",colSpan:h.title==="Gross Profit"?2:3,sx:{fontWeight:700,backgroundColor:h.color,color:"white",borderRight:b<4?"1px solid rgba(255,255,255,0.2)":"none",borderBottom:"1px solid rgba(255,255,255,0.2)"},children:h.title},h.title))]}),e.jsxs(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px"}},children:[["QTY","Rate","Value"].map(h=>e.jsx(m,{align:"center",sx:{fontWeight:600,backgroundColor:"info.light",color:"info.contrastText",borderRight:"1px solid rgba(255,255,255,0.3)",fontSize:"0.75rem"},children:h},`opening-${h}`)),["QTY","Rate","Value"].map(h=>e.jsx(m,{align:"center",sx:{fontWeight:600,backgroundColor:"success.light",color:"success.contrastText",borderRight:"1px solid rgba(255,255,255,0.3)",fontSize:"0.75rem"},children:h},`inwards-${h}`)),["QTY","Rate","Value"].map(h=>e.jsx(m,{align:"center",sx:{fontWeight:600,backgroundColor:"error.light",color:"error.contrastText",borderRight:"1px solid rgba(255,255,255,0.3)",fontSize:"0.75rem"},children:h},`outwards-${h}`)),["Value","Margin %"].map(h=>e.jsx(m,{align:"center",sx:{fontWeight:600,backgroundColor:"warning.light",color:"warning.contrastText",borderRight:"1px solid rgba(255,255,255,0.3)",fontSize:"0.75rem"},children:h},`profit-${h}`)),["QTY","Rate","Value"].map((h,b)=>e.jsx(m,{align:"center",sx:{fontWeight:600,backgroundColor:"primary.light",color:"primary.contrastText",borderRight:b<2?"1px solid rgba(255,255,255,0.3)":"none",fontSize:"0.75rem"},children:h},`closing-${h}`))]})]}),e.jsxs(st,{children:[u?Array.from({length:5}).map((h,b)=>e.jsxs(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{children:e.jsx(pe,{variant:"text",width:"60px"})}),e.jsx(m,{sx:{position:"sticky",left:0,backgroundColor:"background.paper",zIndex:1,minWidth:200},children:e.jsx(pe,{variant:"text",width:"100%"})}),Array.from({length:14}).map((M,W)=>e.jsx(m,{children:e.jsx(pe,{variant:"text",width:"60px"})},W))]},b)):((n==null?void 0:n.length)??0)>0?n==null?void 0:n.map((h,b)=>e.jsxs(xe,{sx:{"&:hover":{backgroundColor:"action.hover"},backgroundColor:b%2===0?"white":d("hsl(220, 20%, 88%)",.5),"& .MuiTableCell-root":{padding:"8px 16px"},whiteSpace:"nowrap"},children:[e.jsx(m,{sx:{backgroundColor:b%2===0?"white":"hsl(220, 20%, 88%)",zIndex:3,textAlign:"center",borderRight:"1px solid",borderRightColor:"divider"},children:b+1+(s.page-1)*k}),e.jsx(m,{className:"sticky-cell",sx:{position:"sticky",left:0,backgroundColor:b%2===0?"white":"hsl(220, 20%, 88%)",zIndex:3,minWidth:200,borderRight:"1px solid",borderRightColor:"divider"},children:e.jsxs(l,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:.5},children:[e.jsx(i,{fontWeight:600,sx:{fontSize:"0.8rem"},noWrap:!0,children:h.item.length>35?h.item.slice(0,35)+"...":h.item||"Unnamed Product"}),e.jsx(i,{variant:"caption",color:"text.secondary",fontWeight:500,noWrap:!0,children:h.unit||"PCS"})]})}),e.jsx(m,{align:"right",sx:{fontSize:"0.75rem"},children:O(h.opening_qty)}),e.jsx(m,{align:"right",sx:{fontSize:"0.75rem"},children:O(h.opening_rate)}),e.jsx(m,{align:"right",sx:{fontSize:"0.8rem",fontWeight:600,borderRight:"1px solid",borderRightColor:"divider"},children:y(h.opening_val)}),e.jsx(m,{align:"right",sx:{fontSize:"0.75rem",color:t.palette.text.secondary},children:h.inwards_qty>0?O(h.inwards_qty):"—"}),e.jsx(m,{align:"right",sx:{fontSize:"0.75rem",color:t.palette.text.secondary},children:h.inwards_qty>0?O(h.inwards_rate):"—"}),e.jsx(m,{align:"right",sx:{fontSize:"0.8rem",fontWeight:600,color:"text.primary",borderRight:"1px solid",borderRightColor:"divider"},children:h.inwards_val>0?y(h.inwards_val):"—"}),e.jsx(m,{align:"right",sx:{fontSize:"0.75rem",color:t.palette.text.secondary},children:h.outwards_qty>0?O(h.outwards_qty):"—"}),e.jsx(m,{align:"right",sx:{fontSize:"0.75rem",color:t.palette.text.secondary},children:h.outwards_qty>0?O(h.outwards_rate):"—"}),e.jsx(m,{align:"right",sx:{fontSize:"0.8rem",fontWeight:600,color:"text.primary",borderRight:"1px solid",borderRightColor:"divider"},children:h.outwards_val>0?y(h.outwards_val):"—"}),e.jsx(m,{align:"right",sx:{fontSize:"0.8rem",fontWeight:700,color:h.gross_profit>=0?"success.main":"error.main"},children:y(h.gross_profit)}),e.jsxs(m,{align:"right",sx:{fontSize:"0.8rem",fontWeight:600,color:h.profit_percent>=0?"success.main":"error.main",borderRight:"1px solid",borderRightColor:"divider"},children:[O(h.profit_percent),"%"]}),e.jsx(m,{align:"right",sx:{fontSize:"0.75rem",color:h.closing_qty<0?"error.main":"text.primary"},children:O(h.closing_qty)}),e.jsx(m,{align:"right",sx:{fontSize:"0.75rem",color:h.closing_rate<0?"error.main":"text.primary"},children:O(h.closing_rate)}),e.jsx(m,{align:"right",sx:{fontSize:"0.8rem",fontWeight:600,color:h.closing_val<0?"error.main":"success.main"},children:y(h.closing_val)})]},h._id)):e.jsx(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px"}},children:e.jsx(m,{colSpan:16,align:"center",children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,my:8},children:[e.jsx(ea,{sx:{fontSize:48,color:"text.disabled"}}),e.jsx(i,{variant:"h6",color:"text.secondary",fontWeight:600,children:"No Records Found"}),e.jsx(i,{variant:"body2",color:"text.disabled",sx:{maxWidth:400,textAlign:"center"},children:"Try adjusting your filters or date range, or add some inventory transactions to see data here."})]})})}),u?Array.from({length:5}).map((h,b)=>e.jsxs(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{children:e.jsx(pe,{variant:"text",width:"60px"})}),e.jsx(m,{sx:{position:"sticky",left:0,backgroundColor:"background.paper",zIndex:1,minWidth:200},children:e.jsx(pe,{variant:"text",width:"100%"})}),Array.from({length:14}).map((M,W)=>e.jsx(m,{children:e.jsx(pe,{variant:"text",width:"60px"})},W))]},b)):((n==null?void 0:n.length)??0)>0&&e.jsxs(e.Fragment,{children:[e.jsx(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px",bgcolor:d(t.palette.primary.light,.3)}},children:e.jsx(m,{colSpan:16})}),e.jsxs(xe,{sx:{"&:hover":{backgroundColor:"action.hover"},backgroundColor:d("hsl(220, 20%, 88%)",.5),"& .MuiTableCell-root":{padding:"8px 16px"},whiteSpace:"nowrap"},children:[e.jsx(m,{className:"sticky-cell",sx:{backgroundColor:"hsl(220, 20%, 88%)",zIndex:3,textAlign:"center"}}),e.jsx(m,{className:"sticky-cell",sx:{position:"sticky",left:0,backgroundColor:"hsl(220, 20%, 88%)",zIndex:1,minWidth:200,borderRight:"1px solid",borderRightColor:"divider"},children:e.jsx(l,{children:e.jsx(i,{fontWeight:700,sx:{fontSize:"1rem"},noWrap:!0,children:"Totals"})})}),e.jsx(m,{align:"right",sx:{fontSize:"0.75rem"}}),e.jsx(m,{align:"right",sx:{fontSize:"0.75rem"}}),e.jsx(m,{align:"right",sx:{fontSize:"1.2rem",fontWeight:600,borderRight:"1px solid",borderRightColor:"divider"},children:y(s.opening_val)}),e.jsx(m,{align:"right",sx:{fontSize:"0.75rem",color:t.palette.text.secondary}}),e.jsx(m,{align:"right",sx:{fontSize:"0.75rem",color:t.palette.text.secondary}}),e.jsx(m,{align:"right",sx:{fontSize:"1.2rem",fontWeight:600,color:"text.primary",borderRight:"1px solid",borderRightColor:"divider"},children:y(s.inwards_val)}),e.jsx(m,{align:"right",sx:{fontSize:"0.75rem",color:t.palette.text.secondary}}),e.jsx(m,{align:"right",sx:{fontSize:"0.75rem",color:t.palette.text.secondary}}),e.jsx(m,{align:"right",sx:{fontSize:"1.2rem",fontWeight:600,color:"text.primary",borderRight:"1px solid",borderRightColor:"divider"},children:y(s.outwards_val)}),e.jsx(m,{align:"right",sx:{fontSize:"1rem",fontWeight:700,color:s.gross_profit>=0?"success.main":"error.main"},children:y(s.gross_profit)}),e.jsxs(m,{align:"right",sx:{fontSize:"1.2rem",fontWeight:600,color:s.profit_percent>=0?"success.main":"error.main",borderRight:"1px solid",borderRightColor:"divider"},children:[y(s.profit_percent),"%"]}),e.jsx(m,{align:"right",sx:{fontSize:"0.75rem",color:"text.primary"}}),e.jsx(m,{align:"right",sx:{fontSize:"0.75rem",color:"text.primary"}}),e.jsx(m,{align:"right",sx:{fontSize:"1.2rem",fontWeight:600,color:s.closing_val<0?"error.main":"success.main"},children:y(s.closing_val)})]})]})]})]})})}),e.jsx(l,{sx:{mt:2},children:e.jsx(Dt,{total:s.total,item:"items",page:s==null?void 0:s.page,metaPage:s.page,rowsPerPage:k,onChange:D})})]})})};function Zo(){const{id:t}=ja(),a=we(),n=Ke(),s=Fe(),{item:r,timeline:o}=Ce(W=>W.product),{currentCompany:p}=Ce(W=>W.auth),[c,x]=g.useState(0),[u,S]=g.useState(0),[f,v]=g.useState(!0),[j,T]=g.useState(!1),[k,B]=g.useState("basic"),[_,K]=g.useState(!1),[w,N]=g.useState(null),L=(()=>{if(!r)return{status:"Loading...",color:"info",severity:"info"};const W=(r==null?void 0:r.stock_status)??"";return W=="zero"||W==="negative"?{status:"Out of Stock",color:"error",severity:"error"}:W==="low"?{status:"Low Stock",color:"warning",severity:"warning"}:{status:"In Stock",color:"success",severity:"success"}})();g.useEffect(()=>{(async()=>{v(!0),s(Fn({product_id:t??"",company_id:(p==null?void 0:p._id)??""})).unwrap().then(()=>{v(!1)}).catch(C=>{Z.error(C||"An unexpected error occurred. Please try again later."),v(!1)}),s(Ln({product_id:t??"",company_id:(p==null?void 0:p._id)??""}))})()},[t,s,u,p==null?void 0:p._id]);const D=(W,C)=>{x(C)},P=g.useMemo(()=>{var W;return!o||!o.timeline?[]:(W=o==null?void 0:o.timeline)==null?void 0:W.map(C=>({date:C.date,action:C.voucher_type,details:C.voucher_type==="Purchase"?`Purchased ${C.quantity} units at ₹${C.rate} each`:`Sold ${C.quantity} units at ₹${C.rate} each`,user:C.party_name,type:C.voucher_type}))},[o]),A=()=>{K(!0)},O=()=>{T(!0)},y=()=>{navigator.clipboard.writeText(r._id),Z.success("Product ID copied to clipboard")},F=()=>{s(Qr({id:r._id,company_id:r.company_id})).unwrap().then(()=>{Z.success("Product deleted successfully."),T(!1),n("/products")}).catch(W=>{Z.error(W||"An unexpected error occurred. Please try again later.")})},h=W=>{switch(W){case"Purchase":return e.jsx(Ht,{});case"Sales":return e.jsx(pc,{});default:return e.jsx(mn,{})}},b=W=>{B(k===W?null:W)},M=g.useMemo(()=>{if(!r)return"0.00";const W=(r.purchase_qty||0)+(r.opening_balance||0),C=(r.opening_balance||0)*(r.opening_rate||0),$=(r.purchase_value||0)+C,G=W>0?$/W:r.avg_purchase_rate||r.opening_rate||0;return(r.sales_value?100*(r.avg_sale_rate-G||0)/(r.avg_sale_rate||1):0).toFixed(2)},[r]);return f?e.jsxs(Je,{maxWidth:!1,sx:{py:4},children:[e.jsx(pe,{variant:"rectangular",width:"100%",height:200,sx:{borderRadius:1,mb:3}}),e.jsxs(I,{container:!0,spacing:3,children:[e.jsx(I,{item:!0,xs:12,md:5,children:e.jsx(pe,{variant:"rectangular",width:"100%",height:500,sx:{borderRadius:2}})}),e.jsx(I,{item:!0,xs:12,md:7,children:e.jsx(pe,{variant:"rectangular",width:"100%",height:500,sx:{borderRadius:2}})})]})]}):e.jsxs(Je,{maxWidth:!1,sx:{py:3},children:[L.severity!=="success"&&e.jsx(ze,{in:!0,timeout:400,children:e.jsx(rt,{severity:L.severity,icon:e.jsx(oc,{}),sx:{mb:3,borderRadius:2},action:e.jsx(ee,{size:"small",onClick:A,children:"Update Stock"}),children:e.jsxs(i,{variant:"body2",children:[e.jsxs("strong",{children:[L.status,":"]})," Only"," ",r.current_stock," units remaining"]})})}),e.jsx(ze,{in:!0,timeout:500,children:e.jsx(Ne,{sx:{mb:3,p:2,boxShadow:"0 2px 4px rgba(0,0,0,0.05)",borderRadius:"8px"},children:e.jsx(Me,{children:e.jsxs(I,{container:!0,spacing:2,alignItems:"center",justifyContent:"space-between",children:[e.jsxs(I,{item:!0,xs:12,md:8,children:[e.jsx(l,{children:e.jsxs(l,{sx:{display:"flex",gap:2,alignItems:"center"},children:[e.jsx(zt,{icon:e.jsx(ma,{fontSize:"small"}),title:"Back",color:"primary",onClick:()=>n(-1)}),e.jsxs(l,{children:[e.jsx(i,{variant:"h5",component:"h1",fontWeight:"700",color:"text.primary",children:r.stock_item_name}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[e.jsx(ve,{icon:e.jsx(_s,{}),label:r.category||"Uncategorized",color:"primary",variant:"outlined",size:"small",sx:{px:1}}),e.jsx(ve,{icon:e.jsx(Ht,{}),label:r.unit,variant:"outlined",size:"small",sx:{px:1}}),e.jsx(ve,{label:L.status,color:L.color,size:"small",sx:{fontWeight:600,px:1}})]})]})]})}),e.jsxs(Wr,{value:c,onChange:D,"aria-label":"dashboard tabs",sx:{mt:1},children:[e.jsx(dt,{label:"Activity History",icon:e.jsx(mn,{}),iconPosition:"start"}),e.jsx(dt,{label:"Product Details",icon:e.jsx(ys,{}),iconPosition:"start"})]})]}),e.jsxs(l,{sx:{display:"flex",gap:2},children:[e.jsxs(l,{sx:{textAlign:"center",border:`1px solid ${a.palette.divider}`,px:2,py:.5,borderRadius:1,backgroundColor:a.palette.primary.light},children:[e.jsx(i,{variant:"body2",color:"text.secondary",children:"Avg. Selling Rate"}),e.jsx(i,{variant:"body1",sx:{fontWeight:700,color:"success.main"},children:r.sales_qty>0?e.jsxs(e.Fragment,{children:["₹ ",r.avg_sale_rate]}):"No Sale Yet"})]}),e.jsxs(l,{sx:{textAlign:"center",border:`1px solid ${a.palette.divider}`,px:2,py:.5,borderRadius:1,backgroundColor:a.palette.secondary.light},children:[e.jsx(i,{variant:"body2",color:"text.secondary",children:"Avg. Purchase Rate"}),e.jsx(i,{variant:"body1",sx:{fontWeight:700},children:r.purchase_qty>0?e.jsxs(e.Fragment,{children:["₹ ",r.avg_purchase_rate]}):"Not Purchased"})]})]})]})})})}),e.jsxs(I,{container:!0,spacing:3,children:[e.jsx(I,{item:!0,xs:12,md:5,children:e.jsx(ze,{in:!0,timeout:700,children:e.jsxs(Ne,{elevation:0,sx:{height:"100%",borderRadius:1,border:`1px solid ${a.palette.divider}`},children:[e.jsxs(l,{sx:{height:280,background:`linear-gradient(135deg, ${a.palette.primary.light}20, ${a.palette.secondary.light}20)`,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",borderRadius:"12px 12px 0 0",overflow:"hidden",minHeight:200,maxHeight:250,width:"100%",boxSizing:"border-box"},children:[e.jsx(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",zIndex:1},children:r!=null&&r.image?e.jsx(l,{sx:{width:"100%",maxHeight:250,height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("img",{src:typeof(r==null?void 0:r.image)=="string"?r.image:void 0,alt:r.stock_item_name,style:{width:"100%",height:"100%",objectFit:"contain",borderRadius:"12px 12px 0 0"}})}):e.jsx($e,{src:typeof(r==null?void 0:r.image)=="string"&&r.image?r.image:void 0,sx:{width:100,height:100,bgcolor:Gt(r.stock_item_name),fontSize:"2rem",fontWeight:700,boxShadow:`0 4px 12px ${d(Gt(r.stock_item_name),.3)}`,mr:2},children:ha(r.stock_item_name)})}),e.jsx(Ka,{badgeContent:`${r.current_stock} units`,color:L.color,sx:{position:"absolute",top:16,right:20,zIndex:2,"& .MuiBadge-badge":{fontSize:"0.75rem",px:2,py:2,borderRadius:"10px",boxShadow:a.shadows[2]}}})]}),e.jsx(Me,{sx:{p:3},children:e.jsxs(I,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(I,{item:!0,xs:6,children:e.jsxs(ne,{elevation:0,sx:{p:2,textAlign:"center",bgcolor:"background.default",borderRadius:1},children:[e.jsx(cn,{color:"success",sx:{mb:1}}),e.jsx(i,{variant:"h6",color:"success.main",children:r.sales_qty>0?e.jsxs(e.Fragment,{children:["₹"," ",M," %"]}):"No Sale yet"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Profit Margin"})]})}),e.jsx(I,{item:!0,xs:6,children:e.jsxs(ne,{elevation:0,sx:{p:2,textAlign:"center",bgcolor:"background.default",borderRadius:1},children:[e.jsx(sc,{color:"primary",sx:{mb:1}}),e.jsx(i,{variant:"h6",color:"primary.main",children:r.purchase_qty>0?e.jsxs(e.Fragment,{children:[" ₹ ",((r.current_stock??0)*(r.avg_purchase_rate??1)).toFixed(2)]}):"No Purchase Yet"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Stock Value"})]})})]})}),e.jsx(lc,{sx:{p:3,pt:0},children:e.jsxs(I,{container:!0,spacing:2,children:[e.jsx(I,{item:!0,xs:6,children:e.jsx(ee,{variant:"contained",fullWidth:!0,startIcon:e.jsx(Rr,{}),onClick:async()=>{K(!0),await s(Sr({product_id:r._id,company_id:(p==null?void 0:p._id)||""})).unwrap().then(W=>{N(W.product),Z.success("Product details fetched successfully!"),K(!0)}).catch(W=>{K(!1),N(null),console.error("Error fetching product details:",W),Z.error(W||"Failed to fetch product details")})},sx:{borderRadius:1,py:1.5,textTransform:"none",fontWeight:600,boxShadow:a.shadows[4],"&:hover":{boxShadow:a.shadows[8],transform:"translateY(-2px)"}},children:"Edit Product"})}),e.jsx(I,{item:!0,xs:6,children:e.jsx(ee,{variant:"outlined",color:"error",fullWidth:!0,startIcon:e.jsx(mt,{}),onClick:O,sx:{borderRadius:1,py:1.5,textTransform:"none",fontWeight:600,"&:hover":{transform:"translateY(-2px)"}},children:"Delete"})})]})})]})})}),e.jsxs(I,{item:!0,xs:12,md:7,children:[c===0&&e.jsx(ze,{in:!0,timeout:900,children:e.jsx(Ne,{elevation:0,sx:{borderRadius:1,border:`1px solid ${a.palette.divider}`,height:"100%"},children:e.jsxs(Me,{sx:{p:3},children:[e.jsxs(i,{variant:"h6",color:"primary.main",sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(dc,{sx:{mr:1}})," Activity Timeline"]}),e.jsx(xa,{sx:{p:0},children:P.length>0&&(P==null?void 0:P.map((W,C)=>e.jsx(ze,{in:!0,style:{transitionDelay:`${C*150}ms`},children:e.jsx(Kt,{sx:{p:0,mb:2,borderRadius:1},children:e.jsx(ne,{elevation:0,sx:{width:"100%",p:2,border:`1px solid ${a.palette.divider}`,borderRadius:1,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",left:0,top:0,bottom:0,width:4,bgcolor:W.type==="Purchase"?"success.main":"warning.main"},"&:hover":{bgcolor:"background.default",boxShadow:a.shadows[4]}},children:e.jsxs(l,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[e.jsx($e,{sx:{width:40,height:40,bgcolor:W.type==="Purchase"?"success.light":"warning.light"},children:h(W.type)}),e.jsxs(l,{sx:{flex:1},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[e.jsx(i,{variant:"subtitle1",fontWeight:600,color:"text.primary",children:W.action}),e.jsx(ve,{label:Nt(W.date),size:"small",variant:"outlined",sx:{ml:1}})]}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:1},children:W.details}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx($e,{sx:{width:24,height:24,fontSize:"0.75rem"},children:ha(W.user)}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:[W.type==="Purchase"?"Purchased from":"Sold to"," ",W.user]})]})]})]})})})},C)))}),P.length===0&&e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",py:6,color:"text.secondary"},children:[e.jsx(mn,{sx:{fontSize:64,mb:2,opacity:.5}}),e.jsx(i,{variant:"body2",children:"Product activities will appear here once actions are performed."})]})]})})}),c===1&&e.jsx(ze,{in:!0,timeout:900,children:e.jsx(Ne,{elevation:0,sx:{borderRadius:1,border:`1px solid ${a.palette.divider}`,height:"100%"},children:e.jsxs(Me,{sx:{p:3},children:[e.jsxs(i,{variant:"h6",color:"primary.main",sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(cc,{sx:{mr:1}})," Product Information"]}),e.jsxs(J,{spacing:2,children:[e.jsxs(ne,{elevation:0,sx:{border:`1px solid ${a.palette.divider}`,borderRadius:1,overflow:"hidden"},children:[e.jsxs(l,{sx:{p:2,bgcolor:"background.default",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},onClick:()=>b("basic"),children:[e.jsx(i,{variant:"subtitle1",fontWeight:600,children:"Basic Information"}),k==="basic"?e.jsx(wn,{}):e.jsx(qr,{})]}),e.jsx(Xt,{in:k==="basic",children:e.jsx(l,{sx:{p:2},children:e.jsxs(I,{container:!0,spacing:2,children:[e.jsxs(I,{item:!0,xs:12,sm:6,children:[e.jsx(i,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Category"}),e.jsx(i,{variant:"body1",fontWeight:500,children:r.category||"Not specified"})]}),e.jsxs(I,{item:!0,xs:12,sm:6,children:[e.jsx(i,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Unit"}),e.jsx(i,{variant:"body1",fontWeight:500,children:r.unit||"Not specified"})]}),e.jsxs(I,{item:!0,xs:12,sm:6,children:[e.jsx(i,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"HSN Code"}),e.jsx(i,{variant:"body1",fontWeight:500,children:r.hsn_code||"Not specified"})]}),e.jsxs(I,{item:!0,xs:12,sm:6,children:[e.jsx(i,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Taxability"}),e.jsx(i,{variant:"body1",fontWeight:500,children:r.taxability||"Not specified"})]})]})})})]}),e.jsxs(ne,{elevation:0,sx:{border:`1px solid ${a.palette.divider}`,borderRadius:1,overflow:"hidden"},children:[e.jsxs(l,{sx:{p:2,bgcolor:"background.default",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},onClick:()=>b("pricing"),children:[e.jsx(i,{variant:"subtitle1",fontWeight:600,children:"Pricing & Inventory"}),k==="pricing"?e.jsx(wn,{}):e.jsx(qr,{})]}),e.jsx(Xt,{in:k==="pricing",children:e.jsx(l,{sx:{p:2},children:e.jsxs(I,{container:!0,spacing:2,children:[e.jsxs(I,{item:!0,xs:12,sm:6,children:[e.jsx(i,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Purchase Price"}),e.jsx(i,{variant:"body1",fontWeight:700,color:"text.primary",children:r.purchase_qty>0?e.jsxs(e.Fragment,{children:["₹ ",r.purchase_value]}):"No Purchase Yet"})]}),e.jsxs(I,{item:!0,xs:12,sm:6,children:[e.jsx(i,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Selling Price"}),e.jsx(i,{variant:"body1",fontWeight:700,color:"success.main",children:r.purchase_qty>0?e.jsxs(e.Fragment,{children:[" ₹ ",r.sales_value]}):"No Sale Yet"})]}),e.jsxs(I,{item:!0,xs:12,sm:6,children:[e.jsx(i,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Current Stock"}),e.jsxs(i,{variant:"body1",fontWeight:500,children:[r.current_stock," units"]}),e.jsx(St,{variant:"determinate",value:Math.min(((r==null?void 0:r.current_stock)??1)/((r==null?void 0:r.low_stock_alert)??0)*100,100),color:L.color,sx:{mt:1,borderRadius:1}})]}),e.jsxs(I,{item:!0,xs:12,sm:6,children:[e.jsx(i,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Low Stock Alert"}),e.jsxs(i,{variant:"body1",fontWeight:500,children:[r.low_stock_alert??5," units"]})]})]})})})]}),e.jsxs(ne,{elevation:0,sx:{border:`1px solid ${a.palette.divider}`,borderRadius:1,overflow:"hidden"},children:[e.jsxs(l,{sx:{p:2,bgcolor:"background.default",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},onClick:()=>b("description"),children:[e.jsx(i,{variant:"subtitle1",fontWeight:600,children:"Description & Details"}),k==="description"?e.jsx(wn,{}):e.jsx(qr,{})]}),e.jsx(Xt,{in:k==="description",children:e.jsxs(l,{sx:{p:2},children:[e.jsx(i,{variant:"body1",sx:{mb:2},children:r.description||"No description available"}),e.jsxs(l,{sx:{mt:2},children:[e.jsx(i,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Product ID"}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",bgcolor:"background.default",p:1,borderRadius:1,border:`1px solid ${a.palette.divider}`},children:[e.jsx(i,{variant:"body2",sx:{fontFamily:"monospace",flex:1,mr:1},children:r._id}),e.jsx(le,{title:"Copy ID",children:e.jsx(ke,{size:"small",onClick:y,children:e.jsx(uc,{fontSize:"small"})})})]})]})]})})]})]})]})})})]})]}),e.jsxs(Pa,{open:j,onClose:()=>T(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:1,p:1}},children:[e.jsx(ba,{sx:{pb:1},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx($e,{sx:{bgcolor:"error.main"},children:e.jsx(mt,{})}),e.jsxs(l,{children:[e.jsx(i,{variant:"h6",children:"Delete Product"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:r.stock_item_name})]})]})}),e.jsxs(fa,{children:[e.jsx(rt,{severity:"warning",sx:{mb:2,borderRadius:2},children:"This action cannot be undone. All product item will be permanently deleted."}),e.jsx(i,{variant:"body1",gutterBottom:!0,children:"Are you sure you want to delete this product? This will remove:"}),e.jsxs(xa,{dense:!0,sx:{ml:2},children:[e.jsxs(Kt,{sx:{py:0},children:[e.jsx(vt,{sx:{minWidth:32},children:e.jsx(xc,{fontSize:"small"})}),e.jsx(tt,{primary:"Product information and details"})]}),e.jsxs(Kt,{sx:{py:0},children:[e.jsx(vt,{sx:{minWidth:32},children:e.jsx(Ht,{fontSize:"small"})}),e.jsx(tt,{primary:"Current stock and inventory item"})]}),e.jsxs(Kt,{sx:{py:0},children:[e.jsx(vt,{sx:{minWidth:32},children:e.jsx(mn,{fontSize:"small"})}),e.jsx(tt,{primary:"Activity history and records"})]})]})]}),e.jsxs(Ma,{sx:{p:3,pt:1},children:[e.jsx(ee,{onClick:()=>T(!1),variant:"outlined",sx:{borderRadius:1,textTransform:"none"},children:"Cancel"}),e.jsx(ee,{onClick:F,color:"error",variant:"contained",sx:{borderRadius:1,textTransform:"none"},startIcon:e.jsx(mt,{}),children:"Delete Product"})]})]}),e.jsx(vo,{drawer:_,setDrawer:K,setRefreshKey:S,product:w,setSelectedProduct:N})]})}const Xr=JSON.parse(`[{"name":"Afghanistan","dial_code":"+93","code":"AF"},{"name":"Aland Islands","dial_code":"+358","code":"AX"},{"name":"Albania","dial_code":"+355","code":"AL"},{"name":"Algeria","dial_code":"+213","code":"DZ"},{"name":"AmericanSamoa","dial_code":"+1684","code":"AS"},{"name":"Andorra","dial_code":"+376","code":"AD"},{"name":"Angola","dial_code":"+244","code":"AO"},{"name":"Anguilla","dial_code":"+1264","code":"AI"},{"name":"Antarctica","dial_code":"+672","code":"AQ"},{"name":"Antigua and Barbuda","dial_code":"+1268","code":"AG"},{"name":"Argentina","dial_code":"+54","code":"AR"},{"name":"Armenia","dial_code":"+374","code":"AM"},{"name":"Aruba","dial_code":"+297","code":"AW"},{"name":"Australia","dial_code":"+61","code":"AU"},{"name":"Austria","dial_code":"+43","code":"AT"},{"name":"Azerbaijan","dial_code":"+994","code":"AZ"},{"name":"Bahamas","dial_code":"+1242","code":"BS"},{"name":"Bahrain","dial_code":"+973","code":"BH"},{"name":"Bangladesh","dial_code":"+880","code":"BD"},{"name":"Barbados","dial_code":"+1246","code":"BB"},{"name":"Belarus","dial_code":"+375","code":"BY"},{"name":"Belgium","dial_code":"+32","code":"BE"},{"name":"Belize","dial_code":"+501","code":"BZ"},{"name":"Benin","dial_code":"+229","code":"BJ"},{"name":"Bermuda","dial_code":"+1441","code":"BM"},{"name":"Bhutan","dial_code":"+975","code":"BT"},{"name":"Bolivia, Plurinational State of","dial_code":"+591","code":"BO"},{"name":"Bosnia and Herzegovina","dial_code":"+387","code":"BA"},{"name":"Botswana","dial_code":"+267","code":"BW"},{"name":"Brazil","dial_code":"+55","code":"BR"},{"name":"British Indian Ocean Territory","dial_code":"+246","code":"IO"},{"name":"Brunei Darussalam","dial_code":"+673","code":"BN"},{"name":"Bulgaria","dial_code":"+359","code":"BG"},{"name":"Burkina Faso","dial_code":"+226","code":"BF"},{"name":"Burundi","dial_code":"+257","code":"BI"},{"name":"Cambodia","dial_code":"+855","code":"KH"},{"name":"Cameroon","dial_code":"+237","code":"CM"},{"name":"Canada","dial_code":"+1","code":"CA"},{"name":"Cape Verde","dial_code":"+238","code":"CV"},{"name":"Cayman Islands","dial_code":"+ 345","code":"KY"},{"name":"Central African Republic","dial_code":"+236","code":"CF"},{"name":"Chad","dial_code":"+235","code":"TD"},{"name":"Chile","dial_code":"+56","code":"CL"},{"name":"China","dial_code":"+86","code":"CN"},{"name":"Christmas Island","dial_code":"+61","code":"CX"},{"name":"Cocos (Keeling) Islands","dial_code":"+61","code":"CC"},{"name":"Colombia","dial_code":"+57","code":"CO"},{"name":"Comoros","dial_code":"+269","code":"KM"},{"name":"Congo","dial_code":"+242","code":"CG"},{"name":"Congo, The Democratic Republic of the Congo","dial_code":"+243","code":"CD"},{"name":"Cook Islands","dial_code":"+682","code":"CK"},{"name":"Costa Rica","dial_code":"+506","code":"CR"},{"name":"Cote d'Ivoire","dial_code":"+225","code":"CI"},{"name":"Croatia","dial_code":"+385","code":"HR"},{"name":"Cuba","dial_code":"+53","code":"CU"},{"name":"Cyprus","dial_code":"+357","code":"CY"},{"name":"Czech Republic","dial_code":"+420","code":"CZ"},{"name":"Denmark","dial_code":"+45","code":"DK"},{"name":"Djibouti","dial_code":"+253","code":"DJ"},{"name":"Dominica","dial_code":"+1767","code":"DM"},{"name":"Dominican Republic","dial_code":"+1849","code":"DO"},{"name":"Ecuador","dial_code":"+593","code":"EC"},{"name":"Egypt","dial_code":"+20","code":"EG"},{"name":"El Salvador","dial_code":"+503","code":"SV"},{"name":"Equatorial Guinea","dial_code":"+240","code":"GQ"},{"name":"Eritrea","dial_code":"+291","code":"ER"},{"name":"Estonia","dial_code":"+372","code":"EE"},{"name":"Ethiopia","dial_code":"+251","code":"ET"},{"name":"Falkland Islands (Malvinas)","dial_code":"+500","code":"FK"},{"name":"Faroe Islands","dial_code":"+298","code":"FO"},{"name":"Fiji","dial_code":"+679","code":"FJ"},{"name":"Finland","dial_code":"+358","code":"FI"},{"name":"France","dial_code":"+33","code":"FR"},{"name":"French Guiana","dial_code":"+594","code":"GF"},{"name":"French Polynesia","dial_code":"+689","code":"PF"},{"name":"Gabon","dial_code":"+241","code":"GA"},{"name":"Gambia","dial_code":"+220","code":"GM"},{"name":"Georgia","dial_code":"+995","code":"GE"},{"name":"Germany","dial_code":"+49","code":"DE"},{"name":"Ghana","dial_code":"+233","code":"GH"},{"name":"Gibraltar","dial_code":"+350","code":"GI"},{"name":"Greece","dial_code":"+30","code":"GR"},{"name":"Greenland","dial_code":"+299","code":"GL"},{"name":"Grenada","dial_code":"+1473","code":"GD"},{"name":"Guadeloupe","dial_code":"+590","code":"GP"},{"name":"Guam","dial_code":"+1671","code":"GU"},{"name":"Guatemala","dial_code":"+502","code":"GT"},{"name":"Guernsey","dial_code":"+44","code":"GG"},{"name":"Guinea","dial_code":"+224","code":"GN"},{"name":"Guinea-Bissau","dial_code":"+245","code":"GW"},{"name":"Guyana","dial_code":"+595","code":"GY"},{"name":"Haiti","dial_code":"+509","code":"HT"},{"name":"Holy See (Vatican City State)","dial_code":"+379","code":"VA"},{"name":"Honduras","dial_code":"+504","code":"HN"},{"name":"Hong Kong","dial_code":"+852","code":"HK"},{"name":"Hungary","dial_code":"+36","code":"HU"},{"name":"Iceland","dial_code":"+354","code":"IS"},{"name":"India","dial_code":"+91","code":"IN"},{"name":"Indonesia","dial_code":"+62","code":"ID"},{"name":"Iran, Islamic Republic of Persian Gulf","dial_code":"+98","code":"IR"},{"name":"Iraq","dial_code":"+964","code":"IQ"},{"name":"Ireland","dial_code":"+353","code":"IE"},{"name":"Isle of Man","dial_code":"+44","code":"IM"},{"name":"Israel","dial_code":"+972","code":"IL"},{"name":"Italy","dial_code":"+39","code":"IT"},{"name":"Jamaica","dial_code":"+1876","code":"JM"},{"name":"Japan","dial_code":"+81","code":"JP"},{"name":"Jersey","dial_code":"+44","code":"JE"},{"name":"Jordan","dial_code":"+962","code":"JO"},{"name":"Kazakhstan","dial_code":"+77","code":"KZ"},{"name":"Kenya","dial_code":"+254","code":"KE"},{"name":"Kiribati","dial_code":"+686","code":"KI"},{"name":"Korea, Democratic People's Republic of Korea","dial_code":"+850","code":"KP"},{"name":"Korea, Republic of South Korea","dial_code":"+82","code":"KR"},{"name":"Kuwait","dial_code":"+965","code":"KW"},{"name":"Kyrgyzstan","dial_code":"+996","code":"KG"},{"name":"Laos","dial_code":"+856","code":"LA"},{"name":"Latvia","dial_code":"+371","code":"LV"},{"name":"Lebanon","dial_code":"+961","code":"LB"},{"name":"Lesotho","dial_code":"+266","code":"LS"},{"name":"Liberia","dial_code":"+231","code":"LR"},{"name":"Libyan Arab Jamahiriya","dial_code":"+218","code":"LY"},{"name":"Liechtenstein","dial_code":"+423","code":"LI"},{"name":"Lithuania","dial_code":"+370","code":"LT"},{"name":"Luxembourg","dial_code":"+352","code":"LU"},{"name":"Macao","dial_code":"+853","code":"MO"},{"name":"Macedonia","dial_code":"+389","code":"MK"},{"name":"Madagascar","dial_code":"+261","code":"MG"},{"name":"Malawi","dial_code":"+265","code":"MW"},{"name":"Malaysia","dial_code":"+60","code":"MY"},{"name":"Maldives","dial_code":"+960","code":"MV"},{"name":"Mali","dial_code":"+223","code":"ML"},{"name":"Malta","dial_code":"+356","code":"MT"},{"name":"Marshall Islands","dial_code":"+692","code":"MH"},{"name":"Martinique","dial_code":"+596","code":"MQ"},{"name":"Mauritania","dial_code":"+222","code":"MR"},{"name":"Mauritius","dial_code":"+230","code":"MU"},{"name":"Mayotte","dial_code":"+262","code":"YT"},{"name":"Mexico","dial_code":"+52","code":"MX"},{"name":"Micronesia, Federated States of Micronesia","dial_code":"+691","code":"FM"},{"name":"Moldova","dial_code":"+373","code":"MD"},{"name":"Monaco","dial_code":"+377","code":"MC"},{"name":"Mongolia","dial_code":"+976","code":"MN"},{"name":"Montenegro","dial_code":"+382","code":"ME"},{"name":"Montserrat","dial_code":"+1664","code":"MS"},{"name":"Morocco","dial_code":"+212","code":"MA"},{"name":"Mozambique","dial_code":"+258","code":"MZ"},{"name":"Myanmar","dial_code":"+95","code":"MM"},{"name":"Namibia","dial_code":"+264","code":"NA"},{"name":"Nauru","dial_code":"+674","code":"NR"},{"name":"Nepal","dial_code":"+977","code":"NP"},{"name":"Netherlands","dial_code":"+31","code":"NL"},{"name":"Netherlands Antilles","dial_code":"+599","code":"AN"},{"name":"New Caledonia","dial_code":"+687","code":"NC"},{"name":"New Zealand","dial_code":"+64","code":"NZ"},{"name":"Nicaragua","dial_code":"+505","code":"NI"},{"name":"Niger","dial_code":"+227","code":"NE"},{"name":"Nigeria","dial_code":"+234","code":"NG"},{"name":"Niue","dial_code":"+683","code":"NU"},{"name":"Norfolk Island","dial_code":"+672","code":"NF"},{"name":"Northern Mariana Islands","dial_code":"+1670","code":"MP"},{"name":"Norway","dial_code":"+47","code":"NO"},{"name":"Oman","dial_code":"+968","code":"OM"},{"name":"Pakistan","dial_code":"+92","code":"PK"},{"name":"Palau","dial_code":"+680","code":"PW"},{"name":"Palestinian Territory, Occupied","dial_code":"+970","code":"PS"},{"name":"Panama","dial_code":"+507","code":"PA"},{"name":"Papua New Guinea","dial_code":"+675","code":"PG"},{"name":"Paraguay","dial_code":"+595","code":"PY"},{"name":"Peru","dial_code":"+51","code":"PE"},{"name":"Philippines","dial_code":"+63","code":"PH"},{"name":"Pitcairn","dial_code":"+872","code":"PN"},{"name":"Poland","dial_code":"+48","code":"PL"},{"name":"Portugal","dial_code":"+351","code":"PT"},{"name":"Puerto Rico","dial_code":"+1939","code":"PR"},{"name":"Qatar","dial_code":"+974","code":"QA"},{"name":"Romania","dial_code":"+40","code":"RO"},{"name":"Russia","dial_code":"+7","code":"RU"},{"name":"Rwanda","dial_code":"+250","code":"RW"},{"name":"Reunion","dial_code":"+262","code":"RE"},{"name":"Saint Barthelemy","dial_code":"+590","code":"BL"},{"name":"Saint Helena, Ascension and Tristan Da Cunha","dial_code":"+290","code":"SH"},{"name":"Saint Kitts and Nevis","dial_code":"+1869","code":"KN"},{"name":"Saint Lucia","dial_code":"+1758","code":"LC"},{"name":"Saint Martin","dial_code":"+590","code":"MF"},{"name":"Saint Pierre and Miquelon","dial_code":"+508","code":"PM"},{"name":"Saint Vincent and the Grenadines","dial_code":"+1784","code":"VC"},{"name":"Samoa","dial_code":"+685","code":"WS"},{"name":"San Marino","dial_code":"+378","code":"SM"},{"name":"Sao Tome and Principe","dial_code":"+239","code":"ST"},{"name":"Saudi Arabia","dial_code":"+966","code":"SA"},{"name":"Senegal","dial_code":"+221","code":"SN"},{"name":"Serbia","dial_code":"+381","code":"RS"},{"name":"Seychelles","dial_code":"+248","code":"SC"},{"name":"Sierra Leone","dial_code":"+232","code":"SL"},{"name":"Singapore","dial_code":"+65","code":"SG"},{"name":"Slovakia","dial_code":"+421","code":"SK"},{"name":"Slovenia","dial_code":"+386","code":"SI"},{"name":"Solomon Islands","dial_code":"+677","code":"SB"},{"name":"Somalia","dial_code":"+252","code":"SO"},{"name":"South Africa","dial_code":"+27","code":"ZA"},{"name":"South Sudan","dial_code":"+211","code":"SS"},{"name":"South Georgia and the South Sandwich Islands","dial_code":"+500","code":"GS"},{"name":"Spain","dial_code":"+34","code":"ES"},{"name":"Sri Lanka","dial_code":"+94","code":"LK"},{"name":"Sudan","dial_code":"+249","code":"SD"},{"name":"Suriname","dial_code":"+597","code":"SR"},{"name":"Svalbard and Jan Mayen","dial_code":"+47","code":"SJ"},{"name":"Swaziland","dial_code":"+268","code":"SZ"},{"name":"Sweden","dial_code":"+46","code":"SE"},{"name":"Switzerland","dial_code":"+41","code":"CH"},{"name":"Syrian Arab Republic","dial_code":"+963","code":"SY"},{"name":"Taiwan","dial_code":"+886","code":"TW"},{"name":"Tajikistan","dial_code":"+992","code":"TJ"},{"name":"Tanzania, United Republic of Tanzania","dial_code":"+255","code":"TZ"},{"name":"Thailand","dial_code":"+66","code":"TH"},{"name":"Timor-Leste","dial_code":"+670","code":"TL"},{"name":"Togo","dial_code":"+228","code":"TG"},{"name":"Tokelau","dial_code":"+690","code":"TK"},{"name":"Tonga","dial_code":"+676","code":"TO"},{"name":"Trinidad and Tobago","dial_code":"+1868","code":"TT"},{"name":"Tunisia","dial_code":"+216","code":"TN"},{"name":"Turkey","dial_code":"+90","code":"TR"},{"name":"Turkmenistan","dial_code":"+993","code":"TM"},{"name":"Turks and Caicos Islands","dial_code":"+1649","code":"TC"},{"name":"Tuvalu","dial_code":"+688","code":"TV"},{"name":"Uganda","dial_code":"+256","code":"UG"},{"name":"Ukraine","dial_code":"+380","code":"UA"},{"name":"United Arab Emirates","dial_code":"+971","code":"AE"},{"name":"United Kingdom","dial_code":"+44","code":"GB"},{"name":"United States","dial_code":"+1","code":"US"},{"name":"Uruguay","dial_code":"+598","code":"UY"},{"name":"Uzbekistan","dial_code":"+998","code":"UZ"},{"name":"Vanuatu","dial_code":"+678","code":"VU"},{"name":"Venezuela, Bolivarian Republic of Venezuela","dial_code":"+58","code":"VE"},{"name":"Vietnam","dial_code":"+84","code":"VN"},{"name":"Virgin Islands, British","dial_code":"+1284","code":"VG"},{"name":"Virgin Islands, U.S.","dial_code":"+1340","code":"VI"},{"name":"Wallis and Futuna","dial_code":"+681","code":"WF"},{"name":"Yemen","dial_code":"+967","code":"YE"},{"name":"Zambia","dial_code":"+260","code":"ZM"},{"name":"Zimbabwe","dial_code":"+263","code":"ZW"}]`),pl=({code:t,size:a="medium",codeWidth:n="20%",numberWidth:s="80%",codeIcon:r,codeLabel:o,codePlaceholder:p,numberLabel:c,numberPlaceholder:x,numberIcon:u,number:S,required:f=!1,gap:v=2,codeHandler:j,numberHandler:T,codeHelperText:k="",numberHelperText:B="",codeError:_=!1,numberError:K=!1})=>e.jsxs(l,{sx:{display:"flex",gap:v},children:[e.jsx(l,{sx:{width:n},children:e.jsx(at,{fullWidth:!0,options:[...(Xr==null?void 0:Xr.map(w=>({label:`${w.dial_code} (${w.code})`,value:w.dial_code})))??[]],freeSolo:!0,renderOption:(w,N)=>{const{key:R,...L}=w;return e.jsx("li",{...L,style:{fontWeight:400,color:"inherit",...w.style||{}},children:N.label},R)},renderInput:w=>e.jsx(X,{...w,fullWidth:!0,required:f,id:"code",size:a,label:o,name:"code",placeholder:p,error:_,helperText:k,InputProps:{...w.InputProps,startAdornment:r&&e.jsx(se,{position:"start",children:r})},margin:"normal"}),value:t,onChange:(w,N)=>{j("code",typeof N=="string"?N:(N==null?void 0:N.value)||"")},componentsProps:{paper:{sx:{border:"1px solid #000",borderRadius:1,width:"150px"}}},sx:{"& .MuiAutocomplete-endAdornment":{display:"none"},"& .MuiOutlinedInput-root":{borderRadius:1,width:"100%"}}})}),e.jsx(X,{required:f,margin:"normal",fullWidth:!0,sx:{width:s,"& .MuiOutlinedInput-root":{borderRadius:1}},id:"number",label:c,size:a,name:"number",autoComplete:"number",onChange:T,value:S,error:K,helperText:B,autoFocus:!0,placeholder:x,InputProps:{startAdornment:u&&e.jsx(se,{position:"start",children:u})}})]}),dx=()=>{const t=Ke(),a=we(),n=Fe(),[s,r]=g.useState({}),[o,p]=g.useState(!1),[c,x]=Ft.useState(!1),[u,S]=g.useState(!1),[f,v]=g.useState({score:0,feedback:[],color:"error"}),[j,T]=g.useState({first:"",last:"",email:"",code:"",number:"",password:""}),k=D=>{let P=0;const A=[];D.length>=8?P+=1:A.push("At least 8 characters"),/[A-Z]/.test(D)?P+=1:A.push("One uppercase letter"),/[a-z]/.test(D)?P+=1:A.push("One lowercase letter"),/\d/.test(D)?P+=1:A.push("One number"),/[!@#$%^&*(),.?":{}|<>]/.test(D)?P+=1:A.push("One special character");let O="error";return P>=4?O="success":P>=3?O="info":P>=2&&(O="warning"),{score:P,feedback:A,color:O}},B=g.useCallback(()=>{const D={};return Object.keys(j).forEach(P=>{const A=P,O=N(A,String(j[A]||""));O&&(D[A]=O)}),r(D),Object.keys(D).length===0},[j]);function _(D){const{name:P,value:A}=D.target;T(O=>({...O,[P]:A})),P==="password"&&v(k(A)),s[P]&&r(O=>({...O,[P]:""})),setTimeout(()=>{p(B())},0)}const K=()=>{x(!c)};function w(D,P){T(A=>({...A,[D]:P})),s[D]&&r(A=>({...A,[D]:""})),setTimeout(()=>{p(B())},0)}const N=(D,P)=>D==="first"&&!P.trim()?"First name is required":D==="email"&&!P.trim()?"Email is required":D==="email"&&!/\S+@\S+\.\S+/.test(P)?"Please enter a valid email":D==="code"&&!P.trim()?"Country code is required":D==="number"&&!P.trim()?"Phone number is required":D==="number"&&P.length<10?"Phone number must be at least 10 digits":D==="password"&&!P.trim()?"Password is required":D==="password"&&P.length<8?"Password must be at least 8 characters":"",R=async D=>{if(D.preventDefault(),!B()){Z.error("Please fix the validation errors before submitting.");return}S(!0);const P={name:{first:j.first,last:j.last},email:j.email,phone:{code:j.code,number:j.number},password:j.password};try{await Z.promise(n(kn(P)).unwrap().then(()=>{t("/login")}),{loading:"Creating your account...",success:e.jsx("b",{children:"Account created successfully! 🎉"}),error:e.jsx("b",{children:"Could not create account. Please try again."})})}finally{S(!1)}},L=(D,P,A)=>A?P?e.jsx(le,{title:`Clear ${D} field`,children:e.jsx(ct,{onClick:()=>T(O=>({...O,[D]:""})),sx:{color:a.palette.error.main,fontSize:20,cursor:"pointer",":hover":{opacity:.8,transition:"opacity 0.2s ease-in-out"}}})}):e.jsx(da,{sx:{color:a.palette.success.main,fontSize:20}}):null;return e.jsx(I,{item:!0,lg:12,sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:{xs:2,sm:4},minHeight:"100vh",width:"100%"},children:e.jsx(Je,{component:"main",maxWidth:!1,sx:{width:{sm:"400px",xs:"100%",md:"550px",lg:"700px"}},children:e.jsx(ze,{in:!0,timeout:800,children:e.jsxs(ne,{elevation:0,sx:{padding:{xs:3,sm:4,md:5},borderRadius:3,border:`1px solid ${a.palette.divider}`,background:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)"},children:[e.jsxs(l,{sx:{display:"flex",width:"100%",mb:2,gap:2,alignItems:"center",justifyContent:"center"},children:[e.jsx("img",{src:Ya,alt:"Logo",style:{height:"40px",borderRadius:"8px"}}),e.jsx("img",{src:zr,alt:"Logo Text",style:{height:"32px"}})]}),e.jsxs(l,{sx:{mb:3,width:"100%",textAlign:"center"},children:[e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:e.jsx(po,{color:"primary",sx:{fontSize:40,mr:1}})}),e.jsx(i,{component:"h1",variant:"h4",sx:{fontWeight:700,background:`linear-gradient(135deg, ${a.palette.primary.main}, ${a.palette.primary.dark})`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Create Account"}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{fontSize:"1.1rem",lineHeight:1.6},children:"Join us today and start your journey to financial protection"})]}),e.jsxs(l,{component:"form",onSubmit:R,sx:{width:"100%"},children:[e.jsxs(J,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mb:2},children:[e.jsx(X,{required:!0,fullWidth:!0,id:"first",label:"First Name",name:"first",placeholder:"Enter your first name",onChange:_,value:j.first,error:!!s.first,helperText:s.first,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(At,{sx:{color:"action.active"}})}),endAdornment:j.first&&e.jsx(se,{position:"end",children:L("first",!!s.first,!!j.first)})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.3s ease","&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:a.palette.primary.main}},"&.Mui-focused":{boxShadow:`0 0 0 3px ${a.palette.primary.main}20`}}}}),e.jsx(X,{fullWidth:!0,id:"last",label:"Last Name",name:"last",placeholder:"Enter your last name",onChange:_,value:j.last,error:!!s.last,helperText:s.last,InputProps:{endAdornment:j.last&&e.jsx(se,{position:"end",children:L("last",!!s.last,!!j.last)})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.3s ease","&:hover":{boxShadow:`0 0 0 2px ${a.palette.primary.main}20`},"&.Mui-focused":{boxShadow:`0 0 0 2px ${a.palette.primary.main}40`}}}})]}),e.jsx(X,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:_,value:j.email,placeholder:"Enter your email address",error:!!s.email,helperText:s.email,sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.3s ease","&:hover":{boxShadow:`0 0 0 2px ${a.palette.primary.main}20`},"&.Mui-focused":{boxShadow:`0 0 0 2px ${a.palette.primary.main}40`}}},InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Bt,{sx:{color:"action.active"}})}),endAdornment:j.email&&e.jsx(se,{position:"end",children:L("email",!!s.email,!!j.email)})}}),e.jsx(l,{sx:{mb:2},children:e.jsx(pl,{code:j.code,number:j.number,codeWidth:"40%",codeHandler:w,numberHandler:_,codeLabel:"Country Code",required:!0,codeError:!!s.code,numberError:!!s.number,numberHelperText:s.number,codePlaceholder:"+91",numberLabel:"Phone Number",numberIcon:e.jsx(ua,{}),codeIcon:e.jsx(hc,{}),numberPlaceholder:"Enter your phone number"})}),e.jsx(X,{onChange:_,fullWidth:!0,required:!0,name:"password",variant:"outlined",value:j.password,label:"Password",type:c?"text":"password",id:"password",placeholder:"Create a strong password",error:!!s.password,helperText:s.password,sx:{mb:1,"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.3s ease","&:hover":{boxShadow:`0 0 0 2px ${a.palette.primary.main}20`},"&.Mui-focused":{boxShadow:`0 0 0 2px ${a.palette.primary.main}40`}}},InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(oi,{sx:{color:"action.active"}})}),endAdornment:e.jsx(se,{position:"end",children:e.jsxs(J,{direction:"row",spacing:1,alignItems:"center",children:[j.password&&L("password",!!s.password,!!j.password),e.jsx(ke,{onClick:K,edge:"end",size:"small",children:c?e.jsx(si,{}):e.jsx(Tr,{})})]})})}}),j.password&&e.jsx(ze,{in:!0,timeout:300,children:e.jsxs(l,{sx:{mb:1},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",mb:.5},children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:"Password Strength"}),e.jsx(le,{title:"A strong password helps protect your account",children:e.jsx(ht,{sx:{fontSize:14,ml:.5,color:"text.secondary"}})})]}),e.jsx(St,{variant:"determinate",value:f.score/5*100,color:f.color,sx:{height:6,borderRadius:2,mb:1.5,backgroundColor:a.palette.grey[200]}}),f.feedback.length>0&&e.jsx(J,{direction:"row",spacing:1,flexWrap:"wrap",useFlexGap:!0,children:f.feedback.map((D,P)=>e.jsx(ve,{label:D,size:"small",color:f.color,variant:"outlined",sx:{fontSize:"0.7rem",height:20}},P))})]})}),e.jsx(ee,{type:"submit",fullWidth:!0,disabled:!o||u,variant:"contained",size:"large",sx:{mt:1,mb:1,py:1.5,borderRadius:2,fontSize:"1.1rem",fontWeight:600,textTransform:"none",background:o&&!u?`linear-gradient(135deg, ${a.palette.primary.main}, ${a.palette.primary.dark})`:void 0,boxShadow:o&&!u?`0 4px 20px ${a.palette.primary.main}40`:void 0,"&:hover":{background:o&&!u?`linear-gradient(135deg, ${a.palette.primary.dark}, ${a.palette.primary.main})`:void 0,boxShadow:o&&!u?`0 6px 25px ${a.palette.primary.main}50`:void 0},"&:disabled":{background:a.palette.grey[300],color:a.palette.grey[500]}},children:u?"Creating Account...":"Create Account"}),e.jsxs(l,{sx:{textAlign:"center"},children:[e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Already have an account?"," ",e.jsx(ee,{onClick:()=>t("/login"),sx:{fontSize:"inherit",fontWeight:600,textTransform:"none",p:0,minWidth:"auto","&:hover":{background:"transparent",textDecoration:"underline"}},children:"Sign In"})]}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["By creating an account, you agree to our"," ",e.jsx(ee,{onClick:()=>t("/terms"),sx:{fontSize:"inherit",p:0,minWidth:"auto",textTransform:"none",textDecoration:"underline","&:hover":{background:"transparent"}},children:"Terms of Service"})," ","and"," ",e.jsx(ee,{onClick:()=>t("/privacy"),sx:{fontSize:"inherit",p:0,minWidth:"auto",textTransform:"none",textDecoration:"underline","&:hover":{background:"transparent"}},children:"Privacy Policy"})]})]})]})]})})})})},cx=()=>e.jsxs(I,{container:!0,sx:{height:"100vh",zIndex:1,position:"relative"},children:[e.jsx(Us,{maxSize:110,children:Js().map((t,a)=>e.jsx(Ys,{useRandomDelay:!0,duration:1e3,children:t},a))}),e.jsx(l,{sx:{width:"100%",display:"flex",justifyContent:"center",flexDirection:"row"},children:e.jsx(dx,{})})]}),ux=({handleInputChange:t,value:a,isLabelled:n,fieldName:s,isHelperText:r})=>{const o=we();return e.jsxs(qe,{fullWidth:!0,children:[e.jsx(cs,{labelId:"alter-country-code-label",value:a,size:"small",label:n?"Country Code":"",onChange:p=>t(s,p.target.value),renderValue:p=>{const c=Xr.find(x=>x.dial_code===p);return c?e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx($e,{src:`/src/assets/flags/${c.code.toLowerCase()}.png`,alt:c.code,sx:{width:24,height:24},imgProps:{onError:x=>{const u=x.target;u.onerror=null,u.src=`https://flagcdn.com/24x18/${c.code.toLowerCase()}.png`}}}),e.jsx("span",{children:c.dial_code})]}):p},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.3s ease","&:hover":{"& > fieldset":{borderColor:o.palette.primary.main}},"&.Mui-focused":{"& > fieldset":{borderWidth:2}}}},children:Xr.map(p=>e.jsxs(he,{value:p.dial_code,children:[e.jsx(vt,{children:e.jsx($e,{src:`/src/assets/flags/${p.code.toLowerCase()}.png`,alt:p.code,sx:{width:24,height:24},imgProps:{onError:c=>{const x=c.target;x.onerror=null,x.src=`https://flagcdn.com/24x18/${p.code.toLowerCase()}.png`}}})}),e.jsx(tt,{primary:`${p.name} (${p.dial_code})`})]},p.code))}),r&&e.jsx(mc,{children:"Select country code"})]})},xx=({open:t,onClose:a,onUpdated:n,user:s})=>{var D;const r=we(),o=Fe(),[p,c]=g.useState(!1),x=g.useRef(null),[u,S]=g.useState(!1),[f,v]=g.useState(null),[j,T]=g.useState({name:{first:"",last:""},email:"",phone:{code:"",number:""},image:""}),k=(P,A)=>{T(O=>{if(P==="name.first"||P==="name.last"){const y=P.split(".")[1];return{...O,name:{...O.name,[y]:A}}}if(P==="phone.code"||P==="phone.number"){const y=P.split(".")[1];return{...O,phone:{...O.phone,[y]:A}}}return{...O,[P]:A}})},B=g.useCallback(P=>{if(!P)return;if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(P.type)){Z.error("Only PNG, JPEG, JPG, or WebP images are allowed.");return}if(P.size>5*1024*1024){Z.error("Image size should be less than 5MB.");return}T(O=>({...O,image:P}));const A=new FileReader;A.onload=O=>{var F;const y=(F=O.target)==null?void 0:F.result;v(y)},A.readAsDataURL(P)},[]),_=g.useCallback(P=>{var O;P.preventDefault(),P.stopPropagation(),S(!1);const A=(O=P.dataTransfer.files)==null?void 0:O[0];A&&(B(A),T(y=>({...y,image:A})))},[B]),K=g.useCallback(P=>{P.preventDefault(),P.stopPropagation(),S(!0)},[]),w=g.useCallback(P=>{P.preventDefault(),P.stopPropagation(),S(!1)},[]),N=()=>{var P;(P=x.current)==null||P.click()},R=g.useCallback(P=>{P.stopPropagation(),v(null),x.current&&(x.current.value="")},[]);g.useEffect(()=>{var P,A;t&&s?(T({name:{first:s.name.first||"",last:s.name.last||""},email:s.email||"",phone:{code:((P=s.phone)==null?void 0:P.code)||"",number:((A=s.phone)==null?void 0:A.number)||""},image:typeof s.image=="string"?s.image:""}),v(typeof(s==null?void 0:s.image)=="string"?s.image:null)):t&&!s&&(T({name:{first:"",last:""},email:"",phone:{code:"",number:""},image:""}),v(null))},[t,s]);const L=async()=>{var O;c(!0);const P={first:j.name.first.trim(),last:(((O=j==null?void 0:j.name)==null?void 0:O.last)||"").trim()||""};j.email&&j.email!==""&&(P.email=j.email.trim()),j.phone&&j.phone.code&&(P.code=j.phone.code.trim()),j.phone&&j.phone.number&&(P.phone=j.phone.number.trim()),j.image&&typeof j.image!="string"&&(P.image=j.image);const A=new FormData;Object.entries(P).forEach(([y,F])=>{typeof F=="boolean"?A.append(y,F?"true":"false"):F!=null&&(typeof F=="string"||F instanceof Blob)&&A.append(y,F)}),await o(hu({data:A,id:(s==null?void 0:s._id)??""})).unwrap().then(()=>{c(!1),Z.success("User successfully updated! 🎉"),a(),n()}).catch(y=>{c(!1),Z.error(y||"Failed to update user. Please try again.")})};return e.jsxs(Mt,{anchor:"right",PaperProps:{sx:{width:{xs:"100%",sm:600,md:700},backgroundColor:r.palette.background.default,backgroundImage:`linear-gradient(135deg, ${r.palette.background.default} 0%, ${r.palette.background.paper} 100%)`}},sx:{"& .MuiBackdrop-root":{backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)"}},open:t,onClose:a,...t?{}:{inert:""},children:[e.jsxs(l,{sx:{p:3,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${r.palette.divider}`,background:`linear-gradient(135deg, ${r.palette.primary.main}15 0%, ${r.palette.primary.light}10 100%)`,backdropFilter:"blur(10px)"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(le,{title:"Close",children:e.jsx(ke,{onClick:a,sx:{backgroundColor:r.palette.background.paper,"&:hover":{backgroundColor:r.palette.action.hover,transform:"scale(1.1)"},transition:"all 0.2s ease"},children:e.jsx(ct,{})})}),e.jsxs(l,{children:[e.jsx(i,{variant:"inherit",fontWeight:600,children:"Edit Basic Details"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Update the basic details about you"})]})]}),e.jsx(ee,{variant:"contained",startIcon:e.jsx(pa,{}),onClick:L,sx:{textTransform:"none",px:3,py:1.5,fontSize:"1rem",fontWeight:600,borderRadius:1,background:`linear-gradient(135deg, ${r.palette.primary.main} 0%, ${r.palette.primary.dark} 100%)`,boxShadow:r.shadows[4],"&:hover":{transform:"translateY(-2px)",boxShadow:r.shadows[8]},"&:disabled":{background:r.palette.action.disabledBackground,color:r.palette.action.disabled},transition:"all 0.3s ease"},children:p?"Updating...":"Update Details"})]}),e.jsx(l,{sx:{flex:1,overflow:"auto",position:"relative","&::-webkit-scrollbar":{width:8},"&::-webkit-scrollbar-track":{backgroundColor:r.palette.background.default},"&::-webkit-scrollbar-thumb":{backgroundColor:r.palette.divider,borderRadius:4,"&:hover":{backgroundColor:r.palette.action.hover}}},children:e.jsx(l,{sx:{mb:1,p:3},children:e.jsx(pr,{in:!0,timeout:400,children:e.jsxs(ne,{elevation:2,sx:{p:3,mb:2,borderRadius:1,background:`linear-gradient(135deg, ${r.palette.background.paper} 0%, ${r.palette.action.hover} 100%)`,border:`1px solid ${r.palette.divider}`,transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:r.shadows[4]}},children:[e.jsx(l,{sx:{display:"flex",justifyContent:"center",mb:2,alignItems:"center",gap:2},children:e.jsxs(qe,{sx:{width:"45%"},children:[e.jsx(i,{variant:"h6",align:"center",gutterBottom:!0,children:"Profile Image"}),e.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",style:{display:"none"},ref:x,onChange:P=>{var O;const A=(O=P.target.files)==null?void 0:O[0];A&&B(A)}}),e.jsx(l,{onClick:N,onDrop:_,onDragOver:P=>P.preventDefault(),onDragEnter:K,onDragLeave:w,sx:{border:`2px dashed ${u?r.palette.primary.main:r.palette.divider}`,borderRadius:1,p:2,position:"relative",textAlign:"center",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:u?r.palette.action.hover:"transparent","&:hover":{borderColor:r.palette.primary.main,backgroundColor:r.palette.action.hover,transform:"scale(1.02)"}},children:f?e.jsx(ze,{in:!0,timeout:300,children:e.jsxs(l,{sx:{position:"relative",display:"inline-block"},children:[e.jsx("img",{src:f,alt:"Image Preview",style:{maxWidth:150,maxHeight:150,borderRadius:8,boxShadow:r.shadows[2]}}),e.jsx(le,{title:"Remove image",children:e.jsx(ke,{onClick:R,sx:{position:"absolute",top:-8,right:-8,backgroundColor:r.palette.error.main,color:"white","&:hover":{backgroundColor:r.palette.error.dark},width:24,height:24},children:e.jsx(ut,{fontSize:"small"})})})]})}):e.jsx(ze,{in:!0,timeout:300,children:e.jsxs(l,{children:[e.jsx(_i,{sx:{fontSize:32,color:r.palette.primary.main}}),e.jsx(i,{variant:"body2",sx:{fontWeight:600},children:"Upload Profile Image"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Drag & drop or click to browse."}),e.jsx("br",{}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["Supports PNG, JPEG, JPG, WebP ",e.jsx("br",{})," Max 5MB • Recommended 1:1 ratio"]})]})})})]})}),e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",mb:2,alignItems:"center",gap:2},children:[e.jsxs(l,{sx:{width:"45%"},children:[e.jsxs(i,{variant:"body2",sx:{mb:1,fontWeight:500},children:["First Name ",e.jsx(i,{variant:"caption",color:"text.secondary",children:"(Required)"})]}),e.jsx(X,{fullWidth:!0,size:"small",placeholder:"First Name",value:j.name.first,onChange:P=>k("name.first",P.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}})]}),e.jsxs(l,{sx:{width:"45%"},children:[e.jsx(i,{variant:"body2",sx:{mb:1,fontWeight:500},children:"Last Name"}),e.jsx(X,{fullWidth:!0,size:"small",placeholder:"Last Name",value:j.name.last,onChange:P=>k("name.last",P.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}})]})]}),e.jsxs(l,{sx:{mb:2},children:[e.jsxs(i,{variant:"body2",sx:{mb:1,fontWeight:500},children:["E-mail ",e.jsx(i,{variant:"caption",color:"text.secondary",children:"(Required)"})]}),e.jsx(X,{fullWidth:!0,required:!0,size:"small",placeholder:"Enter your email",value:j.email,onChange:P=>k("email",P.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}})]}),e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",mb:2,alignItems:"center",gap:2},children:[e.jsxs(l,{sx:{width:"20%"},children:[e.jsx(i,{variant:"body2",sx:{mb:1,fontWeight:500},children:"Country Code"}),e.jsx(ux,{fieldName:"phone.code",handleInputChange:k,value:(D=j==null?void 0:j.phone)==null?void 0:D.code,isLabelled:!1,isHelperText:!1})]}),e.jsxs(l,{sx:{width:"70%"},children:[e.jsx(i,{variant:"body2",sx:{mb:1,fontWeight:500},children:"Phone Number"}),e.jsx(X,{fullWidth:!0,size:"small",placeholder:"Enter your phone number",value:j.phone.number,onChange:P=>k("phone.number",P.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}})]})]})]})})})}),e.jsx(l,{sx:{p:3,borderTop:`1px solid ${r.palette.divider}`,backgroundColor:r.palette.background.paper,background:`linear-gradient(135deg, ${r.palette.background.paper} 0%, ${r.palette.action.hover} 100%)`},children:e.jsx(J,{direction:"row",spacing:2,justifyContent:"space-between",alignItems:"center",children:e.jsxs(J,{direction:"row",spacing:2,children:[e.jsx(ee,{variant:"outlined",sx:{textTransform:"none",borderRadius:1,px:3},children:"Reset Form"}),e.jsx(ee,{variant:"contained",startIcon:p?e.jsx(qt,{className:"animate-spin"}):e.jsx(pa,{}),onClick:L,sx:{textTransform:"none",px:4,py:1.5,fontSize:"1rem",fontWeight:600,borderRadius:1,background:`linear-gradient(135deg, ${r.palette.primary.main} 0%, ${r.palette.primary.dark} 100%)`,boxShadow:r.shadows[4],"&:hover":{transform:"translateY(-2px)",boxShadow:r.shadows[8]},"&:disabled":{background:r.palette.action.disabledBackground,color:r.palette.action.disabled},transition:"all 0.3s ease"},children:p?"Updating Details...":"Update Details"})]})})})]})},Ze=({icon:t,label:a,value:n,badge:s})=>{const r=we(),[o,p]=g.useState(!1);return e.jsx(ne,{elevation:0,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),sx:{py:2,px:1,mb:1,borderRadius:1,background:o?`linear-gradient(135deg, ${d(r.palette.primary.main,.05)} 0%, ${d(r.palette.primary.main,.02)} 100%)`:`linear-gradient(135deg, ${d(r.palette.background.paper,.8)} 0%, ${d(r.palette.background.paper,.4)} 100%)`,backdropFilter:"blur(20px)",border:`1px solid ${o?d(r.palette.primary.main,.2):d(r.palette.primary.main,.08)}`,transition:"all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)",transform:o?"translateY(-4px)":"translateY(0)",boxShadow:o?`0 12px 40px ${d(r.palette.primary.main,.15)}`:`0 2px 8px ${d(r.palette.primary.main,.05)}`},children:e.jsx(l,{display:"flex",alignItems:"center",justifyContent:"start",children:e.jsxs(l,{display:"flex",alignItems:"center",flex:1,children:[e.jsx(Ka,{badgeContent:s,color:"error",sx:{mr:1},children:e.jsx(l,{sx:{p:1,borderRadius:2.5,bgcolor:o?d(r.palette.primary.main,.15):d(r.palette.primary.main,.1),color:r.palette.primary.main,display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease",transform:o?"scale(1.1)":"scale(1)"},children:t})}),e.jsxs(l,{flex:1,children:[e.jsx(i,{variant:"caption",sx:{color:"text.secondary",fontWeight:500,textTransform:"uppercase",letterSpacing:1,fontSize:"0.5rem"},children:a}),e.jsx(i,{variant:"body2",component:"span",sx:{fontWeight:600,mt:.5,fontSize:".8rem"},children:n})]})]})})})},gt=({title:t,children:a,icon:n})=>{const s=we();return e.jsxs(Ne,{elevation:0,sx:{borderRadius:1,m:0,p:1,background:`linear-gradient(135deg, ${d(s.palette.background.paper,.9)} 0%, ${d(s.palette.background.paper,.6)} 100%)`,backdropFilter:"blur(20px)",border:`1px solid ${d(s.palette.primary.main,.1)}`,overflow:"hidden",transition:"all 0.3s ease","&:hover":{border:`1px solid ${d(s.palette.primary.main,.2)}`,boxShadow:`0 8px 32px ${d(s.palette.primary.main,.1)}`}},children:[e.jsx(vs,{avatar:e.jsx(l,{sx:{p:1,bgcolor:d(s.palette.primary.main,.1),borderRadius:1,color:s.palette.primary.main},children:n}),title:e.jsx(i,{variant:"h6",sx:{fontWeight:600,color:s.palette.primary.main},children:t}),sx:{pb:1}}),e.jsx(Me,{sx:{pt:0},children:a})]})},px=({user:t,onEditToggle:a})=>{var r,o,p,c,x;const n=we(),s=()=>{if(!(t!=null&&t.name))return"TK";const{first:u,last:S}=t.name;return`${(u==null?void 0:u[0])??""}${(S==null?void 0:S[0])??""}`.toUpperCase()};return e.jsx(Ne,{elevation:0,sx:{background:`linear-gradient(135deg, ${n.palette.primary.main} 0%, ${n.palette.primary.dark} 100%)`,color:"white",borderRadius:4,overflow:"hidden",width:"100%"},children:e.jsxs(Me,{sx:{p:4,position:"relative",zIndex:1},children:[e.jsxs(l,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:4,children:[e.jsxs(l,{children:[e.jsx(i,{variant:"h3",sx:{fontWeight:800,letterSpacing:-1,mb:1},children:"My Profile"}),e.jsx(i,{variant:"subtitle1",sx:{opacity:.8,fontWeight:400},children:"Manage your account settings and details"})]}),e.jsx(ws,{variant:"contained",sx:{display:{xs:"none",md:"flex"},bgcolor:d("hsl(0, 0%, 100%)",.15),border:`1px solid ${d("hsl(0, 0%, 100%)",.2)}`},children:e.jsx(ee,{onClick:a,startIcon:e.jsx(aa,{}),sx:{fontWeight:600,px:3},children:"Edit Profile"})}),e.jsx(ke,{size:"large",onClick:a,sx:{transition:"color 0.2s ease",display:{xs:"flex",sm:"none",md:"none",lg:"none",xl:"none"}},children:e.jsx(aa,{fontSize:"medium"})})]}),e.jsxs(l,{display:"flex",flexDirection:"row",alignItems:"center",gap:6,children:[e.jsx(l,{position:"relative",children:(t==null?void 0:t.image)!==""&&typeof(t==null?void 0:t.image)=="string"?e.jsx("img",{src:typeof(t==null?void 0:t.image)=="string"?t==null?void 0:t.image:"",alt:(r=t==null?void 0:t.name)==null?void 0:r.first,style:{width:140,height:140,borderRadius:"50%",objectFit:"cover",boxShadow:`0 4px 16px ${d(n.palette.primary.main,.2)}`}}):e.jsx($e,{alt:`${(o=t==null?void 0:t.name)==null?void 0:o.first} ${(p=t==null?void 0:t.name)==null?void 0:p.last}`,sx:{width:140,height:140,bgcolor:n.palette.primary.main,color:"white",fontSize:"3rem",border:"4px solid rgba(255,255,255,0.3)",boxShadow:"0 12px 40px rgba(0,0,0,0.4)",transition:"all 0.3s ease","&:hover":{transform:"scale(1.05)",boxShadow:"0 16px 50px rgba(0,0,0,0.5)"}},children:s()})}),e.jsxs(l,{flex:1,textAlign:{xs:"center",md:"left"},children:[e.jsxs(i,{variant:"h2",sx:{fontWeight:800,mb:2,fontSize:{xs:"2rem",md:"2.5rem"},letterSpacing:-1},children:[(c=t==null?void 0:t.name)==null?void 0:c.first," ",(x=t==null?void 0:t.name)==null?void 0:x.last]}),e.jsxs(J,{direction:"row",spacing:1,justifyContent:{xs:"center",md:"flex-start"},alignItems:{xs:"flex-start",md:"center"},mb:3,children:[e.jsx(ve,{label:(t==null?void 0:t.user_type)==="admin"?"Admin":(t==null?void 0:t.user_type)==="user"?"User":"Guest",icon:e.jsx(ca,{fontSize:"small"}),sx:{bgcolor:d("hsl(0, 0%, 100%)",.7),color:"white",fontWeight:700,fontSize:"0.9rem",height:36,border:`2px solid ${d("hsl(0, 0%, 100%)",.3)}`,backdropFilter:"blur(10px)"}}),e.jsx(ve,{label:"Basic Plan",icon:e.jsx(gc,{fontSize:"small"}),sx:{bgcolor:d(n.palette.warning.light,.5),color:n.palette.warning.dark,fontWeight:700,fontSize:"0.9rem",height:36,border:`2px solid ${d(n.palette.warning.main,.3)}`,backdropFilter:"blur(10px)"}})]}),e.jsx(J,{direction:"row",spacing:1,justifyContent:{xs:"center",md:"flex-start"},children:[{Icon:Cs,color:"#0077B5",label:"LinkedIn"},{Icon:ks,color:"#1877F2",label:"Facebook"},{Icon:no,color:"#4CAF50",label:"Website"}].map(({Icon:u,color:S,label:f},v)=>e.jsx(le,{title:f,arrow:!0,children:e.jsx(ke,{sx:{bgcolor:d("hsl(0, 0%, 100%)",.15),color:"white",width:48,height:48,backdropFilter:"blur(10px)",border:`1px solid ${d("hsl(0, 0%, 100%)",.2)}`,transition:"all 0.3s ease","&:hover":{bgcolor:d(S,.2),transform:"translateY(-2px) scale(1.05)",boxShadow:`0 8px 20px ${d(S,.3)}`}},children:e.jsx(u,{})})},v))})]})]})]})})},hx=({com:t,onDelete:a,onEdit:n,onView:s,index:r})=>{const o=we(),[p,c]=g.useState(!1),[x,u]=g.useState(!1),S=()=>{a((t==null?void 0:t._id)??""),c(!1)},f=j=>j.split(" ").map(T=>T.charAt(0)).join("").toUpperCase().slice(0,2),v=j=>{const T=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"],k=j.length%T.length;return T[k]};return e.jsxs(e.Fragment,{children:[e.jsx(ze,{in:!0,timeout:300+r*100,children:e.jsxs(xe,{onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),sx:{cursor:"pointer",width:"100%",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:x?"translateY(-2px)":"translateY(0)",boxShadow:x?`0 8px 25px ${d(o.palette.primary.main,.15)}`:"none","&:hover":{bgcolor:d(o.palette.primary.main,.02)},borderLeft:`4px solid ${x?o.palette.primary.main:"transparent"}`},onClick:()=>s(t),children:[e.jsx(m,{align:"left",sx:{pl:3,pr:1},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start"},children:[e.jsx($e,{sx:{width:48,height:48,mr:2,bgcolor:v(t.name),fontSize:"1rem",fontWeight:700,boxShadow:`0 4px 12px ${d(v(t.name),.3)}`,transition:"all 0.3s ease",transform:x?"scale(1.1)":"scale(1)"},src:t!=null&&t.image?t.image:"",children:f(t.name)}),e.jsxs(l,{sx:{flex:1},children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600,fontSize:"0.95rem",color:o.palette.text.primary,mb:.5,transition:"color 0.3s ease"},children:t.name}),t.mailing_name&&e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1},children:e.jsx(ve,{icon:e.jsx(bc,{}),label:t.mailing_name||"Uncategorized",size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:"20px",borderRadius:"10px",bgcolor:d(o.palette.primary.main,.08),borderColor:d(o.palette.primary.main,.2),color:o.palette.primary.main}})})]})]})}),e.jsx(m,{align:"center",sx:{px:1},children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:[t.phone&&t.phone.number&&e.jsxs(i,{variant:"h6",sx:{fontWeight:700,fontSize:"1.1rem",color:o.palette.text.primary},children:[t.phone.code||"+91"," "," ",t.phone.number||"N/A"]}),t.email&&e.jsx(i,{variant:"h6",sx:{fontWeight:700,fontSize:"0.8rem",color:o.palette.text.primary},children:t.email})]})}),e.jsx(m,{align:"center",sx:{px:1},children:e.jsxs(i,{variant:"h6",sx:{fontWeight:600,fontSize:"1rem",color:o.palette.text.primary,ml:.5},children:[new Date(t.financial_year_start).getFullYear()," - ",new Date(t.financial_year_start).getFullYear()+1]})}),e.jsx(m,{align:"center",sx:{px:1},children:t.tin&&e.jsx(i,{variant:"h6",sx:{fontWeight:600,fontSize:".8rem",color:o.palette.text.primary},children:t.tin})}),e.jsx(m,{align:"center",sx:{px:1},children:e.jsx(i,{variant:"h6",sx:{fontWeight:600,fontSize:".9rem",color:o.palette.text.primary},children:t!=null&&t.created_at?new Date(t.created_at).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""})}),e.jsx(m,{align:"center",sx:{px:1},children:e.jsx(Ye,{appear:!0,in:!0,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:.5,justifyContent:"center"},children:[e.jsx(le,{title:"View Details",arrow:!0,children:e.jsx(ke,{size:"small",onClick:j=>{j.stopPropagation(),s(t)},sx:{bgcolor:d(o.palette.info.main,.1),color:o.palette.info.main,transition:"all 0.3s ease","&:hover":{bgcolor:d(o.palette.info.main,.2),transform:"scale(1.1)"}},children:e.jsx(Ha,{fontSize:"small"})})}),e.jsx(le,{title:"Edit Product",arrow:!0,children:e.jsx(ke,{size:"small",onClick:j=>{j.stopPropagation(),n(t)},sx:{bgcolor:d(o.palette.warning.main,.1),color:o.palette.warning.main,transition:"all 0.3s ease","&:hover":{bgcolor:d(o.palette.warning.main,.2),transform:"scale(1.1)"}},children:e.jsx(Rr,{fontSize:"small"})})}),e.jsx(le,{title:"Delete Product",arrow:!0,children:e.jsx(ke,{size:"small",onClick:j=>{c(!0),j.stopPropagation()},sx:{bgcolor:d(o.palette.error.main,.1),color:o.palette.error.main,transition:"all 0.3s ease","&:hover":{bgcolor:d(o.palette.error.main,.2),transform:"scale(1.1)"}},children:e.jsx(mt,{fontSize:"small"})})})]})})})]})}),e.jsxs(Pa,{open:p,onClose:()=>c(!1),"aria-labelledby":"delete-dialog-title",PaperProps:{sx:{borderRadius:1,boxShadow:`0 24px 50px ${d(o.palette.error.main,.2)}`}},children:[e.jsxs(ba,{id:"delete-dialog-title",sx:{display:"flex",alignItems:"center",gap:2,color:o.palette.error.main,fontWeight:600},children:[e.jsx(mt,{}),"Delete ",t.name,"?"]}),e.jsxs(fa,{children:[e.jsx(rt,{severity:"warning",sx:{mb:2},children:"This action cannot be undone. All data related to this company will be permanently deleted."}),e.jsxs(i,{children:['Are you sure you want to delete "',e.jsx("strong",{children:t.name}),'"?']})]}),e.jsxs(Ma,{sx:{p:3,gap:1},children:[e.jsx(ee,{onClick:()=>c(!1),variant:"outlined",sx:{borderRadius:2},children:"Cancel"}),e.jsx(ee,{onClick:S,color:"error",variant:"contained",sx:{borderRadius:2},startIcon:e.jsx(mt,{}),children:"Delete Compnay"})]})]})]})},Fr=()=>{var M,W,C,$,G,ge,Ae,ae,Y,re,Te,V,z,de,Ie,oe,ue,je,q,E;const t=we(),a=Fe(),n=Ke(),{mode:s,setMode:r}=wi(),{user:o,current_company_id:p}=Ce(te=>te.auth),c=p||localStorage.getItem("current_company_id")||((M=o==null?void 0:o.user_settings)==null?void 0:M.current_company_id)||"",x=(W=o==null?void 0:o.company)==null?void 0:W.find(te=>te._id===c),{companies:u}=Ce(te=>te.company),[S,f]=g.useState(!1),[v,j]=g.useState(!1),[T,k]=g.useState(!1),[B,_]=g.useState(null),[K,w]=g.useState(!1),[N,R]=g.useState(0),L=(te,U)=>{R(U)},D=()=>{A(),k(!1)},P=te=>{a(In(te)).unwrap().then(U=>{console.log("Delete Company Response",U),b(),Z.success("Company deleted successfully")}).catch(U=>{Z.error(U||"An unexpected error occurred. Please try again later.")})},A=()=>{a(Tn()).unwrap().then(()=>{Z.success("Account deleted successfully")}).catch(te=>{Z.error(te||"An unexpected error occurred. Please try again later.")})},O=te=>{j(!0),_(te)},y=te=>{n(`/profile/company/${te._id}`)},F=()=>{a(Ia())},h=g.useCallback(()=>{a(vr())},[a]),b=()=>{F(),h()};return Ft.useEffect(()=>{h()},[h]),e.jsxs(l,{sx:{minHeight:"100vh",width:"100%"},children:[e.jsx(Je,{maxWidth:!1,sx:{position:"relative",width:"100%",maxWidth:"100%",zIndex:1,py:4},children:e.jsxs(J,{spacing:2,children:[e.jsx(px,{user:o,onEditToggle:()=>{f(!S)}}),e.jsx(ne,{elevation:0,sx:{borderRadius:1,bgcolor:d(t.palette.background.paper,.8),backdropFilter:"blur(20px)"},children:e.jsxs(Wr,{value:N,onChange:L,variant:"fullWidth",sx:{"& .MuiTab-root":{fontWeight:600,textTransform:"none",fontSize:"1rem",py:2}},children:[e.jsx(dt,{label:"Company List",icon:e.jsx(ci,{}),iconPosition:"start"}),e.jsx(dt,{label:"Templates",icon:e.jsx(Oa,{}),iconPosition:"start"}),e.jsx(dt,{label:"Preferences",icon:e.jsx(fc,{}),iconPosition:"start"}),e.jsx(dt,{label:"Settings",icon:e.jsx(wa,{}),iconPosition:"start"}),e.jsx(dt,{label:"Personal Info",icon:e.jsx(At,{}),iconPosition:"start"})]})}),N===0&&(u.length<1?e.jsxs(l,{sx:{width:"100%",p:4,textAlign:"center"},children:[e.jsx(i,{variant:"h5",color:"text.secondary",sx:{mb:2},children:"No company data found."}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Please create your first company profile to get started."}),e.jsx(ee,{variant:"contained",color:"primary",onClick:()=>j(!0),children:"Create Company"})]}):e.jsx(nt,{component:ne,elevation:0,sx:{width:"100%",borderRadius:1,border:`1px solid ${d(t.palette.divider,1)}`,boxShadow:`0 4px 20px ${d("#000",.05)}`},children:e.jsxs(it,{sx:{width:"100%"},children:[e.jsx(ot,{children:e.jsxs(xe,{sx:{bgcolor:d(t.palette.grey[50],.8),width:"100%","& .MuiTableCell-head":{borderBottom:`2px solid ${d(t.palette.primary.main,.1)}`}},children:[e.jsx(m,{sx:{pl:3,pr:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:t.palette.text.primary,fontSize:"0.85rem"},children:"Company Information"})}),e.jsx(m,{align:"center",sx:{px:1},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(Is,{fontSize:"small"}),e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:t.palette.text.primary,fontSize:"0.85rem"},children:"Contact Information"})]})}),e.jsx(m,{align:"center",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:t.palette.text.primary,fontSize:"0.85rem"},children:"Financial Year"})}),e.jsx(m,{align:"center",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:t.palette.text.primary,fontSize:"0.85rem"},children:"TIN"})}),e.jsx(m,{align:"center",sx:{px:1},children:e.jsx(le,{title:"Sort by Date Created",arrow:!0,children:e.jsx(Ue,{children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:t.palette.text.primary,fontSize:"0.85rem"},children:"Created on"})})})}),e.jsx(m,{align:"center",children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:t.palette.text.primary,fontSize:"0.85rem"},children:"Company Actions"})})]})}),e.jsx(st,{children:(Array.isArray(u)?u:[]).map((te,U)=>e.jsx(hx,{com:te,onDelete:P,onEdit:O,onView:y,index:U},te._id))})]})})),N===1&&e.jsxs(I,{container:!0,justifyContent:"space-between",children:[e.jsx(I,{item:!0,xs:12,lg:5.8,children:e.jsx(gt,{title:"Sales Template Information",icon:e.jsx(Ts,{}),children:e.jsx(J,{spacing:2,children:e.jsx(Ze,{icon:e.jsx(ui,{}),label:"Comming Soon",value:e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1},children:"Template features will be available soon."})})})})}),e.jsx(I,{item:!0,xs:12,lg:5.8,children:e.jsx(gt,{title:"Purchase Template Information",icon:e.jsx(ro,{}),children:e.jsx(J,{spacing:2,children:e.jsx(Ze,{icon:e.jsx(ui,{}),label:"Comming Soon",value:e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1},children:"Template features will be available soon."})})})})})]}),N===2&&e.jsxs(I,{container:!0,justifyContent:"space-between",children:[e.jsx(I,{item:!0,xs:12,lg:5.8,children:e.jsx(gt,{title:"Notification Preferences",icon:e.jsx(yc,{}),children:e.jsxs(J,{spacing:3,children:[e.jsx(Ze,{icon:e.jsx(jc,{}),label:"Comming Soon",value:e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1},children:"Notification features will be available soon."})}),e.jsxs(l,{children:[e.jsx(jt,{control:e.jsx(kt,{checked:!0,disabled:!0,color:"primary"}),label:e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600,textTransform:"capitalize"},children:"Invoice alert Notification"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Send Email to customer when Invoice is created via email."})]}),sx:{width:"100%",margin:0}}),e.jsx(Pe,{sx:{mt:2}})]}),e.jsxs(l,{children:[e.jsx(jt,{control:e.jsx(kt,{disabled:!0,checked:!0,color:"primary"}),label:e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600,textTransform:"capitalize"},children:"Transaction alert Notification"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Send Email to customer when Transaction is created via email."})]}),sx:{width:"100%",margin:0}}),e.jsx(Pe,{sx:{mt:2}})]})]})})}),e.jsx(I,{item:!0,xs:12,lg:5.8,children:e.jsx(gt,{title:"Appearance",icon:e.jsx(uo,{}),children:e.jsxs(J,{spacing:3,children:[e.jsx(l,{children:e.jsx(jt,{control:e.jsx(kt,{checked:K,onChange:te=>{w(te.target.checked),te.target.checked?r("dark"):r("light")},color:"primary"}),label:e.jsxs(l,{display:"flex",alignItems:"center",gap:1,children:[K?e.jsx(vc,{}):e.jsx(Sc,{}),e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600},children:"Dark Mode"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Switch between light and dark themes"})]})]}),sx:{width:"100%",margin:0}})}),e.jsx(Pe,{}),e.jsx(Ze,{icon:e.jsx(_c,{}),label:"Comming Soon",value:e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1},children:"Color Themes features will be available soon."})})]})})})]}),N===3&&e.jsxs(I,{container:!0,justifyContent:"space-between",children:[e.jsx(I,{item:!0,xs:12,lg:5.8,children:e.jsx(gt,{title:"Account Settings",icon:e.jsx(At,{}),children:e.jsxs(J,{spacing:3,children:[e.jsx(Ze,{icon:e.jsx(At,{}),label:"Account Type",value:e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1},children:e.jsx(ne,{elevation:0,sx:{px:2,bgcolor:d(t.palette.primary.main,.1),border:`1px solid ${d(t.palette.primary.main,.3)}`,borderRadius:1},children:e.jsx(i,{variant:"caption",sx:{color:t.palette.primary.main,textTransform:"capitalize"},children:(o==null?void 0:o.user_type)||"User"})})})}),e.jsx(Pe,{}),e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Permissions"}),e.jsx(J,{spacing:2,children:e.jsx(jt,{control:e.jsx(kt,{checked:(($=(C=o==null?void 0:o.user_settings)==null?void 0:C.permissions)==null?void 0:$.create_vouchers)||!1,disabled:!0,color:"primary"}),label:e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600},children:"Create Vouchers"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Permission to create and manage vouchers"})]}),sx:{width:"100%",margin:0}})})]}),e.jsx(Pe,{}),e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Session Information"}),e.jsxs(J,{spacing:1.5,children:[e.jsx(Ze,{icon:e.jsx(Da,{}),label:"Last Login",value:e.jsx(i,{variant:"body2",children:(G=o==null?void 0:o.user_settings)!=null&&G.last_login?nr(o.user_settings.last_login.toString()):"Never"})}),e.jsx(Ze,{icon:e.jsx(ua,{}),label:"Device",value:e.jsx(i,{variant:"body2",children:((ge=o==null?void 0:o.user_settings)==null?void 0:ge.last_login_device)||"Unknown"})}),e.jsx(Ze,{icon:e.jsx(Ur,{}),label:"IP Address",value:e.jsx(i,{variant:"body2",sx:{fontFamily:"monospace"},children:((Ae=o==null?void 0:o.user_settings)==null?void 0:Ae.last_login_ip)||"Unknown"})})]})]})]})})}),e.jsx(I,{item:!0,xs:12,lg:5.8,children:e.jsx(gt,{title:"Company Settings",icon:e.jsx(ci,{}),children:e.jsxs(J,{spacing:3,children:[e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Current Company"}),x?e.jsx(ne,{elevation:0,sx:{p:2.5,borderRadius:1,bgcolor:d(t.palette.primary.main,.05),border:`1px solid ${d(t.palette.primary.main,.2)}`},children:e.jsxs(l,{display:"flex",alignItems:"center",gap:2,children:[(x==null?void 0:x.image)&&e.jsx(l,{component:"img",src:x==null?void 0:x.image,alt:"Company Logo",sx:{width:48,height:48,borderRadius:1,objectFit:"cover",border:`2px solid ${d(t.palette.primary.main,.3)}`}}),e.jsxs(l,{flex:1,children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600},children:x==null?void 0:x.company_name}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:[x==null?void 0:x.state,", ",x==null?void 0:x.country]})]}),e.jsx(ne,{elevation:0,sx:{px:1.5,py:.5,bgcolor:d(t.palette.success.main,.1),border:`1px solid ${d(t.palette.success.main,.3)}`,borderRadius:1},children:e.jsx(i,{variant:"caption",sx:{color:t.palette.success.main,fontWeight:600},children:"CHANGE"})})]})}):e.jsx(i,{variant:"body2",color:"text.secondary",children:"No company selected or Created yet."})]}),e.jsx(Pe,{}),e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Features"}),e.jsx(J,{direction:"row",spacing:2,children:x!=null&&x.company_settings?e.jsxs(e.Fragment,{children:[e.jsx(jt,{control:e.jsx(kt,{checked:((Y=(ae=x==null?void 0:x.company_settings)==null?void 0:ae.features)==null?void 0:Y.enable_tax)||!1,disabled:!0,color:"primary"}),label:e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600},children:"TAX Management"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Tax calculation and TAX return filing"})]}),sx:{width:"100%",margin:0}}),e.jsx(jt,{control:e.jsx(kt,{checked:((Te=(re=x==null?void 0:x.company_settings)==null?void 0:re.features)==null?void 0:Te.enable_inventory)||!1,disabled:!0,color:"primary"}),label:e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600},children:"Inventory Management"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Stock tracking and inventory control"})]}),sx:{width:"100%",margin:0}})]}):e.jsx(i,{variant:"body2",color:"text.secondary",children:"Please create or select a company from the list."})})]}),e.jsx(Pe,{}),e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Financial Info"}),x?e.jsxs(J,{spacing:1.5,children:[((z=(V=x==null?void 0:x.company_settings)==null?void 0:V.tax_details)==null?void 0:z.tin)&&e.jsx(Ze,{icon:e.jsx(Ur,{}),label:"TIN",value:e.jsx(i,{variant:"body2",sx:{fontFamily:"monospace"},children:(Ie=(de=x==null?void 0:x.company_settings)==null?void 0:de.tax_details)==null?void 0:Ie.tin})}),((oe=x==null?void 0:x.company_settings)==null?void 0:oe.books_start_date)&&e.jsx(Ze,{icon:e.jsx(Da,{}),label:"Books Start Date",value:e.jsx(i,{variant:"body2",children:(ue=x==null?void 0:x.company_settings)!=null&&ue.books_start_date?nr(((je=x==null?void 0:x.company_settings)==null?void 0:je.books_start_date.toString())||""):"Not Set"})})]}):e.jsx(i,{variant:"body2",color:"text.secondary",children:"No company selected or Created yet."})]})]})})}),e.jsx(I,{item:!0,xs:12,sx:{mt:3},children:e.jsx(gt,{title:"Data Management",icon:e.jsx(wa,{}),children:e.jsxs(I,{container:!0,spacing:3,children:[e.jsx(I,{item:!0,xs:12,md:6,children:e.jsx(ne,{elevation:0,sx:{p:3,borderRadius:1,bgcolor:d(t.palette.info.main,.05),border:`1px solid ${d(t.palette.info.main,.2)}`},children:e.jsxs(l,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(l,{display:"flex",alignItems:"center",children:[e.jsx(l,{sx:{p:1,borderRadius:1,bgcolor:d(t.palette.info.main,.1),color:t.palette.info.main,mr:2},children:e.jsx(Oa,{})}),e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600},children:"Export Data"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Download your account and company data"})]})]}),e.jsx(ee,{variant:"contained",color:"info",disabled:!0,sx:{background:d(t.palette.info.main,.8),cursor:"not-allowed",fontWeight:600,whiteSpace:"nowrap",px:3},children:"Available Soon"})]})})}),e.jsx(I,{item:!0,xs:12,md:6,children:e.jsx(ne,{elevation:0,sx:{p:3,borderRadius:1,bgcolor:d(t.palette.warning.main,.05),border:`1px solid ${d(t.palette.warning.main,.2)}`},children:e.jsxs(l,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(l,{display:"flex",alignItems:"center",children:[e.jsx(l,{sx:{p:1,borderRadius:1,bgcolor:d(t.palette.warning.main,.1),color:t.palette.warning.main,mr:2},children:e.jsx(wa,{})}),e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600},children:"Reset Settings"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Reset all preferences to default values"})]})]}),e.jsx(ee,{variant:"contained",color:"warning",startIcon:e.jsx(wa,{}),sx:{background:d(t.palette.warning.main,.8),"&:hover":{background:t.palette.warning.main},fontWeight:600,whiteSpace:"nowrap",px:3},children:"Reset"})]})})})]})})})]}),N===4&&e.jsxs(I,{container:!0,gap:2,sx:{mt:2},children:[e.jsx(I,{item:!0,xs:12,lg:4,children:e.jsx(gt,{title:"Contact Information",icon:e.jsx(Bt,{}),children:e.jsxs(J,{spacing:2,children:[e.jsx(Ze,{icon:e.jsx(Bt,{}),label:"Email Address",value:e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1},children:o==null?void 0:o.email})}),e.jsx(Ze,{icon:e.jsx(ua,{}),label:"Phone Number",value:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[((q=o==null?void 0:o.phone)==null?void 0:q.code)||""," "," ",((E=o==null?void 0:o.phone)==null?void 0:E.number)||"Not provided"]})}),e.jsx(Ze,{icon:e.jsx(Da,{}),label:"Member Since",value:e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1},children:nr((o==null?void 0:o.created_at)??"")})})]})})}),e.jsx(I,{item:!0,xs:12,lg:7,children:e.jsx(gt,{title:"Password & Security",icon:e.jsx(Ur,{}),children:e.jsxs(J,{spacing:3,sx:{p:1},children:[e.jsxs(l,{children:[e.jsx(i,{variant:"h6",sx:{mb:2,fontWeight:600,textDecoration:"underline",textUnderlineOffset:"4px"},children:"Change Password"}),e.jsx(ne,{elevation:0,sx:{p:3,borderRadius:1,bgcolor:s==="light"?d(t.palette.success.main,.05):d(t.palette.success.light,.1),border:`1px solid ${d(t.palette.success.main,.5)}`},children:e.jsxs(l,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(l,{display:"flex",alignItems:"center",children:[e.jsx(l,{sx:{p:1,borderRadius:1,bgcolor:s==="light"?d(t.palette.success.main,.1):d(t.palette.success.light,.1),color:s==="light"?t.palette.success.main:t.palette.success.light,mr:2},children:e.jsx($o,{})}),e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600},children:"Want to Change Your Password?"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Update your password to keep your account secure."})]})]}),e.jsx(l,{display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(ee,{variant:"contained",color:"success",startIcon:e.jsx($o,{}),sx:{background:s==="light"?d(t.palette.success.main,.5):d(t.palette.success.light,.5),"&:hover":{background:s==="light"?d(t.palette.success.main,1):d(t.palette.success.light,1)},fontWeight:600,whiteSpace:"nowrap",px:3},children:"Change"})})]})})]}),e.jsx(Pe,{sx:{my:1}}),e.jsxs(l,{children:[e.jsx(i,{variant:"h6",sx:{mb:2,fontWeight:600,color:t.palette.error.light,textDecoration:"underline",textUnderlineOffset:"4px"},children:"Danger Zone"}),e.jsx(ne,{elevation:0,sx:{p:3,borderRadius:1,bgcolor:d(t.palette.error.light,.05),border:`1px solid ${d(t.palette.error.light,.2)}`},children:e.jsxs(l,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(l,{display:"flex",alignItems:"center",children:[e.jsx(l,{sx:{p:1,borderRadius:1,bgcolor:d(t.palette.error.light,.1),color:t.palette.error.light,mr:1},children:e.jsx(No,{})}),e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600},children:"Want to Delete Your Account Permanently?"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Your request will be processed within 5-7 business days."})]})]}),e.jsx(l,{display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(ee,{variant:"contained",color:"error",onClick:()=>k(!0),startIcon:e.jsx(No,{}),sx:{background:d(t.palette.error.light,.5),"&:hover":{background:d(t.palette.error.light,1)},fontWeight:600,whiteSpace:"nowrap",px:3},children:"Delete"})})]})})]})]})})})]})]})}),e.jsx(xx,{open:S,onClose:()=>{f(!1)},user:o,onUpdated:async()=>{b()}}),e.jsx(yo,{open:v,onClose:()=>{j(!1)},company:B,onUpdated:async()=>{b()}}),e.jsxs(Pa,{open:T,onClose:()=>k(!1),"aria-labelledby":"delete-dialog-title",PaperProps:{sx:{borderRadius:1,boxShadow:`0 24px 50px ${d(t.palette.error.main,.2)}`}},children:[e.jsxs(ba,{id:"delete-dialog-title",sx:{display:"flex",alignItems:"center",gap:2,color:t.palette.error.main,fontWeight:600},children:[e.jsx(ut,{}),"Delete Account"]}),e.jsxs(fa,{children:[e.jsxs(rt,{severity:"warning",sx:{mb:2},children:["This action cannot be undone. All data related to your account will be permanently deleted, including your companies, settings, and preferences.",e.jsx("br",{}),"Please ensure you have backed up any important information before proceeding."]}),e.jsxs(i,{children:["Are you sure you want to delete your account? This action cannot be undone.",e.jsx("br",{}),e.jsx("strong",{children:"Note:"})," You will lose access to all your companies and their data."]})]}),e.jsxs(Ma,{sx:{p:3,gap:1},children:[e.jsx(ee,{onClick:()=>k(!1),variant:"outlined",sx:{borderRadius:2},children:"Cancel"}),e.jsx(ee,{onClick:D,color:"error",variant:"contained",sx:{borderRadius:2},startIcon:e.jsx(ut,{}),children:"Delete Account"})]})]})]})},en=ye("view/all/ledger",async({searchQuery:t,company_id:a,filterState:n,pageNumber:s,type:r,is_deleted:o,limit:p,sortField:c,sortOrder:x},{rejectWithValue:u})=>{var S,f;try{const v=await be.get(`/ledger/view/all?${a!==""?"company_id="+a:""}${t!==""?"&search="+t:""}${r===""||r==="All"?"":"&parent="+r}&is_deleted=${o}&state=${n==="All-States"?"":n}&page_no=${s}&limit=${p}&sortField=${c}&sortOrder=${x==="asc"?"1":"-1"}`);if(console.log("View All Customer API Response",v.data),v.data.success===!0){const j=v.data.data.docs,T=v.data.data.meta;return{customers:j,pageMeta:T}}else return u("Login Failed: No access token recieved.")}catch(v){return u((f=(S=v==null?void 0:v.response)==null?void 0:S.data)==null?void 0:f.message)}}),la=ye("view/all/ledger/with/type",async({company_id:t,customerType:a},{rejectWithValue:n})=>{var s,r;try{const o=await be.get(`/ledger/view/ledgers/with/type?company_id=${t}&type=${a}`);return console.log("response View Customer with Type",o),o.data.success===!0?o.data.data:n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}}),lr=ye("view/all/ledger/with/types",async({company_id:t,customerTypes:a},{rejectWithValue:n})=>{var s,r;try{const o=await be.post(`/ledger/view/ledgers/transaction/type?company_id=${t}`,a);return console.log("View All Customer With Types Response",o),o.data.success===!0?{customerTypes:o.data.data}:n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}}),tn=ye("view/all/ledger/list",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.get(`ledger/view/all/ledgers?company_id=${t}`);return r.data.success===!0?{customersList:r.data.data}:a("Login Failed: No access token recieved.")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),dr=ye("create/customer",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.post("/ledger/create",t);return console.log("Create Customer API Response",r),r.data.success===!0?void 0:a("Login Failed: No access token recieved.")}catch(r){return console.log("Error in createCustomer:",r),a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),Zn=ye("update/customer",async({data:t,id:a},{rejectWithValue:n})=>{var s,r;try{return(await be.put(`/ledger/update/${a}`,t)).data.success===!0?void 0:n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}}),Xn=ye("get/customer",async({id:t,start_date:a,end_date:n},{rejectWithValue:s})=>{var r,o;try{const p=await be.get(`/ledger/view/${t}?start_date=${a}&end_date=${n}`);return console.log("Get Customer API Response",p),p.data.success===!0?{customer:p.data.data[0]}:s("Failed to fetch Customer profile")}catch(p){return s((o=(r=p==null?void 0:p.response)==null?void 0:r.data)==null?void 0:o.message)}}),ei=ye("get/account",async({id:t,start_date:a,end_date:n},{rejectWithValue:s})=>{var r,o;try{const p=await be.get(`/ledger/view/account/${t}?start_date=${a}&end_date=${n}`);return console.log("Get Account API Response",p),p.data.success===!0?{account:p.data.data[0]}:s("Failed to fetch Account profile")}catch(p){return s((o=(r=p==null?void 0:p.response)==null?void 0:r.data)==null?void 0:o.message)}}),an=ye("get/customer/invoices",async({searchQuery:t,company_id:a,customer_id:n,pageNumber:s,type:r,limit:o,sortField:p,sortOrder:c,start_date:x,end_date:u},{rejectWithValue:S})=>{var f,v;try{const j=await be.get(`/ledger/view/invoices/${n}?${a!==""?"company_id="+a:""}${t!==""?"&search="+t:""}${r!=="all"?"&type="+r:""}&start_date=${x}&end_date=${u}&page_no=${s}&limit=${o}&sortField=${p}&sortOrder=${c==="asc"?"1":"-1"}`);if(console.log("Get Customer Invoices API Response",j),j.data.success===!0){const T=j.data.data.docs,k=j.data.data.meta;return{customerInvoices:T,customerInvoicesMeta:k}}else return S("Failed to fetch Customer profile")}catch(j){return S((v=(f=j==null?void 0:j.response)==null?void 0:f.data)==null?void 0:v.message)}}),mx=ye("update/customer/details",async({ledger_details:t,id:a},{rejectWithValue:n})=>{var s,r;try{const o=await be.put(`/ledger/update/details/${a}`,t);return console.log("updateCustomer details response",o),o.data.success===!0?void 0:n("Login Failed: No access token recieved.")}catch(o){return n(((r=(s=o.response)==null?void 0:s.data)==null?void 0:r.message)||"Login failed: Invalid credentials or server error.")}}),Cr=ye("delete/customer",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.delete(`/ledger/delete/${t}`);return console.log("Response Delete Customer",r),r.data.success===!0?void 0:a("Failed to delete Customer profile")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),hl=()=>e.jsxs(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{children:e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(pe,{variant:"circular",width:36,height:36,sx:{mr:2}}),e.jsxs(l,{sx:{flex:1},children:[e.jsx(pe,{variant:"text",width:140,height:14}),e.jsx(pe,{variant:"rectangular",width:100,height:10,sx:{borderRadius:1,mt:.5}})]})]})}),e.jsxs(m,{align:"center",children:[e.jsx(pe,{variant:"text",width:60,height:16,sx:{mx:"auto"}}),e.jsx(pe,{variant:"rectangular",width:80,height:11,sx:{borderRadius:1,mx:"auto",mt:.5}})]}),e.jsx(m,{align:"right",children:e.jsx(pe,{variant:"text",width:80,height:16,sx:{ml:"auto"}})}),e.jsx(m,{align:"right",children:e.jsx(pe,{variant:"text",width:80,height:16,sx:{ml:"auto"}})}),e.jsx(m,{align:"right",children:e.jsx(pe,{variant:"text",width:80,height:16,sx:{ml:"auto"}})}),e.jsx(m,{align:"right",children:e.jsx(l,{sx:{display:"flex",justifyContent:"flex-end",gap:.5},children:e.jsx(pe,{variant:"rectangular",width:28,height:28,sx:{borderRadius:1}})})})]}),$r=ye("create/invoice",async(t,{rejectWithValue:a})=>{var n,s;try{console.log("Data in createInvoice:",t);const r=await be.post("/invoices/create/vouchar",t);return console.log("Response from createInvoice:",r),r.data.success===!0?void 0:a("Invoice creation failed")}catch(r){return console.error("Error in createInvoice:",r),a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),gx=ye("create/invoice/tax",async(t,{rejectWithValue:a})=>{var n,s;try{console.log("Data in createInvoiceWithTAX:",t);const r=await be.post("/invoices/create/vouchar/tax",t);return console.log("Create TAX Invoice api response ",r),r.data.success===!0?void 0:a("Product creation failed")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),rn=ye("view/all/invoices",async({searchQuery:t,company_id:a,type:n,pageNumber:s,limit:r,sortField:o,sortOrder:p,start_date:c,end_date:x},{rejectWithValue:u})=>{var S,f;try{const v=await be.get(`/invoices/view/all/vouchar?company_id=${a}${t!==""?"&search="+t:""}${n!=="All"?"&type="+n:""}&start_date=${c}&end_date=${x}&page_no=${s}&limit=${r}&sortField=${o}&sortOrder=${p==="asc"?"1":"-1"}`);if(console.log("View All Invoices API Response",v),v.data.success===!0){const j=v.data.data.docs,T=v.data.data.meta;return{invoices:j,pageMeta:T}}else return u("Login Failed: No access token recieved.")}catch(v){return u((f=(S=v==null?void 0:v.response)==null?void 0:S.data)==null?void 0:f.message)}}),ti=ye("view/all/invoices/parent/type",async({company_id:t,pageNumber:a,searchQuery:n,type:s,limit:r,sortField:o,sortOrder:p,start_date:c,end_date:x},{rejectWithValue:u})=>{var S,f;try{const v=await be.get(`invoices/view/all/vouchar/party/type?company_id=${t}${n!==""?"&search="+n:""}${s!=="All"?"&type="+s:""}&start_date=${c}&end_date=${x}&page_no=${a}&limit=${r}&sortField=${o}&sortOrder=${p==="asc"?"1":"-1"}`);if(console.log("viewAllInvoicesParentType response",v.data),v.data.success===!0){const j=v.data.data.docs,T=v.data.data.meta;return{expenses:j,expensePageMeta:T}}else return u("Login Failed: No access token recieved.")}catch(v){return u(((f=(S=v.response)==null?void 0:S.data)==null?void 0:f.message)||"Login failed: Invalid credentials or server error.")}}),cr=ye("view/invoices",async({vouchar_id:t,company_id:a},{rejectWithValue:n})=>{var s,r;try{const o=await be.get(`/invoices/get/vouchar/${t}?company_id=${a}`);return console.log("View Invoice API Response",o),o.data.success===!0?{invoiceData:o.data.data}:n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}}),Nr=ye("view/invoices",async({voucher_type:t,company_id:a},{rejectWithValue:n})=>{var s,r;try{const o=await be.get(`/invoices/serial-number/get/current/${t}${a!==""?"?company_id="+a:""}`);return o.data.success===!0?o.data.data:n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}}),Gi=ye("view/all/onvoice/groups",async({searchQuery:t,company_id:a,pageNumber:n,is_deleted:s,limit:r,sortField:o,sortOrder:p},{rejectWithValue:c})=>{var x,u;try{const S=await be.get(`/invoices/view/all/vouchar/type?${a!==""?"company_id="+a:""}&${t!==""?"search="+t:""}&is_deleted=${s}&page_no=${n}&limit=${r}&sortField=${o}&sortOrder=${p==="asc"?"1":"-1"}`);if(S.data.success===!0){const f=S.data.data.docs,v=S.data.data.meta;return{invoiceGroups:f,invoiceGroupPageMeta:v}}else return c("Login Failed: No access token recieved.")}catch(S){return c((u=(x=S==null?void 0:S.response)==null?void 0:x.data)==null?void 0:u.message)}}),Ba=ye("get/all/invoice/groups",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.get(`/invoices/get/all/vouchar/type?company_id=${t}`);return console.log("Response from getAllInvoiceGroups:",r),r.data.success===!0?{invoiceGroups:r.data.data}:a("Failed to fetch Customer profile")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),nn=ye("update/invoice/vouchar",async(t,{rejectWithValue:a})=>{var n,s;try{return(await be.put(`/invoices/update/vouchar/${t.vouchar_id}`,t)).data.success===!0?void 0:a("Invoice update failed")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),bx=ye("update/invoice/tax/vouchar",async(t,{rejectWithValue:a})=>{var n,s;try{console.log("updateTaxInvoice:",t);const r=await be.put(`/invoices/update/vouchar/tax/${t.vouchar_id}`,t);return console.log("Response from updateTaxInvoice:",r),r.data.success===!0?void 0:a("Invoice update failed")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),Ii=ye("get/invoices/pdf",async({vouchar_id:t,company_id:a},{rejectWithValue:n})=>{var s,r;try{const o=await be.get(`/invoices/print/vouchar?vouchar_id=${t}&company_id=${a}`,{responseType:"blob"});if(console.log("Response Get Invoice PDF API",o),o.status===200){const p=o.data;return{pdfUrl:URL.createObjectURL(p)}}else return n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}}),Ti=ye("get/tax/invoices/pdf",async({vouchar_id:t,company_id:a},{rejectWithValue:n})=>{var s,r;try{const o=await be.get(`/invoices/print/vouchar/tax?vouchar_id=${t}&company_id=${a}`,{responseType:"blob"});if(console.log("Response Get Tax Invoice PDF API",o),o.status===200){const p=o.data;return{pdfUrl:URL.createObjectURL(p)}}else return n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}}),Ai=ye("get/receipt/pdf",async({vouchar_id:t,company_id:a},{rejectWithValue:n})=>{var s,r;try{const o=await be.get(`/invoices/print/vouchar/receipt?vouchar_id=${t}&company_id=${a}`,{responseType:"blob"});if(console.log("Response Get Receipt PDF API",o),o.status===200){const p=o.data;return{pdfUrl:URL.createObjectURL(p)}}else return n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}}),Pi=ye("get/payment/pdf",async({vouchar_id:t,company_id:a},{rejectWithValue:n})=>{var s,r;try{const o=await be.get(`/invoices/print/vouchar/payment?vouchar_id=${t}&company_id=${a}`,{responseType:"blob"});if(console.log("Response Get Payment PDF API",o),o.status===200){const p=o.data;return{pdfUrl:URL.createObjectURL(p)}}else return n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}});ye("upload/bill",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.post("/extraction/file/upload",t);return r.data.success===!0?{invoiceData:r.data.data}:a("File upload failed: No data received.")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}});const ur=ye("delete/invoice",async({vouchar_id:t,company_id:a},{rejectWithValue:n})=>{var s,r;try{return(await be.delete(`/invoices/delete/${t}?company_id=${a}`)).data.success===!0?void 0:n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}}),fx={authState:Ve.INITIALIZING,invoices:[],expenses:[],invoiceData:null,editingInvoice:null,invoiceType_id:null,invoiceGroups:[],viewInvoiceGroups:[],invoiceGroupPageMeta:{page:0,limit:0,total:0,unique:[]},expensePageMeta:{page:0,limit:0,total:0,total_expense:0,pending:0,paid:0},pageMeta:{page:0,limit:0,total:0,total_debit:0,total_credit:0},loading:!1,isInvoiceFecthing:!1,error:null,invoicesFilters:{searchQuery:"",type:"Invoices",filterState:"All-States",page:1,startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString(),endDate:new Date().toISOString(),rowsPerPage:10,sortField:"date",sortOrder:"desc"}},ml=oa({name:"invoice",initialState:fx,reducers:{setEditingInvoice:(t,a)=>{t.editingInvoice=a.payload},setInvoiceTypeId:(t,a)=>{t.invoiceType_id=a.payload},setInvoicesFilters:(t,a)=>{t.invoicesFilters={...t.invoicesFilters,...a.payload}}},extraReducers:t=>{t.addCase(rn.pending,a=>{a.error=null,a.loading=!0}).addCase(rn.fulfilled,(a,n)=>{a.invoices=n.payload.invoices,a.pageMeta=n.payload.pageMeta,a.loading=!1}).addCase(rn.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(ti.pending,a=>{a.error=null,a.loading=!0}).addCase(ti.fulfilled,(a,n)=>{a.expenses=n.payload.expenses,a.expensePageMeta=n.payload.expensePageMeta,a.loading=!1}).addCase(ti.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(cr.pending,a=>{a.error=null,a.isInvoiceFecthing=!0}).addCase(cr.fulfilled,(a,n)=>{a.invoiceData=n.payload.invoiceData,a.isInvoiceFecthing=!1}).addCase(cr.rejected,(a,n)=>{a.error=n.payload,a.isInvoiceFecthing=!1}).addCase(nn.pending,a=>{a.error=null,a.loading=!0}).addCase(nn.fulfilled,a=>{a.loading=!1}).addCase(nn.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Gi.pending,a=>{a.error=null,a.loading=!0}).addCase(Gi.fulfilled,(a,n)=>{a.viewInvoiceGroups=n.payload.invoiceGroups,a.invoiceGroupPageMeta=n.payload.invoiceGroupPageMeta,a.loading=!1}).addCase(Gi.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Ba.pending,a=>{a.error=null,a.loading=!0}).addCase(Ba.fulfilled,(a,n)=>{a.invoiceGroups=n.payload.invoiceGroups,a.loading=!1}).addCase(Ba.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(ur.pending,a=>{a.error=null,a.loading=!0}).addCase(ur.fulfilled,a=>{a.loading=!1}).addCase(ur.rejected,(a,n)=>{a.error=n.payload,a.loading=!1})}}),{setEditingInvoice:vm,setInvoiceTypeId:Ca,setInvoicesFilters:$a}=ml.actions,yx=ml.reducer,Mi=t=>e.jsx(ho,{sx:{color:"#fff",zIndex:a=>a.zIndex.drawer+1,backdropFilter:"blur(8px)"},open:t.isLoading,children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx(bt,{color:"inherit",size:60,thickness:4}),e.jsx(i,{variant:"h6",sx:{fontWeight:600},children:t.text}),e.jsx(St,{sx:{width:300,height:8,borderRadius:4,"& .MuiLinearProgress-bar":{borderRadius:4}}})]})}),jx=["Cash","Bank Transfer","Credit Card","Debit Card","UPI"],vx=({open:t,onClose:a})=>{const n=we(),s=Fe(),{current_company_id:r}=Ce(b=>b.auth),o=yt(n.breakpoints.down("sm")),[p,c]=g.useState(!1),[x,u]=g.useState({}),[S,f]=g.useState([]),[v,j]=g.useState([{id:"",name:"",type:"To",amount:""},{id:"",name:"",type:"From",amount:""}]),[T,k]=g.useState({date:new Date().toISOString(),notes:"",transactionNumber:"Auto-Gen",paymentMethod:"Cash"}),B=()=>{const b=v.filter(C=>C.type==="To").reduce((C,$)=>C+(Number($.amount)||0),0),M=v.filter(C=>C.type==="From").reduce((C,$)=>C+(Number($.amount)||0),0),W=b-M;return{toTotal:b,fromTotal:M,difference:W}},_=()=>{const b={};v.length<2&&(b.entries="At least 2 entries are required"),v.forEach((W,C)=>{W.name||(b[`entry_${C}_name`]="Ledger is required"),(!W.amount||Number(W.amount)<=0)&&(b[`entry_${C}_amount`]="Amount must be greater than 0")});const{difference:M}=B();return Math.abs(M)>.01&&(b.balance='Total "To" amount must equal total "From" amount'),T.date||(b.date="Date is required"),T.notes&&T.notes.length>500&&(b.notes="Notes must be less than 500 characters"),u(b),Object.keys(b).length===0};function K(b,M){j(W=>W.map((C,$)=>$===b?{...C,...M}:C)),M.name&&u(W=>{const C={...W};return delete C[`entry_${b}_name`],C}),M.amount&&u(W=>{const C={...W};return delete C[`entry_${b}_amount`],delete C.balance,C})}function w(){const{difference:b}=B(),M={id:"",name:"",type:b<=0?"To":"From",amount:b!==0?Math.abs(b).toFixed(2):""};j(W=>[...W,M])}function N(b){if(v.length<=2){Z.error("At least 2 entries are required");return}j(M=>M.filter((W,C)=>C!==b)),u(M=>{const W={...M};return delete W[`entry_${b}_name`],delete W[`entry_${b}_amount`],W})}const R=(b,M)=>{k(W=>({...W,[b]:M})),x[b]&&u(W=>({...W,[b]:""}))},L=()=>{k({date:new Date().toISOString(),notes:"",transactionNumber:"",paymentMethod:""}),j([{id:"",name:"",type:"To",amount:""},{id:"",name:"",type:"From",amount:""}]),u({})},D=async()=>{var C,$;if(!_()){Z.error("Please fix all errors before submitting");return}if(!P()){Z.error("Please fix all errors before submitting");return}c(!0);const b=v.map((G,ge)=>({vouchar_id:"",ledger:G.name,ledger_id:G.id,amount:G.type==="To"?Number(G.amount):-Number(G.amount),order_index:ge})),M=B().toTotal,W={voucher_type:"Journal",voucher_type_id:"e7fc148d-6d4d-4bf7-9429-367b51606765",date:T.date.slice(0,10),voucher_number:T.transactionNumber,party_name:((C=b[0])==null?void 0:C.ledger)||"",party_name_id:(($=b[0])==null?void 0:$.ledger_id)||"",narration:T.notes,company_id:r||"",reference_number:"",reference_date:"",place_of_supply:"",mode_of_transport:"",vehicle_number:"",payment_mode:T.paymentMethod,due_date:"",paid_amount:M,total:M,discount:0,total_amount:M,total_tax:0,additional_charge:0,roundoff:0,grand_total:M,accounting:b,items:[]};console.log("Journal Entry Data",W),s($r(W)).then(()=>{c(!1),L(),a(),Z.success("Journal entry recorded successfully!")}).catch(G=>{c(!1),Z.error(G||"Failed to record journal entry. 🚫")})},P=()=>{const{difference:b}=B();return v.length>=2&&Math.abs(b)<.01&&v.every(M=>M.name&&Number(M.amount)>0)&&T.date},A=async()=>{t&&s(la({company_id:r||"",customerType:""})).then(b=>{if(b.meta.requestStatus==="fulfilled"){const M=b.payload;f(M.filter(W=>!["Sales","Purchases"].includes(W.ledger_name)).map(W=>({name:W.ledger_name,id:W._id})))}}).catch(b=>{Z.error(b||"An unexpected error occurred. Please try again later.")})},O=async()=>{s(Nr({company_id:r||"",voucher_type:"Journal"})).then(b=>{b.meta.requestStatus==="fulfilled"&&R("transactionNumber",b.payload.current_number||"")}).catch(b=>{Z.error(b||"An unexpected error occurred. Please try again later.")})};g.useEffect(()=>{t&&(async()=>{try{await A(),await O()}catch(M){console.error("Failed to load initial data:",M),Z.error("Failed to load data. Please refresh the page.")}})()},[s,r,t]);const{toTotal:y,fromTotal:F,difference:h}=B();return e.jsx(Pt,{dateAdapter:Lt,children:e.jsxs(Mt,{anchor:"right",PaperProps:{sx:{width:{xs:"100%",sm:600,md:750},backgroundColor:n.palette.background.default,backgroundImage:"none"}},sx:{"& .MuiBackdrop-root":{backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)"},zIndex:1300},open:t,onClose:a,transitionDuration:400,children:[e.jsxs(l,{sx:{px:3,py:2.5,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${n.palette.divider}`,background:`linear-gradient(135deg, ${d(n.palette.primary.main,.08)} 0%, ${d(n.palette.success.main,.08)} 100%)`,position:"sticky",top:0,zIndex:100,backdropFilter:"blur(20px)"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(l,{sx:{width:40,height:40,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",background:`linear-gradient(135deg, ${n.palette.primary.main} 0%, ${n.palette.success.main} 100%)`,boxShadow:`0 4px 12px ${d(n.palette.primary.main,.3)}`},children:e.jsx(on,{sx:{color:"white",fontSize:24}})}),e.jsxs(l,{children:[e.jsx(i,{variant:"h6",fontWeight:700,sx:{lineHeight:1.2},children:"Journal Entry"}),e.jsx(i,{variant:"caption",color:"text.secondary",sx:{display:"flex",alignItems:"center",gap:.5,mt:.5},children:e.jsx(ve,{label:T.transactionNumber,size:"small",sx:{height:20,fontSize:"0.7rem",fontWeight:600,bgcolor:d(n.palette.primary.main,.1),color:n.palette.primary.main}})})]})]}),e.jsx(le,{title:"Close",arrow:!0,placement:"left",children:e.jsx(ke,{onClick:a,sx:{backgroundColor:d(n.palette.error.main,.1),color:n.palette.error.main,"&:hover":{backgroundColor:d(n.palette.error.main,.2),transform:"rotate(90deg)"},transition:"all 0.3s ease"},children:e.jsx(ct,{})})})]}),e.jsx(l,{sx:{flex:1,overflow:"auto",px:3,pb:3,"&::-webkit-scrollbar":{width:6},"&::-webkit-scrollbar-track":{backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{backgroundColor:d(n.palette.primary.main,.2),borderRadius:3,"&:hover":{backgroundColor:d(n.palette.primary.main,.3)}}},children:e.jsxs(l,{children:[e.jsxs(ne,{elevation:0,sx:{p:3,mt:2,borderRadius:2,border:`1px solid ${n.palette.divider}`,background:n.palette.background.paper,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:`linear-gradient(90deg, ${n.palette.primary.main} 0%, ${n.palette.success.main} 100%)`}},children:[e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(xt,{sx:{color:n.palette.primary.main,fontSize:24}}),e.jsx(i,{variant:"h6",fontWeight:700,children:"Journal Entries"})]})}),x.entries&&e.jsx(rt,{severity:"error",sx:{mb:2},children:x.entries}),e.jsx(J,{spacing:2,children:v.map((b,M)=>e.jsxs(ne,{elevation:0,sx:{p:2.5,border:`1px solid ${n.palette.divider}`,borderRadius:2,transition:"all 0.2s","&:hover":{boxShadow:2,borderColor:b.type==="To"?n.palette.error.main:n.palette.success.main},color:b.type==="To"?n.palette.error.main:n.palette.success.main,bgcolor:d(b.type==="To"?n.palette.error.main:n.palette.success.main,.05),position:"relative"},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(i,{variant:"body2",color:"text.secondary",fontWeight:600,children:["Entry #",M+1]}),v.length>2&&e.jsx(l,{sx:{position:"absolute",top:10,right:10},children:e.jsx(le,{title:"Remove entry",children:e.jsx(ke,{onClick:()=>N(M),sx:{border:`1px solid ${n.palette.error.main}`,color:n.palette.error.main,"&:hover":{bgcolor:d(n.palette.error.main,.1)}},children:e.jsx(ut,{})})})})]}),e.jsxs(l,{sx:{display:"flex",gap:2,alignItems:"center",justifyContent:"space-between",width:"100%"},children:[e.jsxs(l,{sx:{flex:1,display:"flex",flexDirection:"column",gap:2},children:[e.jsx(at,{options:S,getOptionLabel:W=>W.name,value:S.find(W=>W.name===b.name)||void 0,onChange:(W,C)=>{K(M,{name:(C==null?void 0:C.name)||"",id:(C==null?void 0:C.id)||""})},popupIcon:null,clearIcon:null,disableClearable:!0,renderInput:W=>e.jsx(X,{...W,placeholder:"Select Account",error:!!x[`entry_${M}_name`],helperText:x[`entry_${M}_name`],size:"small",InputProps:{...W.InputProps,endAdornment:null,startAdornment:e.jsxs(e.Fragment,{children:[W.InputProps.startAdornment,e.jsx(se,{position:"start",children:e.jsx(po,{sx:{fontSize:18,color:"text.secondary"}})})]})},sx:{"& .MuiOutlinedInput-root":{bgcolor:"background.default",borderRadius:1}}})}),e.jsx(l,{children:e.jsx(X,{fullWidth:!0,label:"Amount",type:"number",placeholder:"0.00",value:b.amount,onChange:W=>{const C=W.target.value;(C===""||Number(C)>=0)&&K(M,{amount:C})},error:!!x[`entry_${M}_amount`],helperText:x[`entry_${M}_amount`],size:"small",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(i,{variant:"body1",fontWeight:700,children:"INR"})}),endAdornment:e.jsx(se,{position:"end",children:e.jsx(i,{variant:"body1",fontWeight:700,children:"Amount"})})},sx:{"& .MuiOutlinedInput-root":{bgcolor:"background.default",fontWeight:700,borderRadius:1},"& input":{fontWeight:700}}})})]}),e.jsx(l,{sx:{display:"flex",alignItems:"center",height:"100%"},children:e.jsxs(ee,{variant:"outlined",onClick:()=>{K(M,{type:b.type==="To"?"From":"To"})},sx:{minWidth:100,minHeight:80,borderRadius:2,borderWidth:2,borderColor:b.type==="To"?n.palette.error.main:n.palette.success.main,color:b.type==="To"?n.palette.error.main:n.palette.success.main,bgcolor:d(b.type==="To"?n.palette.error.main:n.palette.success.main,.05),display:"flex",flexDirection:"column",gap:.5,textTransform:"none",fontWeight:700,fontSize:"1rem","&:hover":{borderWidth:2,borderColor:b.type==="To"?n.palette.error.main:n.palette.success.main,bgcolor:d(b.type==="To"?n.palette.error.main:n.palette.success.main,.1)}},children:[e.jsx(i,{variant:"caption",sx:{fontSize:"0.7rem"},children:"TYPE"}),e.jsx(i,{variant:"h6",fontWeight:700,children:b.type})]})})]})]},M))}),e.jsxs(l,{sx:{mt:3,p:2,borderRadius:2,bgcolor:"background.default",border:`1px solid ${n.palette.divider}`},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(i,{variant:"subtitle1",fontWeight:700,children:"Balance Summary"}),e.jsx(ee,{variant:"contained",startIcon:e.jsx(xr,{}),onClick:w,size:"small",sx:{textTransform:"none"},children:"Add Entry"})]}),e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:3},children:[e.jsxs(l,{sx:{p:2,borderRadius:2,bgcolor:d(n.palette.success.main,.05),border:`1px solid ${d(n.palette.success.main,.2)}`},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(l,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:n.palette.success.main}}),e.jsx(i,{variant:"caption",fontWeight:600,color:"text.secondary",children:"TOTAL TO (DEBIT)"})]}),e.jsxs(i,{variant:"h6",fontWeight:700,color:"success.main",children:["₹ ",y.toFixed(2)]})]}),e.jsxs(l,{sx:{p:2,borderRadius:2,bgcolor:d(n.palette.info.main,.05),border:`1px solid ${d(n.palette.info.main,.2)}`},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(l,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:n.palette.info.main}}),e.jsx(i,{variant:"caption",fontWeight:600,color:"text.secondary",children:"TOTAL FROM (CREDIT)"})]}),e.jsxs(i,{variant:"h6",fontWeight:700,color:"info.main",children:["₹ ",F.toFixed(2)]})]})]}),e.jsxs(l,{sx:{mt:2,p:2,borderRadius:2,bgcolor:Math.abs(h)<.01?d(n.palette.success.main,.1):d(n.palette.warning.main,.1),border:`1px solid ${Math.abs(h)<.01?n.palette.success.main:n.palette.warning.main}`},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{variant:"body1",fontWeight:700,children:"DIFFERENCE:"}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxs(i,{variant:"h6",fontWeight:700,color:Math.abs(h)<.01?"success.main":"warning.main",children:["₹ ",Math.abs(h).toFixed(2)]}),Math.abs(h)<.01?e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:.5,color:"success.main"},children:[e.jsx(pt,{fontSize:"small"}),e.jsx(i,{variant:"caption",fontWeight:600,children:"Balanced"})]}):e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:.5,color:"warning.main"},children:[e.jsx(As,{fontSize:"small"}),e.jsx(i,{variant:"caption",fontWeight:600,children:"Not Balanced"})]})]})]}),x.balance&&e.jsx(rt,{severity:"error",sx:{mt:1},children:x.balance})]})]})]}),e.jsxs(ne,{elevation:0,sx:{p:2,mt:3,borderRadius:2,border:`1px solid ${n.palette.divider}`,background:n.palette.background.paper},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:3},children:[e.jsx(eo,{sx:{color:n.palette.success.main,fontSize:20}}),e.jsx(i,{variant:"subtitle1",fontWeight:700,children:"Additional Details"})]}),e.jsxs(J,{spacing:3,children:[e.jsxs(J,{direction:o?"column":"row",spacing:2,children:[e.jsx(Xe,{value:new Date(T.date),format:"dd-MM-yyyy",onChange:b=>R("date",(b==null?void 0:b.toISOString())||""),slotProps:{textField:{fullWidth:!0,label:"Transaction Date",error:!!x.date,helperText:x.date,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(eo,{sx:{color:n.palette.primary.main}})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,"&:hover":{boxShadow:`0 0 0 4px ${d(n.palette.primary.main,.08)}`},"&.Mui-focused":{boxShadow:`0 0 0 4px ${d(n.palette.primary.main,.12)}`}},"& .MuiInputAdornment-positionEnd":{mr:.5}}}}}),e.jsx(X,{fullWidth:!0,select:!0,label:"Payment Method",value:T.paymentMethod,onChange:b=>R("paymentMethod",b.target.value),error:!!x.paymentMethod,helperText:x.paymentMethod,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(sn,{sx:{color:n.palette.primary.main}})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,"&:hover":{boxShadow:`0 0 0 4px ${d(n.palette.primary.main,.05)}`},"&.Mui-focused":{boxShadow:`0 0 0 4px ${d(n.palette.primary.main,.1)}`}}},children:jx.map(b=>e.jsx(he,{value:b,children:b},b))})]}),e.jsx(X,{fullWidth:!0,multiline:!0,rows:4,label:"Narration / Notes",placeholder:"Add description or notes for this journal entry (optional)",value:T.notes,onChange:b=>R("notes",b.target.value),error:!!x.notes,helperText:x.notes||`${T.notes.length}/500 characters`,sx:{"& .MuiOutlinedInput-root":{borderRadius:1,"&:hover":{boxShadow:`0 0 0 4px ${d(n.palette.primary.main,.05)}`},"&.Mui-focused":{boxShadow:`0 0 0 4px ${d(n.palette.primary.main,.1)}`}}}})]})]})]})}),e.jsx(l,{sx:{p:3,borderTop:`1px solid ${n.palette.divider}`,background:n.palette.background.paper,position:"sticky",bottom:0,zIndex:100},children:e.jsx(J,{direction:o?"column":"row",spacing:2,justifyContent:"space-between",children:e.jsx(ee,{variant:"outlined",onClick:D,disabled:p||!P(),fullWidth:o,sx:{textTransform:"none",borderRadius:1,px:4,py:1.5,fontWeight:700,border:`2px solid ${n.palette.primary.main}`,background:`linear-gradient(135deg, ${n.palette.primary.light} 0%, ${n.palette.success.light} 100%)`,boxShadow:`0 4px 12px ${d(n.palette.primary.main,.4)}`,"&:hover":{background:`linear-gradient(135deg, ${n.palette.primary.main} 0%, ${n.palette.success.main} 100%)`,boxShadow:`0 6px 16px ${d(n.palette.primary.main,.5)}`,transform:"translateY(-2px)"},"&:disabled":{background:n.palette.action.disabledBackground,color:n.palette.action.disabled},transition:"all 0.3s ease"},children:p?"Recording Journal...":"Record Journal Entry"})})}),e.jsx(Mi,{isLoading:p,text:"Recording Journal Entry..."})]})})},gl=({open:t,onClose:a,entity:n,type:s,bankAccount:r})=>{const[o,p]=g.useState(!1),[c,x]=g.useState({}),[u,S]=g.useState([]),[f,v]=g.useState(null),j=we(),[T,k]=g.useState({accountSource:r.ledger_name||"Cash",accountSourceId:r._id||"",date:new Date().toISOString(),notes:"",sendSms:!1,sendEmail:!1,transactionNumber:"Auto-Gen",cusId:"",cusName:"",amount:0}),B=Fe(),{current_company_id:_}=Ce(h=>h.auth),{invoiceType_id:K}=Ce(h=>h.invoice);console.log("Entity",n);const w=s==="receipt",N=()=>{const h={};return T.cusName===""&&(h.cusName="Please select a customer"),T.date||(h.date="Date is required"),T.notes&&T.notes.length>500&&(h.notes="Notes must be less than 500 characters"),T.amount||(h.notes="Amount is required."),x(h),Object.keys(h).length===0},R=(h,b)=>{k(M=>({...M,[h]:b})),c[h]&&x(M=>({...M,[h]:""}))},L=()=>{k({accountSource:r.ledger_name||"Cash",accountSourceId:r._id||"",date:new Date().toISOString(),notes:"",sendSms:!1,sendEmail:!1,transactionNumber:"RCP-2025-0123",cusId:"",cusName:"",amount:0}),v(null),x({})},D=async()=>{if(N()){p(!0);try{const h=[{vouchar_id:"",ledger:r.ledger_name??"",ledger_id:r._id??"",amount:w?T.amount:-T.amount,order_index:0},{vouchar_id:"",ledger:(f==null?void 0:f.name)??"",ledger_id:(f==null?void 0:f._id)??"",amount:w?-T.amount:T.amount,order_index:1}],b={voucher_type:w?"Receipt":"Payment",voucher_type_id:K||"",date:T.date.slice(0,10),voucher_number:T.transactionNumber,party_name:r.ledger_name,party_name_id:r._id??"",narration:T.notes,company_id:_||"",reference_number:"",reference_date:"",place_of_supply:"",mode_of_transport:"",vehicle_number:"",payment_mode:"",due_date:"",paid_amount:0,total:T.amount,discount:0,total_amount:T.amount,total_tax:0,additional_charge:0,roundoff:0,grand_total:T.amount,accounting:h,items:[]};B($r(b)).then(()=>{p(!1),L(),x({}),Z.success(`${w?"Receipt":"Payment"} added successfully!`)}).catch(M=>{p(!1),Z.error(M||"Failed to add transaction. 🚫")})}catch{Z.error("Failed to add transaction. Please try again.")}finally{p(!1)}}},P=h=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(h),A=h=>h>0?"#10b981":h<0?"#ef4444":"#6b7280",O=h=>h>0?e.jsx(na,{sx:{fontSize:16}}):h<0?e.jsx(wc,{sx:{fontSize:16}}):e.jsx(e.Fragment,{}),y=w?"#10b981":"#ef4444",F=w?"#d1fae5":"#fee2e2";return g.useEffect(()=>{t&&n!==null&&B(la({company_id:_||"",customerType:n==="Accounts"?"Customers":"Accounts"})).then(h=>{if(h.meta.requestStatus==="fulfilled"){const b=h.payload;S(b.map(M=>({id:M._id,name:M.ledger_name,closingBalance:M.total_amount})))}}).catch(h=>{Z.error(h||"An unexpected error occurred. Please try again later.")}),s&&B(Nr({company_id:_||"",voucher_type:w?"Receipt":"Payment"})).then(h=>{h.meta.requestStatus==="fulfilled"&&k({...T,transactionNumber:h.payload.current_number||""})}).catch(h=>{Z.error(h||"An unexpected error occurred. Please try again later.")})},[B,_,n,w,s,t]),e.jsx(Pt,{dateAdapter:Lt,children:e.jsxs(Mt,{anchor:"right",PaperProps:{sx:{width:{xs:"100%",sm:650,md:750},backgroundColor:"#fafafa"}},open:t,onClose:()=>{a(),L(),v(null),S([]),x({})},children:[e.jsx(l,{sx:{px:3,py:2.5,background:`linear-gradient(135deg, ${y} 0%, ${y}dd 100%)`,color:"white",position:"sticky",top:0,zIndex:100,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:e.jsxs(J,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(ke,{onClick:()=>a(),sx:{color:"white","&:hover":{bgcolor:"rgba(255,255,255,0.1)"}},children:e.jsx(ct,{})}),e.jsxs(l,{children:[e.jsx(i,{variant:"h5",fontWeight:700,sx:{mb:.5},children:w?"Receipt Entry":"Payment Entry"}),e.jsx(ve,{label:`#${T.transactionNumber}`,size:"small",sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white",fontWeight:600}})]})]}),e.jsxs(l,{sx:{textAlign:"right"},children:[e.jsx(i,{variant:"caption",sx:{opacity:.9},children:"Total Amount"}),e.jsx(i,{variant:"h5",fontWeight:700,children:P(T.amount)})]})]})}),e.jsxs(l,{sx:{flex:1,overflow:"auto",p:3},children:[e.jsx(ze,{in:!0,timeout:300,children:e.jsxs(Ne,{elevation:0,sx:{mb:3,borderRadius:1,border:"1px solid #e5e7eb",overflow:"hidden"},children:[e.jsx(l,{sx:{background:`linear-gradient(135deg, ${y}15 0%, ${y}08 100%)`,p:2.5},children:e.jsxs(J,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx($e,{sx:{bgcolor:y,width:48,height:48},children:n==="Accounts"?e.jsx(xt,{}):e.jsx(At,{})}),e.jsxs(l,{sx:{flex:1},children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:n==="Accounts"?w?"Receiving in":"Payment From":w?"Receiving from":"Payment to"}),e.jsx(i,{variant:"h6",fontWeight:700,children:r.ledger_name})]}),e.jsxs(l,{sx:{textAlign:"right"},children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:"Available Balance"}),e.jsx(i,{variant:"h6",fontWeight:700,color:"primary",children:P(Math.abs(r.balance))})]})]})}),e.jsx(Me,{children:e.jsx(Xe,{value:new Date(T.date),format:"dd-MM-yyyy",onChange:h=>R("date",(h==null?void 0:h.toISOString())||""),slotProps:{textField:{fullWidth:!0,label:"Transaction Date",error:!!c.date,helperText:c.date,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ps,{fontSize:"small"})})}}}})})]})}),e.jsx(ze,{in:!0,timeout:400,children:e.jsxs(ne,{elevation:0,sx:{p:3,mb:3,borderRadius:1,border:"2px solid #e5e7eb",transition:"all 0.3s ease"},children:[e.jsx(J,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:2.5},children:e.jsx(i,{variant:"h6",fontWeight:700,children:n==="Accounts"?w?"Receive From":"Pay To":w?"Receiving in":"Payment from"})}),e.jsxs(J,{spacing:2.5,children:[e.jsx(at,{options:u,getOptionLabel:h=>h.name,value:f,onChange:(h,b)=>{v(b),c.customer&&x(M=>({...M,customer:""}))},renderInput:h=>e.jsx(X,{...h,label:`Select ${n}`,placeholder:`Search and select ${n}...`,error:!!c.customer,helperText:c.customer,InputProps:{...h.InputProps,startAdornment:e.jsxs(e.Fragment,{children:[e.jsx(se,{position:"start",children:e.jsx(qa,{color:"action"})}),h.InputProps.startAdornment]})}}),renderOption:(h,b)=>e.jsx("li",{...h,children:e.jsxs(J,{direction:"row",justifyContent:"space-between",alignItems:"center",width:"100%",spacing:1,children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx($e,{sx:{width:32,height:32,bgcolor:"#3b82f6"},children:n==="Customers"?e.jsx(xt,{}):e.jsx(At,{})}),e.jsx(i,{fontWeight:500,children:b.name})]}),e.jsx(ve,{label:P(Math.abs(b.closingBalance)),size:"small",icon:O(b.closingBalance)??e.jsx(e.Fragment,{}),sx:{bgcolor:`${A(b.closingBalance)}15`,color:A(b.closingBalance),fontWeight:600}})]})})}),e.jsx(X,{fullWidth:!0,type:"number",label:"Amount",placeholder:"0.00",value:T.amount,onChange:h=>{k({...T,amount:Number(h.target.value)}),c.amount&&x(b=>({...b,amount:""}))},error:!!c.amount,helperText:c.amount,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ee,{color:"action"})})}})]})]})}),e.jsx(Ye,{in:!0,timeout:500,children:e.jsx(ne,{elevation:0,sx:{mb:3,borderRadius:1,border:"1px solid #e5e7eb",overflow:"hidden"},children:e.jsx(l,{sx:{p:3,borderTop:"2px solid #e5e7eb",background:`linear-gradient(135deg, ${F} 0%, white 100%)`},children:e.jsxs(J,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(l,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:"Total Amount"}),e.jsx(i,{variant:"h4",fontWeight:800,color:y,children:P(T.amount??0)})]}),e.jsx(ve,{label:w?"Money In":"Money Out",color:w?"success":"error",sx:{fontWeight:700,px:2,py:2.5}})]})})})}),e.jsx(X,{fullWidth:!0,multiline:!0,rows:3,label:"Additional Notes",placeholder:"Enter any additional notes or remarks...",value:T.notes,onChange:h=>R("notes",h.target.value),error:!!c.notes,helperText:c.notes||`${T.notes.length}/500 characters`,sx:{mb:3,"& .MuiOutlinedInput-root":{bgcolor:"white"}}}),e.jsxs(ne,{elevation:0,sx:{p:2.5,border:"1px solid #e5e7eb",borderRadius:1,bgcolor:"#fafafa"},children:[e.jsxs(J,{direction:"row",spacing:1,alignItems:"center",sx:{mb:2},children:[e.jsx(ht,{fontSize:"small",color:"action"}),e.jsx(i,{variant:"body2",fontWeight:600,color:"text.secondary",children:"Notification Options (Coming Soon)"})]}),e.jsxs(J,{spacing:1.5,children:[e.jsx(jt,{control:e.jsx(kt,{disabled:!0,checked:T.sendSms,onChange:h=>R("sendSms",h.target.checked)}),label:e.jsxs(J,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(Ms,{fontSize:"small",color:"action"}),e.jsx(i,{variant:"body2",children:"Send SMS notifications"})]})}),e.jsx(jt,{control:e.jsx(kt,{disabled:!0,checked:T.sendEmail,onChange:h=>R("sendEmail",h.target.checked)}),label:e.jsxs(J,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(Bt,{fontSize:"small",color:"action"}),e.jsx(i,{variant:"body2",children:"Send email receipts"})]})})]})]})]}),e.jsx(l,{sx:{p:3,borderTop:"2px solid #e5e7eb",backgroundColor:"white",boxShadow:"0 -4px 12px rgba(0,0,0,0.05)"},children:e.jsxs(J,{direction:"row",spacing:2,children:[e.jsx(ee,{variant:"outlined",onClick:L,disabled:o,size:"large",sx:{textTransform:"none",fontWeight:600,borderRadius:1},children:"Reset"}),e.jsx(ee,{variant:"contained",onClick:D,disabled:o||T.cusName==="",size:"large",startIcon:o?e.jsx(bt,{className:"animate-spin"}):e.jsx(da,{}),sx:{px:4,py:.5,borderRadius:1,background:w?"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",fontSize:"1.1rem",fontWeight:600,textTransform:"none",minWidth:200,boxShadow:j.shadows[4],"&:hover":{transform:"translateY(-2px)",boxShadow:j.shadows[8]},"&:disabled":{background:j.palette.action.disabledBackground,transform:"none",boxShadow:"none"}},children:o?"Recording...":`Record ${w?"Receipt":"Payment"}`})]})}),e.jsx(Mi,{isLoading:o,text:"Recording..."})]})})},Sx=({cus:t,onDelete:a,onEdit:n,onView:s,index:r})=>{var F,h,b,M;const o=we(),p=Fe(),[c,x]=g.useState(!1),[u,S]=g.useState(!1),[f,v]=g.useState(!1),{invoiceGroups:j}=Ce(W=>W.invoice),[T,k]=g.useState(!1),[B,_]=g.useState(null),[K,w]=Ft.useState(null),[N,R]=g.useState({_id:"",ledger_name:"",balance:0}),L=!!K,D=W=>{w(W.currentTarget)},P=()=>{w(null)},A=()=>{a((t==null?void 0:t._id)??""),x(!1)},O=W=>W?W.split(" ").map(C=>C.charAt(0)).join("").toUpperCase().slice(0,2):"",y=W=>{const C=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"],G=(W||"").length%C.length;return C[G]};return e.jsxs(e.Fragment,{children:[e.jsx(ze,{in:!0,timeout:300+r*100,children:e.jsxs(xe,{onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),sx:{"& .MuiTableCell-root":{padding:"8px 16px"},cursor:"pointer",width:"100%",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:T?"translateY(-2px)":"translateY(0)",boxShadow:T?`0 8px 25px ${d(o.palette.primary.main,.15)}`:"none","&:hover":{bgcolor:d(o.palette.primary.main,.02)},borderLeft:`4px solid ${T?o.palette.primary.main:"transparent"}`},onClick:()=>s(t),children:[e.jsx(m,{sx:{pl:3,pr:1},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start"},children:[e.jsx($e,{sx:{width:36,height:36,mr:2,objectFit:"contain",bgcolor:y(t.ledger_name),fontSize:".9rem",fontWeight:700,boxShadow:`0 4px 12px ${d(y(t.ledger_name),.3)}`,transition:"all 0.3s ease",transform:T?"scale(1.1)":"scale(1)"},src:typeof(t==null?void 0:t.image)=="string"?t.image:(t==null?void 0:t.image)instanceof File?URL.createObjectURL(t.image):"",children:O(t.ledger_name)}),e.jsxs(l,{sx:{flex:1},children:[e.jsx(i,{variant:"body1",sx:{fontWeight:600,color:o.palette.text.primary,mb:.5,transition:"color 0.3s ease"},children:t.ledger_name}),t.alias&&e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1},children:e.jsx(ve,{icon:e.jsx(ya,{}),label:t.alias,size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:"20px",borderRadius:"10px",bgcolor:d(o.palette.primary.main,.08),borderColor:d(o.palette.primary.main,.2),color:o.palette.primary.main}})})]})]})}),e.jsxs(m,{align:"left",sx:{px:1},children:[e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[((F=t==null?void 0:t.phone)==null?void 0:F.number)&&e.jsxs(i,{variant:"body1",sx:{fontWeight:700,fontSize:".9rem",color:o.palette.text.primary},children:[e.jsx(ua,{fontSize:"small",sx:{verticalAlign:"middle",fontSize:".9rem",mr:1}}),(h=t.phone)==null?void 0:h.code," ",((b=t==null?void 0:t.phone)==null?void 0:b.number)||""]}),t.email&&e.jsxs(i,{variant:"body1",sx:{fontWeight:700,fontSize:".8rem",color:o.palette.text.primary},children:[e.jsx(Bt,{sx:{mr:.5,fontSize:".9rem",color:o.palette.text.secondary}}),t.email||""]})]}),!t.email&&!((M=t.phone)!=null&&M.number)&&e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:.5}})]}),e.jsx(m,{align:"center",sx:{px:1},children:e.jsxs(i,{variant:"body1",sx:{fontWeight:600,color:o.palette.text.secondary},children:[t.mailing_state,t.mailing_country&&t.mailing_state&&`, ${t.mailing_country}`,t.mailing_country&&!t.mailing_state&&`${t.mailing_country}`]})}),e.jsx(m,{align:"center",children:e.jsxs(i,{variant:"body1",sx:{fontWeight:700,color:t.total_amount===0?"":t.total_amount<0?o.palette.success.main:o.palette.error.main},children:[t.total_amount===0?"-":Math.abs(t.total_amount),t.total_amount===0?"":t.total_amount>0?" DR":" CR"]})}),e.jsx(m,{align:"center",children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx(Ut,{sx:{mr:.5,fontSize:".9rem",color:o.palette.text.secondary}}),e.jsx(i,{variant:"body1",sx:{fontWeight:700,color:o.palette.text.primary},children:Nt(t.created_at)||"N/A"})]})}),e.jsx(m,{align:"right",children:e.jsx(Ye,{appear:!0,in:!0,timeout:200,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:.5,justifyContent:"flex-end"},children:[e.jsx(xn,{"data-screenshot":"toggle-mode",onClick:W=>{W.stopPropagation(),D(W)},disableRipple:!0,size:"small","aria-label":"Open notifications","aria-controls":L?"notifications-menu":void 0,"aria-haspopup":"true","aria-expanded":L?"true":void 0,children:e.jsx(ln,{})}),e.jsxs(Mr,{anchorEl:K,id:"notifications-menu",open:L,onClose:P,onClick:W=>{W.stopPropagation(),P()},slotProps:{paper:{variant:"outlined",elevation:0,sx:{my:"4px",maxHeight:"400px",overflowY:"auto",borderColor:o.palette.primary.main}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[e.jsxs(he,{sx:{display:"flex",alignItems:"center",gap:1,py:.5},onClick:W=>{P(),s(t),W.stopPropagation()},children:[e.jsx(Ha,{fontSize:"small",sx:{color:o.palette.info.main}}),e.jsx(i,{fontSize:"small",variant:"subtitle1",sx:{fontWeight:"bold",color:o.palette.info.main},children:"View"})]}),e.jsxs(he,{sx:{display:"flex",alignItems:"center",gap:1,py:.5},onClick:W=>{P(),n(t),W.stopPropagation()},children:[e.jsx(Rr,{fontSize:"small",sx:{color:o.palette.warning.main}}),e.jsx(i,{fontSize:"small",variant:"subtitle1",sx:{fontWeight:"bold",color:o.palette.warning.main},children:"Edit"})]}),e.jsxs(he,{sx:{display:"flex",alignItems:"center",gap:1,py:.5},onClick:W=>{P(),v(!0),W.stopPropagation()},children:[e.jsx(on,{fontSize:"small",sx:{color:o.palette.info.main}}),e.jsx(i,{fontSize:"small",variant:"subtitle1",sx:{fontWeight:"bold",color:o.palette.info.main},children:"Add Journal"})]}),e.jsxs(he,{sx:{display:"flex",alignItems:"center",gap:1,py:.5},onClick:W=>{var C;p(Ca(((C=j.find($=>$.name.includes("Receipt")))==null?void 0:C._id)||"")),P(),R({_id:t._id,ledger_name:t.ledger_name,balance:t.total_amount}),_("receipt"),S(!0),W.stopPropagation()},children:[e.jsx(Rs,{fontSize:"small",sx:{color:o.palette.success.main}}),e.jsx(i,{fontSize:"small",variant:"subtitle1",sx:{fontWeight:"bold",color:o.palette.success.main},children:"You Got"})]}),e.jsxs(he,{sx:{display:"flex",alignItems:"center",gap:1,py:.5},onClick:W=>{var C;P(),p(Ca(((C=j.find($=>$.name.includes("Payment")))==null?void 0:C._id)||"")),R({_id:t._id,ledger_name:t.ledger_name,balance:t.total_amount}),_("payment"),S(!0),W.stopPropagation()},children:[e.jsx(Ws,{fontSize:"small",sx:{color:o.palette.error.light}}),e.jsx(i,{fontSize:"small",variant:"subtitle1",sx:{fontWeight:"bold",color:o.palette.error.light},children:"You give"})]}),e.jsxs(he,{sx:{display:"flex",alignItems:"center",gap:1,py:.5},onClick:W=>{x(!0),W.stopPropagation()},children:[e.jsx(mt,{fontSize:"small"}),e.jsx(i,{fontSize:"small",variant:"subtitle1",sx:{fontWeight:"bold"},children:"Delete"})]})]})]})})})]})}),e.jsxs(Pa,{open:c,onClose:()=>x(!1),"aria-labelledby":"delete-dialog-title",PaperProps:{sx:{borderRadius:1,boxShadow:`0 24px 50px ${d(o.palette.error.main,.2)}`}},children:[e.jsxs(ba,{id:"delete-dialog-title",sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:2,color:o.palette.error.main,fontWeight:600},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(mt,{}),"Delete ",t.ledger_name,"?"]}),e.jsx(le,{title:"Close",arrow:!0,children:e.jsx(ke,{size:"medium",onClick:W=>{W.stopPropagation(),x(!1)},sx:{bgcolor:d(o.palette.warning.main,.1),color:o.palette.warning.main,transition:"all 0.3s ease","&:hover":{bgcolor:d(o.palette.warning.main,.2),transform:"scale(1.1)"}},children:e.jsx(ct,{fontSize:"medium"})})})]}),e.jsxs(fa,{children:[e.jsx(rt,{severity:"warning",sx:{mb:2},children:"This action cannot be undone. This customer will be permanently removed from your company database if it is not attached to any other bills."}),e.jsxs(i,{children:['Are you sure you want to delete "',e.jsx("strong",{children:t.ledger_name}),'"?']})]}),e.jsxs(Ma,{sx:{p:3,gap:1},children:[e.jsx(ee,{onClick:()=>x(!1),variant:"outlined",sx:{borderRadius:2},children:"Cancel"}),e.jsxs(ee,{onClick:A,color:"error",variant:"contained",sx:{borderRadius:2},startIcon:e.jsx(mt,{}),children:["Delete ",e.jsx("strong",{children:t.ledger_name})]})]})]}),u&&e.jsx(gl,{open:u,onClose:()=>{R({_id:"",ledger_name:"",balance:0}),_("payment"),S(!1)},entity:"Customers",type:B,bankAccount:N}),f&&e.jsx(vx,{open:f,onClose:()=>v(!1)})]})};ye("Create/accounting/group",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.post("/user/accounting/create/group",t);return r.data.success===!0?r.data.data:a("Group creation failed")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}});const Ki=ye("view/all/ledger/groups",async({searchQuery:t,company_id:a,pageNumber:n,type:s,is_deleted:r,limit:o,sortField:p,sortOrder:c},{rejectWithValue:x})=>{var u,S;try{const f=await be.get(`/user/accounting/view/all?company_id=${a}${t!==""?"&search="+t:""}${s===""||s==="All"?"":"&parent="+s}&is_deleted=${r}&page_no=${n}&limit=${o}&sortField=${p}&sortOrder=${c==="asc"?"1":"-1"}`);if(f.data.success===!0){const v=f.data.data.docs,j=f.data.data.meta;return{customerGroups:v,accountingGroupPageMeta:j}}else return x("Login Failed: No access token recieved.")}catch(f){return x((S=(u=f==null?void 0:f.response)==null?void 0:u.data)==null?void 0:S.message)}}),Hi=ye("view/default/accounting/groups",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.get("/user/view/default/accounting/groups");return r.data.success===!0?{defaultAccountingGroup:r.data.data}:a("Login Failed: No access token recieved.")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}}),kr=ye("view/all/accounting/groups",async(t,{rejectWithValue:a})=>{var n,s;try{const r=await be.get(`/user/accounting/view/all/groups?company_id=${t}`);return r.data.success===!0?{accountingGroups:r.data.data}:a("Login Failed: No access token recieved.")}catch(r){return a((s=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:s.message)}});ye("update/accounting/group",async({data:t,id:a},{rejectWithValue:n})=>{var s,r;try{return(await be.put(`/user/update/group/${a}`,t)).data.success===!0?void 0:n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}});const _x={customers:[],customersList:[],customerInvoices:[],customerTypes:[],customer:null,account:null,accountType:[],editingCustomer:null,customerType_id:null,pageMeta:{page:0,limit:0,total:0,unique:[]},customerInvoicesMeta:{page:0,limit:0,total:0,unique:[]},loading:!1,error:null,customersFilters:{searchQuery:"",type:"all",page:1,startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString(),endDate:new Date().toISOString(),rowsPerPage:10,sortField:"date",sortOrder:"desc"}},bl=oa({name:"customersLedger",initialState:_x,reducers:{setEditingCustomer:(t,a)=>{t.editingCustomer=a.payload},setCustomerTypeId:(t,a)=>{t.customerType_id=a.payload},setCustomersFilters:(t,a)=>{t.customersFilters={...t.customersFilters,...a.payload}},setAccountType:(t,a)=>{t.accountType=a.payload}},extraReducers:t=>{t.addCase(dr.pending,a=>{a.error=null,a.loading=!0}).addCase(dr.fulfilled,a=>{a.loading=!1}).addCase(dr.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(en.pending,a=>{a.error=null,a.loading=!0}).addCase(en.fulfilled,(a,n)=>{a.customers=n.payload.customers,a.pageMeta=n.payload.pageMeta,a.loading=!1}).addCase(en.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(tn.pending,a=>{a.error=null,a.loading=!0}).addCase(tn.fulfilled,(a,n)=>{a.customersList=n.payload.customersList,a.loading=!1}).addCase(tn.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(lr.pending,a=>{a.error=null,a.loading=!0}).addCase(lr.fulfilled,(a,n)=>{a.customerTypes=n.payload.customerTypes,a.loading=!1}).addCase(lr.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Xn.pending,a=>{a.error=null,a.loading=!0}).addCase(Xn.fulfilled,(a,n)=>{a.customer=n.payload.customer,a.loading=!1}).addCase(Xn.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(ei.pending,a=>{a.error=null,a.loading=!0}).addCase(ei.fulfilled,(a,n)=>{a.account=n.payload.account,a.loading=!1}).addCase(ei.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(an.pending,a=>{a.error=null,a.loading=!0}).addCase(an.fulfilled,(a,n)=>{a.customerInvoices=n.payload.customerInvoices,a.customerInvoicesMeta=n.payload.customerInvoicesMeta,a.loading=!1}).addCase(an.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Zn.pending,a=>{a.error=null,a.loading=!0}).addCase(Zn.fulfilled,a=>{a.loading=!1}).addCase(Zn.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Cr.pending,a=>{a.error=null,a.loading=!0}).addCase(Cr.fulfilled,a=>{a.loading=!1}).addCase(Cr.rejected,(a,n)=>{a.error=n.payload,a.loading=!1})}}),{setEditingCustomer:mr,setCustomerTypeId:er,setCustomersFilters:Na,setAccountType:Sm}=bl.actions,wx=bl.reducer,Cx=Ge(ee)(({theme:t})=>({borderRadius:"8px",fontWeight:600,padding:t.spacing(1,2),transition:"all 0.2s",boxShadow:"none"})),ta=({variant:t,startIcon:a,onClick:n,disabled:s,text:r,size:o="medium"})=>{const p=we();return e.jsx(Cx,{size:o,variant:t||"contained",startIcon:a,color:"error",onClick:n,disabled:s,sx:{background:p.palette.mode==="dark"?"#c62828":"#ffebee",color:p.palette.mode==="dark"?"#fff":"#c62828",border:`1px solid ${p.palette.mode==="dark"?"#fff":"#c62828"}`,"&:hover":{color:p.palette.mode==="dark"?"#000":"#fff",background:p.palette.mode==="dark"?"#ffebee":"#c62828"}},children:r??"Cancel"})},kx=()=>{var b,M,W;const{customers:t,pageMeta:a,loading:n}=Ce(C=>C.customersLedger),{accountingGroups:s}=Ce(C=>C.accountingGroup),{user:r,current_company_id:o}=Ce(C=>C.auth),p=o||localStorage.getItem("current_company_id")||((b=r==null?void 0:r.user_settings)==null?void 0:b.current_company_id)||"",c=(M=r==null?void 0:r.company)==null?void 0:M.find(C=>C._id===p),x=Ke(),u=we(),S=Fe(),[f,v]=g.useState(""),[j,T]=g.useState({searchQuery:"",filterState:"All-States",is_deleted:!1,type:"Customers",page:1,rowsPerPage:10,sortField:"created_at",sortOrder:"asc"}),{searchQuery:k,filterState:B,page:_,is_deleted:K,rowsPerPage:w,type:N,sortField:R,sortOrder:L}=j,D=g.useCallback(async()=>{S(en({searchQuery:k,filterState:B,company_id:p||"",type:N,is_deleted:K,pageNumber:_,limit:w,sortField:R,sortOrder:L}))},[S,k,B,N,p,K,_,w,R,L]);g.useEffect(()=>{D(),S(Ba(p||"")),S(lr({company_id:p,customerTypes:["Bank Accounts","Cash-in-Hand"]}))},[]),g.useEffect(()=>{const C=setTimeout(()=>{v(k)},500);return()=>{clearTimeout(C)}},[k]),g.useEffect(()=>{D()},[f,_,w,K,R,B,L,S,D]),g.useEffect(()=>{S(kr(p||""))},[p,S]);const P=C=>{const $=R===C&&L==="asc";T(G=>({...G,sortOrder:$?"desc":"asc",sortField:C}))},A=(C,$)=>{T(G=>({...G,page:$}))},O=g.useCallback(()=>{T({searchQuery:"",filterState:"All-States",is_deleted:!1,type:"Customers",page:1,rowsPerPage:10,sortField:"created_at",sortOrder:"asc"})},[]),y=(C,$)=>{T(G=>({...G,[C]:$}))},F=C=>{x(`/customers/${C._id}`)},h=t;return e.jsxs(l,{sx:{p:3,width:"100%"},children:[e.jsx(Ja,{title:"Customers Directory",subtitle:"Manage your customers, view their details, and perform actions like adding, editing, or deleting customers.",children:e.jsxs(e.Fragment,{children:[e.jsx(ft,{startIcon:e.jsx(Zt,{}),text:"Add Debtors",onClick:()=>{var C;if(!(c!=null&&c._id)){Z.error("Please create a company first.");return}x("/customers/create/debtors"),S(er(((C=s.find($=>$.name.includes("Debtors")))==null?void 0:C._id)||""))}}),e.jsx(ta,{startIcon:e.jsx(Zt,{}),text:"Add Creditors",onClick:()=>{var C;if(!(c!=null&&c._id)){Z.error("Please create a company first.");return}x("/customers/create/creditors"),S(er(((C=s.find($=>$.name.includes("Creditors")))==null?void 0:C._id)||""))}})]})}),e.jsxs(l,{sx:{display:"flex",mb:3,gap:2,flexWrap:"wrap"},children:[e.jsx(X,{sx:{flexGrow:1,minWidth:"250px"},variant:"outlined",size:"small",placeholder:"Search by name, city, or email...",value:k,onChange:C=>y("searchQuery",C.target.value),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(qa,{})})}}),e.jsx(qe,{sx:{minWidth:"150px"},children:e.jsxs(X,{select:!0,size:"small",value:B,label:"Filter by State",placeholder:"Filter by State",onChange:C=>y("filterState",C.target.value),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ea,{})})},children:[e.jsx(he,{selected:!0,value:"All-States",children:e.jsx("em",{children:"All States"})}),(W=a.unique)==null?void 0:W.map(C=>e.jsx(he,{value:C,children:C},C))]})}),e.jsx(qe,{sx:{minWidth:"150px"},children:e.jsxs(X,{select:!0,size:"small",value:N,label:"Filter by Type",placeholder:"Filter by Type",onChange:C=>y("type",C.target.value),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ea,{})})},children:[e.jsx(he,{selected:!0,value:"Customers",children:e.jsx("em",{children:"All Types"})}),e.jsx(he,{value:"Debtors",children:"Debtors"}),e.jsx(he,{value:"Creditors",children:"Creditors"})]})}),e.jsx(qe,{children:e.jsx(X,{select:!0,size:"small",value:w.toString(),label:"Show",onChange:C=>{y("rowsPerPage",parseInt(C.target.value,10)),y("page",1)},children:[10,15,20].map(C=>e.jsxs(he,{value:C.toString(),children:[C," rows"]},C))})}),e.jsx(ee,{variant:"outlined",color:"primary",size:"medium",startIcon:e.jsx(Ua,{}),onClick:O,sx:{fontWeight:"bold",py:1.5},children:"Reset Filters"})]}),e.jsx(nt,{component:ne,elevation:0,sx:{width:"100%",borderRadius:1,border:`1px solid ${d(u.palette.divider,1)}`,boxShadow:`0 4px 20px ${d("#000",.05)}`},children:e.jsxs(it,{sx:{width:"100%"},children:[e.jsx(ot,{children:e.jsxs(xe,{sx:{bgcolor:d(u.palette.grey[50],.8),width:"100%","& .MuiTableCell-root":{padding:"8px 16px"},"& .MuiTableCell-head":{borderBottom:`2px solid ${d(u.palette.primary.main,.1)}`}},children:[e.jsx(m,{sx:{pl:3,pr:1},children:e.jsx(le,{title:"Sort by Name",children:e.jsx(Ue,{active:R==="name",direction:R==="name"?L:"asc",onClick:()=>P("name"),children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:u.palette.text.primary,fontSize:"0.85rem"},children:"Customer Information"})})})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Contact Information",arrow:!0,children:e.jsxs(l,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",gap:1},children:[e.jsx(Is,{fontSize:"small"}),e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:u.palette.text.primary,fontSize:"0.85rem"},children:"Contact Information"})]})})}),e.jsx(m,{align:"center",sx:{px:1},children:e.jsx(le,{title:"Sort by State",arrow:!0,children:e.jsx(Ue,{active:R==="state",direction:R==="state"?L:"asc",onClick:()=>P("state"),children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(La,{fontSize:"small"}),e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:u.palette.text.primary,fontSize:"0.85rem"},children:"State / Country"})]})})})}),e.jsx(m,{align:"center",sx:{px:1},children:e.jsx(le,{title:"Sort by Customer Type",arrow:!0,children:e.jsx(Ue,{active:R==="type",direction:R==="type"?L:"asc",onClick:()=>P("type"),children:e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:u.palette.text.primary,fontSize:"0.85rem"},children:"Closing Balance"})})})})}),e.jsx(m,{align:"center",sx:{px:1},children:e.jsx(le,{title:"Sort by Date",arrow:!0,children:e.jsx(Ue,{active:R==="created_at",direction:R==="created_at"?L:"asc",onClick:()=>P("created_at"),children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(Ut,{fontSize:"small"}),e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:u.palette.text.primary,fontSize:"0.85rem"},children:"Created on"})]})})})}),e.jsx(m,{align:"right",children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:u.palette.text.primary,fontSize:"0.85rem"},children:"Actions"})})]})}),e.jsx(st,{children:n?Array([1,2,3,4,5]).map((C,$)=>e.jsx(hl,{},`skeleton-${$}`)):(h==null?void 0:h.length)>0?h.map((C,$)=>e.jsx(Sx,{cus:C,index:$+1+(_-1)*w,onView:()=>F(C),onEdit:()=>{S(mr(C)),x(`/customers/edit/${C.parent.toLowerCase()}`)},onDelete:async()=>{await S(Cr(C._id)).unwrap().then(()=>{S(mr(null)),D(),Z.success(`${C.ledger_name} deleted successfully.`)}).catch(G=>{Z.error(G||"An unexpected error occurred while deleting the customer."),console.error("Failed to delete customer:",G)})}},C._id)):e.jsx(xe,{children:e.jsx(m,{colSpan:6,sx:{textAlign:"center",py:8},children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx(ya,{sx:{fontSize:"4rem",color:u.palette.text.disabled}}),e.jsx(i,{variant:"h5",color:"text.secondary",sx:{fontWeight:600},children:"No customers found"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Try adjusting your search or filter criteria, or add your first customer"}),e.jsx(I,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs(l,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(ft,{startIcon:e.jsx(Zt,{}),onClick:()=>{var C;if(!(c!=null&&c._id)){Z.error("Please create a company first.");return}x("/customers/create/debtors"),S(er(((C=s.find($=>$.name.includes("Debtors")))==null?void 0:C._id)||""))},text:"Add Debtors"}),e.jsx(ta,{startIcon:e.jsx(Zt,{}),onClick:()=>{var C;if(!(c!=null&&c._id)){Z.error("Please create a company first.");return}x("/customers/create/creditors"),S(er(((C=s.find($=>$.name.includes("Creditors")))==null?void 0:C._id)||""))},text:"Add Creditors"})]})})]})})})})]})}),e.jsx(Dt,{total:a.total,item:"customers",page:_,metaPage:a.page,rowsPerPage:w,onChange:A})]})},_o=({inv:t,onDelete:a,onEdit:n,onView:s,onPrint:r,index:o,selected:p,onSelect:c})=>{const x=we(),[u,S]=g.useState(!1),[f,v]=g.useState(!1),[j,T]=Ft.useState(null),k=!!j,B=w=>{T(w.currentTarget)},_=()=>{T(null)},K=()=>{a((t==null?void 0:t._id)??""),S(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(ze,{in:!0,timeout:300+o*100,children:e.jsxs(xe,{onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),sx:{cursor:"pointer",width:"100%",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:f?"translateY(-2px)":"translateY(0)",boxShadow:f?`0 8px 25px ${d(x.palette.primary.main,.15)}`:"none",background:p?d(x.palette.primary.main,.15):"inherit","&:hover":{bgcolor:d(x.palette.primary.main,.02)},"& .MuiTableCell-root":{padding:"8px 16px"},borderLeft:`4px solid ${f?x.palette.primary.main:"transparent"}`},children:[e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(Aa,{checked:!!p,onChange:(w,N)=>{c&&c(N)}})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Ut,{sx:{fontSize:"1rem",mr:.5,color:x.palette.text.secondary}}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,color:x.palette.text.primary},children:Nt(t.date)||"N/A"})]})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600,color:x.palette.text.primary,mb:.5,transition:"color 0.3s ease"},children:t.party_name})}),e.jsx(m,{align:"left",children:e.jsx(i,{variant:"body1",sx:{fontWeight:700,color:x.palette.text.primary},children:t.voucher_type})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(i,{variant:"body1",sx:{fontWeight:600,color:x.palette.text.secondary},children:t.voucher_number?`${t.voucher_number}`:" N/A"})}),e.jsx(m,{align:"right",sx:{px:1},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[t.amount>0&&e.jsx(i,{variant:"body1",sx:{fontWeight:700,mr:.5,color:t.amount>0?x.palette.success.main:x.palette.error.main},children:"₹"}),e.jsx(i,{variant:"body1",sx:{fontWeight:700,color:t.amount>0?x.palette.success.main:x.palette.error.main},children:t.amount>0?Math.abs(t.amount):" "})]})}),e.jsx(m,{align:"right",sx:{px:1},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[!(t.amount>0)&&e.jsx(i,{variant:"body1",sx:{fontWeight:700,mr:.5,color:t.amount>0?x.palette.success.main:x.palette.error.main},children:"₹"}),e.jsx(i,{variant:"body1",sx:{fontWeight:700,color:t.amount>0?x.palette.success.main:x.palette.error.main},children:t.amount>0?" ":Math.abs(t.amount)})]})}),e.jsx(m,{align:"center",children:e.jsxs(e.Fragment,{children:[e.jsx(xn,{"data-screenshot":"toggle-mode",onClick:w=>{B(w),w.stopPropagation()},disableRipple:!0,size:"small","aria-label":"Open Menu","aria-controls":k?"notifications-menu":void 0,"aria-haspopup":"true","aria-expanded":k?"true":void 0,children:e.jsx(ln,{})}),e.jsxs(Mr,{anchorEl:j,id:"notifications-menu",open:k,onClose:_,onClick:w=>{w.stopPropagation(),_()},slotProps:{paper:{variant:"outlined",elevation:0,sx:{my:"4px",maxHeight:"400px",overflowY:"auto",borderColor:x.palette.primary.main}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[["Sales","Purchase"].includes(t.voucher_type)&&e.jsxs(he,{sx:{display:"flex",alignItems:"center",gap:1,py:.5},onClick:w=>{w.stopPropagation(),s(t),_()},children:[e.jsx(Ha,{fontSize:"small",sx:{color:x.palette.info.main}}),e.jsx(i,{fontSize:"small",variant:"subtitle1",sx:{fontWeight:"bold",color:x.palette.info.main},children:"View"})]}),["Sales","Purchase","Contra"].includes(t.voucher_type)&&e.jsxs(he,{sx:{display:"flex",alignItems:"center",gap:1,py:.5},onClick:w=>{w.stopPropagation(),n(t),_()},children:[e.jsx(Rr,{fontSize:"small",sx:{color:x.palette.warning.light}}),e.jsx(i,{fontSize:"small",variant:"subtitle1",sx:{fontWeight:"bold",color:x.palette.warning.light},children:"Edit"})]}),e.jsxs(he,{sx:{display:"flex",alignItems:"center",gap:1,py:.5},onClick:w=>{S(!0),w.stopPropagation(),_()},children:[e.jsx(mt,{fontSize:"small",sx:{color:x.palette.error.light}}),e.jsx(i,{fontSize:"small",variant:"subtitle1",sx:{fontWeight:"bold",color:x.palette.error.light},children:"Delete"})]}),["Sales","Purchase","Payment","Receipt"].includes(t.voucher_type)&&e.jsxs(he,{sx:{display:"flex",alignItems:"center",gap:1,py:.5},onClick:w=>{w.stopPropagation(),r&&r(t),_()},children:[e.jsx(Oa,{fontSize:"small",sx:{color:x.palette.success.light}}),e.jsx(i,{fontSize:"small",variant:"subtitle1",sx:{fontWeight:"bold",color:x.palette.success.light},children:"Print"})]})]})]})})]})}),e.jsxs(Pa,{open:u,onClose:()=>S(!1),"aria-labelledby":"delete-dialog-title",PaperProps:{sx:{borderRadius:1,boxShadow:`0 24px 50px ${d(x.palette.error.main,.2)}`}},children:[e.jsxs(ba,{id:"delete-dialog-title",sx:{display:"flex",alignItems:"center",gap:2,color:x.palette.error.main,fontWeight:600},children:[e.jsx(mt,{}),"Delete ",t.voucher_number,"?"]}),e.jsxs(fa,{children:[e.jsx(rt,{severity:"warning",sx:{mb:2},children:"This action cannot be undone. Any information regarding this invoice will be lost."}),e.jsxs(i,{children:['Are you sure you want to delete the invoice with "',e.jsx("strong",{children:t.voucher_number}),'"?']})]}),e.jsxs(Ma,{sx:{p:3,gap:1},children:[e.jsx(ee,{onClick:()=>S(!1),variant:"outlined",sx:{borderRadius:2},children:"Cancel"}),e.jsx(ee,{onClick:K,color:"error",variant:"contained",sx:{borderRadius:2},startIcon:e.jsx(mt,{}),children:"Delete Invoice"})]})]})]})},dn=()=>e.jsxs(xe,{children:[e.jsx(m,{align:"left",children:e.jsx(pe,{variant:"rectangular",width:20,height:20,sx:{borderRadius:1}})}),e.jsx(m,{align:"left",children:e.jsx(pe,{variant:"text",width:100,height:20})}),e.jsx(m,{align:"left",children:e.jsx(pe,{variant:"text",width:160,height:20,sx:{mx:"auto"}})}),e.jsx(m,{align:"center",children:e.jsx(pe,{variant:"text",width:80,height:20,sx:{mx:"auto"}})}),e.jsx(m,{align:"center",children:e.jsx(pe,{variant:"text",width:80,height:20,sx:{mx:"auto"}})}),e.jsx(m,{align:"right",children:e.jsx(pe,{variant:"text",width:40,height:20,sx:{mx:"auto"}})}),e.jsx(m,{align:"right",children:e.jsx(pe,{variant:"text",width:40,height:20,sx:{mx:"auto"}})}),e.jsx(m,{align:"center",children:e.jsx(l,{sx:{display:"flex",justifyContent:"center",gap:1},children:e.jsx(pe,{variant:"rectangular",width:32,height:32,sx:{borderRadius:1}})})})]});qc.workerSrc=new URL("/assets/pdf.worker.min-GB3t0DcA.mjs",import.meta.url).toString();const Ix={cMapUrl:"/cmaps/",standardFontDataUrl:"/standard_fonts/"};function Ri(){const t=we(),[a,n]=g.useState(!1),[s,r]=g.useState({file:null,fileName:"",entityNumber:"",title:""}),[o,p]=g.useState(null);function c(v,j){r(v),j&&j()}const x=async()=>{if((s==null?void 0:s.file)!==null)try{n(!0);const v=URL.createObjectURL(s.file),j=document.createElement("a");j.href=v,j.download=`${s.fileName}.pdf`,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(v),Z.success("Invoice downloaded successfully!")}catch(v){console.error("Download failed:",v),Z.error("Failed to download invoice"),n(!1)}finally{n(!1)}},u=()=>{if(!o)return;if(n(!0),!window.open(o,"_blank","noopener")){Z.error("Unable to open print window. Please allow popups."),n(!1);return}n(!1)},S=async()=>{if((s==null?void 0:s.file)!==null)try{if(n(!0),navigator.share){const v=new File([s.file],`${s.fileName}.pdf`,{type:"application/pdf"});Z.promise(navigator.share({title:`Invoice ${s.entityNumber}`,text:`Invoice for ${s.title}`,files:[v]}),{loading:"Opening Sharing window...",success:"Invoice sharing opened successfully!",error:"Failed to open sharing window."})}else await x(),Z.error("Invoice downloaded (sharing not supported)")}catch(v){v.name!=="AbortError"&&console.error("Share failed:",v),n(!1)}finally{n(!1)}};function f({visible:v,setVisible:j}){const T=we(),k=yt(T.breakpoints.down("md")),[B,_]=g.useState(1),[K,w]=g.useState(!1),[N,R]=g.useState(0);function L({numPages:P}){R(P),_(1)}const D=()=>{w(P=>!P)};return s.file===null?e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:2},children:[e.jsx(zi,{sx:{fontSize:100,color:"action.active"}}),e.jsx(i,{variant:"h6",sx:{mt:2},children:"Preview Not Available"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"No file or pdf received from server or the received file type is not supported."})]}):e.jsx(e.Fragment,{children:e.jsxs(Mt,{anchor:"right",PaperProps:{sx:{width:K?"100vw":{xs:"100%",md:"80%",lg:"70%"},backgroundColor:t.palette.background.default,backgroundImage:`linear-gradient(135deg, ${t.palette.background.default} 0%, ${d(t.palette.primary.main,.02)} 100%)`,overflow:"hidden",display:"flex",flexDirection:"column"}},sx:{"& .MuiBackdrop-root":{backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(12px)"}},open:v,onClose:()=>j(!1),children:[e.jsx(so,{position:"static",elevation:0,sx:{backgroundColor:d(t.palette.background.paper,.9),backdropFilter:"blur(10px)",borderBottom:`1px solid ${d(t.palette.primary.main,.5)}`},children:e.jsxs(oo,{children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",flex:1},children:[e.jsx(i,{variant:"h6",sx:{color:t.palette.text.primary,fontWeight:600,mr:2},children:"Invoice Preview"}),e.jsxs(i,{variant:"body2",sx:{color:t.palette.text.secondary,display:{xs:"none",sm:"block"}},children:[s.entityNumber," • ",s.title]})]}),N>1&&e.jsxs(J,{direction:"row",spacing:1,sx:{mr:2},children:[e.jsx(ke,{onClick:()=>_(P=>Math.max(P-1,1)),disabled:B<=1,children:e.jsx(Cc,{})}),e.jsxs(i,{variant:"body2",sx:{minWidth:40,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",color:t.palette.text.secondary},children:["Page ",B," of ",N]}),e.jsx(ke,{onClick:()=>_(P=>Math.min(P+1,N)),disabled:B>=N,children:e.jsx(kc,{})})]}),e.jsx(le,{title:K?"Exit Fullscreen":"Fullscreen",children:e.jsx(ke,{onClick:D,sx:{mr:1},children:K?e.jsx(Ic,{}):e.jsx(Tc,{})})}),e.jsx(le,{title:"Close",children:e.jsx(ke,{onClick:()=>j(!1),children:e.jsx(ct,{})})})]})}),e.jsx(l,{sx:{flex:1,overflow:"auto",position:"relative",backgroundColor:d(t.palette.grey[100],.3),"&::-webkit-scrollbar":{width:8,height:1},"&::-webkit-scrollbar-track":{backgroundColor:d(t.palette.background.default,.1)},"&::-webkit-scrollbar-thumb":{backgroundColor:d(t.palette.primary.main,.3),borderRadius:4,"&:hover":{backgroundColor:d(t.palette.primary.main,.5)}}},children:e.jsx(l,{sx:{py:2,display:"flex",justifyContent:"center"},children:e.jsx(ne,{elevation:8,sx:{backgroundColor:"#ffffff",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12)"},children:s.file.type==="application/pdf"&&o?e.jsx(Kc,{file:o,onLoadSuccess:L,options:Ix,loading:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:2},children:[e.jsx(zi,{sx:{fontSize:100,color:"action.active"}}),e.jsx(i,{variant:"h6",sx:{mt:2},children:"Loading Pdf..."}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Please wait while we load the document."})]}),error:e.jsx(i,{color:"error",children:"Failed to load PDF"}),children:e.jsx(Hc,{pageNumber:B,renderTextLayer:!0,renderAnnotationLayer:!0,renderMode:"canvas",scale:1})}):e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:2},children:[e.jsx(zi,{sx:{fontSize:100,color:"action.active"}}),e.jsx(i,{variant:"h6",sx:{mt:2},children:"Preview Not Available"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"This file type is not supported for preview"})]})})})}),e.jsx(ne,{elevation:8,sx:{p:2,backgroundColor:d(t.palette.background.paper,.95),backdropFilter:"blur(10px)",borderTop:`1px solid ${d(t.palette.primary.main,.5)}`},children:k?e.jsxs(J,{spacing:2,children:[e.jsx(ee,{variant:"contained",startIcon:a?e.jsx(bt,{size:20}):e.jsx(xi,{}),onClick:x,disabled:a,fullWidth:!0,size:"large",sx:{py:1.5,fontWeight:600,textTransform:"none",borderRadius:2},children:a?"Generating...":"Download PDF"}),e.jsxs(J,{direction:"row",spacing:2,children:[e.jsx(ee,{variant:"outlined",startIcon:e.jsx(Oa,{}),onClick:u,fullWidth:!0,sx:{py:1.5,fontWeight:600,textTransform:"none",borderRadius:2},children:"Print"}),e.jsx(ee,{variant:"outlined",startIcon:a?e.jsx(bt,{size:20}):e.jsx(pi,{}),onClick:S,disabled:a,fullWidth:!0,sx:{py:1.5,fontWeight:600,textTransform:"none",borderRadius:2},children:"Share"})]})]}):e.jsxs(J,{direction:"row",spacing:2,justifyContent:"center",children:[e.jsx(ee,{variant:"contained",startIcon:a?e.jsx(bt,{size:20}):e.jsx(xi,{}),onClick:x,disabled:a,size:"large",sx:{px:4,py:1.5,fontWeight:600,textTransform:"none",borderRadius:1,minWidth:160},children:a?"Generating...":"Download PDF"}),e.jsx(ee,{variant:"outlined",startIcon:e.jsx(Oa,{}),onClick:u,size:"large",sx:{px:4,py:1.5,fontWeight:600,textTransform:"none",borderRadius:1,minWidth:120},children:"Print"}),e.jsx(ee,{variant:"outlined",startIcon:a?e.jsx(bt,{size:20}):e.jsx(pi,{}),onClick:S,disabled:a,size:"large",sx:{px:4,py:1.5,fontWeight:600,textTransform:"none",borderRadius:1,minWidth:120},children:"Share"})]})})]})})}return g.useEffect(()=>{if(s.file===null)return;let v=null;if(s.file.type==="application/pdf")v=URL.createObjectURL(s.file),p(v);else if(s.file.type.startsWith("text/")){const j=new FileReader;j.onloadend=()=>{p(j.result)},j.readAsText(s.file)}return()=>{v&&URL.revokeObjectURL(v)}},[s.file]),{setLoading:n,handleDownload:x,isLoading:a,PDFViewModal:f,handlePrint:u,handleShare:S,init:c}}const Tx=()=>{var ae,Y,re,Te;const t=Ke(),a=we(),n=Fe(),[s,r]=g.useState(!1),[o,p]=g.useState([]),{invoices:c,loading:x,pageMeta:u,invoiceGroups:S}=Ce(V=>V.invoice),{user:f,current_company_id:v}=Ce(V=>V.auth),j=v||localStorage.getItem("current_company_id")||((ae=f==null?void 0:f.user_settings)==null?void 0:ae.current_company_id)||"",T=(Y=f==null?void 0:f.company)==null?void 0:Y.find(V=>V._id===j),k=(Te=(re=T==null?void 0:T.company_settings)==null?void 0:re.features)==null?void 0:Te.enable_tax,{searchQuery:B,filterState:_,page:K,rowsPerPage:w,startDate:N,endDate:R,type:L,sortField:D,sortOrder:P}=Ce(V=>V.invoice.invoicesFilters),[A,O]=g.useState(B),y=g.useCallback(async()=>{n(rn({searchQuery:A,company_id:j||"",type:L,start_date:$t(N),end_date:$t(R),pageNumber:K,limit:w,sortField:D,sortOrder:P}))},[n,A,j,L,N,R,K,w,D,P]),{init:F,setLoading:h,PDFViewModal:b}=Ri();async function M(V,z){try{h(!0);const de=await n((V.voucher_type==="Payment"?Pi:V.voucher_type==="Receipt"?Ai:k?Ti:Ii)({vouchar_id:V._id,company_id:v||""}));if(de.meta.requestStatus==="fulfilled"){const{pdfUrl:Ie}=de.payload,oe=await fetch(Ie).then(je=>je.blob()),ue=new File([oe],`${V._id}.pdf`,{type:"application/pdf"});F({file:ue,entityNumber:V.voucher_number,title:V.party_name,fileName:`${V.voucher_number}-vyapar-drishti`},z)}else{console.error("Failed to print invoice:",de.payload);return}}catch(de){console.error("Error printing invoice:",de)}finally{h(!1)}}g.useEffect(()=>{y()},[]),g.useEffect(()=>{const V=setTimeout(()=>{O(B)},300);return()=>{clearTimeout(V)}},[B]),g.useEffect(()=>{y()},[A,K,w,D,_,P,n,j,y]),g.useEffect(()=>{n(Ba(j||""))},[j,n]);const W=V=>{n($a({sortOrder:D===V&&P==="asc"?"desc":"asc",sortField:V}))},C=(V,z)=>{n($a({page:z}))},$=()=>{n($a({searchQuery:"",filterState:"All-States",type:"Invoices",page:1,startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString(),endDate:new Date().toISOString(),rowsPerPage:10,sortField:"date",sortOrder:"desc"}))},G=(V,z)=>{n($a({[V]:z}))},ge=V=>{t(`/invoices/${V._id}`)},Ae=V=>{n(ur({vouchar_id:V._id,company_id:j})).unwrap().then(()=>{Z.success("Invoice deleted successfully!"),y()}).catch(z=>{Z.error(z||"An unexpected error occurred. Please try again later.")})};return e.jsx(Pt,{dateAdapter:Lt,children:e.jsxs(l,{sx:{p:3,width:"100%",position:"relative"},children:[e.jsx(Ja,{title:"Invoices Directory",subtitle:`${u.total} Invoices available in your database after applying filters`,children:e.jsxs(e.Fragment,{children:[e.jsx(ft,{onClick:()=>{var V;if(!(T!=null&&T._id)){Z.error("Please create a company first.");return}n(Ca(((V=S.find(z=>z.name.includes("Sales")))==null?void 0:V._id)||"")),t("/invoices/create/sales")},text:"Add Sales",startIcon:e.jsx(pa,{})}),e.jsx(ta,{startIcon:e.jsx(hi,{}),onClick:()=>{var V;if(!(T!=null&&T._id)){Z.error("Please create a company first.");return}n(Ca(((V=S.find(z=>z.name.includes("Purchase")))==null?void 0:V._id)||"")),t("/invoices/create/purchase")},text:"Add Purchase"})]})}),e.jsxs(l,{sx:{display:"flex",mb:3,gap:2,flexWrap:"wrap"},children:[e.jsx(X,{sx:{flexGrow:1,minWidth:"250px"},variant:"outlined",size:"small",label:"Search",placeholder:"Search by name, type...",value:B,onChange:V=>G("searchQuery",V.target.value),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(qa,{})})}}),e.jsx(Xe,{label:"Start Date",value:new Date(N),format:"dd/MM/yyyy",views:["year","month","day"],onChange:V=>G("startDate",(V==null?void 0:V.toISOString())??""),slotProps:{textField:{size:"small",sx:{"& .MuiOutlinedInput-root":{width:"150px",borderRadius:"8px"},"& .MuiInputAdornment-root .MuiButtonBase-root":{border:"none",boxShadow:"none"}}}}}),e.jsx(Xe,{label:"End Date",value:new Date(R),format:"dd/MM/yyyy",views:["year","month","day"],onChange:V=>G("endDate",(V==null?void 0:V.toISOString())??""),slotProps:{textField:{size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px",width:"150px"},"& .MuiInputAdornment-root .MuiButtonBase-root":{border:"none",boxShadow:"none"}}}}}),e.jsx(qe,{sx:{minWidth:"150px"},children:e.jsxs(X,{select:!0,size:"small",value:L,label:"Filter by invoice Types",placeholder:"Filter by invoice Types",onChange:V=>G("type",V.target.value),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ea,{})})},children:[e.jsx(he,{selected:!0,value:"Invoices",children:e.jsx("em",{children:"All"})}),e.jsx(he,{value:"Sales",children:"Sales"}),e.jsx(he,{value:"Purchase",children:"Purchase"})]})}),e.jsx(qe,{children:e.jsx(X,{select:!0,size:"small",value:w.toString(),label:"Show",onChange:V=>{G("rowsPerPage",parseInt(V.target.value,10)),G("page",1)},children:[10,20,50,100,200].map(V=>e.jsxs(he,{value:V.toString(),children:[V," rows"]},V))})}),e.jsx(ee,{variant:"outlined",color:"primary",size:"medium",startIcon:e.jsx(Ua,{}),onClick:$,sx:{fontWeight:"bold",py:1.5},children:"Reset Filters"})]}),e.jsx(nt,{component:ne,elevation:0,sx:{width:"100%",borderRadius:1,border:`1px solid ${d(a.palette.divider,1)}`,boxShadow:`0 4px 20px ${d("#000",.05)}`},children:e.jsxs(it,{sx:{width:"100%"},children:[e.jsx(ot,{children:e.jsxs(xe,{sx:{bgcolor:d(a.palette.grey[50],.8),width:"100%","& .MuiTableCell-head":{borderBottom:`2px solid ${d(a.palette.primary.main,.1)}`},"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(Aa,{indeterminate:o.length>0&&o.length<c.length,checked:c.length>0&&o.length===c.length,onChange:(V,z)=>{p(z?c.map(de=>de._id):[])}})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by State",arrow:!0,children:e.jsx(Ue,{active:D==="date",direction:D==="date"?P:"asc",onClick:()=>W("date"),children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(Ut,{fontSize:"small"}),e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:a.palette.text.primary,fontSize:"0.85rem"},children:"Invoice Date"})]})})})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by Name",children:e.jsx(Ue,{active:D==="party_name",direction:D==="party_name"?P:"asc",onClick:()=>W("party_name"),children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:a.palette.text.primary,fontSize:"0.85rem"},children:"Customer Information"})})})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by Invoice Type",arrow:!0,children:e.jsx(Ue,{active:D==="voucher_type",direction:D==="voucher_type"?P:"asc",onClick:()=>W("voucher_type"),children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:a.palette.text.primary,fontSize:"0.85rem"},children:"Invoice Type"})})})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by State",arrow:!0,sx:{mx:"auto"},children:e.jsx(Ue,{active:D==="voucher_number",direction:D==="voucher_number"?P:"asc",onClick:()=>W("voucher_number"),sx:{mx:"auto"},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:a.palette.text.primary,fontSize:"0.85rem",mx:"auto"},children:"Invoice No."})})})}),e.jsx(m,{align:"right",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:a.palette.text.primary,fontSize:"0.85rem"},children:"Debit"})}),e.jsx(m,{align:"right",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:a.palette.text.primary,fontSize:"0.85rem"},children:"Credit"})}),e.jsx(m,{align:"center",children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:a.palette.text.primary,fontSize:"0.85rem"},children:"Actions"})})]})}),e.jsxs(st,{children:[x?Array([1,2,3,4,5]).map((V,z)=>e.jsx(dn,{},`skeleton-${z}`)):(c==null?void 0:c.length)>0?c.map((V,z)=>e.jsx(_o,{inv:V,selected:o.includes(V._id),onSelect:de=>{p(Ie=>de?[...Ie,V._id]:Ie.filter(oe=>oe!==V._id))},index:z+1+(K-1)*w,onView:()=>ge(V),onEdit:()=>{t(`/invoices/update/${V.voucher_type.toLowerCase()}/${V._id}`)},onDelete:()=>Ae(V),onPrint:()=>{M(V,()=>{r(!0)})}},V._id)):e.jsx(xe,{children:e.jsx(m,{colSpan:8,sx:{textAlign:"center",py:8},children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx(ya,{sx:{fontSize:"4rem",color:a.palette.text.disabled}}),e.jsx(i,{variant:"h5",color:"text.secondary",sx:{fontWeight:600},children:"No invoices created today"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Try adjusting your search or filter criteria, or create your first invoice for today"}),e.jsx(I,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs(l,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(ft,{onClick:()=>{var V;if(!(T!=null&&T._id)){Z.error("Please create a company first.");return}n(Ca(((V=S.find(z=>z.name.includes("Sales")))==null?void 0:V._id)||"")),t("/invoices/create/sales")},text:"Add Sales",startIcon:e.jsx(pa,{})}),e.jsx(ta,{startIcon:e.jsx(hi,{}),onClick:()=>{var V;if(!(T!=null&&T._id)){Z.error("Please create a company first.");return}n(Ca(((V=S.find(z=>z.name.includes("Purchase")))==null?void 0:V._id)||"")),t("/invoices/create/purchase")},text:"Add Purchase"})]})})]})})}),x?Array([1,2,3,4,5]).map((V,z)=>e.jsx(dn,{},`skeleton1-${z}`)):(c==null?void 0:c.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px",bgcolor:d(a.palette.grey[50],.8)}},children:e.jsx(m,{colSpan:8})}),e.jsxs(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{colSpan:1,sx:{textAlign:"center"}}),e.jsx(m,{colSpan:1,sx:{textAlign:"left"},children:e.jsx(i,{variant:"subtitle1",color:"text.primary",sx:{fontWeight:600,textDecoration:"underline"},children:"Total"})}),e.jsx(m,{colSpan:3,sx:{textAlign:"center"}}),e.jsx(m,{align:"right",colSpan:1,children:u.total_debit!==0&&e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:700,mr:.5,color:a.palette.success.main},children:"₹"}),e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600,color:a.palette.success.main},children:Math.abs(u.total_debit)})]})}),e.jsx(m,{align:"right",colSpan:1,children:u.total_credit!==0&&e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:700,mr:.5,color:a.palette.error.main},children:"₹"}),e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600,color:a.palette.error.main},children:Math.abs(u.total_credit)})]})}),e.jsx(m,{colSpan:1,sx:{textAlign:"center"}})]})]})]})]})}),e.jsx(Dt,{total:u.total,item:"invoices",page:K,metaPage:u.page,rowsPerPage:w,onChange:C}),s&&e.jsx(b,{visible:s,setVisible:r})]})})},fl=({open:t,onClose:a,onUpdated:n,onCreated:s,item:r})=>{var G,ge,Ae,ae,Y,re,Te,V;const o=we(),p=yt(o.breakpoints.down("sm")),c=Fe(),[x,u]=g.useState(!1),[S,f]=g.useState(!1),[v,j]=g.useState({}),[T,k]=g.useState(!1),[B,_]=g.useState(0),[K,w]=g.useState(""),[N,R]=g.useState([]),{user:L,current_company_id:D}=Ce(z=>z.auth),P=D||localStorage.getItem("current_company_id")||((G=L==null?void 0:L.user_settings)==null?void 0:G.current_company_id)||"",A=(ge=L==null?void 0:L.company)==null?void 0:ge.find(z=>z._id===P),O=(ae=(Ae=A==null?void 0:A.company_settings)==null?void 0:Ae.features)==null?void 0:ae.enable_tax,[y,F]=g.useState({item:"",item_id:"",unit:"",hsn_code:"",quantity:0,rate:0,amount:0,discount_amount:0,tax_rate:0,tax_amount:0,total_amount:0}),h=g.useRef(null),b=(z=y)=>{var Ie;const de={};return((z==null?void 0:z.item)??"").trim()||(de.item="Item is required"),(z.item_id??"").trim()||(de.item_id="Item ID is required"),((z==null?void 0:z.quantity)??0)<=0&&(de.quantity=`Quantity must be greater than 0 and should be a valid ${((Ie=Et.find(oe=>{var ue;return oe.value===((ue=N.find(je=>je.id===z.item_id))==null?void 0:ue.unit)}))==null?void 0:Ie.si_representation)==="integer"?"whole number":"decimal number"}`),((z==null?void 0:z.rate)??0)<=0&&(de.rate="Rate must be greater than 0"),((z==null?void 0:z.amount)??0)<=0&&(de.amount="Amount must be greater than 0"),j(de),Object.keys(de).length===0},M=(z,de)=>{F(Ie=>{var ue;let oe={...Ie,[z]:de};if(z==="quantity"){const je=N.find(te=>te.id===oe.item_id),q=(ue=Et.find(te=>te.value===(je==null?void 0:je.unit)))==null?void 0:ue.si_representation;let E=de;if(q==="integer")E=Math.max(0,Math.floor(Number(E))).toString();else if(q==="decimal"){let te=Math.max(0,parseFloat(E));te=Math.round(te*100)/100,E=te.toFixed(2)}oe.quantity=Number(E)}if(z==="rate"||z==="quantity"||z==="tax_rate"||z==="discount_amount"){const je=parseFloat(String(oe.quantity))||0,q=parseFloat(String(z==="rate"?de:oe.rate))||0,E=parseFloat((je*q).toFixed(2)),te=parseFloat(String(z==="discount_amount"?de:oe.discount_amount))||0,U=parseFloat(String(z==="tax_rate"?de:oe.tax_rate))||0,H=parseFloat(((je*q-te)*U/100).toFixed(2));oe={...oe,amount:E,tax_amount:H,total_amount:E+H-te}}return b(oe),oe})},W=()=>{F({item:"",item_id:"",unit:"",hsn_code:"",quantity:0,rate:0,amount:0,discount_amount:0,tax_rate:0,tax_amount:0,total_amount:0}),j({}),f(!1)};g.useEffect(()=>{t&&setTimeout(()=>{var z;(z=h.current)==null||z.focus(),w("item")},100)},[t]),g.useEffect(()=>{if(!t){W();return}c(Wu(P||"")).then(z=>{if(console.log("Product with id in Add item Modal",z),z.meta.requestStatus==="fulfilled"){const de=z.payload;R(de.map(Ie=>({name:Ie.stock_item_name,id:Ie._id,unit:Ie.unit,tax_rate:Ie.tax_rate||0,hsn_code:Ie.hsn_code||""})))}return z}).catch(z=>{Z.error(z||"An unexpected error occurred. Please try again later.")})},[c,t,P,B]),g.useEffect(()=>{t&&r?F({item:r.item||"",item_id:r.item_id||"",quantity:r.quantity||0,unit:r.unit||"",hsn_code:r.hsn_code||"",rate:r.rate||0,amount:r.amount||0,discount_amount:r.discount_amount||0,tax_rate:r.tax_rate||0,tax_amount:r.tax_amount||0,total_amount:r.total_amount||0}):t&&!r&&F({item:"",item_id:"",unit:"",hsn_code:"",quantity:0,rate:0,amount:0,discount_amount:0,tax_rate:0,tax_amount:0,total_amount:0})},[t,r]);const C=()=>{if(f(!0),!b()){Z.error("Please fix the form errors before submitting");return}u(!0),r?(n==null||n(y),Z.success("Item updated successfully")):(s==null||s(y),Z.success("Item added successfully")),u(!1),W(),a()},$=O?[{key:"quantity",label:"Quantity",placeholder:"Enter the quantity of the item",icon:ea,required:!0,description:`Quantity of the item (Should be ${((Y=Et.find(z=>{var de;return z.value===((de=N.find(Ie=>Ie.id===y.item_id))==null?void 0:de.unit)}))==null?void 0:Y.si_representation)==="integer"?"whole number":"decimal number"})`,disabled:!1,qty:(re=Et.find(z=>{var de;return z.value===((de=N.find(Ie=>Ie.id===y.item_id))==null?void 0:de.unit)}))==null?void 0:re.si_representation},{key:"rate",label:"Rate",placeholder:"Enter the rate of the item",icon:Ee,required:!0,description:"Rate of the item per unit",disabled:!1},{key:"amount",label:"Amount",placeholder:"Enter the amount",icon:Ee,required:!0,description:"Enter rate and quantity to calculate amount",disabled:!0},{key:"discount_amount",label:"Discount Amount",placeholder:"Enter the discount amount",icon:Ee,required:!1,description:"Enter the discount amount",disabled:!1},{key:"tax_rate",label:"TAX",placeholder:"Enter the TAX percentage",icon:Ee,required:!1,description:"TAX percentage for the item (optional)",disabled:!0},{key:"tax_amount",label:"TAX Amount",placeholder:"Enter the TAX amount",icon:Ee,required:!1,description:"Enter rate and quantity to calculate TAX amount",disabled:!0},{key:"total_amount",label:"Total Amount",placeholder:"Enter the total amount",icon:Ee,required:!1,description:"Enter rate and quantity to calculate total amount",disabled:!0}]:[{key:"quantity",label:"Quantity",placeholder:"Enter the quantity of the item",icon:ea,required:!0,description:`Quantity of the item (should be valid ${((Te=Et.find(z=>{var de;return z.value===((de=N.find(Ie=>Ie.id===y.item_id))==null?void 0:de.unit)}))==null?void 0:Te.si_representation)==="integer"?"whole number":"decimal number"})`,disabled:!1,qty:(V=Et.find(z=>{var de;return z.value===((de=N.find(Ie=>Ie.id===y.item_id))==null?void 0:de.unit)}))==null?void 0:V.si_representation},{key:"rate",label:"Rate",placeholder:"Enter the rate of the item",icon:Ee,required:!0,description:"Rate of the item per unit",disabled:!1},{key:"amount",label:"Amount",placeholder:"Enter the amount",icon:Ee,required:!0,description:"Enter rate and quantity to calculate amount",disabled:!0},{key:"discount_amount",label:"Discount Amount",placeholder:"Enter the discount amount",icon:Ee,required:!1,description:"Enter the the discount amount",disabled:!1},{key:"total_amount",label:"Total Amount",placeholder:"Total amount",icon:Ee,required:!0,description:"Enter rate and quantity to calculate total amount",disabled:!0}];return e.jsxs(Mt,{anchor:"right",PaperProps:{sx:{width:{xs:"100%",sm:650,md:800},backgroundColor:o.palette.background.default,backgroundImage:`linear-gradient(135deg, ${o.palette.background.default} 0%, ${d(o.palette.primary.main,.02)} 100%)`,overflow:"hidden",zIndex:1400}},sx:{"& .MuiBackdrop-root":{backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(12px)",zIndex:1400}},open:t,onClose:a,children:[e.jsx(ka,{direction:"down",in:t,timeout:500,children:e.jsxs(l,{sx:{p:{xs:2,sm:3},display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${d(o.palette.divider,.5)}`,background:`linear-gradient(135deg, ${d(o.palette.primary.main,.08)} 0%, ${d(o.palette.secondary.main,.05)} 100%)`,position:"sticky",top:0,zIndex:1400},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(le,{title:"Close",arrow:!0,placement:"bottom",children:e.jsx(ke,{onClick:a,sx:{backgroundColor:d(o.palette.background.paper,.9),border:`1px solid ${d(o.palette.primary.main,.5)}`,transition:"all 0.3s ease","&:hover":{backgroundColor:d(o.palette.primary.main,.5),transform:"rotate(90deg)"}},children:e.jsx(ct,{})})}),e.jsxs(l,{children:[e.jsx(i,{variant:p?"h6":"h5",fontWeight:700,sx:{background:`linear-gradient(135deg, ${o.palette.primary.main} 0%, ${o.palette.secondary.main} 100%)`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",display:"flex",alignItems:"center",gap:1},children:r===null?"Add Item":"Edit Item"}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:r===null?"Set up your item details to add it to the invoice":"Update your item information to keep it current"})]})]}),e.jsx(ee,{variant:"contained",color:"primary",onClick:()=>{k(!0)},disabled:x,startIcon:e.jsx(Zt,{}),sx:{textTransform:"none",fontWeight:600,borderRadius:1,px:4,py:1.5,background:`linear-gradient(135deg, ${o.palette.primary.main} 0%, ${o.palette.primary.dark} 100%)`,boxShadow:`0 4px 20px ${d(o.palette.primary.main,.3)}`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{background:`linear-gradient(135deg, ${o.palette.primary.dark} 0%, ${o.palette.primary.main} 100%)`,borderColor:o.palette.common.white},"&:disabled":{background:d(o.palette.action.disabled,.12),color:o.palette.action.disabled,boxShadow:"none",transform:"none"}},children:"Create New Item"})]})}),e.jsx(l,{sx:{flex:1,overflow:"auto",position:"relative"},children:e.jsx(l,{sx:{p:{xs:2,sm:3},pb:6},children:e.jsx(pr,{in:!0,timeout:600,children:e.jsx(ne,{elevation:0,sx:{p:{xs:3,sm:4},borderRadius:3,background:`linear-gradient(135deg, ${d(o.palette.background.paper,.9)} 0%, ${d(o.palette.background.paper,.7)} 100%)`,border:`1px solid ${d(o.palette.divider,.5)}`,position:"relative",overflow:"hidden",backdropFilter:"blur(20px)"},children:e.jsxs(J,{spacing:3,children:[e.jsx(at,{options:N,getOptionLabel:z=>typeof z=="string"?z:(z==null?void 0:z.name)||"",value:N.find(z=>z.id===y.item_id)||(y.item?{id:"",name:y.item,unit:y.unit||"",tax_rate:y.tax_rate||"",hsn_code:y.hsn_code||""}:null),onChange:(z,de)=>{de&&typeof de=="object"?(M("item",de.name),M("item_id",de.id),M("unit",de.unit),O&&(M("hsn_code",de.hsn_code),M("tax_rate",String(de.tax_rate||0)))):(M("item",""),M("item_id",""))},filterOptions:(z,{inputValue:de})=>{const Ie=de.replace(/\s+/g,"").toLowerCase();return z.filter(oe=>(typeof oe=="string"?oe:(oe==null?void 0:oe.name)||"").replace(/\s+/g,"").toLowerCase().includes(Ie))},renderInput:z=>e.jsx(X,{...z,inputRef:h,placeholder:"Start typing for items suggestions...",variant:"outlined",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:1,width:"100%"}},error:!!v.item,helperText:v.item||"Select an item from the list",required:!0,onFocus:()=>w("item"),onBlur:()=>w(""),InputProps:{...z.InputProps,startAdornment:e.jsx(se,{position:"start",children:e.jsx(l,{sx:{p:.5,borderRadius:1,backgroundColor:K==="item"?d(o.palette.primary.main,.1):"transparent",transition:"all 0.3s ease",display:"flex",alignItems:"center"},children:e.jsx(Ta,{color:v.item?"error":K==="item"?"primary":"action",sx:{fontSize:20}})})})}}),sx:{"& .MuiAutocomplete-endAdornment":{display:"none"}},isOptionEqualToValue:(z,de)=>z.id===de.id}),e.jsx(l,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:$.map((z,de)=>{var je;let Ie="text",oe;if(z.key==="quantity"){const q=N.find(te=>te.id===y.item_id),E=(je=Et.find(te=>te.value===(q==null?void 0:q.unit)))==null?void 0:je.si_representation;Ie="number",oe=E==="integer"?"1":"0.01"}const ue=y[z.key]||"";return e.jsx(X,{fullWidth:!0,label:z.label,placeholder:z.placeholder,value:ue,onChange:q=>M(z.key,q.target.value),error:!!v[z.key],helperText:v[z.key]||z.description,required:z.required,onFocus:()=>w(z.key),onBlur:()=>w(""),disabled:x||z.disabled,type:Ie,inputProps:oe?{step:oe,min:0}:{min:0},InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(l,{sx:{p:.5,borderRadius:1,backgroundColor:K===z.key?d(o.palette.primary.main,.1):"transparent",transition:"all 0.3s ease",display:"flex",alignItems:"center"},children:e.jsx(z.icon,{color:v[z.key]?"error":K===z.key?"primary":"action",sx:{fontSize:20}})})}),endAdornment:z.required&&e.jsx(se,{position:"end",children:["rate"].includes(z.key)?e.jsx(ve,{label:`per ${y.unit||"Unit"}`,size:"small",color:"primary",variant:"outlined",sx:{fontSize:"0.7rem",height:20,opacity:K===z.key?1:.6,transition:"opacity 0.3s ease"}}):e.jsx(ve,{label:"Required",size:"small",color:"primary",variant:"outlined",sx:{fontSize:"0.7rem",height:20,opacity:K===z.key?1:.6,transition:"opacity 0.3s ease"}})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,backgroundColor:K===z.key?d(o.palette.primary.main,.02):d(o.palette.background.paper,.5)},"& .MuiFormHelperText-root":{marginLeft:0,marginTop:1,fontSize:"0.75rem",color:v[z.key]?o.palette.error.main:d(o.palette.text.secondary,.7)}}},de+z.key)})})]})})})})}),e.jsxs(l,{sx:{position:"sticky",bottom:0,right:0,display:"flex",justifyContent:"flex-end",gap:2,py:2,mx:2,borderTop:`1px solid ${d(o.palette.divider,.5)}`},children:[e.jsx(ee,{variant:"outlined",color:"secondary",onClick:a,startIcon:e.jsx(ct,{}),sx:{textTransform:"none",fontWeight:600,borderRadius:2,px:3,py:1.5,borderColor:d(o.palette.secondary.main,.3),backgroundColor:d(o.palette.background.paper,.8),backdropFilter:"blur(10px)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:d(o.palette.secondary.main,.08),borderColor:o.palette.secondary.main}},children:"Cancel"}),e.jsx(ee,{variant:"contained",color:"primary",onClick:C,disabled:Object.keys(v).length>0||x,startIcon:x?e.jsx(bt,{size:20,color:"inherit"}):e.jsx(ia,{}),sx:{textTransform:"none",fontWeight:600,borderRadius:2,px:4,py:1.5,background:`linear-gradient(135deg, ${o.palette.primary.main} 0%, ${o.palette.primary.dark} 100%)`,boxShadow:`0 4px 20px ${d(o.palette.primary.main,.3)}`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{background:`linear-gradient(135deg, ${o.palette.primary.dark} 0%, ${o.palette.primary.main} 100%)`,borderColor:o.palette.common.white},"&:disabled":{background:d(o.palette.action.disabled,.12),color:o.palette.action.disabled,boxShadow:"none",transform:"none"}},children:x?"Adding...":r===null?"Add Item":"Update Item"})]}),e.jsx(vo,{drawer:T,setDrawer:k,setRefreshKey:_})]})},Ax=({open:t,type:a,onClose:n,onCreated:s})=>{var A,O,y,F;const r=we(),o=yt(r.breakpoints.down("sm")),p=Fe(),{user:c,current_company_id:x}=Ce(h=>h.auth),u=x||localStorage.getItem("current_company_id")||((A=c==null?void 0:c.user_settings)==null?void 0:A.current_company_id)||"",S=(O=c==null?void 0:c.company)==null?void 0:O.find(h=>h._id===u),f=(F=(y=S==null?void 0:S.company_settings)==null?void 0:y.features)==null?void 0:F.enable_tax,[v,j]=g.useState(!1),[T,k]=g.useState({}),{customerType_id:B}=Ce(h=>h.customersLedger),[_,K]=g.useState({company_id:u||"",name:"",parent:a,parent_id:B||"",mailing_country:"",mailing_state:"",tin:""}),w=()=>{const h={};return((_==null?void 0:_.name)||"").trim()?((_==null?void 0:_.name)||"").length<2&&(h.name="Customer name must be at least 2 characters"):h.name="Customer name is required",f&&!((_==null?void 0:_.mailing_country)||"").trim()&&(h.mailing_country="Country is required"),f&&!((_==null?void 0:_.mailing_state)||"").trim()&&(h.mailing_state="State is required"),f&&a==="Creditors"&&!((_==null?void 0:_.tin)||"").trim()&&(h.tin="TIN is required"),k(h),Object.keys(h).length===0},N=(h,b)=>{K(M=>({...M,[h]:b})),T[h]&&k(M=>({...M,[h]:""}))},R=()=>{K({name:"",parent:"",parent_id:"",mailing_country:"",mailing_state:""}),k({})},L=async()=>{var M,W,C,$,G,ge,Ae,ae,Y,re,Te,V,z,de,Ie;if(!w()){Z.error("Please fix the form errors before submitting");return}j(!0);const h={name:(M=_.name)==null?void 0:M.trim(),user_id:c==null?void 0:c._id,company_id:u,parent_id:B||"",parent:a};(W=_.email)!=null&&W.trim()&&(h.email=_.email.trim()),(C=_.mailing_pincode)!=null&&C.trim()&&(h.mailing_pincode=_.mailing_pincode.trim()),($=_.code)!=null&&$.trim()&&(h.code=_.code.trim()),(G=_.number)!=null&&G.trim()&&(h.number=_.number.trim()),(ge=_.mailing_name)!=null&&ge.trim()&&(h.mailing_name=_.mailing_name.trim()),(Ae=_.mailing_address)!=null&&Ae.trim()&&(h.mailing_address=_.mailing_address.trim()),(ae=_.mailing_country)!=null&&ae.trim()&&(h.mailing_country=_.mailing_country.trim()),_.image&&typeof _.image!="string"&&(h.image=_.image),(Y=_.mailing_state)!=null&&Y.trim()&&(h.mailing_state=_.mailing_state.trim()),(re=_.bank_name)!=null&&re.trim()&&(h.bank_name=_.bank_name.trim()),(Te=_.account_number)!=null&&Te.trim()&&(h.account_number=_.account_number.trim()),(V=_.bank_ifsc)!=null&&V.trim()&&(h.bank_ifsc=_.bank_ifsc.trim()),(z=_.bank_branch)!=null&&z.trim()&&(h.bank_branch=_.bank_branch.trim()),(de=_.account_holder)!=null&&de.trim()&&(h.account_holder=_.account_holder.trim()),(Ie=_.tin)!=null&&Ie.trim()&&(h.tin=_.tin.trim());const b=new FormData;Object.entries(h).forEach(([oe,ue])=>{typeof ue=="boolean"?b.append(oe,ue?"true":"false"):ue!=null&&(typeof ue=="string"||ue instanceof Blob)&&b.append(oe,ue)}),p(dr(b)).unwrap().then(()=>{s(),Z.success("Customer successfully created! 🎉"),j(!1),R(),n()}).catch(oe=>{j(!1),console.error("Error creating customer:",oe),Z.error(oe||"An unexpected error occurred. Please try again later.")}).finally(()=>{j(!1),R(),n()})},D=(_.name||"").trim(),P=f?[_.name,_.mailing_country,_.mailing_state,_.tin].filter(Boolean).length:[_.name,_.mailing_country,_.mailing_state].filter(Boolean).length;return e.jsxs(Mt,{anchor:"right",PaperProps:{sx:{width:{xs:"100%",sm:650,md:750},backgroundColor:r.palette.background.default,backgroundImage:`linear-gradient(135deg, ${r.palette.background.default} 0%, ${d(r.palette.primary.main,.02)} 100%)`,overflow:"hidden",borderLeft:`3px solid ${r.palette.primary.main}`}},sx:{"& .MuiBackdrop-root":{backgroundColor:d(r.palette.common.black,.7),backdropFilter:"blur(12px)"}},open:t,onClose:n,transitionDuration:350,...t?{}:{inert:""},children:[e.jsx(ze,{in:v,children:e.jsx(St,{variant:"indeterminate",sx:{position:"absolute",top:0,left:0,right:0,zIndex:1300,height:4,"& .MuiLinearProgress-bar":{background:`linear-gradient(90deg, ${r.palette.primary.main}, ${r.palette.secondary.main})`}}})}),e.jsx(l,{sx:{p:{xs:2,sm:3},background:`linear-gradient(135deg, ${d(r.palette.primary.main,.08)} 0%, ${d(r.palette.primary.light,.05)} 100%)`,borderBottom:`1px solid ${d(r.palette.primary.main,.12)}`,position:"sticky",top:0,zIndex:100,backdropFilter:"blur(20px)"},children:e.jsxs(J,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",children:[e.jsxs(J,{direction:"row",spacing:2,alignItems:"center",sx:{flex:1},children:[e.jsx(le,{title:"Close",placement:"bottom",children:e.jsx(ke,{onClick:n,sx:{backgroundColor:d(r.palette.background.paper,.8),backdropFilter:"blur(10px)",border:`1px solid ${d(r.palette.divider,.2)}`,"&:hover":{backgroundColor:d(r.palette.primary.main,.08),transform:"rotate(90deg) scale(1.1)",borderColor:r.palette.primary.main},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:e.jsx(ct,{})})}),e.jsx(l,{sx:{flex:1},children:e.jsxs(J,{direction:"row",spacing:1.5,alignItems:"center",sx:{mb:.5},children:[e.jsx($e,{sx:{bgcolor:r.palette.primary.main,width:36,height:36,boxShadow:r.shadows[3]},children:e.jsx(po,{fontSize:"small"})}),e.jsxs(l,{children:[e.jsxs(i,{variant:"h6",fontWeight:700,color:"text.primary",sx:{background:`linear-gradient(45deg, ${r.palette.text.primary}, ${r.palette.primary.main})`,backgroundClip:"text",WebkitBackgroundClip:"text"},children:["Create ",a," Customer"]}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{opacity:.8},children:"Add new customer information and details"})]})]})})]}),e.jsx(J,{direction:"row",spacing:1,alignItems:"center",children:e.jsx(ve,{icon:e.jsx(mo,{}),label:`${P}/${f?4:3} fields`,size:"small",variant:"outlined",color:P>=2?"success":"default",sx:{fontWeight:600,borderWidth:2,"& .MuiChip-icon":{fontSize:"1rem"}}})})]})}),e.jsx(l,{sx:{flex:1,overflow:"auto",position:"relative","&::-webkit-scrollbar":{width:6},"&::-webkit-scrollbar-track":{backgroundColor:d(r.palette.background.default,.1),borderRadius:3},"&::-webkit-scrollbar-thumb":{backgroundColor:d(r.palette.primary.main,.3),borderRadius:3,"&:hover":{backgroundColor:d(r.palette.primary.main,.5)}}},children:e.jsx(l,{sx:{p:{xs:2,sm:3}},children:e.jsx(Ne,{elevation:0,sx:{borderRadius:3,border:`1px solid ${d(r.palette.divider,.5)}`,background:`linear-gradient(135deg, ${d(r.palette.background.paper,.8)} 0%, ${d(r.palette.background.paper,.6)} 100%)`,backdropFilter:"blur(20px)",overflow:"hidden",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:4,background:`linear-gradient(90deg, ${r.palette.primary.main}, ${r.palette.secondary.main})`}},children:e.jsx(Me,{sx:{p:4},children:e.jsxs(J,{spacing:4,children:[f&&e.jsx(ka,{direction:"right",in:!0,timeout:300,children:e.jsxs(l,{children:[e.jsxs(J,{direction:"row",spacing:1,alignItems:"center",sx:{mb:2},children:[e.jsx(ca,{color:"primary",fontSize:"small"}),e.jsx(i,{variant:"h6",fontWeight:600,color:"primary",children:"Tax Information"}),e.jsx(Pe,{sx:{flex:1,ml:2}})]}),e.jsx(qe,{fullWidth:!0,children:e.jsx(X,{fullWidth:!0,label:`TIN Number ${f&&a==="Creditors"?"*":""}`,placeholder:"Enter tax identification number",value:_.tin||"",onChange:h=>N("tin",h.target.value),error:!!T.tin,helperText:T.tin||"Tax identification number for business records",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:1,backgroundColor:d(r.palette.background.paper,.8),transition:"all 0.3s ease","&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main",borderWidth:2}},"&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main",borderWidth:2}}}}})})]})}),e.jsx(ka,{direction:"right",in:!0,timeout:400,children:e.jsxs(l,{children:[e.jsxs(J,{direction:"row",spacing:1,alignItems:"center",sx:{mb:2},children:[e.jsx(Ta,{color:"primary",fontSize:"small"}),e.jsx(i,{variant:"h6",fontWeight:600,color:"primary",children:"Customer Details"}),e.jsx(Pe,{sx:{flex:1,ml:2}})]}),e.jsx(qe,{fullWidth:!0,children:e.jsx(X,{fullWidth:!0,label:"Customer Name *",placeholder:"Enter full customer name",value:_.name||"",onChange:h=>N("name",h.target.value),error:!!T.name,helperText:T.name||"Full name of the customer or business",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:1,backgroundColor:d(r.palette.background.paper,.8),fontSize:"1.1rem",transition:"all 0.3s ease","&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main",borderWidth:2}},"&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main",borderWidth:2}}}}})})]})}),e.jsx(ka,{direction:"right",in:!0,timeout:500,children:e.jsxs(l,{children:[e.jsxs(J,{direction:"row",spacing:1,alignItems:"center",sx:{mb:2},children:[e.jsx(La,{color:"primary",fontSize:"small"}),e.jsx(i,{variant:"h6",fontWeight:600,color:"primary",children:"Location Information"}),e.jsx(Pe,{sx:{flex:1,ml:2}})]}),e.jsxs(J,{spacing:3,children:[e.jsx(qe,{fullWidth:!0,children:e.jsx(at,{fullWidth:!0,options:(It==null?void 0:It.map(h=>({label:h.name})))??[],getOptionLabel:h=>typeof h=="string"?h:h.label||"",freeSolo:!0,renderOption:(h,b)=>{const{key:M,...W}=h;return e.jsx("li",{...W,style:{padding:"12px 16px",fontWeight:500,transition:"all 0.2s ease",borderRadius:"8px",margin:"2px",...h.style||{}},children:b.label},M)},renderInput:h=>e.jsx(X,{...h,label:`Country ${f?"*":""}`,placeholder:"Select or type country name",error:!!T.mailing_country,helperText:T.mailing_country||"Country for address",sx:{"& .MuiOutlinedInput-root":{borderRadius:1,backgroundColor:d(r.palette.background.paper,.8),transition:"all 0.3s ease","&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main",borderWidth:2}},"&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main",borderWidth:2}}}}}),value:_.mailing_country||"",onChange:(h,b)=>{N("mailing_country",typeof b=="string"?b:typeof b=="object"&&b!==null&&"label"in b?b.label:"")},sx:{"& .MuiAutocomplete-popupIndicator":{color:r.palette.primary.main},"& .MuiAutocomplete-clearIndicator":{color:r.palette.text.secondary}}})}),e.jsx(qe,{fullWidth:!0,children:e.jsx(at,{fullWidth:!0,options:(()=>{const h=It.find(b=>b.name===_.mailing_country);return h?h.states.length===0?["No States"]:h.states:[]})(),freeSolo:!0,disabled:!_.mailing_country,renderOption:(h,b)=>{const{key:M,...W}=h;return e.jsx("li",{...W,style:{padding:"12px 16px",fontWeight:500,transition:"all 0.2s ease",borderRadius:"8px",margin:"2px",...h.style||{}},children:b},M)},renderInput:h=>e.jsx(X,{...h,label:`State/Province ${f?"*":""}`,placeholder:"Select or type state name",disabled:!_.mailing_country,error:!!T.mailing_state,helperText:T.mailing_state||"State or province for address",sx:{"& .MuiOutlinedInput-root":{borderRadius:1,backgroundColor:d(r.palette.background.paper,.8),transition:"all 0.3s ease","&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main",borderWidth:2}},"&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main",borderWidth:2}}}}}),value:_.mailing_state||"",onChange:(h,b)=>{N("mailing_state",ra((()=>{const M=It.find(W=>W.name===_.mailing_country);return!M||M.states.length<1?"":b||""})(),"words"))},sx:{"& .MuiAutocomplete-popupIndicator":{color:r.palette.primary.main},"& .MuiAutocomplete-clearIndicator":{color:r.palette.text.secondary}}})})]})]})})]})})})})}),e.jsx(l,{sx:{p:{xs:2,sm:3},borderTop:`1px solid ${d(r.palette.divider,.1)}`,background:`linear-gradient(135deg, ${d(r.palette.background.paper,.95)} 0%, ${d(r.palette.background.paper,.8)} 100%)`,backdropFilter:"blur(20px)"},children:e.jsxs(J,{direction:o?"column":"row",spacing:2,justifyContent:"space-between",alignItems:"center",children:[e.jsxs(J,{direction:o?"column":"row",spacing:2,sx:{width:o?"100%":"auto"},children:[e.jsx(ee,{variant:"outlined",onClick:R,disabled:v,fullWidth:o,sx:{textTransform:"none",borderRadius:1,px:3,py:1.5,fontWeight:600,fontSize:"0.95rem",borderWidth:2,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{borderWidth:2,transform:"translateY(-2px)",boxShadow:r.shadows[6],backgroundColor:d(r.palette.primary.main,.04)}},children:"Reset Form"}),e.jsx(ee,{variant:"contained",startIcon:v?e.jsx(qt,{className:"animate-spin"}):e.jsx(pa,{}),onClick:L,disabled:v||!D,fullWidth:o,sx:{textTransform:"none",px:4,py:1.5,fontSize:"1rem",fontWeight:700,borderRadius:1,background:`linear-gradient(135deg, ${r.palette.primary.main} 0%, ${r.palette.primary.dark} 100%)`,boxShadow:r.shadows[8],minWidth:200,"&:hover":{background:`linear-gradient(135deg, ${r.palette.primary.dark} 0%, ${r.palette.primary.main} 100%)`,transform:"translateY(-3px)",boxShadow:r.shadows[16]},"&:disabled":{background:r.palette.action.disabledBackground,color:r.palette.action.disabled,transform:"none",boxShadow:"none"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:v?"Creating Customer...":"Create Customer"})]}),!o&&D&&e.jsx(Ye,{appear:!0,in:!0,timeout:400,children:e.jsx(ve,{icon:e.jsx(pt,{}),label:"Ready to submit",color:"success",variant:"outlined",sx:{fontWeight:600,borderWidth:2,backgroundColor:d(r.palette.success.main,.1),"& .MuiChip-icon":{fontSize:"1.1rem"}}})})]})})]})},Sa=({children:t,gradient:a="primary",...n})=>{const s=we(),r={primary:`linear-gradient(135deg, ${d(s.palette.primary.main,.2)} 0%, ${d(s.palette.primary.main,.35)} 100%)`,secondary:`linear-gradient(135deg, ${d(s.palette.secondary.main,.2)} 0%, ${d(s.palette.secondary.main,.35)} 100%)`,success:`linear-gradient(135deg, ${d(s.palette.success.main,.2)} 0%, ${d(s.palette.success.main,.35)} 100%)`,warning:`linear-gradient(135deg, ${d(s.palette.warning.main,.2)} 0%, ${d(s.palette.warning.main,.35)} 100%)`,error:`linear-gradient(135deg, ${d(s.palette.error.main,.15)} 0%, ${d(s.palette.error.main,.3)} 100%)`,info:`linear-gradient(135deg, ${d(s.palette.info.main,.15)} 0%, ${d(s.palette.info.main,.3)} 100%)`,glass:`linear-gradient(135deg, ${d(s.palette.background.paper,.9)} 0%, ${d(s.palette.background.paper,.95)} 100%)`};return e.jsx(Ne,{elevation:0,sx:{borderRadius:1,background:r[a],backdropFilter:"blur(20px)",...n.sx},...n,children:t})},Lr=({...t})=>e.jsx(X,{...t,sx:{"& .MuiOutlinedInput-root":{borderRadius:"4px",transition:"all 0.3s ease","&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main",borderWidth:2}},"&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main",borderWidth:2}}},"& .MuiInputLabel-root":{fontWeight:500},...t.sx}}),Px=({payment_mode:t,...a})=>{const s=(r=>{switch(r==null?void 0:r.toLowerCase()){case"paid":return{color:"success",icon:"✓"};case"unpaid":return{color:"error",icon:"⏳"};case"partially paid":return{color:"warning",icon:"⏱"};default:return{color:"default",icon:"❓"}}})(t);return e.jsx(ve,{label:`${s.icon} ${t}`,color:s.color,variant:"outlined",size:"small",sx:{fontWeight:600,"& .MuiChip-label":{px:1.5}},...a})},Xo=[{label:"🚗 By Road",value:"By Road",icon:"🚗"},{label:"🚂 By Rail",value:"By Rail",icon:"🚂"},{label:"✈️ By Air",value:"By Air",icon:"✈️"},{label:"🚢 By Sea",value:"By Sea",icon:"🚢"}],es=[{label:"💵 Cash",value:"Cash",color:"success"},{label:"💳 Card",value:"Card",color:"error"},{label:"🏦 Net Banking",value:"Net Banking",color:"warning"},{label:"🏧 NEFT",value:"NEFT",color:"warning"},{label:"📄 Cheque",value:"Cheque",color:"warning"}];function Mx(){var U,H,ie,me;const t=we(),{type:a}=ja(),n=Ke(),s=Fe(),{currentCompany:r,user:o,current_company_id:p}=Ce(Q=>Q.auth),c=p||localStorage.getItem("current_company_id")||((U=o==null?void 0:o.user_settings)==null?void 0:U.current_company_id)||"",x=(H=o==null?void 0:o.company)==null?void 0:H.find(Q=>Q._id===c),u=(me=(ie=x==null?void 0:x.company_settings)==null?void 0:ie.features)==null?void 0:me.enable_tax,{invoiceType_id:S}=Ce(Q=>Q.invoice),{accountingGroups:f}=Ce(Q=>Q.accountingGroup),v=a!==void 0?a.charAt(0).toUpperCase()+a.slice(1):"",[j,T]=g.useState(new Date),[k,B]=g.useState(!1),[_,K]=g.useState(!1),[w,N]=g.useState(!0),[R,L]=g.useState(!1),[D,P]=g.useState(null),[A,O]=g.useState(!1),[y,F]=g.useState({}),[h,b]=g.useState(!1),[M,W]=g.useState([]),[C,$]=g.useState(new Date(Date.now()+7*24*60*60*1e3)),[G,ge]=g.useState({company_id:"",date:new Date().toISOString().split("T")[0],voucher_type:"",voucher_number:"",party_name:"",party_id:"",counter_party:"",counter_id:"",narration:"",reference_number:"",reference_date:"",place_of_supply:"",mode_of_transport:"",vehicle_number:"",due_date:"",payment_mode:"",paid_amount:0,total:0,discount:0,total_amount:0,total_tax:0,additional_charge:0,roundoff:0,grand_total:0,accounting:[],items:[]}),Ae=()=>{const Q={};if(j||(Q.date="Please select a valid date"),G.party_name.trim()||(Q.partyName=`Please select a ${a==="sales"?"customer":"supplier"}`),G.items.length<=0&&(Q.items="Please add at least one item to continue"),F(Q),Object.keys(Q).length>0){const ce=document.querySelector(`[name="${Object.keys(Q)[0]}"]`);ce&&ce.scrollIntoView({behavior:"smooth",block:"center"})}return Object.keys(Q).length===0},ae=()=>{P(null),O(!0)},Y=Q=>{ge(ce=>({...ce,items:ce.items.filter((De,et)=>et!==Q)}))},re=(Q,ce)=>{ge(De=>({...De,[Q]:ce})),y[Q]&&F(De=>{const et={...De};return delete et[Q],et})},Te=Ft.useMemo(()=>{const Q=G.items.reduce((_t,wt)=>_t+Number(wt.amount||0),0),ce=G.items.reduce((_t,wt)=>_t+Number(wt.discount_amount||0),0),De=Number(Q)-Number(ce),et=G.items.reduce((_t,wt)=>_t+Number(wt.tax_amount||0),0),Se=Number(G.additional_charge||0),He=G.items.reduce((_t,wt)=>_t+Number(wt.total_amount||0),0)+Se,Oe=Math.round(He)-He,Yt=De+et+Se+Oe;return{total:Number(Q).toFixed(2),discount:Number(ce).toFixed(2),total_amount:Number(De).toFixed(2),total_tax:Number(et).toFixed(2),additional_charge:Number(Se).toFixed(2),roundoff:Number(Oe).toFixed(2),grandTotal:Number(Yt).toFixed(2)}},[G]),{total:V,discount:z,total_amount:de,total_tax:Ie,additional_charge:oe,roundoff:ue,grandTotal:je}=Te,q=async Q=>{if(Q.preventDefault(),!!Ae()){B(!0);try{if(u){const ce={...G,date:j.toISOString().slice(0,10),company_id:(r==null?void 0:r._id)||"",voucher_type_id:S||"",party_name_id:G.party_id,mode_of_transport:G.mode_of_transport,vehicle_number:G.vehicle_number,place_of_supply:G.place_of_supply,payment_mode:G.payment_mode,paid_amount:G.paid_amount,due_date:C instanceof Date?C.toISOString().split("T")[0]:C,additional_charge:Number(oe),discount:Number(z),total:Number(V),total_amount:Number(de),total_tax:Number(Ie),roundoff:Number(ue),grand_total:Number(je),items:G.items.map((De,et)=>{var Se;return{...De,vouchar_id:"",tax_rate:De.tax_rate||0,tax_amount:Number((Se=De.tax_amount)==null?void 0:Se.toFixed(2))||0,additional_amount:0,discount_amount:De.discount_amount,godown:"",godown_id:"",order_number:"",order_due_date:"",hsn_code:(De==null?void 0:De.hsn_code)||"",order_index:et}}),accounting:Ko({type:v,party:{name:G.party_name,id:G.party_id},counter:{name:G.counter_party,id:G.counter_id},amount:Number(je)})};await s(gx(ce)),Z.success("🎉 Invoice created successfully!"),n("/invoices",{replace:!0})}else{const ce={...G,date:j instanceof Date?j.toISOString().split("T")[0]:j,company_id:(r==null?void 0:r._id)||"",voucher_type_id:S||"",party_name_id:G.party_id,mode_of_transport:G.mode_of_transport,vehicle_number:G.vehicle_number,place_of_supply:G.place_of_supply,payment_mode:G.payment_mode,paid_amount:G.paid_amount,due_date:C instanceof Date?C.toISOString().split("T")[0]:C,additional_charge:Number(oe),discount:Number(z),total:Number(V),total_amount:Number(de),total_tax:Number(Ie),roundoff:Number(ue),grand_total:Number(je),items:G.items.map((De,et)=>({...De,vouchar_id:"",order_index:et})),accounting:Ko({type:v,party:{name:G.party_name,id:G.party_id},counter:{name:G.counter_party,id:G.counter_id},amount:Number(je)})};await s($r(ce)),Z.success("🎉 Invoice created successfully!"),n("/invoices",{replace:!0})}}catch(ce){Z.error("❌ Failed to create invoice. Please try again."),console.error(ce)}finally{B(!1)}}},E=async()=>{const Q=await s(la({company_id:c||"",customerType:v==="Sales"?"Debtors":"Creditors"}));if(Q.meta.requestStatus==="fulfilled"){const ce=Q.payload;W(ce.map(De=>({name:De.ledger_name,id:De._id})))}},te=async()=>{const Q=await s(Nr({company_id:c||"",voucher_type:v}));Q.meta.requestStatus==="fulfilled"&&ge(ce=>({...ce,voucher_number:Q.payload.current_number}))};return g.useEffect(()=>{c&&ge(ce=>({...ce,company_id:c,voucher_type:v})),(async()=>{try{await E(),await te()}catch(ce){console.error("Failed to load initial data:",ce),Z.error("Failed to load data. Please refresh the page.")}})()},[s,c,o,v]),g.useEffect(()=>{s(kr(c||""))},[c,s]),e.jsxs(Pt,{dateAdapter:Lt,children:[e.jsx(ho,{sx:{color:"#fff",zIndex:Q=>Q.zIndex.drawer+1,backdropFilter:"blur(8px)"},open:k,children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx(bt,{color:"inherit",size:60,thickness:4}),e.jsx(i,{variant:"h6",sx:{fontWeight:600},children:"Creating your invoice..."}),e.jsx(St,{sx:{width:300,height:8,borderRadius:4,"& .MuiLinearProgress-bar":{borderRadius:4}}})]})}),e.jsxs(Je,{maxWidth:!1,sx:{py:4,minHeight:"100vh"},children:[e.jsx(ka,{direction:"down",in:!0,timeout:800,children:e.jsx(l,{sx:{mb:4},children:e.jsx(Sa,{gradient:"glass",sx:{mb:3},children:e.jsx(Me,{sx:{p:0},children:e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(zt,{icon:e.jsx(ma,{fontSize:"small"}),title:"Back",color:"primary",onClick:()=>n(-1)}),e.jsx($e,{sx:{bgcolor:"primary.main",width:48,height:48,mx:2,background:`linear-gradient(135deg, ${t.palette.primary.main} 0%, ${t.palette.primary.dark} 100%)`,boxShadow:t.shadows[8]},children:e.jsx(Tt,{sx:{fontSize:28}})}),e.jsxs(l,{children:[e.jsxs(i,{variant:"h5",component:"h1",fontWeight:"800",color:"primary.main",sx:{mb:1},children:["Create ",v]}),e.jsxs(l,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e.jsx(ve,{icon:e.jsx(ca,{}),label:(r==null?void 0:r.name)||"Company",size:"small"}),e.jsx(ve,{icon:e.jsx(Ut,{}),label:$t(j.toISOString()).split("T")[0].split("-").reverse().join("-"),size:"small"}),u&&e.jsx(ve,{icon:e.jsx(mo,{}),label:"TAX Enabled",color:"success",size:"small"})]})]})]}),e.jsxs(l,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsxs(ee,{variant:"outlined",startIcon:e.jsx(zs,{}),onClick:()=>K(!_),sx:{borderRadius:2,textTransform:"none",fontWeight:600,px:3},children:[_?"Hide":"Show"," Summary"]}),e.jsx(ta,{onClick:()=>n(-1),startIcon:e.jsx(Ga,{}),disabled:k}),e.jsx(ft,{onClick:q,disabled:k||G.items.length===0,startIcon:k?e.jsx(qt,{className:"animate-spin"}):e.jsx(ia,{}),text:k?"Creating...":"Create Invoice"})]})]})})})})}),e.jsx(ka,{direction:"left",in:_,timeout:400,children:e.jsx(l,{sx:{position:"fixed",right:_?24:-400,top:120,width:350,zIndex:1200,transition:"right 0.3s ease",maxHeight:"calc(100vh - 140px)",overflowY:"auto",boxShadow:t.shadows[4],borderRadius:2,border:`1px solid ${d(t.palette.divider,.2)}`},children:e.jsx(Sa,{gradient:"warning",sx:{backdropFilter:"blur(20px)"},children:e.jsxs(Me,{children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(ar,{color:"primary",sx:{mr:1}}),e.jsx(i,{variant:"h6",fontWeight:"700",children:"Invoice Summary"}),e.jsx(ke,{size:"small",onClick:()=>K(!1),sx:{ml:"auto"},children:e.jsx(Ga,{fontSize:"small"})})]}),e.jsx(Pe,{sx:{mb:2}}),e.jsxs(J,{spacing:2,children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",color:"text.secondary",children:"Items:"}),e.jsx(i,{variant:"body2",fontWeight:"600",children:G.items.length})]}),e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",color:"text.secondary",children:"Subtotal:"}),e.jsxs(i,{variant:"body2",fontWeight:"600",children:["₹ ",V]})]}),u&&e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",color:"text.secondary",children:"Tax Total:"}),e.jsxs(i,{variant:"body2",fontWeight:"600",children:["₹ ",Ie]})]}),e.jsx(Pe,{}),e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"h6",fontWeight:"700",children:"Grand Total:"}),e.jsxs(i,{variant:"h6",fontWeight:"700",color:"primary.main",children:["₹ ",je]})]}),G.party_name&&e.jsxs(l,{sx:{mt:2,p:2,bgcolor:d(t.palette.success.main,.1),borderRadius:2},children:[e.jsx(i,{variant:"body2",color:"text.secondary",children:"Customer:"}),e.jsx(i,{variant:"body1",fontWeight:"600",children:G.party_name})]}),G.payment_mode&&e.jsx(l,{sx:{display:"flex",justifyContent:"center"},children:e.jsx(Px,{payment_mode:G.payment_mode})})]})]})})})}),e.jsxs(l,{children:[e.jsx(Sa,{gradient:"primary",sx:{mb:4,border:`1px solid ${d(t.palette.primary.main,.2)}`},children:e.jsxs(Me,{sx:{p:0},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx($e,{sx:{bgcolor:"primary.main",mr:2,width:40,height:40},children:e.jsx(Tt,{})}),e.jsxs(l,{children:[e.jsx(i,{variant:"h6",sx:{display:"flex",alignItems:"center"},children:"Invoice Details"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Basic Invoice details"})]})]}),e.jsx(J,{direction:{xs:"column",sm:"row"},alignItems:"center",spacing:2,children:e.jsx(ee,{variant:"contained",startIcon:e.jsx(Zt,{}),onClick:()=>{var Q;s(er(((Q=f.find(ce=>ce.name.includes(v==="Sales"?"Debtors":"Creditors")))==null?void 0:Q._id)||"")),b(!0)},sx:{borderRadius:2,textTransform:"none",fontWeight:600,px:3,py:1,background:`linear-gradient(135deg, ${t.palette.primary.main} 0%, ${t.palette.primary.dark} 100%)`,boxShadow:t.shadows[4],"&:hover":{transform:"translateY(-1px)",boxShadow:t.shadows[8]}},children:"Create New Customer"})})]}),e.jsxs(I,{container:!0,spacing:4,children:[e.jsx(I,{item:!0,xs:12,lg:6,children:e.jsx(Sa,{gradient:"glass",children:e.jsx(Me,{sx:{p:0},children:e.jsxs(J,{spacing:0,children:[e.jsxs(J,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(Lr,{label:"Invoice Number",fullWidth:!0,value:G.voucher_number,onChange:v==="Sales"?void 0:Q=>re("voucher_number",Q.target.value),name:"voucher_number",disabled:v==="Sales",variant:"outlined",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Tt,{color:"primary"})})},sx:{flex:1}}),e.jsx(l,{sx:{flex:1},children:e.jsx(Xe,{label:"Invoice Date",value:j,format:"dd/MM/yyyy",maxDate:new Date,minDate:new Date(new Date().getFullYear(),3,1),views:["year","month","day"],onChange:Q=>{T(Q||new Date),y.date&&F(ce=>{const De={...ce};return delete De.date,De})},slotProps:{textField:{fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{},"& .MuiInputAdornment-root .MuiButtonBase-root":{border:"none",boxShadow:"none"}},InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(mi,{color:"primary"})})},onFocus:()=>{F(Q=>{const ce={...Q};return delete ce.date,ce})}}}})})]}),u&&e.jsxs(J,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mt:2},children:[e.jsx(at,{options:Xo,getOptionLabel:Q=>Q.label,value:Xo.find(Q=>Q.value===G.mode_of_transport)||null,onChange:(Q,ce)=>ge(De=>({...De,mode_of_transport:ce?ce.value:""})),renderInput:Q=>e.jsx(X,{...Q,label:"Mode of Transport",variant:"outlined",fullWidth:!0,InputProps:{...Q.InputProps,startAdornment:e.jsx(se,{position:"start",children:e.jsx(gi,{color:"primary"})})}}),sx:{width:"100%"},componentsProps:{paper:{sx:{border:"1px solid #000",borderRadius:1}}}}),e.jsx(Lr,{label:G.mode_of_transport==="By Road"?"Vehicle Number":G.mode_of_transport==="By Rail"?"Train Number":G.mode_of_transport==="By Air"?"Flight Number":G.mode_of_transport==="By Sea"?"Container Number":"Vehicle Number",value:G.vehicle_number,onChange:Q=>re("vehicle_number",ra(Q.target.value,"characters")),name:"vehicle_number",variant:"outlined",fullWidth:!0,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(gi,{color:"primary"})})}})]})]})})})}),e.jsx(I,{item:!0,xs:12,lg:6,children:e.jsx(Sa,{gradient:"glass",children:e.jsx(Me,{children:e.jsxs(J,{children:[e.jsx(J,{direction:{xs:"column",sm:"row"},spacing:2,children:e.jsx(at,{options:M,getOptionLabel:Q=>Q.name,value:M.find(Q=>Q.id===G.party_id)||null,onChange:(Q,ce)=>{re("party_name",(ce==null?void 0:ce.name)||""),re("party_id",(ce==null?void 0:ce.id)||""),F(De=>({...De,partyName:""}))},renderInput:Q=>e.jsx(Lr,{...Q,label:"Customer",variant:"outlined",fullWidth:!0,error:!!y.partyName,helperText:y.partyName,InputProps:{...Q.InputProps,startAdornment:e.jsx(se,{position:"start",children:e.jsx($s,{color:"primary"})})}}),sx:{flex:1}})}),u&&e.jsxs(J,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mt:2},children:[e.jsx(l,{sx:{width:"50%"},children:e.jsx(Xe,{label:"Due Date",value:C,format:"dd/MM/yyyy",minDate:new Date,views:["year","month","day"],onChange:Q=>{$(Q||new Date)},slotProps:{textField:{fullWidth:!0,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(mi,{color:"primary"})})},sx:{"& .MuiOutlinedInput-root":{flex:1},"& .MuiInputAdornment-root .MuiButtonBase-root":{border:"none",boxShadow:"none"}}}}})}),e.jsx(at,{options:es,getOptionLabel:Q=>Q.label,value:es.find(Q=>Q.value===G.payment_mode)||null,onChange:(Q,ce)=>ge(De=>({...De,payment_mode:ce?ce.value:""})),renderInput:Q=>e.jsx(X,{...Q,label:"Payment Mode",variant:"outlined",fullWidth:!0,InputProps:{...Q.InputProps,startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ns,{color:"primary"})})}}),sx:{width:"50%"},componentsProps:{paper:{sx:{border:"1px solid #000",borderRadius:1}}}})]})]})})})})]})]})}),e.jsx(Sa,{gradient:"secondary",sx:{mb:4},children:e.jsxs(Me,{sx:{p:0},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx($e,{sx:{bgcolor:"secondary.main",mr:2,width:40,height:40},children:e.jsx(ea,{})}),e.jsxs(l,{children:[e.jsx(i,{variant:"h5",fontWeight:"700",color:"secondary.main",children:"Invoice Items"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:G.items.length===0?'No items added yet - click "Add Items" to get started':`${G.items.length} item${G.items.length>1?"s":""} • Total: ₹${je}`})]})]}),e.jsxs(J,{direction:{xs:"column",sm:"row"},alignItems:"center",spacing:2,children:[e.jsx(ee,{variant:"contained",startIcon:e.jsx(Zt,{}),onClick:ae,sx:{borderRadius:2,textTransform:"none",fontWeight:600,px:3,py:1,background:`linear-gradient(135deg, ${t.palette.secondary.main} 0%, ${t.palette.secondary.dark} 100%)`,boxShadow:t.shadows[4],"&:hover":{transform:"translateY(-1px)",boxShadow:t.shadows[8]}},children:"Add Items"}),G.items.length>0&&e.jsx(ve,{icon:e.jsx(na,{fontSize:"large"}),label:`₹${je} Total`,color:"success",variant:"filled",sx:{fontWeight:700,fontSize:"2rem",height:50,px:2,py:2.5,border:`2px solid ${d(t.palette.success.main,.7)}`}})]})]}),e.jsx(Sa,{gradient:"glass",children:e.jsx(nt,{sx:{borderRadius:1,overflowX:"scroll",border:`1px solid ${d(t.palette.divider,.3)}`,"& .MuiTableCell-root":{borderBottom:`1px solid ${d(t.palette.divider,.05)}`}},children:e.jsxs(it,{sx:{minWidth:800},children:[e.jsx(ot,{children:e.jsxs(xe,{sx:{background:`linear-gradient(135deg, ${d(t.palette.primary.main,.1)} 0%, ${d(t.palette.secondary.main,.1)} 100%)`,"& .MuiTableCell-root":{fontWeight:700,fontSize:"0.95rem",color:t.palette.primary.main,border:"none",py:2}},children:[e.jsx(m,{align:"left",sx:{whiteSpace:"nowrap",minWidth:200},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ea,{fontSize:"small"}),"Item Details"]})}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap",minWidth:100},children:"Quantity"}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap",minWidth:120},children:"Rate (₹)"}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap",minWidth:120},children:"Price (₹)"}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap",minWidth:120},children:"Discount (₹)"}),u&&e.jsxs(e.Fragment,{children:[e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap",minWidth:100},children:"Tax (%)"}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap",minWidth:120},children:"Tax Amount (₹)"})]}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap",minWidth:140},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(na,{fontSize:"small"}),"Total (₹)"]})}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap",minWidth:120},children:"Actions"})]})}),e.jsxs(st,{children:[G.items.map((Q,ce)=>e.jsx(ze,{in:!0,timeout:300+ce*100,children:e.jsxs(xe,{sx:{"&:hover":{bgcolor:d(t.palette.primary.main,.05),transform:"scale(1.01)"},transition:"all 0.2s ease","& .MuiTableCell-root":{py:2}},children:[e.jsx(m,{align:"left",children:e.jsxs(l,{sx:{whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:2},children:[e.jsx($e,{sx:{width:36,height:36,bgcolor:"primary.main",fontSize:"0.8rem",fontWeight:600},children:ha(Q.item).toUpperCase()}),e.jsxs(l,{children:[e.jsx(i,{variant:"body1",fontWeight:"600",color:"text.primary",children:Q.item}),u&&e.jsxs(i,{variant:"caption",color:"text.secondary",children:["HSN: ",Q.hsn_code]}),!u&&e.jsxs(i,{variant:"caption",color:"text.secondary",children:["Unit: ",Q.unit||"PCS"]})]})]})}),e.jsx(m,{align:"center",children:e.jsx(ve,{label:`${Q.quantity} ${u?Q.unit??"PCS":""}`,size:"small",sx:{whiteSpace:"nowrap",bgcolor:d(t.palette.info.main,.1),color:"info.main",fontWeight:600,minWidth:60,py:1.5,px:1}})}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap"},children:e.jsxs(i,{variant:"body1",fontWeight:"600",color:"text.primary",children:["₹",Number(Q.rate).toLocaleString("en-IN",{minimumFractionDigits:2})]})}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap"},children:e.jsxs(i,{variant:"body1",fontWeight:"600",color:"text.primary",children:["₹",Number(Q.amount).toLocaleString("en-IN",{minimumFractionDigits:2})]})}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap"},children:e.jsxs(i,{variant:"body1",fontWeight:"600",color:"text.primary",children:["₹",Number(Q.discount_amount).toLocaleString("en-IN",{minimumFractionDigits:2})]})}),u&&e.jsxs(e.Fragment,{children:[e.jsx(m,{align:"center",children:e.jsx(ve,{label:`${(Q==null?void 0:Q.tax_rate)||0}%`,size:"small",color:"warning",sx:{whiteSpace:"nowrap",fontWeight:600,minWidth:60,py:1.5,px:1}})}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap"},children:e.jsxs(i,{variant:"body1",fontWeight:"600",color:"warning.main",children:["₹",Number(Q.tax_amount||0).toLocaleString("en-IN",{minimumFractionDigits:2})]})})]}),e.jsx(m,{align:"center",children:e.jsx(l,{sx:{whiteSpace:"nowrap",display:"inline-flex",alignItems:"center",px:2,py:1,bgcolor:d(t.palette.success.main,.1),borderRadius:2,border:`1px solid ${d(t.palette.success.main,.3)}`},children:e.jsxs(i,{variant:"body1",fontWeight:"700",color:"success.main",children:["₹",Number(Q.total_amount).toLocaleString("en-IN",{minimumFractionDigits:2})]})})}),e.jsx(m,{align:"center",children:e.jsxs(l,{sx:{display:"flex",whiteSpace:"nowrap",justifyContent:"center",gap:1},children:[e.jsx(le,{title:"Edit Item",arrow:!0,children:e.jsx(ke,{size:"small",onClick:()=>{P(Q),O(!0)},sx:{bgcolor:d(t.palette.primary.main,.1),color:"primary.main","&:hover":{bgcolor:d(t.palette.primary.main,.2),transform:"scale(1.1)"},transition:"all 0.2s ease"},children:e.jsx(aa,{fontSize:"small"})})}),e.jsx(le,{title:"Remove Item",arrow:!0,children:e.jsx(ke,{size:"small",onClick:()=>Y(ce),sx:{bgcolor:d(t.palette.error.main,.1),color:"error.main","&:hover":{bgcolor:d(t.palette.error.main,.2),transform:"scale(1.1)"},transition:"all 0.2s ease"},children:e.jsx(ut,{fontSize:"small"})})})]})})]})},ce)),G.items.length>0&&e.jsxs(xe,{sx:{borderTop:`3px solid ${t.palette.primary.main}`,background:`linear-gradient(135deg, ${d(t.palette.primary.main,.05)} 0%, ${d(t.palette.secondary.main,.05)} 100%)`,"& .MuiTableCell-root":{border:"none"}},children:[e.jsx(m,{align:"left",sx:{whiteSpace:"nowrap"},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ar,{color:"primary"}),e.jsx(i,{variant:"h6",fontWeight:"700",color:"primary.main",children:"Subtotals"})]})}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap"},children:e.jsxs(i,{variant:"h6",fontWeight:"700",color:"success.main",children:[Number(G.items.reduce((Q,ce)=>Q+(Number(ce.quantity)||0),0)).toLocaleString("en-IN",{minimumFractionDigits:2})," Units"]})}),e.jsx(m,{align:"center",children:e.jsx(i,{color:"text.secondary",children:"—"})}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap"},children:e.jsxs(i,{variant:"h6",fontWeight:"700",color:"text.primary",children:["₹ ",Number(G.items.reduce((Q,ce)=>Q+(ce.amount||0),0)).toLocaleString("en-IN",{minimumFractionDigits:2})]})}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap"},children:e.jsxs(i,{variant:"h6",fontWeight:"700",color:"text.primary",children:["₹ ",Number(G.items.reduce((Q,ce)=>Q+Number(ce.discount_amount||0),0)).toLocaleString("en-IN",{minimumFractionDigits:2})]})}),u&&e.jsxs(e.Fragment,{children:[e.jsx(m,{align:"center",children:e.jsx(i,{color:"text.secondary",children:"—"})}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap"},children:e.jsxs(i,{variant:"h6",fontWeight:"700",color:"warning.main",children:["₹ ",Number(G.items.reduce((Q,ce)=>Q+Number(ce.tax_amount||0),0)).toLocaleString("en-IN",{minimumFractionDigits:2})]})})]}),e.jsx(m,{align:"center",children:e.jsx(l,{sx:{whiteSpace:"nowrap",display:"inline-flex",alignItems:"center",px:2,py:.5,bgcolor:d(t.palette.success.main,.15),borderRadius:2,border:`2px solid ${d(t.palette.success.main,.5)}`},children:e.jsxs(i,{variant:"h6",fontWeight:"700",color:"success.main",children:["₹ ",Number(G.items.reduce((Q,ce)=>Q+Number(ce.total_amount||0),0)).toLocaleString("en-IN",{minimumFractionDigits:2})]})})}),e.jsx(m,{align:"center",children:e.jsx(ee,{variant:"contained",startIcon:e.jsx(Zt,{}),onClick:ae,size:"small",sx:{whiteSpace:"nowrap",borderRadius:1,textTransform:"none",fontWeight:600},children:"Add More"})})]}),G.items.length===0&&e.jsx(xe,{children:e.jsx(m,{colSpan:u?9:7,align:"center",sx:{py:4,border:"none"},children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:3},children:[e.jsx($e,{sx:{width:80,height:80,bgcolor:d(t.palette.primary.main,.1),color:"primary.main"},children:e.jsx(ea,{sx:{fontSize:40}})}),e.jsxs(l,{sx:{textAlign:"center"},children:[e.jsx(i,{variant:"h6",color:"text.secondary",gutterBottom:!0,fontWeight:"600",children:"No items added yet"}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:1,maxWidth:400},children:"Start building your invoice by adding products or services. You can add quantities, rates, and tax information."})]}),e.jsx(ee,{variant:"contained",size:"large",startIcon:e.jsx(xr,{}),onClick:ae,sx:{borderRadius:2,textTransform:"none",fontWeight:700,px:4,py:1.5,background:`linear-gradient(135deg, ${t.palette.primary.main} 0%, ${t.palette.secondary.main} 100%)`,boxShadow:t.shadows[8],"&:hover":{transform:"translateY(-2px)",boxShadow:t.shadows[12]}},children:"Add Your First Item"})]})})})]})]})})}),y.items&&e.jsx(ze,{in:!0,children:e.jsxs(l,{sx:{mt:2,p:2,bgcolor:d(t.palette.error.main,.1),borderRadius:2,border:`1px solid ${d(t.palette.error.main,.3)}`,display:"flex",alignItems:"center",gap:1},children:[e.jsx(ht,{color:"error"}),e.jsx(i,{variant:"body2",color:"error.main",fontWeight:"600",children:y.items})]})})]})}),e.jsx(Sa,{gradient:"warning",sx:{mb:4,cursor:"pointer",transition:"hover 0.1s cubic-bezier(0.4, 0, 0.2, 1)",":hover":{bgcolor:d(t.palette.warning.main,.1)}},children:e.jsxs(Me,{sx:{p:0},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},onClick:Q=>{Q.stopPropagation(),L(!R)},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",mb:1,width:"100%"},children:[e.jsx($e,{sx:{bgcolor:"warning.main",mr:2,width:40,height:40},children:e.jsx(Ci,{})}),e.jsxs(l,{children:[e.jsx(i,{variant:"h5",fontWeight:"700",color:"warning.main",children:"Additional Information"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Add any extra details or notes for this invoice"})]})]}),e.jsx(ke,{onClick:Q=>{Q.stopPropagation(),L(!R)},sx:{bgcolor:d(t.palette.success.main,.1),"&:hover":{bgcolor:d(t.palette.success.main,.2),transform:"scale(1.1)"},transition:"all 0.2s ease"},children:R?e.jsx(Ar,{}):e.jsx(Pr,{})})]}),e.jsx(Xt,{in:R,children:e.jsx(l,{sx:{display:"flex",alignItems:"center",flexDirection:"column",width:"100%"},children:e.jsx(X,{fullWidth:!0,multiline:!0,rows:3,variant:"outlined",placeholder:"Enter additional information...",sx:{mt:2}})})})]})}),e.jsx(Sa,{gradient:"success",sx:{mb:4,overflow:"visible"},children:e.jsxs(Me,{sx:{p:0},children:[e.jsxs(l,{sx:{p:0,background:`linear-gradient(135deg, ${t.palette.success.main}15 0%, ${t.palette.success.main}25 100%)`,borderRadius:"12px 12px 0 0"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",zIndex:1},children:[e.jsx($e,{sx:{bgcolor:"success.main",mr:2,width:52,height:52,boxShadow:`0 8px 24px ${d(t.palette.success.main,.3)}`,background:`linear-gradient(135deg, ${t.palette.success.main} 0%, ${t.palette.success.dark} 100%)`},children:e.jsx(ar,{sx:{fontSize:24}})}),e.jsxs(l,{children:[e.jsx(i,{variant:"h5",fontWeight:"800",color:"success.main",sx:{mb:.5},children:"Financial Summary"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Invoice calculations and adjustments"})]})]}),e.jsxs(J,{direction:"row",spacing:1,alignItems:"center",children:[!w&&e.jsx(ft,{onClick:q,disabled:k||G.items.length===0,startIcon:k?e.jsx(qt,{className:"animate-spin"}):e.jsx(ia,{}),text:k?"Creating...":"Create Invoice"}),e.jsx(ke,{onClick:()=>N(!w),sx:{bgcolor:d(t.palette.success.main,.1),"&:hover":{bgcolor:d(t.palette.success.main,.2),transform:"scale(1.1)"},transition:"all 0.2s ease"},children:w?e.jsx(Ar,{}):e.jsx(Pr,{})})]})]}),e.jsxs(I,{container:!0,spacing:2,children:[!u&&e.jsx(I,{item:!0,xs:6,sm:3,children:e.jsxs(ne,{elevation:0,sx:{p:2,textAlign:"center",bgcolor:d("#fff",.7),borderRadius:2,border:`1px solid ${d(t.palette.info.main,.2)}`},children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:"Sub-Totals"}),e.jsxs(i,{variant:"h6",fontWeight:"700",color:"info.main",sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(Ee,{sx:{fontSize:"1em"}}),V]})]})}),e.jsx(I,{item:!0,xs:6,sm:3,children:e.jsxs(ne,{elevation:0,sx:{p:2,textAlign:"center",bgcolor:d("#fff",.7),borderRadius:2,border:`1px solid ${d(t.palette.success.main,.2)}`},children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:"Total Discount amount"}),e.jsxs(i,{variant:"h6",fontWeight:"700",color:"warning.main",sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(Ee,{sx:{fontSize:"1em"}}),z]})]})}),u&&e.jsx(I,{item:!0,xs:6,sm:3,children:e.jsxs(ne,{elevation:0,sx:{p:2,textAlign:"center",bgcolor:d("#fff",.7),borderRadius:2,border:`1px solid ${d(t.palette.info.main,.2)}`},children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:"Total Tax Amount"}),e.jsxs(i,{variant:"h6",fontWeight:"700",color:"info.main",sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(Ee,{sx:{fontSize:"1em"}}),Ie]})]})}),e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsxs(ne,{elevation:0,sx:{p:1.5,textAlign:"center",bgcolor:`linear-gradient(135deg, ${d(t.palette.success.main,.1)} 0%, ${d(t.palette.success.main,.2)} 100%)`,borderRadius:2,border:`2px solid ${d(t.palette.success.main,.3)}`},children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:"GRAND TOTAL"}),e.jsxs(i,{variant:"h4",fontWeight:"900",color:"success.main",sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(Ee,{sx:{fontSize:"0.8em"}}),Number(je).toLocaleString("en-IN",{minimumFractionDigits:2})]})]})})]})]}),e.jsx(Xt,{in:w,children:e.jsx(l,{sx:{p:1,pt:2},children:e.jsxs(I,{container:!0,spacing:3,justifyContent:"flex-end",children:[e.jsx(I,{item:!0,xs:12,sm:6,md:u?2:2.4,children:e.jsxs(l,{sx:{position:"relative"},children:[e.jsxs(ne,{elevation:0,sx:{p:2,borderRadius:1,background:`linear-gradient(135deg, ${t.palette.success.light} 0%, ${t.palette.success.light} 100%)`,textAlign:"center",height:40,display:"flex",alignItems:"center",justifyContent:"center",gap:.5},children:[e.jsx(i,{variant:"caption",display:"block",children:"Sub Total :-"}),e.jsx(Ee,{sx:{fontSize:12}}),e.jsx(i,{variant:"caption",fontWeight:"600",color:"success.main",children:V})]}),e.jsx(le,{title:"Base amount before any adjustments",arrow:!0,children:e.jsx(ke,{size:"small",sx:{position:"absolute",top:-8,right:-8,bgcolor:"success.main",color:"white",width:20,height:20,"&:hover":{bgcolor:"success.dark"}},children:e.jsx(ht,{sx:{fontSize:12}})})})]})}),e.jsx(I,{item:!0,xs:12,sm:6,md:u?2:2.4,children:e.jsx(l,{children:e.jsxs(ne,{elevation:0,sx:{p:2,borderRadius:1,background:`linear-gradient(135deg, ${t.palette.warning.light} 0%, ${t.palette.warning.light} 100%)`,textAlign:"center",height:40,display:"flex",alignItems:"center",justifyContent:"flex-start",gap:.5},children:[e.jsx(co,{color:"warning"}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:1},children:[e.jsxs(i,{variant:"caption",display:"block",children:["Discount :-"," "]}),e.jsx(Ee,{sx:{fontSize:12}}),e.jsx(i,{variant:"caption",fontWeight:"600",color:"success.main",children:z})]})]})})}),e.jsx(I,{item:!0,xs:12,sm:6,md:u?2:2.4,children:e.jsxs(l,{sx:{position:"relative"},children:[e.jsxs(ne,{elevation:0,sx:{p:2,borderRadius:1,background:`linear-gradient(135deg, ${t.palette.info.light} 0%, ${t.palette.info.light} 100%)`,textAlign:"center",height:40,display:"flex",alignItems:"center",justifyContent:"flex-start",gap:1},children:[e.jsx(xt,{color:"info"}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsxs(i,{variant:"caption",display:"block",children:["Total Amount :-"," "]}),e.jsx(Ee,{sx:{fontSize:12}}),e.jsx(i,{variant:"caption",fontWeight:"600",color:"success.main",children:de})]})]}),e.jsx(le,{title:"Total amount after deducting discount from the sub-totals",arrow:!0,children:e.jsx(ke,{size:"small",sx:{position:"absolute",top:-8,right:-8,bgcolor:"success.main",color:"white",width:20,height:20,"&:hover":{bgcolor:"success.dark"}},children:e.jsx(ht,{sx:{fontSize:12}})})})]})}),u&&e.jsx(I,{item:!0,xs:12,sm:6,md:2,children:e.jsxs(ne,{elevation:0,sx:{p:2,borderRadius:1,background:`linear-gradient(135deg, ${t.palette.info.light} 0%, ${t.palette.info.light} 100%)`,textAlign:"center",height:40,display:"flex",alignItems:"center",justifyContent:"flex-start",gap:.5},children:[e.jsx(Tt,{color:"warning"}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsxs(i,{variant:"caption",display:"block",children:["Total Tax :-"," "]}),e.jsx(Ee,{sx:{fontSize:12}}),e.jsx(i,{variant:"caption",fontWeight:"600",color:"success.main",children:Ie})]})]})}),e.jsx(I,{item:!0,xs:12,sm:6,md:u?2:2.4,children:e.jsx(Lr,{label:"Additional Charges",fullWidth:!0,size:"small",value:G.additional_charge,onChange:Q=>{const ce=Q.target.value.replace(/[^0-9.]/g,"");re("additional_charge",ce===""?0:Number(ce))},name:"additional_charge",variant:"outlined",type:"number",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(xr,{color:"secondary"})}),inputProps:{onFocus:Q=>Q.target.select()}}})}),e.jsx(I,{item:!0,xs:12,sm:6,md:u?2:2.4,children:e.jsxs(ne,{elevation:0,sx:{p:2,borderRadius:1,background:`linear-gradient(135deg, ${t.palette.info.light} 0%, ${t.palette.info.light} 100%)`,textAlign:"center",height:40,display:"flex",alignItems:"center",justifyContent:"flex-start",gap:1},children:[e.jsx(na,{color:"info"}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsxs(i,{variant:"caption",display:"block",children:["Round Off :-"," "]}),e.jsx(Ee,{sx:{fontSize:12}}),e.jsx(i,{variant:"caption",fontWeight:"600",color:"success.main",children:ue})]})]})}),e.jsx(I,{item:!0,xs:12,sm:12,md:3,children:e.jsxs(ne,{elevation:3,sx:{p:2,borderRadius:1,background:`linear-gradient(135deg, ${t.palette.success.main}10 0%, ${t.palette.success.main}25 100%)`,border:`2px solid ${d(t.palette.success.main,.4)}`,textAlign:"center",height:56,display:"flex",alignItems:"baseline",justifyContent:"center",gap:1},children:[e.jsx(i,{variant:"subtitle2",color:"text.secondary",fontWeight:"600",children:"GRAND TOTAL"}),e.jsx(Ee,{sx:{color:"success.main",fontSize:16,fontWeight:"bold"}}),e.jsx(i,{variant:"h5",fontWeight:"900",color:"success.main",children:Number(je).toLocaleString("en-IN",{minimumFractionDigits:2})})]})}),e.jsx(I,{item:!0,xs:12,sm:12,md:2,children:e.jsx(Lr,{label:"Paid Amount",type:"number",fullWidth:!0,value:G.paid_amount,onChange:Q=>{const ce=Q.target.value.replace(/[^0-9.]/g,"");re("paid_amount",ce===""?0:Number(ce))},name:"paid_amount",variant:"outlined",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ee,{color:"primary"})}),inputProps:{onFocus:Q=>Q.target.select()}},sx:{flex:1}})}),e.jsx(I,{item:!0,xs:12,sm:12,md:2,children:e.jsx(ne,{elevation:3,sx:{p:2,borderRadius:1,background:`linear-gradient(135deg, ${t.palette.success.main}10 0%, ${t.palette.success.main}25 100%)`,border:`2px solid ${d(t.palette.success.main,.4)}`,textAlign:"center",height:56,display:"flex",alignItems:"baseline",justifyContent:"center",cursor:k||G.items.length===0?"not-allowed":"pointer",":hover":{boxShadow:k||G.items.length===0?"none":`0 4px 20px ${d(t.palette.success.main,.3)}`,transform:k||G.items.length===0?"none":"translateY(-2px)",color:k||G.items.length===0?"text.disabled":"#ffffff",background:k||G.items.length===0?d(t.palette.success.main,.1):`${t.palette.success.main}`},gap:1},onClick:q,children:e.jsx(i,{variant:"subtitle2",fontWeight:"600",children:k?"Creating...":"Create Invoice"})})})]})})})]})})]})]}),e.jsx(fl,{open:A,onClose:()=>O(!1),onCreated:Q=>{ge(ce=>({...ce,items:[...ce.items,Q]})),O(!1)},onUpdated:Q=>{ge(ce=>({...ce,items:ce.items.map(De=>De.item_id===Q.item_id?Q:De)})),O(!1)},item:D}),e.jsx(Ax,{open:h,type:v==="Sales"?"Debtors":"Creditors",onClose:()=>b(!1),onCreated:async()=>{const Q=await s(la({company_id:c||"",customerType:v==="Sales"?"Debtors":"Creditors"}));if(console.log("Customer Response:",Q),Q.meta.requestStatus==="fulfilled"){const ce=Q.payload;W(ce.map(De=>({name:De.ledger_name,id:De._id})))}b(!1)}})]})}const Rx=["Payment","Receipt"],Wx=()=>{const{type:t}=ja(),a=Fe(),n=we(),s=Ke(),{currentCompany:r}=Ce(y=>y.auth),{customersList:o,customerTypes:p}=Ce(y=>y.customersLedger),c=t?t.charAt(0).toUpperCase()+t.slice(1):"Payment",{invoiceType_id:x}=Ce(y=>y.invoice),[u,S]=g.useState(new Date),[f,v]=g.useState(""),[j,T]=g.useState(""),[k,B]=g.useState(""),[_,K]=g.useState({customer:"",amount:0}),[w,N]=g.useState(!1),[R,L]=g.useState({}),D=()=>{const y={};return u||(y.date="Date is required"),f.trim()||(y.transactionNumber="Transaction number is required"),j.trim()||(y.partyName="Account name is required"),_.customer||(y.customer="Customer is required"),_.amount<=0&&(y.amount="Amount must be greater than 0"),L(y),Object.keys(y).length===0},P=(y,F)=>{K(h=>({...h,[y]:y==="amount"?parseFloat(F)||0:F})),R[y]&&L(h=>{const b={...h};return delete b[y],b})},A=_.amount||0,O=async()=>{var y,F,h;if(!D()){Z.error("Please fix the errors before submitting");return}N(!0);try{const b=[{vouchar_id:"",ledger:j,ledger_id:((y=o.find(C=>C.ledger_name===j))==null?void 0:y._id)||"",amount:c==="Payment"?_.amount:-_.amount,order_index:0},{vouchar_id:"",ledger:_.customer,ledger_id:((F=p.find(C=>C.ledger_name===_.customer))==null?void 0:F._id)||"",amount:c==="Payment"?-_.amount:_.amount,order_index:1}],M=b.reduce((C,$)=>C+$.amount,0);if(Math.abs(M)>.01){Z.error("Voucher is not balanced. Debit ≠ Credit"),N(!1);return}const W={voucher_type:c,voucher_type_id:x||"",date:u.toISOString().slice(0,10),voucher_number:f,party_name:j,party_name_id:((h=o.find(C=>C.ledger_name===j))==null?void 0:h._id)??"",narration:k,company_id:(r==null?void 0:r._id)||"",reference_number:"",reference_date:"",place_of_supply:"",mode_of_transport:"",vehicle_number:"",payment_mode:"",due_date:"",paid_amount:0,total:A,discount:0,total_amount:A,total_tax:0,additional_charge:0,roundoff:0,grand_total:A,accounting:b,items:[]};a($r(W)).then(()=>{N(!1),v(""),T(""),B(""),K({customer:"",amount:0}),L({}),s("/transactions",{replace:!0}),Z.success(`${c} added successfully!`)}).catch(C=>{N(!1),Z.error(C||"Failed to add transaction. 🚫")})}catch{Z.error("Failed to add transaction. Please try again.")}finally{N(!1)}};return g.useEffect(()=>{a(tn((r==null?void 0:r._id)||"")),a(lr({company_id:(r==null?void 0:r._id)||"",customerTypes:["Bank Accounts","Cash-in-Hand"]})),a(Nr({company_id:(r==null?void 0:r._id)||"",voucher_type:c})).then(y=>{y.meta.requestStatus==="fulfilled"&&v(y.payload.current_number||"")}).catch(y=>{Z.error(y||"An unexpected error occurred. Please try again later.")})},[a,r==null?void 0:r._id,r,c]),e.jsx(Pt,{dateAdapter:Lt,children:e.jsxs(l,{sx:{p:3,maxWidth:"100%",mx:"auto"},children:[e.jsx(ze,{in:!0,timeout:800,children:e.jsx(ne,{elevation:0,sx:{p:3,mb:3,background:c==="Payment"?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",borderRadius:1,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",zIndex:0}},children:e.jsxs(J,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{position:"relative",zIndex:1},children:[e.jsxs(J,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(l,{sx:{p:1.5,borderRadius:1,background:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)"},children:c==="Payment"?e.jsx(sn,{sx:{fontSize:32,color:"white"}}):e.jsx(Tt,{sx:{fontSize:32,color:"white"}})}),e.jsxs(l,{children:[e.jsxs(i,{variant:"h4",sx:{color:"white",fontWeight:700,mb:.5},children:[c," Entry"]}),e.jsxs(i,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.9)"},children:["Create a new ",c.toLowerCase()," transaction"]})]})]}),e.jsx(ve,{label:`#${f}`,sx:{background:"rgba(255, 255, 255, 0.5)",color:"#000",fontWeight:600,py:2,px:4,borderRadius:1,borderColor:"rgba(255, 255, 255, 1)",borderWidth:2}})]})})}),e.jsx(pr,{in:!0,timeout:1e3,children:e.jsx(Ne,{elevation:0,sx:{mb:3,borderRadius:1,border:"1px solid",borderColor:"divider",background:n.palette.background.paper},children:e.jsxs(Me,{sx:{p:4},children:[e.jsxs(J,{direction:"row",alignItems:"center",spacing:2,sx:{mb:3},children:[e.jsx(xt,{color:"primary"}),e.jsx(i,{variant:"h6",sx:{color:"primary.main",fontWeight:600},children:"Transaction Details"})]}),e.jsxs(I,{container:!0,spacing:3,children:[e.jsx(I,{item:!0,xs:12,sm:2,children:e.jsx(qe,{fullWidth:!0,sx:{"& .MuiInputBase-root":{height:"56px",borderRadius:1}},children:e.jsx(X,{select:!0,value:c,label:"Type",disabled:!0,sx:{"& .MuiInputBase-root":{background:n.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.02)"}},children:Rx.map(y=>e.jsx(he,{value:y,children:e.jsxs(J,{direction:"row",alignItems:"center",gap:1,children:[y==="Payment"?e.jsx(sn,{}):e.jsx(Tt,{}),e.jsx("span",{children:y})]})},y))})})}),e.jsx(I,{item:!0,xs:12,sm:2.5,children:e.jsx(Xe,{label:"Transaction Date",value:u,format:"dd/MM/yyyy",views:["year","month","day"],maxDate:new Date,onChange:y=>{S(y||new Date),R.date&&L(F=>{const h={...F};return delete h.date,h})},slotProps:{textField:{fullWidth:!0,error:!!R.date,helperText:R.date,sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}}}})}),e.jsx(I,{item:!0,xs:12,sm:2.5,children:e.jsx(X,{fullWidth:!0,label:"Transaction Number",value:f,onChange:y=>{v(y.target.value),R.transactionNumber&&L(F=>{const h={...F};return delete h.transactionNumber,h})},error:!!R.transactionNumber,helperText:R.transactionNumber,placeholder:"e.g., TXN-001",sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}})}),e.jsx(I,{item:!0,xs:12,sm:2,children:e.jsx(X,{fullWidth:!0,label:"Amount",type:"number",value:_.amount||"",onChange:y=>P("amount",y.target.value),error:!!R.amount,helperText:R.amount,placeholder:"0.00",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(i,{variant:"h6",color:"primary",children:"₹"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,"&:hover":{borderColor:"primary.main"}},"& .MuiOutlinedInput-input":{fontWeight:500}}})}),e.jsx(I,{item:!0,xs:12,sm:3,children:e.jsx(J,{direction:"row",spacing:1,sx:{height:"100%",alignItems:"center"},children:p.map(y=>e.jsx(le,{title:`Select ${y.ledger_name}`,children:e.jsx(ee,{variant:_.customer===y.ledger_name?"contained":"outlined",onClick:()=>{P("customer",y.ledger_name)},sx:{borderRadius:1,px:2,py:3,textTransform:"none",fontWeight:600,minWidth:"auto",flex:1,transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:n.shadows[4]}},endIcon:_.customer===y.ledger_name?e.jsx(da,{}):null,children:y.ledger_name})},y._id))})})]}),e.jsx(Pe,{sx:{my:3}}),e.jsxs(I,{container:!0,spacing:3,children:[e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsx(qe,{fullWidth:!0,error:!!R.customer,children:e.jsxs(X,{select:!0,value:j,label:c==="Payment"?"Pay To":"Receive From",placeholder:`Select ${c==="Payment"?"receiver":"sender"}`,onChange:y=>{T(y.target.value),R.partyName&&L(F=>{const h={...F};return delete h.partyName,h})},error:!!R.partyName,helperText:R.partyName,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(At,{color:"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1}},children:[e.jsx(he,{value:"",children:e.jsx("em",{children:c==="Payment"?"Select Receiver":"Select Sender"})}),o==null?void 0:o.map(y=>e.jsx(he,{value:y.ledger_name,children:y.ledger_name},y._id))]})})}),e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsx(X,{fullWidth:!0,label:"Notes (Optional)",value:k,onChange:y=>B(y.target.value),placeholder:"Add transaction notes...",multiline:!0,rows:2,sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}})})]})]})})}),e.jsx(pr,{in:!0,timeout:1200,children:e.jsx(Ne,{elevation:0,sx:{borderRadius:1,border:"1px solid",borderColor:"divider",background:n.palette.background.paper},children:e.jsx(Me,{sx:{p:4},children:e.jsxs(I,{container:!0,spacing:3,alignItems:"center",children:[e.jsx(I,{item:!0,xs:12,md:6,children:e.jsxs(J,{spacing:2,children:[e.jsxs(J,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(ht,{color:"primary"}),e.jsx(i,{variant:"h6",sx:{color:"primary.main",fontWeight:600},children:"Transaction Summary"})]}),A>0&&e.jsxs(rt,{severity:"info",sx:{borderRadius:1,"& .MuiAlert-icon":{alignItems:"center"}},children:["This ",c.toLowerCase()," will be recorded for ",e.jsxs("strong",{children:["₹",A.toLocaleString()]})]})]})}),e.jsx(I,{item:!0,xs:12,md:6,children:e.jsxs(J,{spacing:2,direction:"row",alignItems:"center",justifyContent:"flex-end",children:[e.jsxs(ne,{elevation:0,sx:{px:2,py:1,background:n.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.02)",borderRadius:1,border:"1px solid",borderColor:"divider",display:"flex",gap:2,alignItems:"center",justifyContent:"center"},children:[e.jsx(i,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Amount"}),e.jsxs(i,{variant:"h4",sx:{color:"primary.main",fontWeight:700},children:["₹ ",A.toLocaleString()]})]}),e.jsx(ee,{variant:"contained",size:"large",startIcon:e.jsx(ia,{}),onClick:O,disabled:w||A===0,sx:{px:4,py:1.5,borderRadius:1,background:c==="Payment"?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",fontSize:"1.1rem",fontWeight:600,textTransform:"none",minWidth:200,boxShadow:n.shadows[4],"&:hover":{transform:"translateY(-2px)",boxShadow:n.shadows[8]},"&:disabled":{background:n.palette.action.disabledBackground,transform:"none",boxShadow:"none"}},children:w?"Processing...":`Submit ${c}`})]})})]})})})})]})})},_a=({children:t,gradient:a="primary",...n})=>{const s=we(),r={primary:`linear-gradient(135deg, ${d(s.palette.primary.main,.2)} 0%, ${d(s.palette.primary.main,.35)} 100%)`,secondary:`linear-gradient(135deg, ${d(s.palette.secondary.main,.2)} 0%, ${d(s.palette.secondary.main,.35)} 100%)`,success:`linear-gradient(135deg, ${d(s.palette.success.main,.2)} 0%, ${d(s.palette.success.main,.35)} 100%)`,warning:`linear-gradient(135deg, ${d(s.palette.warning.main,.2)} 0%, ${d(s.palette.warning.main,.35)} 100%)`,error:`linear-gradient(135deg, ${d(s.palette.error.main,.15)} 0%, ${d(s.palette.error.main,.3)} 100%)`,info:`linear-gradient(135deg, ${d(s.palette.info.main,.15)} 0%, ${d(s.palette.info.main,.3)} 100%)`,glass:`linear-gradient(135deg, ${d(s.palette.background.paper,.9)} 0%, ${d(s.palette.background.paper,.95)} 100%)`};return e.jsx(Ne,{elevation:0,sx:{borderRadius:1,background:r[a],backdropFilter:"blur(20px)",...n.sx},...n,children:t})},Or=({...t})=>e.jsx(X,{...t,sx:{"& .MuiOutlinedInput-root":{borderRadius:"4px",transition:"all 0.3s ease","&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main",borderWidth:2}},"&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main",borderWidth:2}}},"& .MuiInputLabel-root":{fontWeight:500},...t.sx}}),zx=({payment_mode:t,...a})=>{const s=(r=>{switch(r==null?void 0:r.toLowerCase()){case"paid":return{color:"success",icon:"✓"};case"unpaid":return{color:"error",icon:"⏳"};case"partially paid":return{color:"warning",icon:"⏱"};default:return{color:"default",icon:"❓"}}})(t);return e.jsx(ve,{label:`${s.icon} ${t}`,color:s.color,variant:"outlined",size:"small",sx:{fontWeight:600,"& .MuiChip-label":{px:1.5}},...a})},ts=[{label:"🚗 By Road",value:"By Road",icon:"🚗"},{label:"🚂 By Rail",value:"By Rail",icon:"🚂"},{label:"✈️ By Air",value:"By Air",icon:"✈️"},{label:"🚢 By Sea",value:"By Sea",icon:"🚢"}],as=[{label:"💵 Cash",value:"Cash",color:"success"},{label:"💳 Card",value:"Card",color:"error"},{label:"🏦 Net Banking",value:"Net Banking",color:"warning"},{label:"🏧 NEFT",value:"NEFT",color:"warning"},{label:"📄 Cheque",value:"Cheque",color:"warning"}];function $x(){var q,E,te,U;const{type:t,voucher_id:a}=ja(),[n,s]=g.useState(!1),[r,o]=g.useState([]),[p,c]=g.useState(new Date),[x,u]=g.useState(new Date(Date.now()+7*24*60*60*1e3)),S=t==="sales"?"Sales":t==="purchase"?"Purchase":"",f=we(),[v,j]=g.useState(!1),[T,k]=g.useState(!0),[B,_]=g.useState(!1),K=Fe(),w=Ke(),{currentCompany:N,user:R,current_company_id:L}=Ce(H=>H.auth),D=L||localStorage.getItem("current_company_id")||((q=R==null?void 0:R.user_settings)==null?void 0:q.current_company_id)||"",P=(E=R==null?void 0:R.company)==null?void 0:E.find(H=>H._id===D),A=(U=(te=P==null?void 0:P.company_settings)==null?void 0:te.features)==null?void 0:U.enable_tax,{invoiceData:O,invoiceType_id:y}=Ce(H=>H.invoice),[F,h]=g.useState({}),[b,M]=g.useState(!1),[W,C]=g.useState(null),[$,G]=g.useState({_id:"",company_id:"",date:"",voucher_type:"",voucher_type_id:"",voucher_number:"",party_name:"",party_name_id:"",narration:"",reference_number:"",reference_date:"",place_of_supply:"",mode_of_transport:"",vehicle_number:"",due_date:"",payment_mode:"",paid_amount:0,total:0,discount:0,total_amount:0,total_tax:0,additional_charge:0,roundoff:0,grand_total:0,accounting:[],items:[]}),ge=()=>{const H={};if(p||(H.date="Please select a valid date"),$.party_name.trim()||(H.partyName=`Please select a ${t==="sales"?"customer":"supplier"}`),$.items.length<=0&&(H.items="Please add at least one item to continue"),h(H),Object.keys(H).length>0){const ie=document.querySelector(`[name="${Object.keys(H)[0]}"]`);ie&&ie.scrollIntoView({behavior:"smooth",block:"center"})}return Object.keys(H).length===0},Ae=()=>{C(null),M(!0)},ae=H=>{G(ie=>({...ie,items:ie.items.filter((me,Q)=>Q!==H)}))},Y=(H,ie)=>{G(me=>({...me,[H]:ie})),F[H]&&h(me=>{const Q={...me};return delete Q[H],Q})},re=Ft.useMemo(()=>{const H=$.items.reduce((He,Oe)=>He+Number(Oe.amount||0),0),ie=$.items.reduce((He,Oe)=>He+Number(Oe.discount_amount||0),0),me=Number(H)-Number(ie),Q=$.items.reduce((He,Oe)=>He+Number(Oe.tax_amount||0),0),ce=Number($.additional_charge||0),et=$.items.reduce((He,Oe)=>He+Number(Oe.total_amount||0),0)+ce,Se=Math.round(et)-et,Be=me+Q+ce+Se;return{total:Number(H).toFixed(2),discount:Number(ie).toFixed(2),total_amount:Number(me).toFixed(2),total_tax:Number(Q).toFixed(2),additional_charge:Number(ce).toFixed(2),roundoff:Number(Se).toFixed(2),grandTotal:Number(Be).toFixed(2)}},[$]),{total:Te,discount:V,total_amount:z,total_tax:de,additional_charge:Ie,roundoff:oe,grandTotal:ue}=re,je=async H=>{if(H.preventDefault(),!!ge()){s(!0);try{if(A){const ie={...$,date:$.date.slice(0,10),vouchar_id:$._id||"",user_id:(R==null?void 0:R._id)||"",company_id:(N==null?void 0:N._id)||"",voucher_type_id:y||"",party_name_id:$.party_name_id,mode_of_transport:$.mode_of_transport,vehicle_number:$.vehicle_number,place_of_supply:$.place_of_supply,payment_mode:$.payment_mode,paid_amount:$.paid_amount,due_date:$.due_date,additional_charge:Number(Ie),discount:Number(V),total:Number(Te),total_amount:Number(z),total_tax:Number(de),roundoff:Number(oe),grand_total:Number(ue),items:$.items.map((me,Q)=>{var ce,De;return{...me,entry_id:me.entry_id||"",vouchar_id:$._id,hsn_code:(me==null?void 0:me.hsn_code)||"",unit:(me==null?void 0:me.unit)||"",quantity:me.quantity||1,rate:me.rate||0,amount:me.amount||0,discount_amount:me.discount_amount,tax_rate:me.tax_rate||0,tax_amount:Number((ce=me.tax_amount)==null?void 0:ce.toFixed(2))||0,total_amount:Number((De=me.total_amount)==null?void 0:De.toFixed(2))||0,godown:"",godown_id:"",order_index:Q}}),accounting:$.accounting.map(me=>{let Q=0,ce=0;return(t==null?void 0:t.toLowerCase())==="purchase"?(Q=me.ledger===$.party_name?Number(ue):-Number(ue),ce=0):(t==null?void 0:t.toLowerCase())==="sales"&&(Q=me.ledger===$.party_name?-Number(ue):Number(ue),ce=1),{entry_id:me.entry_id||"",vouchar_id:$._id,ledger:me.ledger,ledger_id:me.ledger_id,amount:Q,order_index:ce}})};await K(bx(ie)),Z.success("🎉 Invoice updated successfully!"),w("/invoices",{replace:!0})}else{const ie={...$,date:$.date.slice(0,10),vouchar_id:$._id||"",user_id:(R==null?void 0:R._id)||"",company_id:(N==null?void 0:N._id)||"",voucher_type_id:y||"",party_name_id:$.party_name_id,mode_of_transport:$.mode_of_transport,vehicle_number:$.vehicle_number,place_of_supply:$.place_of_supply,payment_mode:$.payment_mode,paid_amount:$.paid_amount,due_date:$.due_date,additional_charge:Number(Ie),discount:Number(V),total:Number(Te),total_amount:Number(z),total_tax:Number(de),roundoff:Number(oe),grand_total:Number(ue),items:$.items.map((me,Q)=>{var ce;return{...me,entry_id:me.entry_id||"",vouchar_id:$._id,item_id:me.item_id||"",quantity:me.quantity||1,rate:me.rate||0,amount:me.amount||0,discount_amount:me.discount_amount||0,total_amount:Number((ce=me.total_amount)==null?void 0:ce.toFixed(2))||0,godown:"",godown_id:"",order_index:Q}}),accounting:$.accounting.map(me=>{let Q=0,ce=0;return(t==null?void 0:t.toLowerCase())==="purchase"?(Q=me.ledger===$.party_name?-Number(ue):Number(ue),ce=0):(t==null?void 0:t.toLowerCase())==="sales"&&(Q=me.ledger===$.party_name?Number(ue):-Number(ue),ce=1),{entry_id:me.entry_id||"",vouchar_id:$._id,ledger:me.ledger,ledger_id:me.ledger_id,amount:Q,order_index:ce}})};await K(nn(ie)),Z.success("🎉 Invoice updated successfully!"),w("/invoices",{replace:!0})}}catch(ie){Z.error("❌ Failed to create invoice. Please try again."),console.error(ie)}finally{s(!1)}}};return g.useEffect(()=>{D&&G(ie=>({...ie,company_id:D,voucher_type:t?t.charAt(0).toUpperCase()+t.slice(1):""})),(async()=>{try{const ie=await K(la({company_id:D||"",customerType:S==="Sales"?"Debtors":"Creditors"}));if(ie.meta.requestStatus==="fulfilled"){const me=ie.payload;o(me.map(Q=>({name:Q.ledger_name,id:Q._id})))}}catch(ie){console.error("Failed to load initial data:",ie),Z.error("Failed to load data. Please refresh the page.")}})()},[K,D,R,S,t]),g.useEffect(()=>{K(cr({vouchar_id:a||"",company_id:D||""}))},[K,D,a,A]),g.useEffect(()=>{O&&(G({_id:O._id,company_id:O.company_id,date:O.date,voucher_type:O.voucher_type,voucher_type_id:O.voucher_type_id||"",voucher_number:O.voucher_number,party_name:O.party_name,party_name_id:O.party_name_id,narration:O.narration||"",reference_number:O.reference_number||"",reference_date:O.reference_date||"",place_of_supply:O.place_of_supply||"",mode_of_transport:O.mode_of_transport||"",vehicle_number:O.vehicle_number||"",payment_mode:O.payment_mode||"",due_date:O.due_date||"",paid_amount:O.paid_amount||0,total:O.total||0,discount:O.discount||0,total_amount:O.total_amount||0,total_tax:O.total_tax||0,additional_charge:O.additional_charge||0,roundoff:O.roundoff||0,grand_total:O.grand_total||0,accounting:O.accounting_entries.map(H=>({entry_id:H._id||"",vouchar_id:H.vouchar_id||"",ledger:H.ledger||"",ledger_id:H.ledger_id||"",amount:H.amount||0})),items:O.inventory.map(H=>({entry_id:H._id||"",vouchar_id:H.vouchar_id||"",item:H.item||"",item_id:H.item_id||"",unit:H.unit||"",hsn_code:H.hsn_code||"",quantity:H.quantity||1,rate:H.rate||0,amount:H.amount||0,discount_amount:H.discount_amount||0,tax_rate:H.tax_rate||0,tax_amount:H.tax_amount||0,total_amount:H.total_amount||0}))}),c(new Date(O.date)))},[O]),e.jsxs(Pt,{dateAdapter:Lt,children:[e.jsx(ho,{sx:{color:"#fff",zIndex:H=>H.zIndex.drawer+1,backdropFilter:"blur(8px)"},open:n,children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx(bt,{color:"inherit",size:60,thickness:4}),e.jsx(i,{variant:"h6",sx:{fontWeight:600},children:"Updating your invoice..."}),e.jsx(St,{sx:{width:300,height:8,borderRadius:4,"& .MuiLinearProgress-bar":{borderRadius:4}}})]})}),e.jsxs(Je,{maxWidth:!1,sx:{py:4,minHeight:"100vh"},children:[e.jsx(ka,{direction:"down",in:!0,timeout:800,children:e.jsx(l,{sx:{mb:4},children:e.jsx(_a,{gradient:"glass",sx:{mb:3},children:e.jsx(Me,{sx:{p:0},children:e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(zt,{icon:e.jsx(ma,{fontSize:"small"}),title:"Back",color:"primary",onClick:()=>w(-1)}),e.jsx($e,{sx:{bgcolor:"primary.main",width:48,height:48,mx:2,background:`linear-gradient(135deg, ${f.palette.primary.main} 0%, ${f.palette.primary.dark} 100%)`,boxShadow:f.shadows[8]},children:e.jsx(Tt,{sx:{fontSize:28}})}),e.jsxs(l,{children:[e.jsxs(i,{variant:"h5",component:"h1",fontWeight:"800",color:"primary.main",sx:{mb:1},children:["Create ",S]}),e.jsxs(l,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e.jsx(ve,{icon:e.jsx(ca,{}),label:(N==null?void 0:N.name)||"Company",size:"small"}),e.jsx(ve,{icon:e.jsx(Ut,{}),label:$t(p.toISOString()).split("T")[0].split("-").reverse().join("-"),size:"small"}),A&&e.jsx(ve,{icon:e.jsx(mo,{}),label:"TAX Enabled",color:"success",size:"small"})]})]})]}),e.jsxs(l,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsxs(ee,{variant:"outlined",startIcon:e.jsx(zs,{}),onClick:()=>j(!v),sx:{borderRadius:2,textTransform:"none",fontWeight:600,px:3},children:[v?"Hide":"Show"," Summary"]}),e.jsx(ta,{onClick:()=>w(-1),startIcon:e.jsx(Ga,{}),disabled:n}),e.jsx(ft,{onClick:je,disabled:n||$.items.length===0,startIcon:n?e.jsx(qt,{className:"animate-spin"}):e.jsx(ia,{}),text:n?"Updating...":"Update Invoice"})]})]})})})})}),e.jsx(ka,{direction:"left",in:v,timeout:400,children:e.jsx(l,{sx:{position:"fixed",right:v?24:-400,top:120,width:350,zIndex:1200,transition:"right 0.3s ease",maxHeight:"calc(100vh - 140px)",overflowY:"auto",boxShadow:f.shadows[4],borderRadius:2,border:`1px solid ${d(f.palette.divider,.2)}`},children:e.jsx(_a,{gradient:"warning",sx:{backdropFilter:"blur(20px)"},children:e.jsxs(Me,{children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(ar,{color:"primary",sx:{mr:1}}),e.jsx(i,{variant:"h6",fontWeight:"700",children:"Invoice Summary"}),e.jsx(ke,{size:"small",onClick:()=>j(!1),sx:{ml:"auto"},children:e.jsx(Ga,{fontSize:"small"})})]}),e.jsx(Pe,{sx:{mb:2}}),e.jsxs(J,{spacing:2,children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",color:"text.secondary",children:"Items:"}),e.jsx(i,{variant:"body2",fontWeight:"600",children:$.items.length})]}),e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",color:"text.secondary",children:"Subtotal:"}),e.jsxs(i,{variant:"body2",fontWeight:"600",children:["₹ ",Te]})]}),A&&e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"body2",color:"text.secondary",children:"Tax Total:"}),e.jsxs(i,{variant:"body2",fontWeight:"600",children:["₹ ",de]})]}),e.jsx(Pe,{}),e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(i,{variant:"h6",fontWeight:"700",children:"Grand Total:"}),e.jsxs(i,{variant:"h6",fontWeight:"700",color:"primary.main",children:["₹ ",ue]})]}),$.party_name&&e.jsxs(l,{sx:{mt:2,p:2,bgcolor:d(f.palette.success.main,.1),borderRadius:2},children:[e.jsx(i,{variant:"body2",color:"text.secondary",children:"Customer:"}),e.jsx(i,{variant:"body1",fontWeight:"600",children:$.party_name})]}),$.payment_mode&&e.jsx(l,{sx:{display:"flex",justifyContent:"center"},children:e.jsx(zx,{payment_mode:$.payment_mode})})]})]})})})}),e.jsxs(l,{children:[e.jsx(_a,{gradient:"primary",sx:{mb:4,border:`1px solid ${d(f.palette.primary.main,.2)}`},children:e.jsxs(Me,{sx:{p:0},children:[e.jsx(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx($e,{sx:{bgcolor:"primary.main",mr:2,width:40,height:40},children:e.jsx(Tt,{})}),e.jsxs(l,{children:[e.jsx(i,{variant:"h6",sx:{display:"flex",alignItems:"center"},children:"Invoice Details"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Basic Invoice details"})]})]})}),e.jsxs(I,{container:!0,spacing:4,children:[e.jsx(I,{item:!0,xs:12,lg:6,children:e.jsx(_a,{gradient:"glass",children:e.jsx(Me,{sx:{p:0},children:e.jsxs(J,{spacing:0,children:[e.jsxs(J,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(Or,{label:"Invoice Number",fullWidth:!0,value:$.voucher_number,onChange:S==="Sales"?void 0:H=>Y("voucher_number",H.target.value),name:"voucher_number",disabled:!0,variant:"outlined",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Tt,{color:"primary"})})},sx:{flex:1}}),e.jsx(l,{sx:{flex:1},children:e.jsx(Xe,{label:"Invoice Date",value:p,format:"dd/MM/yyyy",maxDate:new Date,minDate:new Date(new Date().getFullYear(),3,1),views:["year","month","day"],onChange:H=>{c(H||new Date),G(ie=>({...ie,date:H?$t(H.toISOString()).split("T")[0]:""})),F.date&&h(ie=>{const me={...ie};return delete me.date,me})},slotProps:{textField:{fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{},"& .MuiInputAdornment-root .MuiButtonBase-root":{border:"none",boxShadow:"none"}},InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(mi,{color:"primary"})})},onFocus:()=>{h(H=>{const ie={...H};return delete ie.date,ie})}}}})})]}),A&&e.jsxs(J,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mt:2},children:[e.jsx(at,{options:ts,getOptionLabel:H=>H.label,value:ts.find(H=>H.value===$.mode_of_transport)||null,onChange:(H,ie)=>G(me=>({...me,mode_of_transport:ie?ie.value:""})),renderInput:H=>e.jsx(X,{...H,label:"Mode of Transport",variant:"outlined",fullWidth:!0,InputProps:{...H.InputProps,startAdornment:e.jsx(se,{position:"start",children:e.jsx(gi,{color:"primary"})})}}),sx:{width:"100%"},componentsProps:{paper:{sx:{border:"1px solid #000",borderRadius:1}}}}),e.jsx(Or,{label:$.mode_of_transport==="By Road"?"Vehicle Number":$.mode_of_transport==="By Rail"?"Train Number":$.mode_of_transport==="By Air"?"Flight Number":$.mode_of_transport==="By Sea"?"Container Number":"Vehicle Number",value:$.vehicle_number,onChange:H=>Y("vehicle_number",ra(H.target.value,"characters")),name:"vehicle_number",variant:"outlined",fullWidth:!0,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(gi,{color:"primary"})})}})]})]})})})}),e.jsx(I,{item:!0,xs:12,lg:6,children:e.jsx(_a,{gradient:"glass",children:e.jsx(Me,{children:e.jsxs(J,{children:[e.jsx(J,{direction:{xs:"column",sm:"row"},spacing:2,children:e.jsx(at,{options:r,disabled:!0,getOptionLabel:H=>H.name,value:r.find(H=>H.id===$.party_name_id)||null,onChange:(H,ie)=>{Y("party_name",(ie==null?void 0:ie.name)||""),Y("party_name_id",(ie==null?void 0:ie.id)||""),h(me=>({...me,partyName:""}))},renderInput:H=>e.jsx(Or,{...H,label:"Customer",variant:"outlined",fullWidth:!0,error:!!F.partyName,helperText:F.partyName,InputProps:{...H.InputProps,startAdornment:e.jsx(se,{position:"start",children:e.jsx($s,{color:"primary"})})}}),sx:{flex:1}})}),A&&e.jsxs(J,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mt:2},children:[e.jsx(l,{sx:{width:"50%"},children:e.jsx(Xe,{label:"Due Date",value:x,format:"dd/MM/yyyy",minDate:new Date,views:["year","month","day"],onChange:H=>{u(H||new Date)},slotProps:{textField:{fullWidth:!0,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(mi,{color:"primary"})})},sx:{"& .MuiOutlinedInput-root":{flex:1},"& .MuiInputAdornment-root .MuiButtonBase-root":{border:"none",boxShadow:"none"}}}}})}),e.jsx(at,{options:as,getOptionLabel:H=>H.label,value:as.find(H=>H.value===$.payment_mode)||null,onChange:(H,ie)=>G(me=>({...me,payment_mode:ie?ie.value:""})),renderInput:H=>e.jsx(X,{...H,label:"Payment Mode",variant:"outlined",fullWidth:!0,InputProps:{...H.InputProps,startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ns,{color:"primary"})})}}),sx:{width:"50%"},componentsProps:{paper:{sx:{border:"1px solid #000",borderRadius:1}}}})]})]})})})})]})]})}),e.jsx(_a,{gradient:"secondary",sx:{mb:4},children:e.jsxs(Me,{sx:{p:0},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx($e,{sx:{bgcolor:"secondary.main",mr:2,width:40,height:40},children:e.jsx(ea,{})}),e.jsxs(l,{children:[e.jsx(i,{variant:"h5",fontWeight:"700",color:"secondary.main",children:"Invoice Items"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:$.items.length===0?'No items added yet - click "Add Items" to get started':`${$.items.length} item${$.items.length>1?"s":""} • Total: ₹${ue}`})]})]}),e.jsxs(J,{direction:{xs:"column",sm:"row"},alignItems:"center",spacing:2,children:[e.jsx(ee,{variant:"contained",startIcon:e.jsx(Zt,{}),onClick:Ae,sx:{borderRadius:2,textTransform:"none",fontWeight:600,px:3,py:1,background:`linear-gradient(135deg, ${f.palette.secondary.main} 0%, ${f.palette.secondary.dark} 100%)`,boxShadow:f.shadows[4],"&:hover":{transform:"translateY(-1px)",boxShadow:f.shadows[8]}},children:"Add Items"}),$.items.length>0&&e.jsx(ve,{icon:e.jsx(na,{fontSize:"large"}),label:`₹${ue} Total`,color:"success",variant:"filled",sx:{fontWeight:700,fontSize:"2rem",height:50,px:2,py:2.5,border:`2px solid ${d(f.palette.success.main,.7)}`}})]})]}),e.jsx(_a,{gradient:"glass",children:e.jsx(nt,{sx:{borderRadius:1,overflow:"hidden",border:`1px solid ${d(f.palette.divider,.3)}`,"& .MuiTableCell-root":{borderBottom:`1px solid ${d(f.palette.divider,.05)}`}},children:e.jsxs(it,{sx:{minWidth:800},children:[e.jsx(ot,{children:e.jsxs(xe,{sx:{background:`linear-gradient(135deg, ${d(f.palette.primary.main,.1)} 0%, ${d(f.palette.secondary.main,.1)} 100%)`,"& .MuiTableCell-root":{fontWeight:700,fontSize:"0.95rem",color:f.palette.primary.main,border:"none",py:2}},children:[e.jsx(m,{align:"left",sx:{whiteSpace:"nowrap",minWidth:200},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ea,{fontSize:"small"}),"Item Details"]})}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap",minWidth:100},children:"Quantity"}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap",minWidth:120},children:"Rate (₹)"}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap",minWidth:120},children:"Price (₹)"}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap",minWidth:120},children:"Discount (₹)"}),A&&e.jsxs(e.Fragment,{children:[e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap",minWidth:100},children:"Tax (%)"}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap",minWidth:120},children:"Tax Amount (₹)"})]}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap",minWidth:140},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(na,{fontSize:"small"}),"Total (₹)"]})}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap",minWidth:120},children:"Actions"})]})}),e.jsxs(st,{children:[$.items.map((H,ie)=>e.jsx(ze,{in:!0,timeout:300+ie*100,children:e.jsxs(xe,{sx:{"&:hover":{bgcolor:d(f.palette.primary.main,.05),transform:"scale(1.01)"},transition:"all 0.2s ease","& .MuiTableCell-root":{py:2}},children:[e.jsx(m,{align:"left",children:e.jsxs(l,{sx:{display:"flex",whiteSpace:"nowrap",alignItems:"center",gap:2},children:[e.jsx($e,{sx:{width:36,height:36,bgcolor:"primary.main",fontSize:"0.8rem",fontWeight:600},children:ha(H.item).toUpperCase()}),e.jsxs(l,{children:[e.jsx(i,{variant:"body1",fontWeight:"600",color:"text.primary",children:H.item}),A&&e.jsxs(i,{variant:"caption",color:"text.secondary",children:["HSN: ",H.hsn_code]}),!A&&e.jsxs(i,{variant:"caption",color:"text.secondary",children:["Unit: ",H.unit||"PCS"]})]})]})}),e.jsx(m,{align:"center",children:e.jsx(ve,{label:`${H.quantity} ${A?H.unit??"PCS":""}`,size:"small",sx:{whiteSpace:"nowrap",bgcolor:d(f.palette.info.main,.1),color:"info.main",fontWeight:600,minWidth:60,py:1.5,px:1}})}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap"},children:e.jsxs(i,{variant:"body1",fontWeight:"600",color:"text.primary",children:["₹",Number(H.rate).toLocaleString("en-IN",{minimumFractionDigits:2})]})}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap"},children:e.jsxs(i,{variant:"body1",fontWeight:"600",color:"text.primary",children:["₹",Number(H.amount).toLocaleString("en-IN",{minimumFractionDigits:2})]})}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap"},children:e.jsxs(i,{variant:"body1",fontWeight:"600",color:"text.primary",children:["₹",Number(H.discount_amount).toLocaleString("en-IN",{minimumFractionDigits:2})]})}),A&&e.jsxs(e.Fragment,{children:[e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap"},children:e.jsx(ve,{label:`${(H==null?void 0:H.tax_rate)||0}%`,size:"small",color:"warning",sx:{fontWeight:600,minWidth:60,py:1.5,px:1}})}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap"},children:e.jsxs(i,{variant:"body1",fontWeight:"600",color:"warning.main",children:["₹",Number(H.tax_amount||0).toLocaleString("en-IN",{minimumFractionDigits:2})]})})]}),e.jsx(m,{align:"center",children:e.jsx(l,{sx:{whiteSpace:"nowrap",display:"inline-flex",alignItems:"center",px:2,py:1,bgcolor:d(f.palette.success.main,.1),borderRadius:2,border:`1px solid ${d(f.palette.success.main,.3)}`},children:e.jsxs(i,{variant:"body1",fontWeight:"700",color:"success.main",children:["₹",Number(H.total_amount).toLocaleString("en-IN",{minimumFractionDigits:2})]})})}),e.jsx(m,{align:"center",children:e.jsxs(l,{sx:{display:"flex",whiteSpace:"nowrap",justifyContent:"center",gap:1},children:[e.jsx(le,{title:"Edit Item",arrow:!0,children:e.jsx(ke,{size:"small",onClick:()=>{C(H),M(!0)},sx:{bgcolor:d(f.palette.primary.main,.1),color:"primary.main","&:hover":{bgcolor:d(f.palette.primary.main,.2),transform:"scale(1.1)"},transition:"all 0.2s ease"},children:e.jsx(aa,{fontSize:"small"})})}),e.jsx(le,{title:"Remove Item",arrow:!0,children:e.jsx(ke,{size:"small",onClick:()=>ae(ie),sx:{bgcolor:d(f.palette.error.main,.1),color:"error.main","&:hover":{bgcolor:d(f.palette.error.main,.2),transform:"scale(1.1)"},transition:"all 0.2s ease"},children:e.jsx(ut,{fontSize:"small"})})})]})})]})},ie)),$.items.length>0&&e.jsxs(xe,{sx:{borderTop:`3px solid ${f.palette.primary.main}`,background:`linear-gradient(135deg, ${d(f.palette.primary.main,.05)} 0%, ${d(f.palette.secondary.main,.05)} 100%)`,"& .MuiTableCell-root":{border:"none"}},children:[e.jsx(m,{align:"left",children:e.jsxs(l,{sx:{whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:1},children:[e.jsx(ar,{color:"primary"}),e.jsx(i,{variant:"h6",fontWeight:"700",color:"primary.main",children:"Subtotals"})]})}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap"},children:e.jsxs(i,{variant:"h6",fontWeight:"700",color:"success.main",children:[Number($.items.reduce((H,ie)=>H+(Number(ie.quantity)||0),0)).toLocaleString("en-IN",{minimumFractionDigits:2})," Units"]})}),e.jsx(m,{align:"center",children:e.jsx(i,{color:"text.secondary",children:"—"})}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap"},children:e.jsxs(i,{variant:"h6",fontWeight:"700",color:"text.primary",children:["₹ ",Number($.items.reduce((H,ie)=>H+(ie.amount||0),0)).toLocaleString("en-IN",{minimumFractionDigits:2})]})}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap"},children:e.jsxs(i,{variant:"h6",fontWeight:"700",color:"text.primary",children:["₹ ",Number($.items.reduce((H,ie)=>H+Number(ie.discount_amount||0),0)).toLocaleString("en-IN",{minimumFractionDigits:2})]})}),A&&e.jsxs(e.Fragment,{children:[e.jsx(m,{align:"center",children:e.jsx(i,{color:"text.secondary",children:"—"})}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap"},children:e.jsxs(i,{variant:"h6",fontWeight:"700",color:"warning.main",children:["₹ ",Number($.items.reduce((H,ie)=>H+Number(ie.tax_amount||0),0)).toLocaleString("en-IN",{minimumFractionDigits:2})]})})]}),e.jsx(m,{align:"center",children:e.jsx(l,{sx:{whiteSpace:"nowrap",display:"inline-flex",alignItems:"center",px:2,py:.5,bgcolor:d(f.palette.success.main,.15),borderRadius:2,border:`2px solid ${d(f.palette.success.main,.5)}`},children:e.jsxs(i,{variant:"h6",fontWeight:"700",color:"success.main",children:["₹ ",Number($.items.reduce((H,ie)=>H+Number(ie.total_amount||0),0)).toLocaleString("en-IN",{minimumFractionDigits:2})]})})}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap"},children:e.jsx(ee,{variant:"contained",startIcon:e.jsx(Zt,{}),onClick:Ae,size:"small",sx:{borderRadius:1,textTransform:"none",fontWeight:600},children:"Add More"})})]}),$.items.length===0&&e.jsx(xe,{children:e.jsx(m,{colSpan:A?9:7,align:"center",sx:{py:4,border:"none"},children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:3},children:[e.jsx($e,{sx:{width:80,height:80,bgcolor:d(f.palette.primary.main,.1),color:"primary.main"},children:e.jsx(ea,{sx:{fontSize:40}})}),e.jsxs(l,{sx:{textAlign:"center"},children:[e.jsx(i,{variant:"h6",color:"text.secondary",gutterBottom:!0,fontWeight:"600",children:"No items added yet"}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:1,maxWidth:400},children:"Start building your invoice by adding products or services. You can add quantities, rates, and tax information."})]}),e.jsx(ee,{variant:"contained",size:"large",startIcon:e.jsx(xr,{}),onClick:Ae,sx:{borderRadius:2,textTransform:"none",fontWeight:700,px:4,py:1.5,background:`linear-gradient(135deg, ${f.palette.primary.main} 0%, ${f.palette.secondary.main} 100%)`,boxShadow:f.shadows[8],"&:hover":{transform:"translateY(-2px)",boxShadow:f.shadows[12]}},children:"Add Your First Item"})]})})})]})]})})}),F.items&&e.jsx(ze,{in:!0,children:e.jsxs(l,{sx:{mt:2,p:2,bgcolor:d(f.palette.error.main,.1),borderRadius:2,border:`1px solid ${d(f.palette.error.main,.3)}`,display:"flex",alignItems:"center",gap:1},children:[e.jsx(ht,{color:"error"}),e.jsx(i,{variant:"body2",color:"error.main",fontWeight:"600",children:F.items})]})})]})}),e.jsx(_a,{gradient:"warning",sx:{mb:4,cursor:"pointer",transition:"hover 0.1s cubic-bezier(0.4, 0, 0.2, 1)",":hover":{bgcolor:d(f.palette.warning.main,.1)}},children:e.jsxs(Me,{sx:{p:0},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},onClick:H=>{H.stopPropagation(),_(!B)},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",mb:1,width:"100%"},children:[e.jsx($e,{sx:{bgcolor:"warning.main",mr:2,width:40,height:40},children:e.jsx(Ci,{})}),e.jsxs(l,{children:[e.jsx(i,{variant:"h5",fontWeight:"700",color:"warning.main",children:"Additional Information"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Add any extra details or notes for this invoice"})]})]}),e.jsx(ke,{onClick:H=>{H.stopPropagation(),_(!B)},sx:{bgcolor:d(f.palette.success.main,.1),"&:hover":{bgcolor:d(f.palette.success.main,.2),transform:"scale(1.1)"},transition:"all 0.2s ease"},children:B?e.jsx(Ar,{}):e.jsx(Pr,{})})]}),e.jsx(Xt,{in:B,children:e.jsx(l,{sx:{display:"flex",alignItems:"center",flexDirection:"column",width:"100%"},children:e.jsx(X,{fullWidth:!0,multiline:!0,rows:3,variant:"outlined",placeholder:"Enter additional information...",sx:{mt:2}})})})]})}),e.jsx(_a,{gradient:"success",sx:{mb:4,overflow:"visible"},children:e.jsxs(Me,{sx:{p:0},children:[e.jsxs(l,{sx:{p:0,background:`linear-gradient(135deg, ${f.palette.success.main}15 0%, ${f.palette.success.main}25 100%)`,borderRadius:"12px 12px 0 0"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",zIndex:1},children:[e.jsx($e,{sx:{bgcolor:"success.main",mr:2,width:52,height:52,boxShadow:`0 8px 24px ${d(f.palette.success.main,.3)}`,background:`linear-gradient(135deg, ${f.palette.success.main} 0%, ${f.palette.success.dark} 100%)`},children:e.jsx(ar,{sx:{fontSize:24}})}),e.jsxs(l,{children:[e.jsx(i,{variant:"h5",fontWeight:"800",color:"success.main",sx:{mb:.5},children:"Financial Summary"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Invoice calculations and adjustments"})]})]}),e.jsxs(J,{direction:"row",spacing:1,alignItems:"center",children:[!T&&e.jsx(ft,{onClick:je,disabled:n||$.items.length===0,startIcon:n?e.jsx(qt,{className:"animate-spin"}):e.jsx(ia,{}),text:n?"Updating...":"Update Invoice"}),e.jsx(ke,{onClick:()=>k(!T),sx:{bgcolor:d(f.palette.success.main,.1),"&:hover":{bgcolor:d(f.palette.success.main,.2),transform:"scale(1.1)"},transition:"all 0.2s ease"},children:T?e.jsx(Ar,{}):e.jsx(Pr,{})})]})]}),e.jsxs(I,{container:!0,spacing:2,children:[!A&&e.jsx(I,{item:!0,xs:6,sm:3,children:e.jsxs(ne,{elevation:0,sx:{p:2,textAlign:"center",bgcolor:d("#fff",.7),borderRadius:2,border:`1px solid ${d(f.palette.info.main,.2)}`},children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:"Sub-Totals"}),e.jsxs(i,{variant:"h6",fontWeight:"700",color:"info.main",sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(Ee,{sx:{fontSize:"1em"}}),Te]})]})}),e.jsx(I,{item:!0,xs:6,sm:3,children:e.jsxs(ne,{elevation:0,sx:{p:2,textAlign:"center",bgcolor:d("#fff",.7),borderRadius:2,border:`1px solid ${d(f.palette.success.main,.2)}`},children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:"Total Discount amount"}),e.jsxs(i,{variant:"h6",fontWeight:"700",color:"warning.main",sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(Ee,{sx:{fontSize:"1em"}}),V]})]})}),A&&e.jsx(I,{item:!0,xs:6,sm:3,children:e.jsxs(ne,{elevation:0,sx:{p:2,textAlign:"center",bgcolor:d("#fff",.7),borderRadius:2,border:`1px solid ${d(f.palette.info.main,.2)}`},children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:"Total Tax Amount"}),e.jsxs(i,{variant:"h6",fontWeight:"700",color:"info.main",sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(Ee,{sx:{fontSize:"1em"}}),de]})]})}),e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsxs(ne,{elevation:0,sx:{p:1.5,textAlign:"center",bgcolor:`linear-gradient(135deg, ${d(f.palette.success.main,.1)} 0%, ${d(f.palette.success.main,.2)} 100%)`,borderRadius:2,border:`2px solid ${d(f.palette.success.main,.3)}`},children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:"GRAND TOTAL"}),e.jsxs(i,{variant:"h4",fontWeight:"900",color:"success.main",sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(Ee,{sx:{fontSize:"0.8em"}}),Number(ue).toLocaleString("en-IN",{minimumFractionDigits:2})]})]})})]})]}),e.jsx(Xt,{in:T,children:e.jsx(l,{sx:{p:1,pt:2},children:e.jsxs(I,{container:!0,spacing:3,justifyContent:"flex-end",children:[e.jsx(I,{item:!0,xs:12,sm:6,md:A?2:2.4,children:e.jsxs(l,{sx:{position:"relative"},children:[e.jsxs(ne,{elevation:0,sx:{p:2,borderRadius:1,background:`linear-gradient(135deg, ${f.palette.success.light} 0%, ${f.palette.success.light} 100%)`,textAlign:"center",height:40,display:"flex",alignItems:"center",justifyContent:"center",gap:.5},children:[e.jsx(i,{variant:"caption",display:"block",children:"Sub Total :-"}),e.jsx(Ee,{sx:{fontSize:12}}),e.jsx(i,{variant:"caption",fontWeight:"600",color:"success.main",children:Te})]}),e.jsx(le,{title:"Base amount before any adjustments",arrow:!0,children:e.jsx(ke,{size:"small",sx:{position:"absolute",top:-8,right:-8,bgcolor:"success.main",color:"white",width:20,height:20,"&:hover":{bgcolor:"success.dark"}},children:e.jsx(ht,{sx:{fontSize:12}})})})]})}),e.jsx(I,{item:!0,xs:12,sm:6,md:A?2:2.4,children:e.jsx(l,{children:e.jsxs(ne,{elevation:0,sx:{p:2,borderRadius:1,background:`linear-gradient(135deg, ${f.palette.warning.light} 0%, ${f.palette.warning.light} 100%)`,textAlign:"center",height:40,display:"flex",alignItems:"center",justifyContent:"flex-start",gap:.5},children:[e.jsx(co,{color:"warning"}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:1},children:[e.jsxs(i,{variant:"caption",display:"block",children:["Discount :-"," "]}),e.jsx(Ee,{sx:{fontSize:12}}),e.jsx(i,{variant:"caption",fontWeight:"600",color:"success.main",children:V})]})]})})}),e.jsx(I,{item:!0,xs:12,sm:6,md:A?2:2.4,children:e.jsxs(l,{sx:{position:"relative"},children:[e.jsxs(ne,{elevation:0,sx:{p:2,borderRadius:1,background:`linear-gradient(135deg, ${f.palette.info.light} 0%, ${f.palette.info.light} 100%)`,textAlign:"center",height:40,display:"flex",alignItems:"center",justifyContent:"flex-start",gap:1},children:[e.jsx(xt,{color:"info"}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsxs(i,{variant:"caption",display:"block",children:["Total Amount :-"," "]}),e.jsx(Ee,{sx:{fontSize:12}}),e.jsx(i,{variant:"caption",fontWeight:"600",color:"success.main",children:z})]})]}),e.jsx(le,{title:"Total amount after deducting discount from the sub-totals",arrow:!0,children:e.jsx(ke,{size:"small",sx:{position:"absolute",top:-8,right:-8,bgcolor:"success.main",color:"white",width:20,height:20,"&:hover":{bgcolor:"success.dark"}},children:e.jsx(ht,{sx:{fontSize:12}})})})]})}),A&&e.jsx(I,{item:!0,xs:12,sm:6,md:2,children:e.jsxs(ne,{elevation:0,sx:{p:2,borderRadius:1,background:`linear-gradient(135deg, ${f.palette.info.light} 0%, ${f.palette.info.light} 100%)`,textAlign:"center",height:40,display:"flex",alignItems:"center",justifyContent:"flex-start",gap:.5},children:[e.jsx(Tt,{color:"warning"}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsxs(i,{variant:"caption",display:"block",children:["Total Tax :-"," "]}),e.jsx(Ee,{sx:{fontSize:12}}),e.jsx(i,{variant:"caption",fontWeight:"600",color:"success.main",children:de})]})]})}),e.jsx(I,{item:!0,xs:12,sm:6,md:A?2:2.4,children:e.jsx(Or,{label:"Additional Charges",fullWidth:!0,size:"small",value:$.additional_charge||"",onChange:H=>{const ie=H.target.value.replace(/[^0-9.]/g,"");Y("additional_charge",ie===""?0:Number(ie))},name:"additional_charge",variant:"outlined",type:"number",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(xr,{color:"secondary"})}),inputProps:{onFocus:H=>H.target.select()}}})}),e.jsx(I,{item:!0,xs:12,sm:6,md:A?2:2.4,children:e.jsxs(ne,{elevation:0,sx:{p:2,borderRadius:1,background:`linear-gradient(135deg, ${f.palette.info.light} 0%, ${f.palette.info.light} 100%)`,textAlign:"center",height:40,display:"flex",alignItems:"center",justifyContent:"flex-start",gap:1},children:[e.jsx(na,{color:"info"}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsxs(i,{variant:"caption",display:"block",children:["Round Off :-"," "]}),e.jsx(Ee,{sx:{fontSize:12}}),e.jsx(i,{variant:"caption",fontWeight:"600",color:"success.main",children:oe})]})]})}),e.jsx(I,{item:!0,xs:12,sm:12,md:3,children:e.jsxs(ne,{elevation:3,sx:{p:2,borderRadius:1,background:`linear-gradient(135deg, ${f.palette.success.main}10 0%, ${f.palette.success.main}25 100%)`,border:`2px solid ${d(f.palette.success.main,.4)}`,textAlign:"center",height:56,display:"flex",alignItems:"baseline",justifyContent:"center",gap:1},children:[e.jsx(i,{variant:"subtitle2",color:"text.secondary",fontWeight:"600",children:"GRAND TOTAL"}),e.jsx(Ee,{sx:{color:"success.main",fontSize:16,fontWeight:"bold"}}),e.jsx(i,{variant:"h5",fontWeight:"900",color:"success.main",children:Number(ue).toLocaleString("en-IN",{minimumFractionDigits:2})})]})}),e.jsx(I,{item:!0,xs:12,sm:12,md:2,children:e.jsx(Or,{label:"Paid Amount",type:"number",fullWidth:!0,value:$.paid_amount,onChange:H=>{const ie=H.target.value.replace(/[^0-9.]/g,"");Y("paid_amount",ie===""?0:Number(ie))},name:"paid_amount",variant:"outlined",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ee,{color:"primary"})}),inputProps:{onFocus:H=>H.target.select()}},sx:{flex:1}})}),e.jsx(I,{item:!0,xs:12,sm:12,md:2,children:e.jsx(ne,{elevation:3,sx:{p:2,borderRadius:1,background:`linear-gradient(135deg, ${f.palette.success.main}10 0%, ${f.palette.success.main}25 100%)`,border:`2px solid ${d(f.palette.success.main,.4)}`,textAlign:"center",height:56,display:"flex",alignItems:"baseline",justifyContent:"center",cursor:n||$.items.length===0?"not-allowed":"pointer",":hover":{boxShadow:n||$.items.length===0?"none":`0 4px 20px ${d(f.palette.success.main,.3)}`,transform:n||$.items.length===0?"none":"translateY(-2px)",color:n||$.items.length===0?"text.disabled":"#ffffff",background:n||$.items.length===0?d(f.palette.success.main,.1):`${f.palette.success.main}`},gap:1},onClick:je,children:e.jsx(i,{variant:"subtitle2",fontWeight:"600",children:n?"Updating...":"Update Invoice"})})})]})})})]})})]})]}),e.jsx(fl,{open:b,onClose:()=>M(!1),onCreated:H=>{G(ie=>({...ie,items:[...ie.items,H]})),M(!1)},onUpdated:H=>{G(ie=>({...ie,items:ie.items.map(me=>me.item_id===H.item_id?H:me)})),M(!1)},item:W})]})}const yl=({open:t,contraId:a,onClose:n,setContraId:s})=>{var O;const r=we(),o=Fe(),{user:p,current_company_id:c}=Ce(y=>y.auth),x=c||localStorage.getItem("current_company_id")||((O=p==null?void 0:p.user_settings)==null?void 0:O.current_company_id)||"",{invoiceData:u}=Ce(y=>y.invoice),S=yt(r.breakpoints.down("sm")),[f,v]=g.useState(!1),[j,T]=g.useState({}),[k,B]=g.useState([]),[_,K]=g.useState({id:"",amount:0,date:new Date().toISOString(),notes:"",sendSms:!1,sendEmail:!1,fromAccount:"",fromAccountId:"",fromAccountEntry:"",toAccount:"",toAccountId:"",toAccountEntry:"",transactionNumber:"Auto-Gen"}),w=()=>{const y={};return _.fromAccount||(y.fromAccount="From account is required"),_.toAccount||(y.toAccount="To account is required"),(!_.amount||_.amount<=0)&&(y.amount="Amount must be greater than 0"),_.date||(y.date="Date is required"),_.notes&&_.notes.length>500&&(y.notes="Notes must be less than 500 characters"),T(y),Object.keys(y).length===0},N=(y,F)=>{if(y==="amount"){const h=Math.max(0,Math.floor(Number(F)));K(b=>({...b,[y]:h}))}else K(h=>({...h,[y]:F}));j[y]&&T(h=>({...h,[y]:""}))},R=()=>{K({id:"",amount:0,date:new Date().toISOString(),notes:"",sendSms:!1,sendEmail:!1,fromAccount:"",fromAccountId:"",fromAccountEntry:"",toAccount:"",toAccountId:"",toAccountEntry:"",transactionNumber:"Auto-Gen"}),T({})},L=async()=>{if(w())if(v(!0),a){const y=[{entry_id:_.fromAccountEntry,vouchar_id:_.id,ledger:_.fromAccount,ledger_id:_.fromAccountId,amount:-Number(_.amount),order_index:0},{entry_id:_.toAccountEntry,vouchar_id:_.id,ledger:_.toAccount,ledger_id:_.toAccountId,amount:Number(_.amount),order_index:1}],F={vouchar_id:_.id,user_id:p==null?void 0:p._id,voucher_type:"Contra",voucher_type_id:"c9d0e664-900d-4736-adfb-495ccca2bf3e",date:_.date.slice(0,10),voucher_number:_.transactionNumber,party_name:_.fromAccount,party_name_id:_.fromAccountId,narration:_.notes,company_id:x||"",reference_number:"",reference_date:"",place_of_supply:"",mode_of_transport:"",vehicle_number:"",payment_mode:"",due_date:"",paid_amount:Number(_.amount),total:Number(_.amount),discount:0,total_amount:Number(_.amount),total_tax:0,additional_charge:0,roundoff:0,grand_total:Number(_.amount),accounting:y,items:[]};o(nn(F)).then(()=>{v(!1),R(),n(),s==null||s(null),Z.success("Contra update successfully!")}).catch(h=>{v(!1),Z.error(h||"Failed to update transaction. 🚫")})}else{const y=[{vouchar_id:"",ledger:_.fromAccount,ledger_id:_.fromAccountId,amount:-Number(_.amount),order_index:0},{vouchar_id:"",ledger:_.toAccount,ledger_id:_.toAccountId,amount:Number(_.amount),order_index:1}],F={voucher_type:"Contra",voucher_type_id:"c9d0e664-900d-4736-adfb-495ccca2bf3e",date:_.date.slice(0,10),voucher_number:_.transactionNumber,party_name:_.fromAccount,party_name_id:_.fromAccountId,narration:_.notes,company_id:x||"",reference_number:"",reference_date:"",place_of_supply:"",mode_of_transport:"",vehicle_number:"",payment_mode:"",due_date:"",paid_amount:Number(_.amount),total:Number(_.amount),discount:0,total_amount:Number(_.amount),total_tax:0,additional_charge:0,roundoff:0,grand_total:Number(_.amount),accounting:y,items:[]};o($r(F)).then(()=>{v(!1),R(),n(),s==null||s(null),Z.success("Contra added successfully!")}).catch(h=>{v(!1),Z.error(h||"Failed to add transaction. 🚫")})}},D=_.fromAccount&&_.toAccount&&_.amount>0&&_.date,P=async()=>{t&&o(la({company_id:x||"",customerType:"Accounts"})).then(y=>{if(y.meta.requestStatus==="fulfilled"){const F=y.payload;B(F.map(h=>({name:h.ledger_name,id:h._id})))}}).catch(y=>{Z.error(y||"An unexpected error occurred. Please try again later.")})},A=async()=>{o(Nr({company_id:x||"",voucher_type:"Contra"})).then(y=>{y.meta.requestStatus==="fulfilled"&&N("transactionNumber",y.payload.current_number||"")}).catch(y=>{Z.error(y||"An unexpected error occurred. Please try again later.")})};return g.useEffect(()=>{t&&(async()=>{try{await P(),a||await A()}catch(F){console.error("Failed to load initial data:",F),Z.error("Failed to load data. Please refresh the page.")}})()},[o,x,t,a]),g.useEffect(()=>{a!=null?o(cr({vouchar_id:a,company_id:x||""})):R()},[o,x,a]),g.useEffect(()=>{var y;if(u&&a!==null){const F=(u.accounting_entries||[]).find(h=>h.ledger!==u.party_name)||{_id:"",ledger:"",ledger_id:""};K({id:u._id,amount:u.grand_total||0,date:u.date,notes:u.narration||"",fromAccount:u.party_name,fromAccountId:u.party_name_id,transactionNumber:u.voucher_number,toAccount:F.ledger||"",toAccountId:F.ledger_id||"",fromAccountEntry:((y=(u.accounting_entries||[]).find(h=>h.ledger===u.party_name))==null?void 0:y._id)||"",toAccountEntry:F._id||"",sendEmail:!1,sendSms:!1})}else R()},[u]),e.jsx(Pt,{dateAdapter:Lt,children:e.jsxs(Mt,{anchor:"right",PaperProps:{sx:{width:{xs:"100%",sm:600,md:700},backgroundColor:r.palette.background.default,backgroundImage:"none"}},sx:{"& .MuiBackdrop-root":{backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)"},zIndex:1300},open:t,onClose:()=>{n(),R(),s==null||s(null)},transitionDuration:400,children:[e.jsxs(l,{sx:{px:3,py:2.5,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${r.palette.divider}`,background:`linear-gradient(135deg, ${d(r.palette.primary.main,.08)} 0%, ${d(r.palette.success.main,.08)} 100%)`,position:"sticky",top:0,zIndex:100,backdropFilter:"blur(20px)"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(l,{sx:{width:40,height:40,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",background:`linear-gradient(135deg, ${r.palette.primary.main} 0%, ${r.palette.success.main} 100%)`,boxShadow:`0 4px 12px ${d(r.palette.primary.main,.3)}`},children:e.jsx(on,{sx:{color:"white",fontSize:24}})}),e.jsxs(l,{children:[e.jsx(i,{variant:"h6",fontWeight:700,sx:{lineHeight:1.2},children:"Contra Entry"}),e.jsx(i,{variant:"caption",color:"text.secondary",sx:{display:"flex",alignItems:"center",gap:.5,mt:.5},children:e.jsx(ve,{label:_.transactionNumber,size:"small",sx:{height:20,fontSize:"0.7rem",fontWeight:600,bgcolor:d(r.palette.primary.main,.1),color:r.palette.primary.main}})})]})]}),e.jsx(le,{title:"Close",arrow:!0,placement:"left",children:e.jsx(ke,{onClick:()=>{n(),R(),s==null||s(null)},sx:{backgroundColor:d(r.palette.error.main,.1),color:r.palette.error.main,"&:hover":{backgroundColor:d(r.palette.error.main,.2),transform:"rotate(90deg)"},transition:"all 0.3s ease"},children:e.jsx(ct,{})})})]}),e.jsxs(l,{sx:{flex:1,overflow:"auto",px:3,pb:3,"&::-webkit-scrollbar":{width:6},"&::-webkit-scrollbar-track":{backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{backgroundColor:d(r.palette.primary.main,.2),borderRadius:3,"&:hover":{backgroundColor:d(r.palette.primary.main,.3)}}},children:[e.jsxs(l,{sx:{mt:2,p:2,borderRadius:1,bgcolor:d(r.palette.info.main,.08),border:`1px solid ${d(r.palette.info.main,.2)}`,display:"flex",gap:1.5},children:[e.jsx(ds,{sx:{color:r.palette.info.main,fontSize:20,mt:.2}}),e.jsxs(l,{children:[e.jsx(i,{variant:"body2",fontWeight:600,color:"info.main",sx:{mb:.5},children:"What is a Contra Entry?"}),e.jsx(i,{variant:"caption",color:"text.secondary",sx:{lineHeight:1.5},children:"Record fund transfers between your bank and cash accounts. This transaction affects only your balance sheet."})]})]}),e.jsxs(l,{children:[e.jsxs(ne,{elevation:0,sx:{p:3,mt:2,borderRadius:2,border:`1px solid ${r.palette.divider}`,background:r.palette.background.paper,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:`linear-gradient(90deg, ${r.palette.primary.main} 0%, ${r.palette.success.main} 100%)`}},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(xt,{sx:{color:r.palette.primary.main,fontSize:20}}),e.jsx(i,{variant:"subtitle1",fontWeight:700,children:"Account Transfer Details"})]}),e.jsxs(J,{spacing:1,children:[e.jsxs(l,{children:[e.jsx(i,{variant:"caption",fontWeight:600,sx:{mb:1,color:"text.secondary"},children:"TRANSFER FROM"}),e.jsx(at,{options:k,getOptionLabel:y=>y.name,value:k.find(y=>y.id===_.fromAccountId)||null,onChange:(y,F)=>{N("fromAccount",F==null?void 0:F.name),N("fromAccountId",F==null?void 0:F.id),T(h=>({...h,fromAccount:""}))},renderInput:y=>e.jsx(X,{...y,fullWidth:!0,placeholder:"Select or enter from account",error:!!j.fromAccount,helperText:j.fromAccount,InputProps:{...y.InputProps,startAdornment:e.jsx(se,{position:"start",children:e.jsx(l,{sx:{width:32,height:32,borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:d(r.palette.error.main,.1)},children:e.jsx(xt,{sx:{fontSize:16,color:r.palette.error.main}})})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.3s ease","&:hover":{boxShadow:`0 0 0 4px ${d(r.palette.error.main,.08)}`},"&.Mui-focused":{boxShadow:`0 0 0 4px ${d(r.palette.error.main,.12)}`}}}}),sx:{flex:1}})]}),e.jsx(l,{sx:{display:"flex",justifyContent:"center"},children:e.jsx(l,{sx:{width:48,height:48,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:`linear-gradient(135deg, ${r.palette.primary.main} 0%, ${r.palette.success.main} 100%)`,boxShadow:`0 4px 12px ${d(r.palette.primary.main,.3)}`,animation:"pulse 2s ease-in-out infinite","@keyframes pulse":{"0%, 100%":{transform:"scale(1)"},"50%":{transform:"scale(1.05)"}}},children:e.jsx(on,{sx:{color:"white",fontSize:28,transform:"rotate(90deg)"}})})}),e.jsxs(l,{children:[e.jsx(i,{variant:"caption",fontWeight:600,sx:{mb:1,color:"text.secondary"},children:"TRANSFER TO"}),e.jsx(at,{options:k,getOptionLabel:y=>y.name,value:k.find(y=>y.id===_.toAccountId)||null,onChange:(y,F)=>{N("toAccount",F==null?void 0:F.name),N("toAccountId",F==null?void 0:F.id),T(h=>({...h,toAccount:""}))},renderInput:y=>e.jsx(X,{...y,fullWidth:!0,placeholder:"Select or enter to account",error:!!j.toAccount,helperText:j.toAccount,InputProps:{...y.InputProps,startAdornment:e.jsx(se,{position:"start",children:e.jsx(l,{sx:{width:32,height:32,borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:d(r.palette.success.main,.1)},children:e.jsx(xt,{sx:{fontSize:16,color:r.palette.success.main}})})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.3s ease","&:hover":{boxShadow:`0 0 0 4px ${d(r.palette.success.main,.08)}`},"&.Mui-focused":{boxShadow:`0 0 0 4px ${d(r.palette.success.main,.12)}`}}}}),sx:{flex:1}})]})]})]}),e.jsxs(ne,{elevation:0,sx:{p:3,mt:3,borderRadius:3,border:`1px solid ${r.palette.divider}`,background:r.palette.background.paper},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:3},children:[e.jsx(Ee,{sx:{color:r.palette.success.main,fontSize:20}}),e.jsx(i,{variant:"subtitle1",fontWeight:700,children:"Transaction Details"})]}),e.jsxs(J,{spacing:3,children:[e.jsxs(l,{sx:{display:"flex",gap:2,flexDirection:S?"column":"row"},children:[e.jsx(X,{fullWidth:!0,type:"number",placeholder:"0.00",label:"Amount",value:_.amount||"",onChange:y=>N("amount",parseFloat(y.target.value)||0),error:!!j.amount,helperText:j.amount,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ee,{sx:{color:r.palette.success.main}})})},inputProps:{step:1,min:0},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,fontSize:"1.1rem","&:hover":{boxShadow:`0 0 0 4px ${d(r.palette.success.main,.08)}`},"&.Mui-focused":{boxShadow:`0 0 0 4px ${d(r.palette.success.main,.12)}`}},"& input":{fontWeight:700}}}),e.jsx(Xe,{value:new Date(_.date),format:"dd-MM-yyyy",onChange:y=>N("date",(y==null?void 0:y.toISOString())||""),slotProps:{textField:{fullWidth:!0,label:"Transaction Date",error:!!j.date,helperText:j.date,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(eo,{sx:{color:r.palette.primary.main}})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,"&:hover":{boxShadow:`0 0 0 4px ${d(r.palette.primary.main,.08)}`},"&.Mui-focused":{boxShadow:`0 0 0 4px ${d(r.palette.primary.main,.12)}`}}}}}})]}),e.jsx(X,{fullWidth:!0,multiline:!0,rows:4,label:"Additional Notes",placeholder:"Add notes or description for this transaction (optional)",value:_.notes,onChange:y=>N("notes",y.target.value),error:!!j.notes,helperText:j.notes||`${_.notes.length}/500 characters`,sx:{"& .MuiOutlinedInput-root":{borderRadius:1,"&:hover":{boxShadow:`0 0 0 4px ${d(r.palette.primary.main,.05)}`},"&.Mui-focused":{boxShadow:`0 0 0 4px ${d(r.palette.primary.main,.1)}`}}}})]})]}),e.jsxs(ne,{elevation:0,sx:{p:3,mt:3,mb:2,borderRadius:3,border:`1px dashed ${r.palette.divider}`,background:d(r.palette.warning.main,.03)},children:[e.jsxs(i,{variant:"subtitle2",fontWeight:700,sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(ve,{label:"Coming Soon",size:"small",color:"warning",sx:{height:20}}),"Notification Options"]}),e.jsxs(J,{spacing:2,children:[e.jsx(Ne,{variant:"outlined",sx:{px:2,py:1.5,borderRadius:1,bgcolor:"background.paper",opacity:.6,border:`1px solid ${r.palette.divider}`},children:e.jsx(jt,{control:e.jsx(kt,{disabled:!0,checked:_.sendSms,size:"small"}),label:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(l,{sx:{width:32,height:32,borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:d(r.palette.primary.main,.1)},children:e.jsx(Ms,{sx:{color:r.palette.primary.main,fontSize:16}})}),e.jsxs(l,{children:[e.jsx(i,{variant:"body2",fontWeight:600,children:"SMS Notification"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Send SMS to customer"})]})]})})}),e.jsx(Ne,{variant:"outlined",sx:{px:2,py:1.5,borderRadius:1,bgcolor:"background.paper",opacity:.6,border:`1px solid ${r.palette.divider}`},children:e.jsx(jt,{control:e.jsx(kt,{disabled:!0,checked:_.sendEmail,size:"small"}),label:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(l,{sx:{width:32,height:32,borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:d(r.palette.error.main,.1)},children:e.jsx(Bt,{sx:{color:r.palette.error.main,fontSize:16}})}),e.jsxs(l,{children:[e.jsx(i,{variant:"body2",fontWeight:600,children:"Email Notification"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Send email to customer"})]})]})})})]})]})]})]}),e.jsx(l,{sx:{p:3,borderTop:`1px solid ${r.palette.divider}`,background:r.palette.background.paper,position:"sticky",bottom:0,zIndex:100},children:e.jsxs(J,{direction:S?"column":"row",spacing:2,justifyContent:"space-between",children:[e.jsx(ee,{variant:"outlined",onClick:R,disabled:f,fullWidth:S,sx:{textTransform:"none",borderRadius:1,px:3,py:1.5,fontWeight:600,borderColor:r.palette.divider,color:"text.secondary","&:hover":{borderColor:r.palette.primary.main,bgcolor:d(r.palette.primary.main,.05),color:r.palette.primary.main}},children:"Reset Form"}),e.jsx(ee,{variant:"contained",onClick:L,startIcon:f?e.jsx(qt,{className:"animate-spin"}):e.jsx(pa,{}),disabled:f||!D,fullWidth:S,sx:{textTransform:"none",borderRadius:1,px:4,py:1.5,fontWeight:700,background:`linear-gradient(135deg, ${r.palette.primary.main} 0%, ${r.palette.success.main} 100%)`,boxShadow:`0 4px 12px ${d(r.palette.primary.main,.4)}`,"&:hover":{background:`linear-gradient(135deg, ${r.palette.primary.dark} 0%, ${r.palette.success.dark} 100%)`,boxShadow:`0 6px 16px ${d(r.palette.primary.main,.5)}`,transform:"translateY(-2px)"},"&:disabled":{background:r.palette.action.disabledBackground,color:r.palette.action.disabled},transition:"all 0.3s ease"},children:f?"Recording Contra...":"Record Contra Entry"})]})}),f&&e.jsx(l,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,bgcolor:d(r.palette.background.default,.9),backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs(l,{sx:{textAlign:"center"},children:[e.jsx(qt,{sx:{fontSize:48,color:r.palette.primary.main,animation:"spin 1s linear infinite","@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}}),e.jsx(i,{variant:"body1",fontWeight:600,sx:{mt:2},children:"Recording Contra Entry..."})]})})]})})},Nx=()=>{var V,z,de,Ie;const t=Ke(),a=we(),n=Fe(),[s,r]=g.useState(!1),[o,p]=g.useState(null),[c,x]=g.useState(!1),[u,S]=g.useState([]),{invoices:f,loading:v,pageMeta:j,invoiceGroups:T}=Ce(oe=>oe.invoice),{user:k,current_company_id:B}=Ce(oe=>oe.auth),_=B||localStorage.getItem("current_company_id")||((V=k==null?void 0:k.user_settings)==null?void 0:V.current_company_id)||"",K=(z=k==null?void 0:k.company)==null?void 0:z.find(oe=>oe._id===_),w=(Ie=(de=K==null?void 0:K.company_settings)==null?void 0:de.features)==null?void 0:Ie.enable_tax,{init:N,setLoading:R,PDFViewModal:L}=Ri();async function D(oe,ue){try{R(!0);const je=await n((oe.voucher_type==="Payment"?Pi:oe.voucher_type==="Receipt"?Ai:w?Ti:Ii)({vouchar_id:oe._id,company_id:B||""}));if(je.meta.requestStatus==="fulfilled"){const{pdfUrl:q}=je.payload,E=await fetch(q).then(U=>U.blob()),te=new File([E],`${oe._id}.pdf`,{type:"application/pdf"});N({file:te,entityNumber:oe.voucher_number,title:oe.party_name,fileName:`${oe.voucher_number}-vyapar-drishti`},ue)}else{console.error("Failed to print invoice:",je.payload);return}}catch(je){console.error("Error printing invoice:",je)}finally{R(!1)}}const[P,A]=g.useState({searchQuery:"",filterState:"All-States",is_deleted:!1,type:"All",page:1,startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1),endDate:new Date,rowsPerPage:10,sortField:"date",sortOrder:"desc"}),{searchQuery:O,filterState:y,page:F,is_deleted:h,rowsPerPage:b,startDate:M,endDate:W,type:C,sortField:$,sortOrder:G}=P,ge=g.useCallback(async()=>{n(rn({searchQuery:O,company_id:_||"",type:C,start_date:M.getFullYear().toString()+"-"+(M.getMonth()+1).toString().padStart(2,"0")+"-"+M.getDate().toString().padStart(2,"0"),end_date:W.getFullYear().toString()+"-"+(W.getMonth()+1).toString().padStart(2,"0")+"-"+W.getDate().toString().padStart(2,"0"),pageNumber:F,limit:b,sortField:$,sortOrder:G}))},[n,O,_,C,M,W,F,b,$,G]);g.useEffect(()=>{ge(),n(Ba(_||""))},[O,F,b,h,$,y,G,n,ge,_]);const Ae=oe=>{const ue=$===oe&&G==="asc";A(je=>({...je,sortOrder:ue?"desc":"asc",sortField:oe}))},ae=(oe,ue)=>{A(je=>({...je,page:ue}))},Y=g.useCallback(()=>{A({searchQuery:"",filterState:"All-States",is_deleted:!1,type:"All",page:1,startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1),endDate:new Date,rowsPerPage:10,sortField:"date",sortOrder:"desc"})},[]),re=(oe,ue)=>{A(je=>({...je,[oe]:ue}))},Te=oe=>{oe.voucher_type!=="Payment"&&oe.voucher_type!=="receipt"&&t(`/invoices/${oe._id}`)};return e.jsx(Pt,{dateAdapter:Lt,children:e.jsxs(l,{sx:{p:3,width:"100%",position:"relative"},children:[e.jsx(Ja,{title:"Transactions Directory",subtitle:`${j.total} Transactions available in your database after applying filters`}),e.jsxs(l,{sx:{display:"flex",mb:3,gap:2,flexWrap:"wrap"},children:[e.jsx(X,{sx:{flexGrow:1,minWidth:"250px"},variant:"outlined",size:"small",label:"Search",placeholder:"Search by name, type...",value:O,onChange:oe=>re("searchQuery",oe.target.value),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(qa,{})})}}),e.jsx(Xe,{label:"Start Date",value:new Date(M),format:"dd/MM/yyyy",views:["year","month","day"],onChange:oe=>re("startDate",oe),slotProps:{textField:{size:"small",sx:{"& .MuiOutlinedInput-root":{width:"150px",borderRadius:"8px"},"& .MuiInputAdornment-root .MuiButtonBase-root":{border:"none",boxShadow:"none"}}}}}),e.jsx(Xe,{label:"End Date",value:W,format:"dd/MM/yyyy",views:["year","month","day"],onChange:oe=>re("endDate",oe),slotProps:{textField:{size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px",width:"150px"},"& .MuiInputAdornment-root .MuiButtonBase-root":{border:"none",boxShadow:"none"}}}}}),e.jsx(qe,{sx:{minWidth:"150px"},children:e.jsxs(X,{select:!0,size:"small",value:C,label:"Filter by Transaction Types",placeholder:"Filter by Transaction Types",onChange:oe=>re("type",oe.target.value),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ea,{})})},children:[e.jsx(he,{selected:!0,value:"All",children:e.jsx("em",{children:"All"})}),e.jsx(he,{value:"Payment",children:"Payment"}),e.jsx(he,{value:"Receipt",children:"Receipt"}),e.jsx(he,{value:"Sales",children:"Sales"}),e.jsx(he,{value:"Purchase",children:"Purchase"})]})}),e.jsx(qe,{children:e.jsx(X,{select:!0,size:"small",value:b.toString(),label:"Show",onChange:oe=>{re("rowsPerPage",parseInt(oe.target.value,10)),re("page",1)},children:[10,20,50,100,200].map(oe=>e.jsxs(he,{value:oe.toString(),children:[oe," rows"]},oe))})}),e.jsx(ee,{variant:"outlined",color:"primary",size:"medium",startIcon:e.jsx(Ua,{}),onClick:Y,sx:{fontWeight:"bold",py:1.5},children:"Reset Filters"})]}),e.jsx(nt,{component:ne,elevation:0,sx:{width:"100%",borderRadius:1,border:`1px solid ${d(a.palette.divider,1)}`,boxShadow:`0 4px 20px ${d("#000",.05)}`},children:e.jsxs(it,{sx:{width:"100%"},children:[e.jsx(ot,{children:e.jsxs(xe,{sx:{bgcolor:d(a.palette.grey[50],.8),width:"100%","& .MuiTableCell-head":{borderBottom:`2px solid ${d(a.palette.primary.main,.1)}`},"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(Aa,{indeterminate:u.length>0&&u.length<f.length,checked:f.length>0&&u.length===f.length,onChange:(oe,ue)=>{S(ue?f.map(je=>je._id):[])}})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by State",arrow:!0,children:e.jsx(Ue,{active:$==="state",direction:$==="state"?G:"asc",onClick:()=>Ae("state"),children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(Ut,{fontSize:"small"}),e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:a.palette.text.primary,fontSize:"0.85rem"},children:"Transaction Date"})]})})})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by Name",children:e.jsx(Ue,{active:$==="name",direction:$==="name"?G:"asc",onClick:()=>Ae("name"),children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:a.palette.text.primary,fontSize:"0.85rem"},children:"Sender / Receiver"})})})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by Item Quantity",arrow:!0,children:e.jsx(Ue,{children:e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:a.palette.text.primary,fontSize:"0.85rem"},children:"Transaction Type"})})})})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by State",arrow:!0,children:e.jsx(Ue,{active:$==="state",direction:$==="state"?G:"asc",onClick:()=>Ae("state"),children:e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:a.palette.text.primary,fontSize:"0.85rem"},children:"Transaction No."})})})})}),e.jsx(m,{align:"right",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:a.palette.text.primary,fontSize:"0.85rem"},children:"Debit"})}),e.jsx(m,{align:"right",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:a.palette.text.primary,fontSize:"0.85rem"},children:"Credit"})}),e.jsx(m,{align:"center",children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:a.palette.text.primary,fontSize:"0.85rem"},children:"Actions"})})]})}),e.jsxs(st,{children:[v?Array([1,2,3,4,5]).map((oe,ue)=>e.jsx(dn,{},`skeleton-${ue}`)):(f==null?void 0:f.length)>0?f.map((oe,ue)=>e.jsx(_o,{inv:oe,selected:u.includes(oe._id),onSelect:je=>{S(q=>je?[...q,oe._id]:q.filter(E=>E!==oe._id))},index:ue+1+(F-1)*b,onView:()=>Te(oe),onEdit:()=>{var je;n(Ca(((je=T.find(q=>q.name.includes(oe.voucher_type)))==null?void 0:je._id)||"")),oe.voucher_type==="Sales"||oe.voucher_type==="Purchase"?t(`/invoices/update/${oe.voucher_type.toLowerCase()}/${oe._id}`):oe.voucher_type==="Contra"&&(p(oe._id),r(!0))},onDelete:async()=>{n(ur({vouchar_id:oe._id,company_id:_})).unwrap().then(()=>{Z.success("Transaction deleted successfully!"),ge()}).catch(je=>{Z.error(je||"An unexpected error occurred. Please try again later.")})},onPrint:()=>{["Receipt","Payment","Purchase","Sales"].includes(oe.voucher_type)&&D(oe,()=>{x(!0)})}},oe._id)):e.jsx(xe,{children:e.jsx(m,{colSpan:8,sx:{textAlign:"center",py:8},children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx(ya,{sx:{fontSize:"4rem",color:a.palette.text.disabled}}),e.jsx(i,{variant:"h5",color:"text.secondary",sx:{fontWeight:600},children:"No transactions today"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Try adjusting your search or filter criteria, or add your first transaction for today"}),e.jsx(I,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"}})]})})}),C!=="All"&&e.jsxs(e.Fragment,{children:[e.jsx(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px",bgcolor:d(a.palette.grey[100],.8)}},children:e.jsx(m,{colSpan:8})}),e.jsxs(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{colSpan:1,sx:{textAlign:"center"}}),e.jsx(m,{colSpan:1,sx:{textAlign:"left"},children:e.jsx(i,{variant:"h6",color:"text.primary",sx:{fontWeight:600,textDecoration:"underline"},children:"Totals"})}),e.jsx(m,{colSpan:3,sx:{textAlign:"center"}}),e.jsx(m,{align:"right",colSpan:1,children:j.total_debit!==0&&e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[e.jsx(i,{variant:"h6",sx:{fontWeight:700,mr:.5,color:a.palette.success.main},children:"₹"}),e.jsx(i,{variant:"h6",sx:{fontWeight:600,color:a.palette.success.main},children:Math.abs(j.total_debit)})]})}),e.jsx(m,{align:"right",colSpan:1,children:j.total_credit!==0&&e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[e.jsx(i,{variant:"h6",sx:{fontWeight:700,mr:.5,color:a.palette.error.main},children:"₹"}),e.jsx(i,{variant:"h6",sx:{fontWeight:600,color:a.palette.error.main},children:Math.abs(j.total_credit)})]})}),e.jsx(m,{colSpan:1,sx:{textAlign:"center"}})]})]})]})]})}),e.jsx(Dt,{total:j.total,page:F,metaPage:j.page,item:"Transactions",rowsPerPage:b,onChange:ae}),c&&e.jsx(L,{visible:c,setVisible:x}),o!==null&&e.jsx(yl,{open:s,onClose:()=>r(!1),contraId:o,setContraId:p})]})})},Dx=Ge(ee)(({theme:t})=>({background:t.palette.mode==="dark"?"#2e7d32":"#e8f5e9",color:t.palette.mode==="dark"?"#fff":"#2e7d32","&:hover":{color:t.palette.mode==="dark"?"#000":"#fff",background:t.palette.mode==="dark"?"#e8f5e9":"#2e7d32"},borderRadius:"20px",whiteSpace:"nowrap",padding:"6px 12px",minWidth:"unset",textTransform:"none",transition:"all 0.2s",fontWeight:600})),Bx=Ge(ee)(({theme:t})=>({background:t.palette.mode==="dark"?"#c62828":"#ffebee",color:t.palette.mode==="dark"?"#fff":"#c62828","&:hover":{color:t.palette.mode==="dark"?"#000":"#fff",background:t.palette.mode==="dark"?"#ffebee":"#c62828"},borderRadius:"20px",padding:"6px 12px",whiteSpace:"nowrap",minWidth:"unset",textTransform:"none",transition:"all 0.2s",fontWeight:600})),Fx=t=>{const a=we(),n=Ke(),{row:s,serial:r}=t,[o,p]=g.useState(!1),[c,x]=g.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(xe,{onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),sx:{width:"100%",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:c?"translateY(-2px)":"translateY(0)",boxShadow:c?`0 8px 25px ${d(a.palette.primary.main,.15)}`:"none","&:hover":{bgcolor:d(a.palette.primary.main,.02)},"& .MuiTableCell-root":{padding:"8px 16px"},borderLeft:`4px solid ${c?a.palette.primary.main:"transparent"}`},children:[e.jsx(m,{children:e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(i,{variant:"body2",sx:{mr:1},children:r}),e.jsx(ke,{"aria-label":"expand row",size:"small",onClick:()=>p(!o),sx:{mr:1},children:o?e.jsx(go,{}):e.jsx(bo,{})})]})}),e.jsx(m,{children:e.jsx(i,{variant:"body1",fontWeight:"medium",children:s==null?void 0:s.stock_item_name})}),e.jsx(m,{children:e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[["zero","negative"].includes(s==null?void 0:s.stock_status)&&e.jsx(ve,{label:`${s==null?void 0:s.current_stock} ${s==null?void 0:s.unit}`,color:"error",sx:{fontWeight:"bold",px:1,py:1.5}}),(s==null?void 0:s.stock_status)==="low"&&e.jsx(ve,{label:`${s==null?void 0:s.current_stock} ${s==null?void 0:s.unit}`,color:"warning",sx:{fontWeight:"bold",px:1,py:1.5}}),(s==null?void 0:s.stock_status)==="positive"&&e.jsx(ve,{label:`${s==null?void 0:s.current_stock} ${s==null?void 0:s.unit}`,color:"success",sx:{fontWeight:"bold",px:1,py:1.5}})]})}),e.jsx(m,{children:e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(i,{sx:{fontSize:"1rem",mr:.5},children:"₹"}),e.jsx(i,{children:Number(s==null?void 0:s.avg_purchase_rate).toFixed(2)})]})}),e.jsx(m,{children:e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(i,{sx:{fontSize:"1rem",mr:.5},children:"₹"}),e.jsx(i,{children:Number((s==null?void 0:s.avg_sale_rate)||(s==null?void 0:s.avg_purchase_rate)).toFixed(2)})]})}),e.jsx(m,{children:s.last_restock_date?e.jsx(le,{title:Nt(s.last_restock_date),arrow:!0,placement:"top",children:e.jsx(i,{variant:"body2",children:Nt(s.last_restock_date)})}):e.jsx(le,{title:"Not Restocked Yet",arrow:!0,placement:"top",children:e.jsx(i,{variant:"body2",children:"Not Restocked Yet"})})}),e.jsx(m,{children:e.jsxs(l,{sx:{display:"flex",justifyContent:"center",gap:1},children:[e.jsx(Bx,{startIcon:e.jsx(pa,{sx:{fontSize:16}}),size:"small",onClick:()=>n("/invoices/create/purchase"),children:"Add Purchase"}),e.jsx(Dx,{startIcon:e.jsx(hi,{sx:{fontSize:16}}),size:"small",onClick:()=>n("/invoices/create/sales"),children:"Add Sales"})]})})]}),e.jsx(xe,{children:e.jsx(m,{style:{paddingBottom:0,paddingTop:0},colSpan:7,children:e.jsx(Xt,{in:o,timeout:"auto",unmountOnExit:!0,children:e.jsxs(l,{sx:{margin:2},children:[e.jsx(i,{variant:"h6",gutterBottom:!0,component:"div",children:"Product Details"}),e.jsxs(I,{container:!0,spacing:2,children:[e.jsx(I,{item:!0,xs:12,md:6,children:e.jsxs(ne,{sx:{p:2,bgcolor:a.palette.divider},children:[e.jsx(i,{variant:"subtitle2",color:"textSecondary",children:"Product Information"}),e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Category:"})," ",(s==null?void 0:s.category)||"N/A"]}),e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Description:"})," ",(s==null?void 0:s.description)||"No description available"]})]})}),e.jsx(I,{item:!0,xs:12,md:6,children:e.jsxs(ne,{sx:{p:2,bgcolor:a.palette.divider},children:[e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Group:"})," ",(s==null?void 0:s.group)||"N/A"]}),e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"HSN/SAC:"})," ",(s==null?void 0:s.hsn_code)||"N/A"]}),e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:"Alias :"})," ",(s==null?void 0:s.alias_name)||"No alias available"]})]})})]})]})})})})]})},Za=Ge(m)(({theme:t})=>({padding:t.spacing(1.5),whiteSpace:"nowrap"})),gn=t=>{const a=we(),{stockItems:n,pageMeta:s,isLoading:r,limit:o,sortField:p,sortOrder:c,sortRequest:x,pageChange:u}=t;return e.jsxs(e.Fragment,{children:[e.jsx(nt,{component:ne,elevation:0,sx:{width:"100%",borderRadius:1,border:`1px solid ${d(a.palette.divider,1)}`,boxShadow:`0 4px 20px ${d("#000",.05)}`,mb:2},children:r?e.jsx(l,{sx:{p:2},children:[1,2,3,4,5].map(S=>e.jsxs(l,{sx:{display:"flex",my:2,px:2},children:[e.jsx(pe,{variant:"text",width:"5%",height:30,sx:{mr:2}}),e.jsx(pe,{variant:"text",width:"35%",height:30,sx:{mr:2}}),e.jsx(pe,{variant:"text",width:"10%",height:30,sx:{mr:2}}),e.jsx(pe,{variant:"text",width:"15%",height:30,sx:{mr:2}}),e.jsx(pe,{variant:"text",width:"15%",height:30,sx:{mr:2}}),e.jsx(pe,{variant:"text",width:"20%",height:30})]},S))}):(n==null?void 0:n.length)===0?e.jsxs(l,{sx:{p:6,textAlign:"center"},children:[e.jsx(Ht,{sx:{fontSize:60,color:"text.secondary",mb:2}}),e.jsx(i,{variant:"h6",gutterBottom:!0,children:"No items found"}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Try adjusting your filters or creating new products."})]}):e.jsxs(it,{sx:{width:"100%"},children:[e.jsx(ot,{children:e.jsxs(xe,{sx:{bgcolor:d(a.palette.grey[50],.8),width:"100%","& .MuiTableCell-head":{borderBottom:`2px solid ${d(a.palette.primary.main,.1)}`},"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(Za,{sx:{fontWeight:"600"},children:"Sr. No."}),e.jsx(Za,{sx:{fontWeight:"600"},children:e.jsx(le,{title:"Sort by Product Name",arrow:!0,children:e.jsx(Ue,{active:p==="stock_item_name",direction:p==="stock_item_name"?c:"asc",onClick:()=>x("stock_item_name"),children:"Product Name"})})}),e.jsx(Za,{sx:{fontWeight:"600",whiteSpace:"nowrap"},children:e.jsx(le,{title:"Sort by Quantity",arrow:!0,children:e.jsx(Ue,{active:p==="current_stock",direction:p==="current_stock"?c:"asc",onClick:()=>x("current_stock"),children:"Qty"})})}),e.jsx(Za,{sx:{fontWeight:"600",whiteSpace:"nowrap"},children:"Purchase Rate"}),e.jsx(Za,{sx:{fontWeight:"600",whiteSpace:"nowrap"},children:"Sale Rate"}),e.jsx(Za,{sx:{fontWeight:"600"},children:e.jsx(le,{title:"Sort by Last Restock Date",arrow:!0,children:e.jsx(Ue,{active:p==="last_restock_date",direction:p==="last_restock_date"?c:"asc",onClick:()=>x("last_restock_date"),children:"Last Restocked"})})}),e.jsx(Za,{align:"center",sx:{fontWeight:"600",whiteSpace:"nowrap"},children:"Actions"})]})}),e.jsx(st,{children:n==null?void 0:n.map((S,f)=>{const v=f+1+((s==null?void 0:s.page)-1)*o;return e.jsx(Fx,{row:S,serial:v},S._id)})})]})}),e.jsx(Dt,{total:s.total,item:"items",page:s==null?void 0:s.page,metaPage:s.page,rowsPerPage:o,onChange:u})]})},Lx=Ge(ne)(({theme:t})=>({padding:t.spacing(3),height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{boxShadow:t.shadows[4]},borderRadius:12})),ga=t=>{const{color:a,border:n}=t;return e.jsx(I,{item:!0,xs:12,sm:6,md:2.4,children:e.jsx(Lx,{sx:{bgcolor:a,borderLeft:n},children:e.jsxs(l,{children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(pe,{variant:"text",width:120,height:24,sx:{mb:1}}),e.jsx(pe,{variant:"circular",width:32,height:32})]}),e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1,color:Qe.palette.common.black},children:e.jsx(pe,{variant:"text",width:60,height:40})}),e.jsx(pe,{variant:"text",width:"100%",height:18,sx:{mt:2,mx:"auto"}})]})})})},Er=Ge(ne)(({theme:t})=>({padding:t.spacing(3),height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{boxShadow:t.shadows[4]},borderRadius:12})),Ox=()=>{var z,de,Ie,oe;const t=we(),a=Fe(),n=Ke(),[s,r]=g.useState(!1),[o,p]=g.useState(!1),[c,x]=g.useState(0),{InventoryItems:u,inventoryPageMeta:S,statsData:f}=Ce(ue=>ue.inventory),{user:v,current_company_id:j}=Ce(ue=>ue.auth),T=j||localStorage.getItem("current_company_id")||((z=v==null?void 0:v.user_settings)==null?void 0:z.current_company_id)||"",k=(de=v==null?void 0:v.company)==null?void 0:de.find(ue=>ue._id===T),B=g.useRef(!1),[_,K]=g.useState(""),[w,N]=g.useState({zeroStockCount:0,lowStockCount:0,positiveStockCount:0,totalStockValue:0,totalPurchaseValue:0}),[R,L]=g.useState({search:"",category:"all",group:"all",stock_status:"all",page_no:1,limit:10,sortField:"created_at",sortOrder:"asc"}),{zeroStockCount:D,lowStockCount:P,positiveStockCount:A,totalStockValue:O,totalPurchaseValue:y}=w,{search:F,category:h,group:b,stock_status:M,page_no:W,limit:C,sortField:$,sortOrder:G}=R,ge=ue=>{const je=$===ue&&G==="asc";L(q=>({...q,sortOrder:je?"desc":"asc",sortField:ue}))},Ae=g.useCallback(()=>{L({search:"",category:"all",group:"all",stock_status:"all",page_no:1,limit:10,sortField:"created_at",sortOrder:"asc"})},[]),ae=(ue,je)=>{L(q=>({...q,page_no:je}))},Y=(ue,je)=>{ue==="limit"&&L(q=>({...q,page_no:1,[ue]:je})),L(q=>({...q,[ue]:je}))},re=(ue,je)=>{x(je);let q="";je===0&&(q="all"),je===1&&(q="zero"),je===2&&(q="low"),je===3&&(q="positive"),L(E=>({...E,stock_status:q})),Te(q)},Te=async ue=>{r(!0);try{await a(Un({company_id:(k==null?void 0:k._id)||"",search:_,category:h==="all"?"":h,group:b==="all"?"":b,stock_status:ue==="all"?"":ue,page_no:W,limit:C,sortField:$,sortOrder:G}))}finally{r(!1)}},V=async()=>{p(!0);try{await a(qn((k==null?void 0:k._id)||""))}finally{p(!1)}};return g.useEffect(()=>{Te(M)},[]),g.useEffect(()=>{V()},[k==null?void 0:k._id]),g.useEffect(()=>{const ue=setTimeout(()=>{K(R.search)},300);return()=>{clearTimeout(ue)}},[R.search]),g.useEffect(()=>{Te(M)},[h,b,k==null?void 0:k._id,M,a,C,W,_,$,G]),g.useEffect(()=>{B.current=!1},[k==null?void 0:k._id]),g.useEffect(()=>{k!=null&&k._id&&(p(!0),B.current=!1,!B.current&&f&&(N({zeroStockCount:(f.negative_stock||0)+(f.zero_stock||0),lowStockCount:f.low_stock||0,positiveStockCount:f.positive_stock||0,totalStockValue:f.sale_value||0,totalPurchaseValue:f.purchase_value||0}),B.current=!0,p(!1)),p(!1))},[k==null?void 0:k._id,f]),e.jsxs(Je,{maxWidth:!1,sx:{mt:3,width:"100%",scrollBehavior:"smooth"},children:[e.jsx(Ja,{title:"Inventory Management",subtitle:"Includes the items which have been added to at least a single invoice.",children:e.jsxs(e.Fragment,{children:[e.jsx(ft,{startIcon:e.jsx(pa,{}),onClick:()=>{if(!(k!=null&&k._id)){Z.error("Please create a company first.");return}n("/invoices/create/purchase")},text:"Add Purchase"}),e.jsx(ta,{startIcon:e.jsx(hi,{}),onClick:()=>{if(!(k!=null&&k._id)){Z.error("Please create a company first.");return}n("/invoices/create/sales")},text:"Add Sales"})]})}),e.jsx(l,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:e.jsxs(Wr,{value:c,onChange:re,variant:"scrollable",scrollButtons:"auto",children:[e.jsx(dt,{icon:e.jsx(Ht,{}),iconPosition:"start",label:"All Inventory"}),e.jsx(dt,{icon:e.jsx(Ac,{}),iconPosition:"start",label:`Zero Stock (${D})`,sx:{color:D>0?"#f44336":"inherit"}}),e.jsx(dt,{icon:e.jsx(xs,{}),iconPosition:"start",label:`Low Stock (${P})`,sx:{color:P>0?t.palette.warning.main:"inherit"}}),e.jsx(dt,{icon:e.jsx(Xi,{}),iconPosition:"start",label:`Available (${A})`,sx:{color:A>0?t.palette.success.main:"inherit"}})]})}),o?e.jsxs(I,{container:!0,spacing:1,sx:{mb:2},children:[e.jsx(ga,{color:"#ffebee",border:"5px solid #c62828"}),e.jsx(ga,{color:"hsl(45, 92%, 90%)",border:"5px solid hsl(45, 90%, 40%)"}),e.jsx(ga,{color:"#e8f5e9",border:"5px solid #2e7d32"}),e.jsx(ga,{color:"#e8f4fd",border:"5px solid #1976d2"}),e.jsx(ga,{color:"#fff8e1",border:"5px solid #ff9800"})]}):e.jsxs(I,{container:!0,spacing:1,sx:{mb:2},children:[e.jsx(I,{item:!0,xs:12,sm:6,md:2.4,children:e.jsx(Er,{sx:{bgcolor:"#ffebee",borderLeft:"5px solid #c62828"},children:e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle2",sx:{color:t.palette.grey[600]},gutterBottom:!0,children:"Zero Stock Items"}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,color:t.palette.common.black},children:[D>0&&e.jsx(Do,{color:"error"}),e.jsxs(i,{variant:"h4",component:"div",fontWeight:"bold",children:[D," Items"]})]}),D>0&&e.jsx(i,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:"Items that are out of stock and need immediate attention."})]}),e.jsx(le,{title:"Zero stock items are those that have no available quantity left in inventory. These items include both negative stock (where sales have occurred without sufficient stock) and items that have zero stock.",arrow:!0,placement:"top",children:e.jsx($i,{fontSize:"small",color:"warning",sx:{cursor:"pointer"}})})]})})}),e.jsx(I,{item:!0,xs:12,sm:6,md:2.4,children:e.jsx(Er,{sx:{bgcolor:"hsl(45, 92%, 90%)",borderLeft:"5px solid hsl(45, 90%, 40%)"},children:e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle2",sx:{color:t.palette.grey[600]},gutterBottom:!0,children:"Low Stock Items"}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,color:t.palette.common.black},children:[P>0&&e.jsx(Do,{color:"error"}),e.jsxs(i,{variant:"h4",component:"div",fontWeight:"bold",children:[P," Items"]})]}),P>0&&e.jsx(i,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:"Items that are running low and need restocking soon."})]})})}),e.jsx(I,{item:!0,xs:12,sm:6,md:2.4,children:e.jsx(Er,{sx:{bgcolor:"#e8f5e9",borderLeft:"5px solid #2e7d32"},children:e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle2",sx:{color:t.palette.grey[600]},gutterBottom:!0,children:"Well Stock"}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,color:t.palette.common.black},children:[e.jsx(Xi,{color:"success"}),e.jsxs(i,{variant:"h4",component:"div",fontWeight:"bold",children:[A," Items"]})]}),A>0&&e.jsx(i,{variant:"caption",color:"success.dark",sx:{mt:1,display:"block"},children:"Items that are well-stocked and available for sale."})]})})}),e.jsx(I,{item:!0,xs:12,sm:6,md:2.4,children:e.jsx(Er,{sx:{bgcolor:"#e8f4fd",borderLeft:"5px solid #1976d2"},children:e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle2",sx:{color:t.palette.grey[600]},gutterBottom:!0,children:"Sales Value"}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,color:t.palette.common.black},children:[e.jsx(i,{variant:"h6",sx:{color:t.palette.primary.main},children:"₹"}),e.jsx(i,{variant:"h4",component:"div",fontWeight:"bold",children:O.toLocaleString("en-IN")})]}),e.jsx(i,{variant:"caption",sx:{mt:1,display:"block",color:t.palette.primary.main},children:"Total estimated sales value of sold stock"})]}),e.jsx(le,{title:"This value is an estimate based on current selling prices without considering discounts or taxes.",arrow:!0,placement:"top",children:e.jsx($i,{fontSize:"small",sx:{cursor:"pointer",color:t.palette.primary.main}})})]})})}),e.jsx(I,{item:!0,xs:12,sm:6,md:2.4,children:e.jsx(Er,{sx:{bgcolor:"#fff8e1",borderLeft:"5px solid #ff9800"},children:e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle2",sx:{color:t.palette.grey[600]},gutterBottom:!0,children:"Purchase Value"}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,color:t.palette.common.black},children:[e.jsx(i,{variant:"h6",sx:{color:t.palette.warning.main},children:"₹"}),e.jsx(i,{variant:"h4",component:"div",fontWeight:"bold",children:y.toLocaleString("en-IN")})]}),e.jsx(i,{variant:"caption",color:"warning.dark",sx:{mt:1,display:"block"},children:"Total estimated purchase value of stock"})]}),e.jsx(le,{title:"This value is calculated based on purchase prices without considering discounts or taxes.",arrow:!0,placement:"top",children:e.jsx($i,{fontSize:"small",color:"warning",sx:{cursor:"pointer"}})})]})})})]}),e.jsx(l,{sx:{mb:1},children:e.jsxs(I,{container:!0,spacing:2,children:[e.jsx(I,{item:!0,xs:12,md:6,children:e.jsx(X,{placeholder:"Search by product name, HSN, or category...",variant:"outlined",fullWidth:!0,value:F,onChange:ue=>Y("search",ue.target.value),size:"small",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(ki,{})}),endAdornment:F&&e.jsx(se,{position:"end",children:e.jsx(ke,{size:"small",onClick:()=>Y("search",""),"aria-label":"clear search",children:e.jsx(bi,{fontSize:"small"})})})}})}),e.jsx(I,{item:!0,xs:12,md:2,children:e.jsxs(X,{select:!0,value:h,fullWidth:!0,label:"Category",size:"small",onChange:ue=>Y("category",ue.target.value),children:[e.jsx(he,{value:"all",children:"All Categories"}),(Ie=S==null?void 0:S.unique_categories)==null?void 0:Ie.map((ue,je)=>e.jsx(he,{value:ue,children:ue},je))]})}),e.jsx(I,{item:!0,xs:12,md:1.5,children:e.jsxs(X,{select:!0,value:b,fullWidth:!0,label:"group",size:"small",onChange:ue=>Y("group",ue.target.value),children:[e.jsx(he,{value:"all",children:"All Groups"}),(oe=S==null?void 0:S.unique_groups)==null?void 0:oe.map((ue,je)=>e.jsx(he,{value:ue,children:ue},je))]})}),e.jsx(I,{item:!0,xs:12,md:1,children:e.jsxs(X,{select:!0,label:"Show",fullWidth:!0,value:C,onChange:ue=>Y("limit",ue.target.value),size:"small",children:[e.jsx(he,{value:5,children:"5"}),e.jsx(he,{value:10,children:"10"}),e.jsx(he,{value:25,children:"25"}),e.jsx(he,{value:50,children:"50"})]})}),e.jsx(I,{item:!0,xs:12,md:1.5,children:e.jsx(ee,{fullWidth:!0,variant:"outlined",color:"error",size:"small",startIcon:e.jsx(Ds,{}),onClick:Ae,children:"Reset Filters"})})]})}),e.jsx(Xa,{value:c,index:0,children:e.jsx(gn,{stockItems:u,sortRequest:ge,isLoading:s,stateChange:Y,pageChange:ae,limit:C,sortField:$,sortOrder:G,pageMeta:S})}),e.jsx(Xa,{value:c,index:1,children:e.jsx(gn,{stockItems:u,sortRequest:ge,isLoading:s,stateChange:Y,pageChange:ae,limit:C,sortField:$,sortOrder:G,pageMeta:S})}),e.jsx(Xa,{value:c,index:2,children:e.jsx(gn,{stockItems:u,sortRequest:ge,isLoading:s,stateChange:Y,pageChange:ae,limit:C,sortField:$,sortOrder:G,pageMeta:S})}),e.jsx(Xa,{value:c,index:3,children:e.jsx(gn,{stockItems:u,sortRequest:ge,isLoading:s,stateChange:Y,pageChange:ae,limit:C,sortField:$,sortOrder:G,pageMeta:S})})]})},Ex=({title:t,inputRef:a,imagePreview:n,isDragActive:s,handleImageChange:r,handleDrop:o,handleDragEnter:p,handleDragLeave:c,removeImage:x,handleBoxClick:u})=>e.jsxs(l,{sx:{width:"100%",position:"relative"},children:[e.jsxs(i,{variant:"subtitle2",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[e.jsx(_i,{fontSize:"small",color:"primary"}),t,e.jsx(ve,{label:"Optional",size:"small",color:"default",variant:"outlined"})]}),e.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",style:{display:"none"},ref:a,onChange:S=>{var v;const f=(v=S.target.files)==null?void 0:v[0];f&&r(f)}}),e.jsx(l,{onClick:u,onDrop:o,onDragOver:S=>S.preventDefault(),onDragEnter:p,onDragLeave:c,sx:{border:`2px dashed ${s?Qe.palette.primary.main:Qe.palette.divider}`,borderRadius:1,p:3,position:"relative",textAlign:"center",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:s?Qe.palette.primary.main+"10":Qe.palette.background.default,minHeight:150,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center","&:hover":{borderColor:Qe.palette.primary.main,backgroundColor:Qe.palette.primary.main+"05"}},children:n?e.jsxs(l,{sx:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsx($e,{src:n,alt:"Profile Preview",sx:{width:100,height:100,border:`3px solid ${Qe.palette.primary.main}`,boxShadow:Qe.shadows[2],transition:"all 0.3s ease",objectFit:"contain"}}),e.jsx(le,{title:"Remove image",TransitionComponent:Ye,children:e.jsx(ke,{onClick:x,sx:{position:"absolute",top:8,right:8,backgroundColor:Qe.palette.error.main,color:"white","&:hover":{backgroundColor:Qe.palette.error.dark,transform:"scale(1.1)"},width:28,height:28,transition:"all 0.2s ease"},children:e.jsx(ut,{fontSize:"small"})})}),e.jsx(i,{variant:"body2",sx:{mt:2,fontWeight:500},children:"Click to change image"})]}):e.jsx(ze,{in:!0,timeout:500,children:e.jsxs(l,{children:[e.jsx(Fa,{sx:{fontSize:48,color:Qe.palette.primary.main,mb:1}}),e.jsxs(i,{variant:"subtitle1",sx:{fontWeight:600,mb:.5},children:["Upload ",t]}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Drag & drop or click to browse"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"PNG, JPEG, JPG, WebP • Max 5MB"})]})})})]}),bn=({title:t,icon:a,section:n,toggleSection:s,expandedSections:r,required:o=!1,children:p})=>e.jsx(Ne,{elevation:0,sx:{mb:1,width:"100%",border:"1px solid #e0e0e0",borderRadius:3,overflow:"hidden",transition:"all 0.3s ease","&:hover":{boxShadow:"0 4px 20px rgba(0,0,0,0.08)",transform:"translateY(-2px)"}},children:e.jsxs(Me,{sx:{p:0,"&:last-child":{p:0}},children:[e.jsxs(l,{onClick:()=>s(n),sx:{px:1,display:"flex",alignItems:"center",gap:2,cursor:"pointer",backgroundColor:r[n]?"#f8f9fa":"transparent",borderBottom:r[n]?"1px solid #e0e0e0":"none",transition:"background-color 0.2s ease"},children:[a,e.jsx(i,{variant:"h6",sx:{fontWeight:600,flex:1},children:t}),o&&e.jsx(ve,{label:"Required",size:"small",color:"error",variant:"outlined",sx:{mr:1}}),e.jsx(ke,{size:"small",children:r[n]?e.jsx(Pc,{}):e.jsx(ht,{})})]}),e.jsx(ze,{in:r[n],timeout:300,children:e.jsx(l,{sx:{p:r[n]?1:0,pt:0},children:r[n]&&p})}),!r[n]&&e.jsxs(l,{sx:{p:1,color:"text.secondary",fontStyle:"italic"},children:["Click to expand and edit ",t.toLowerCase()," section."]})]})}),rs=()=>{var de,Ie,oe,ue,je,q;const t=we(),a=Fe(),{type:n}=ja(),s=Ke(),r=n?n.charAt(0).toUpperCase()+n.slice(1):"",[o,p]=g.useState(!1),[c,x]=g.useState({}),[u,S]=g.useState(!1),f=g.useRef(null),[v,j]=g.useState(!1),[T,k]=g.useState(null),[B,_]=g.useState(!1),[K,w]=g.useState(!1),{user:N,current_company_id:R}=Ce(E=>E.auth),L=R||localStorage.getItem("current_company_id")||((de=N==null?void 0:N.user_settings)==null?void 0:de.current_company_id)||"",D=(Ie=N==null?void 0:N.company)==null?void 0:Ie.find(E=>E._id===L),{customerType_id:P,editingCustomer:A}=Ce(E=>E.customersLedger),O=((ue=(oe=D==null?void 0:D.company_settings)==null?void 0:oe.features)==null?void 0:ue.enable_tax)&&r==="Creditors",y=(q=(je=D==null?void 0:D.company_settings)==null?void 0:je.features)==null?void 0:q.enable_tax,[F,h]=g.useState({profile:!0,contact:!0,address:!1,bank:!1}),[b,M]=g.useState({name:"",email:"",code:"",number:"",image:"",mailing_name:"",mailing_address:"",mailing_country:"",mailing_state:"",mailing_pincode:"",company_id:"",parent:"",parent_id:"",bank_name:"",account_number:"",bank_ifsc:"",bank_branch:"",account_holder:"",tin:""}),W=g.useCallback(()=>{const E={};return Object.keys(b).forEach(te=>{const U=te,H=Te(U,String(b[U]||""));H&&(E[U]=H)}),x(E),Object.keys(E).length===0},[b]),C=(E,te)=>{M(H=>({...H,[E]:te})),c[E]&&x(H=>({...H,[E]:""}));const U=Te(E,te);U&&x(H=>({...H,[E]:U}))},$=g.useCallback(E=>{if(!E)return;if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(E.type)){Z.error("Only PNG, JPEG, JPG, or WebP images are allowed.");return}if(E.size>5*1024*1024){Z.error("Image size should be less than 5MB.");return}M(H=>({...H,image:E}));const U=new FileReader;U.onload=H=>{var me;const ie=(me=H.target)==null?void 0:me.result;k(ie)},U.readAsDataURL(E)},[]),G=g.useCallback(E=>{var U;E.preventDefault(),E.stopPropagation(),j(!1);const te=(U=E.dataTransfer.files)==null?void 0:U[0];te&&$(te)},[$]),ge=g.useCallback(E=>{E.preventDefault(),E.stopPropagation(),j(!0)},[]),Ae=g.useCallback(E=>{E.preventDefault(),E.stopPropagation(),j(!1)},[]),ae=()=>{var E;(E=f.current)==null||E.click()},Y=E=>{h(te=>({...te,[E]:!te[E]}))},re=g.useCallback(E=>{E.stopPropagation(),k(null),M(te=>({...te,image:""})),f.current&&(f.current.value="")},[]),Te=(E,te)=>E==="name"&&!te.trim()?"Billing Name is required. This name is used for invoicing and legal purposes.":y&&!b.mailing_country&&E==="mailing_state"&&!te.trim()?"Please select country first.":y&&E==="mailing_country"&&!te.trim()?"Billing country is required.":y&&E==="mailing_state"&&!te.trim()?"Billing state is required.":O&&E==="tin"&&!te.trim()?"TIN is required.":E==="mailing_pincode"&&te&&!/^\d{1,6}$/.test(te)?"Invalid pincode format":E==="code"&&te&&!/^\+\d{1,4}$/.test(te)?"Invalid phone code format":E==="number"&&te&&!/^\d{10}$/.test(te)?"Invalid phone number format":E==="email"&&te&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(te)?"Invalid email format":E==="name"&&te.trim().length<2?"Name must be at least 2 characters":E==="tin"&&te&&!/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z][A-Z0-9][Z][0-9A-Z]$/.test(te)?"Invalid TIN format":E==="account_number"&&te&&!/^\d{9,18}$/.test(te)?"Invalid bank account number format":E==="bank_ifsc"&&te&&!/^[A-Z]{4}0[A-Z0-9]{6}$/.test(te)?"Invalid IFSC code format":"";g.useEffect(()=>{var E,te;A?(M({name:A.ledger_name||"",mailing_name:A.mailing_name||"",mailing_address:A.mailing_address||"",mailing_country:A.mailing_country||"",mailing_state:A.mailing_state||"",mailing_pincode:A.mailing_pincode||"",parent:A.parent||"",parent_id:A.parent_id||"",company_id:A.company_id||"",email:A.email||"",code:((E=A.phone)==null?void 0:E.code)||"",number:((te=A.phone)==null?void 0:te.number)||"",image:typeof A.image=="string"?A.image:"",bank_name:(A==null?void 0:A.bank_name)||"",account_number:(A==null?void 0:A.account_number)||"",bank_ifsc:(A==null?void 0:A.bank_ifsc)||"",bank_branch:(A==null?void 0:A.bank_branch)||"",account_holder:(A==null?void 0:A.account_holder)||"",tin:A.tin||""}),k(typeof(A==null?void 0:A.image)=="string"?A.image:null)):M(U=>({...U,company_id:L||"",parent:r||"",parent_id:P||""}))},[L,P,r,A]),g.useEffect(()=>{S(W())},[W]);const V=async()=>{var U,H,ie,me,Q,ce,De,et,Se,Be,He,Oe,Yt,_t,wt,Ra,Wa;if(!W()){Z.error("Please fix the validation errors before submitting.");return}p(!0);const E={name:(U=b.name)==null?void 0:U.trim(),user_id:N==null?void 0:N._id,company_id:L};(H=b.email)!=null&&H.trim()&&(E.email=b.email.trim()),(ie=b.parent)!=null&&ie.trim()&&(E.parent=b.parent.trim()),(me=b.parent_id)!=null&&me.trim()&&(E.parent_id=b.parent_id.trim()),(Q=b.mailing_pincode)!=null&&Q.trim()&&(E.mailing_pincode=b.mailing_pincode.trim()),(ce=b.code)!=null&&ce.trim()&&(E.code=b.code.trim()),(De=b.number)!=null&&De.trim()&&(E.number=b.number.trim()),(et=b.mailing_name)!=null&&et.trim()&&(E.mailing_name=b.mailing_name.trim()),(Se=b.mailing_address)!=null&&Se.trim()&&(E.mailing_address=b.mailing_address.trim()),(Be=b.mailing_country)!=null&&Be.trim()&&(E.mailing_country=b.mailing_country.trim()),b.image&&typeof b.image!="string"&&(E.image=b.image),(He=b.mailing_state)!=null&&He.trim()&&(E.mailing_state=b.mailing_state.trim()),(Oe=b.bank_name)!=null&&Oe.trim()&&(E.bank_name=b.bank_name.trim()),(Yt=b.account_number)!=null&&Yt.trim()&&(E.account_number=b.account_number.trim()),(_t=b.bank_ifsc)!=null&&_t.trim()&&(E.bank_ifsc=b.bank_ifsc.trim()),(wt=b.bank_branch)!=null&&wt.trim()&&(E.bank_branch=b.bank_branch.trim()),(Ra=b.account_holder)!=null&&Ra.trim()&&(E.account_holder=b.account_holder.trim()),(Wa=b.tin)!=null&&Wa.trim()&&(E.tin=b.tin.trim());const te=new FormData;Object.entries(E).forEach(([za,_e])=>{typeof _e=="boolean"?te.append(za,_e?"true":"false"):_e!=null&&(typeof _e=="string"||_e instanceof Blob)&&te.append(za,_e)});try{await Z.promise(A?a(Zn({data:te,id:A._id??""})).unwrap():a(dr(te)).unwrap(),{loading:e.jsxs("b",{children:[A?"Updating":"Creating"," ",r,"... ⏳"]}),success:e.jsxs("b",{children:[r," ",A?"updated":"created"," successfully! 🎉"]}),error:e.jsxs("b",{children:["Failed to ",A?"update":"create"," ",r,". 🚫"]})}),s("/customers")}catch{}finally{s("/customers"),p(!1)}},z=async()=>{w(!0),setTimeout(()=>{w(!1)},2e3)};return e.jsxs(l,{sx:{p:3,width:"100%"},children:[e.jsx(Ne,{sx:{mb:2,p:2},children:e.jsx(Me,{children:e.jsxs(ne,{sx:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",background:"transparent"},children:[e.jsx(I,{item:!0,sx:{width:"50%"},children:e.jsxs(l,{sx:{display:"flex",gap:2,alignItems:"center"},children:[e.jsx(zt,{icon:e.jsx(ma,{fontSize:"small"}),title:"Back",color:"primary",onClick:()=>s(-1)}),e.jsxs(l,{children:[e.jsxs(i,{variant:"h5",component:"h1",fontWeight:"700",color:"text.primary",children:[A?"Update ":"Create new ",r]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Fill in the details below to ",A?"update the ":"create a new ",r,"."]})]})]})}),e.jsxs(I,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:2},children:[e.jsx(ta,{onClick:()=>{a(mr(null)),s(-1)},startIcon:e.jsx(Ga,{}),disabled:o}),e.jsx(ft,{onClick:V,disabled:o||!u,startIcon:o?e.jsx(qt,{className:"animate-spin"}):A?e.jsx(ia,{}):e.jsx(Bo,{}),text:o?A?"Updating...":"Creating...":A?`Update ${r}`:`Create ${r}`}),e.jsx(ka,{direction:"down",in:B,mountOnEnter:!0,unmountOnExit:!0,children:e.jsx(rt,{severity:"success",icon:e.jsx(pt,{fontSize:"inherit"}),onClose:()=>_(!1),sx:{borderRadius:1,mt:1,"& .MuiAlert-icon":{fontSize:24,alignItems:"center"}},children:"Customer details updated successfully!"})})]})]})})}),e.jsxs(l,{sx:{display:"flex",flexDirection:"row",gap:2},children:[e.jsxs(bn,{title:"Required Information",icon:e.jsx(At,{sx:{color:"#667eea"}}),section:"profile",toggleSection:Y,expandedSections:F,required:!0,children:[y&&e.jsx(qe,{fullWidth:!0,sx:{mt:2},children:e.jsx(X,{fullWidth:!0,size:"small",label:`TIN Number (${O?"Required":"Optional"})`,placeholder:"27XXXXXXXXXXXX",value:b.tin||"",required:O,onChange:E=>C("tin",ra(E.target.value,"characters")),error:!!c.tin,helperText:c.tin||"15-digit TIN number",InputProps:{sx:{borderRadius:1,padding:"0",paddingLeft:"8px"},endAdornment:e.jsx(se,{position:"end",children:e.jsx(ee,{variant:"contained",color:"success",onClick:z,disabled:K,sx:{borderRadius:"8px",fontWeight:600,transition:"all 0.2s",boxShadow:"none",height:"2.2rem",background:t.palette.mode==="dark"?"#2e7d32":"#e8f5e9",color:t.palette.mode==="dark"?"#fff":"#2e7d32","&:hover":{color:t.palette.mode==="dark"?"#000":"#fff",background:t.palette.mode==="dark"?"#e8f5e9":"#2e7d32"}},children:K?e.jsx(qt,{className:"animate-spin"}):"Fetch Details"})})}})}),e.jsx(qe,{fullWidth:!0,sx:{my:2},children:e.jsx(X,{fullWidth:!0,size:"small",label:"Billing Name (Required)",placeholder:"The Acme Corporation Ltd.",value:b.name||"",required:!0,onChange:E=>C("name",ra(E.target.value,"words")),error:!!c.name,helperText:c.name||"This name is used for invoicing and legal purposes.",InputProps:{sx:{borderRadius:1},startAdornment:e.jsx(se,{position:"start",children:e.jsx(At,{fontSize:"small",color:"action"})})}})}),e.jsxs(l,{sx:{display:"flex",gap:2},children:[e.jsx(l,{sx:{width:"50%"},children:e.jsx(qe,{fullWidth:!0,children:e.jsx(at,{fullWidth:!0,size:"small",options:[...(It==null?void 0:It.map(E=>({label:E.name})))??[]],getOptionLabel:E=>typeof E=="string"?E:E.label||"",freeSolo:!0,renderOption:(E,te)=>{const{key:U,...H}=E;return e.jsx("li",{...H,style:{fontWeight:400,color:"inherit",...E.style||{}},children:te.label},U)},renderInput:E=>e.jsx(X,{...E,placeholder:"Select country",size:"small",id:"mailing_country",label:`Country ${y?"(Required)":""}`,autoComplete:"off",error:!!c.mailing_country,helperText:c.mailing_country||"Country for mailing address"}),value:b.mailing_country||"",onChange:(E,te)=>{C("mailing_country",typeof te=="string"?te:typeof te=="object"&&te!==null&&"label"in te?te.label:"")},sx:{"& .MuiAutocomplete-endAdornment":{display:"none"},"& .MuiOutlinedInput-root":{borderRadius:1}}})})}),e.jsx(l,{sx:{width:"50%"},children:e.jsx(qe,{fullWidth:!0,children:e.jsx(at,{fullWidth:!0,size:"small",options:(()=>{const E=It.find(te=>te.name===b.mailing_country);return E?E.states.length===0?["No States"]:E.states:[]})(),freeSolo:!0,renderOption:(E,te)=>{const{key:U,...H}=E;return e.jsx("li",{...H,style:{fontWeight:400,color:"inherit",...E.style||{}},children:te},U)},renderInput:E=>e.jsx(X,{...E,placeholder:"Select state",disabled:!b.mailing_country,size:"small",label:`State ${y?"(Required)":""}`,autoComplete:"off",error:!!c.mailing_state,helperText:c.mailing_state||"State for address"}),value:b.mailing_state||"",onChange:(E,te)=>{C("mailing_state",ra((()=>{const U=It.find(H=>H.name===b.mailing_country);return!U||U.states.length<1?"":te||""})(),"words"))},sx:{"& .MuiAutocomplete-endAdornment":{display:"none"},"& .MuiOutlinedInput-root":{borderRadius:1}}})})})]})]}),e.jsx(bn,{title:"Profile Information (Optional)",icon:e.jsx(At,{sx:{color:"#667eea"}}),section:"contact",toggleSection:Y,expandedSections:F,children:e.jsxs(l,{sx:{display:"flex",gap:2,my:2,alignItems:"flex-start"},children:[e.jsxs(l,{sx:{width:"50%"},children:[e.jsx(X,{fullWidth:!0,size:"small",label:"Contact Person Name",placeholder:"Enter contact person name",value:b.mailing_name||"",onChange:E=>C("mailing_name",ra(E.target.value,"words")),error:!!c.mailing_name,helperText:c.mailing_name||"Customer's mailing name",InputProps:{sx:{borderRadius:1}}}),e.jsx(pl,{size:"small",code:b.code||"",number:b.number||"",codeHandler:C,numberHandler:E=>C("number",E.target.value),codeWidth:"30%",numberWidth:"70%",gap:1,codeLabel:"Code",codePlaceholder:"+91",numberLabel:"Phone Number",numberPlaceholder:"******7548"}),e.jsx(X,{fullWidth:!0,size:"small",label:"Contact Email",type:"email",margin:"normal",placeholder:"john@example.com",value:b.email||"",onChange:E=>C("email",E.target.value),error:!!c.email,helperText:c.email||"Primary contact email",InputProps:{sx:{borderRadius:1},startAdornment:e.jsx(se,{position:"start",children:e.jsx(Bt,{fontSize:"small",color:"action"})})}})]}),e.jsxs(l,{sx:{width:"50%"},children:[e.jsx(X,{fullWidth:!0,size:"small",label:"Street Address",placeholder:"123 Main St, Apt 4B",value:b.mailing_address||"",onChange:E=>C("mailing_address",ra(E.target.value,"words")),error:!!c.mailing_address,helperText:c.mailing_address||"Street address for correspondence",InputProps:{sx:{borderRadius:1}},multiline:!0,rows:3}),e.jsx(X,{fullWidth:!0,size:"small",type:"number",margin:"normal",label:"Postal Code",inputMode:"numeric",placeholder:"90210",value:b.mailing_pincode||"",onChange:E=>C("mailing_pincode",E.target.value),error:!!c.mailing_pincode,helperText:c.mailing_pincode||"6-digit postal code",InputProps:{sx:{borderRadius:1}}})]})]})})]}),e.jsxs(l,{sx:{display:"flex",flexDirection:"row",gap:2,mt:1},children:[e.jsx(bn,{title:"Profile Image (Optional)",icon:e.jsx(gs,{sx:{color:"#667eea"}}),section:"address",toggleSection:Y,expandedSections:F,children:e.jsx(l,{sx:{mt:2},children:e.jsx(Ex,{title:`${r} Image`,inputRef:f,imagePreview:T,isDragActive:v,handleDrop:G,handleDragEnter:ge,handleDragLeave:Ae,handleBoxClick:ae,handleImageChange:$,removeImage:re})})}),e.jsx(bn,{title:"Bank Details (Optional)",icon:e.jsx(xt,{sx:{color:"#667eea"}}),section:"bank",toggleSection:Y,expandedSections:F,children:e.jsxs(l,{sx:{mt:2},children:[e.jsx(X,{fullWidth:!0,size:"small",label:"Bank Name",placeholder:"e.g. State Bank of India",value:b.bank_name||"",onChange:E=>C("bank_name",ra(E.target.value,"words")),error:!!c.bank_name,helperText:c.bank_name||"Name of the bank",InputProps:{sx:{borderRadius:1}}}),e.jsxs(l,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(qe,{fullWidth:!0,sx:{width:"50%"},children:e.jsx(X,{fullWidth:!0,size:"small",margin:"normal",label:"Account Holder Name",placeholder:"John Doe",value:b.account_holder||"",onChange:E=>C("account_holder",ra(E.target.value,"characters")),error:!!c.bank_account_holder,helperText:c.bank_account_holder||"Name on the bank account",InputProps:{sx:{borderRadius:1}}})}),e.jsx(qe,{fullWidth:!0,sx:{width:"50%"},children:e.jsx(X,{fullWidth:!0,size:"small",margin:"normal",label:"Account Number",placeholder:"123456789012",value:b.account_number||"",onChange:E=>C("account_number",E.target.value),error:!!c.account_number,helperText:c.account_number||"12-digit account number",InputProps:{sx:{borderRadius:1}}})})]}),e.jsxs(l,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(l,{sx:{width:"50%"},children:e.jsx(X,{fullWidth:!0,size:"small",label:"IFSC Code",placeholder:"e.g. SBIN0001234",value:b.bank_ifsc||"",onChange:E=>C("bank_ifsc",ra(E.target.value,"characters")),error:!!c.bank_ifsc,helperText:c.bank_ifsc,InputProps:{sx:{borderRadius:1}},inputProps:{autoCapitalize:"characters"}})}),e.jsx(l,{sx:{width:"50%"},children:e.jsx(X,{fullWidth:!0,size:"small",label:"Bank Branch",placeholder:"Main Branch, Downtown",value:b.bank_branch||"",onChange:E=>C("bank_branch",ra(E.target.value,"words")),error:!!c.bank_branch,helperText:c.bank_branch||"Name of the bank branch",InputProps:{sx:{borderRadius:1}}})})]})]})})]}),e.jsxs(l,{sx:{p:2,mt:1,borderTop:`1px solid ${t.palette.divider}`,display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:t.palette.background.paper},children:[e.jsx(ta,{onClick:()=>{a(mr(null)),s(-1)},startIcon:e.jsx(Ga,{}),disabled:o}),e.jsx(ft,{onClick:V,disabled:o||!u,startIcon:o?e.jsx(qt,{className:"animate-spin"}):A?e.jsx(ia,{}):e.jsx(Bo,{}),text:o?A?"Updating...":"Creating...":A?`Update ${r}`:`Create ${r}`})]})]})},Gx=({inv:t,index:a,selected:n,onSelect:s})=>{const r=we(),[o,p]=g.useState(!1);return e.jsx(e.Fragment,{children:e.jsx(ze,{in:!0,timeout:300+a*100,children:e.jsxs(xe,{onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),sx:{cursor:"pointer",width:"100%",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:o?"translateY(-2px)":"translateY(0)",boxShadow:o?`0 8px 25px ${d(r.palette.primary.main,.15)}`:"none","&:hover":{bgcolor:d(r.palette.primary.main,.02)},"& .MuiTableCell-root":{padding:"8px 16px"},borderLeft:`4px solid ${o?r.palette.primary.main:"transparent"}`},onClick:()=>{s&&s(!n)},children:[e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(Aa,{checked:!!n,onChange:(c,x)=>{c.stopPropagation(),s&&s(x)}})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start"},children:[e.jsx(Ut,{sx:{mr:.5,color:r.palette.text.secondary}}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,color:r.palette.text.primary},children:Nt(t.date)||"N/A"})]})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600,color:r.palette.text.primary,mb:.5,transition:"color 0.3s ease"},children:t==null?void 0:t.customer})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(i,{variant:"body1",sx:{fontWeight:700,color:r.palette.text.primary},children:t.voucher_type})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsxs(l,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",gap:1},children:[["Purchase","Sales"].includes(t.voucher_type)&&t.grand_total===t.paid_amount&&e.jsx(Si,{sx:{mr:.5,color:r.palette.success.main}}),["Purchase","Sales"].includes(t.voucher_type)&&t.paid_amount===0&&e.jsx(Bs,{sx:{mr:.5,color:r.palette.error.main}}),["Purchase","Sales"].includes(t.voucher_type)&&t.grand_total>t.paid_amount&&t.paid_amount>0&&e.jsx(Fs,{sx:{mr:.5,color:r.palette.warning.main}}),e.jsx(i,{variant:"body1",sx:{fontWeight:700,color:["Purchase","Sales"].includes(t.voucher_type)&&t.grand_total===t.paid_amount?r.palette.success.main:t.paid_amount===0?r.palette.error.main:t.grand_total>t.paid_amount&&t.paid_amount>0?r.palette.warning.main:r.palette.text.primary},children:["Purchase","Sales"].includes(t.voucher_type)&&(t.grand_total===t.paid_amount?"Paid":t.paid_amount===0?"Unpaid":"Partially Paid")})]})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(i,{variant:"body1",sx:{fontWeight:600,color:r.palette.text.secondary},children:t.voucher_number?`${t.voucher_number}`:" N/A"})}),e.jsx(m,{align:"right",sx:{px:1},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[t.amount>0&&e.jsx(i,{variant:"body1",sx:{fontWeight:700,mr:.5,color:r.palette.error.main},children:"₹"}),e.jsx(i,{variant:"body1",sx:{fontWeight:700,color:r.palette.error.main},children:t.amount>0?Math.abs(t.amount):" "})]})}),e.jsx(m,{align:"right",sx:{px:1},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[!(t.amount>0)&&e.jsx(i,{variant:"body1",sx:{fontWeight:700,mr:.5,color:r.palette.success.main},children:"₹"}),e.jsx(i,{variant:"body1",sx:{fontWeight:700,color:r.palette.success.main},children:t.amount>0?"":Math.abs(t.amount)})]})})]})})})},to=()=>e.jsxs(xe,{children:[e.jsx(m,{align:"left",children:e.jsx(pe,{variant:"rectangular",width:20,height:20,sx:{borderRadius:1}})}),e.jsx(m,{align:"left",children:e.jsx(pe,{variant:"text",width:100,height:20})}),e.jsx(m,{align:"left",children:e.jsx(pe,{variant:"text",width:160,height:20})}),e.jsx(m,{align:"left",children:e.jsx(pe,{variant:"text",width:80,height:20})}),e.jsx(m,{align:"left",children:e.jsx(pe,{variant:"text",width:80,height:20})}),e.jsx(m,{align:"left",children:e.jsx(pe,{variant:"text",width:40,height:20})}),e.jsx(m,{align:"center",children:e.jsx(pe,{variant:"text",width:40,height:20,sx:{mx:"auto"}})}),e.jsx(m,{align:"center",children:e.jsx(pe,{variant:"text",width:40,height:20,sx:{mx:"auto"}})})]}),Kx=()=>{var F;const{customer:t,loading:a,customerInvoices:n,customerInvoicesMeta:s}=Ce(h=>h.customersLedger),{user:r,current_company_id:o}=Ce(h=>h.auth),p=o||localStorage.getItem("current_company_id")||((F=r==null?void 0:r.user_settings)==null?void 0:F.current_company_id)||"",[c,x]=g.useState([]),u=Fe(),S=Ke(),{customer_id:f}=ja(),v=we(),{searchQuery:j,page:T,rowsPerPage:k,startDate:B,endDate:_,type:K,sortField:w,sortOrder:N}=Ce(h=>h.customersLedger.customersFilters),[R,L]=g.useState(""),D=g.useCallback(async()=>{u(an({searchQuery:R,company_id:p||"",customer_id:f||"",pageNumber:T,type:K,limit:k,sortField:w,sortOrder:N,start_date:$t(B),end_date:$t(_)}))},[p,f,u,_,T,k,R,w,N,B,K]);g.useEffect(()=>{f&&u(Xn({id:f,start_date:$t(B),end_date:$t(_)}))},[u,f,B,_]),g.useEffect(()=>{D()},[]),g.useEffect(()=>{const h=setTimeout(()=>{L(j)},300);return()=>{clearTimeout(h)}},[j]),g.useEffect(()=>{D()},[p,f,u,_,T,k,R,w,N,B,K,D]);const P=h=>{u(Na({sortOrder:w===h&&N==="asc"?"desc":"asc",sortField:h}))},A=(h,b)=>{u(Na({page:b}))},O=(h,b)=>{u(Na({[h]:b}))},y=g.useCallback(()=>{u(Na({searchQuery:"",type:"all",page:1,startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString(),endDate:new Date().toISOString(),rowsPerPage:10,sortField:"created_at",sortOrder:"desc"}))},[]);return t?e.jsx(Pt,{dateAdapter:Lt,children:e.jsxs(l,{sx:{px:3,marginTop:"2rem",width:"100%"},children:[e.jsx(Ne,{sx:{mb:3,p:2},children:e.jsx(Me,{children:e.jsxs(ne,{sx:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",background:"transparent"},children:[e.jsxs(I,{item:!0,sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx(zt,{icon:e.jsx(ma,{fontSize:"small"}),title:"Back",color:"primary",onClick:()=>S(-1)}),e.jsx($e,{sx:{mx:2,width:48,height:48},children:ha(t.ledger_name)}),e.jsxs(l,{children:[e.jsx(i,{variant:"h6",children:t.ledger_name}),e.jsx(ve,{size:"small",label:t.parent,style:{color:v.palette.primary.main}})]})]}),e.jsx(I,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsx(ft,{startIcon:e.jsx(aa,{}),onClick:()=>{u(mr(t)),S(`/customers/edit/${t.parent.toLowerCase()}`)},text:`Edit ${t.ledger_name}`})})]})})}),e.jsxs(l,{sx:{display:"flex",my:3,gap:2,flexWrap:"wrap"},children:[e.jsx(X,{sx:{flexGrow:1,minWidth:"250px"},variant:"outlined",size:"small",label:"Search",placeholder:"Search by name, type...",value:j,onChange:h=>O("searchQuery",h.target.value),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(ao,{})})}}),e.jsx(Xe,{label:"Start Date",value:new Date(B),format:"dd/MM/yyyy",views:["year","month","day"],onChange:h=>O("startDate",h?h.toISOString():""),slotProps:{textField:{size:"small",sx:{"& .MuiOutlinedInput-root":{width:"150px",borderRadius:"8px"},"& .MuiInputAdornment-root .MuiButtonBase-root":{border:"none",boxShadow:"none"}}}}}),e.jsx(Xe,{label:"End Date",value:new Date(_),format:"dd/MM/yyyy",views:["year","month","day"],onChange:h=>O("endDate",h?h.toISOString():""),slotProps:{textField:{size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px",width:"150px"},"& .MuiInputAdornment-root .MuiButtonBase-root":{border:"none",boxShadow:"none"}}}}}),e.jsx(qe,{sx:{minWidth:"150px"},children:e.jsxs(X,{select:!0,size:"small",value:K,label:"Filter by invoice Types",placeholder:"Filter by invoice Types",onChange:h=>O("type",h.target.value),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ls,{})})},children:[e.jsx(he,{selected:!0,value:"all",children:e.jsx("em",{children:"All"})}),e.jsx(he,{value:"Sales",children:"Sales"}),e.jsx(he,{value:"Purchase",children:"Purchase"}),e.jsx(he,{value:"Payment",children:"Payment"}),e.jsx(he,{value:"Receipt",children:"Receipt"})]})}),e.jsx(qe,{children:e.jsx(X,{select:!0,size:"small",value:k.toString(),label:"Show",onChange:h=>{O("rowsPerPage",parseInt(h.target.value,10)),O("page",1)},children:[10,15,20].map(h=>e.jsxs(he,{value:h.toString(),children:[h," rows"]},h))})}),e.jsx(ee,{variant:"outlined",color:"primary",size:"medium",startIcon:e.jsx(Ua,{}),onClick:y,sx:{fontWeight:"bold",py:1.5},children:"Reset Filters"})]}),e.jsx(nt,{component:ne,elevation:0,sx:{width:"100%",borderRadius:1,border:`1px solid ${d(v.palette.divider,1)}`,boxShadow:`0 4px 20px ${d("#000",.05)}`},children:e.jsxs(it,{sx:{width:"100%"},children:[e.jsx(ot,{children:e.jsxs(xe,{sx:{bgcolor:d(v.palette.grey[50],.8),width:"100%","& .MuiTableCell-head":{borderBottom:`2px solid ${d(v.palette.primary.main,.1)}`},"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(Aa,{indeterminate:c.length>0&&c.length<n.length,checked:n.length>0&&c.length===n.length,onChange:(h,b)=>{x(b?n.map(M=>M.vouchar_id):[])}})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by State",arrow:!0,children:e.jsx(Ue,{active:w==="state",direction:w==="state"?N:"asc",onClick:()=>P("state"),children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(Ut,{fontSize:"small"}),e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:v.palette.text.primary,fontSize:"0.85rem"},children:"Invoice Date"})]})})})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by Name",children:e.jsx(Ue,{active:w==="name",direction:w==="name"?N:"asc",onClick:()=>P("name"),children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:v.palette.text.primary,fontSize:"0.85rem"},children:"Particulars"})})})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by Item Quantity",arrow:!0,children:e.jsx(Ue,{active:w==="name",direction:w==="name"?N:"asc",onClick:()=>P("name"),children:e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:v.palette.text.primary,fontSize:"0.85rem"},children:"Invoice Type"})})})})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by Item Quantity",arrow:!0,children:e.jsx(Ue,{active:w==="name",direction:w==="name"?N:"asc",onClick:()=>P("name"),children:e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:v.palette.text.primary,fontSize:"0.85rem"},children:"Payment Status"})})})})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by State",arrow:!0,children:e.jsx(Ue,{active:w==="state",direction:w==="state"?N:"asc",onClick:()=>P("state"),children:e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:v.palette.text.primary,fontSize:"0.85rem"},children:"Invoice No."})})})})}),e.jsx(m,{align:"right",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:v.palette.text.primary,fontSize:"0.85rem"},children:"Debit"})}),e.jsx(m,{align:"right",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:v.palette.text.primary,fontSize:"0.85rem"},children:"Credit"})})]})}),e.jsxs(st,{children:[a?Array([1,2,3,4,5]).map((h,b)=>e.jsx(to,{},`skeleton-${b}`)):(n==null?void 0:n.length)>0?n==null?void 0:n.map((h,b)=>e.jsx(Gx,{inv:h,selected:c.includes(h.vouchar_id),onSelect:M=>{x(W=>M?[...W,h.vouchar_id]:W.filter(C=>C!==h.vouchar_id))},index:b+1+(T-1)*k,onView:()=>{S(`/invoices/${h.vouchar_id}`)}},`${h.vouchar_id}-${b}`)):e.jsx(xe,{children:e.jsx(m,{colSpan:8,sx:{textAlign:"center",py:8},children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx(ya,{sx:{fontSize:"4rem",color:v.palette.text.disabled}}),e.jsx(i,{variant:"h5",color:"text.secondary",sx:{fontWeight:600},children:"There are no invoices for this customer in the current month."}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"You can create a new invoice from the invoices page."})]})})}),a?Array([1,2,3,4,5]).map((h,b)=>e.jsx(to,{},`skeleton1-${b}`)):(n==null?void 0:n.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px",bgcolor:d(v.palette.grey[50],.8)}},children:e.jsx(m,{colSpan:8})}),e.jsxs(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{colSpan:5,sx:{textAlign:"center"}}),e.jsx(m,{colSpan:1,sx:{textAlign:"left"},children:e.jsx(i,{variant:"body1",color:"text.primary",sx:{fontWeight:600,textDecoration:"underline",whiteSpace:"nowrap"},children:"Opening Balance"})}),e.jsx(m,{align:"right",colSpan:1,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[t.opening_balance<0&&e.jsx(i,{variant:"body1",sx:{fontWeight:700,mr:.5,color:v.palette.error.main},children:"₹"}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,color:v.palette.error.main},children:t.opening_balance>0?Math.abs(t.opening_balance):""})]})}),e.jsx(m,{align:"right",colSpan:1,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[!(t.opening_balance>0)&&e.jsx(i,{variant:"body1",sx:{fontWeight:700,mr:.5,color:v.palette.success.main},children:"₹"}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,color:v.palette.success.main},children:t.opening_balance>0?"":Math.abs(t.opening_balance)})]})})]}),e.jsxs(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{colSpan:5,sx:{textAlign:"center"}}),e.jsx(m,{colSpan:1,sx:{textAlign:"left"},children:e.jsx(i,{variant:"body1",color:"text.primary",sx:{fontWeight:600,textDecoration:"underline"},children:"Current Total"})}),e.jsx(m,{align:"right",colSpan:1,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[e.jsx(i,{variant:"body1",sx:{fontWeight:700,mr:.5,color:v.palette.error.main},children:"₹"}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,color:v.palette.error.main},children:Math.abs(t.total_debit)})]})}),e.jsx(m,{align:"right",colSpan:1,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[e.jsx(i,{variant:"body1",sx:{fontWeight:700,mr:.5,color:v.palette.success.main},children:"₹"}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,color:v.palette.success.main},children:Math.abs(t.total_credit)})]})})]}),e.jsxs(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{colSpan:5,sx:{textAlign:"center"}}),e.jsx(m,{colSpan:1,sx:{textAlign:"left"},children:e.jsx(i,{variant:"body1",color:"text.primary",sx:{fontWeight:600,textDecoration:"underline",whiteSpace:"nowrap"},children:"Closing Balance"})}),e.jsx(m,{align:"right",colSpan:1,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[t.closing_balance>0&&e.jsx(i,{variant:"body1",sx:{fontWeight:700,mr:.5,color:v.palette.error.main},children:"₹"}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,color:v.palette.error.main},children:t.closing_balance>0?Math.abs(t.closing_balance):""})]})}),e.jsx(m,{align:"right",colSpan:1,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[!(t.closing_balance>0)&&e.jsx(i,{variant:"body1",sx:{fontWeight:700,mr:.5,color:v.palette.success.main},children:"₹"}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,color:v.palette.success.main},children:t.closing_balance>0?"":Math.abs(t.closing_balance)})]})})]})]})]})]})}),e.jsx(Dt,{total:(s==null?void 0:s.total)||0,item:"invoices",page:T,metaPage:(s==null?void 0:s.page)||1,rowsPerPage:k,onChange:A})]})}):e.jsx("p",{children:"Customer Profile not found"})},Hx={position:"fixed",top:"50%",left:"50%",height:"100vh",width:"100vw",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",transform:"translate(-50%, -50%)",bgcolor:"transparent",backdropFilter:"blur(12px)"},fn=t=>e.jsx(l,{sx:Hx,children:e.jsx(bt,{size:t.size??40})}),qx=["Payment","Receipt"],Ux=()=>{const{type:t,voucher_id:a}=ja(),n=Fe(),s=we(),r=Ke(),{currentCompany:o}=Ce(h=>h.auth),{invoiceData:p,invoiceType_id:c}=Ce(h=>h.invoice),{customersList:x,customerTypes:u}=Ce(h=>h.customersLedger),S=t?t.charAt(0).toUpperCase()+t.slice(1):"Payment",[f,v]=g.useState(new Date),[j,T]=g.useState(""),[k,B]=g.useState(""),[_,K]=g.useState(""),[w,N]=g.useState({customer:"",amount:0}),[R,L]=g.useState(!1),[D,P]=g.useState({}),A=()=>{const h={};return f||(h.date="Date is required"),j.trim()||(h.transactionNumber="Transaction number is required"),k.trim()||(h.partyName="Account name is required"),w.customer||(h.customer="Customer is required"),w.amount<=0&&(h.amount="Amount must be greater than 0"),P(h),Object.keys(h).length===0},O=(h,b)=>{N(M=>({...M,[h]:h==="amount"?parseFloat(b)||0:b})),D[h]&&P(M=>{const W={...M};return delete W[h],W})},y=w.amount||0,F=async()=>{var h,b,M;if(!A()){Z.error("Please fix the errors before submitting");return}L(!0);try{const W=[{vouchar_id:"",ledger:k,ledger_id:((h=x.find(G=>G.ledger_name===k))==null?void 0:h._id)||"",amount:S==="Payment"?w.amount:-w.amount,order_index:0},{vouchar_id:"",ledger:w.customer,ledger_id:((b=u.find(G=>G.ledger_name===w.customer))==null?void 0:b._id)||"",amount:S==="Payment"?-w.amount:w.amount,order_index:1}],C=W.reduce((G,ge)=>G+ge.amount,0);if(Math.abs(C)>.01){Z.error("Voucher is not balanced. Debit ≠ Credit"),L(!1);return}const $={voucher_type:S,voucher_type_id:c||"",date:f.toISOString().slice(0,10),voucher_number:j,party_name:k,party_name_id:((M=x.find(G=>G.ledger_name===k))==null?void 0:M._id)??"",narration:_,company_id:(o==null?void 0:o._id)||"",reference_number:"",reference_date:"",place_of_supply:"",mode_of_transport:"",vehicle_number:"",payment_mode:"",due_date:"",paid_amount:0,total_amount:y,total:y,discount:0,additional_charge:0,total_tax:0,roundoff:0,grand_total:y,accounting:W,items:[]};n($r($)).then(()=>{L(!1),T(""),B(""),K(""),N({customer:"",amount:0}),P({}),r("/transactions",{replace:!0}),Z.success(`${S} added successfully!`)}).catch(G=>{L(!1),Z.error(G||"Failed to add transaction. 🚫")})}catch{Z.error("Failed to add transaction. Please try again.")}finally{L(!1)}};return g.useEffect(()=>{n(tn((o==null?void 0:o._id)||"")),n(lr({company_id:(o==null?void 0:o._id)||"",customerTypes:["Bank Accounts","Cash-in-Hand"]})),n(Nr({company_id:(o==null?void 0:o._id)||"",voucher_type:S})).then(h=>{h.meta.requestStatus==="fulfilled"&&T(h.payload.current_number||"")}).catch(h=>{Z.error(h||"An unexpected error occurred. Please try again later.")})},[n,o==null?void 0:o._id,o,S]),g.useEffect(()=>{n(cr({vouchar_id:a||"",company_id:(o==null?void 0:o._id)||""}))},[n,o==null?void 0:o._id,a]),g.useEffect(()=>{var h,b;p&&(v(new Date(p.date)),T(p.voucher_number||""),B(p.party_name||""),K(p.narration||""),N({customer:((h=p.accounting_entries.find(M=>M.ledger_id!==p.party_name_id))==null?void 0:h.ledger)||"",amount:Math.abs(((b=p.accounting_entries.find(M=>M.ledger_id!==p.party_name_id))==null?void 0:b.amount)||0)||0}))},[p]),e.jsx(Pt,{dateAdapter:Lt,children:e.jsxs(l,{sx:{p:3,maxWidth:"100%",mx:"auto"},children:[e.jsx(ze,{in:!0,timeout:800,children:e.jsx(ne,{elevation:0,sx:{p:3,mb:3,background:S==="Payment"?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",borderRadius:1,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",zIndex:0}},children:e.jsxs(J,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{position:"relative",zIndex:1},children:[e.jsxs(J,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(l,{sx:{p:1.5,borderRadius:1,background:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)"},children:S==="Payment"?e.jsx(sn,{sx:{fontSize:32,color:"white"}}):e.jsx(Tt,{sx:{fontSize:32,color:"white"}})}),e.jsxs(l,{children:[e.jsxs(i,{variant:"h4",sx:{color:"white",fontWeight:700,mb:.5},children:[S," Entry"]}),e.jsxs(i,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.9)"},children:["Create a new ",S.toLowerCase()," transaction"]})]})]}),e.jsx(ve,{label:`#${j}`,sx:{background:"rgba(255, 255, 255, 0.5)",color:"#000",fontWeight:600,py:2,px:4,borderRadius:1,borderColor:"rgba(255, 255, 255, 1)",borderWidth:2}})]})})}),e.jsx(pr,{in:!0,timeout:1e3,children:e.jsx(Ne,{elevation:0,sx:{mb:3,borderRadius:1,border:"1px solid",borderColor:"divider",background:s.palette.background.paper},children:e.jsxs(Me,{sx:{p:4},children:[e.jsxs(J,{direction:"row",alignItems:"center",spacing:2,sx:{mb:3},children:[e.jsx(xt,{color:"primary"}),e.jsx(i,{variant:"h6",sx:{color:"primary.main",fontWeight:600},children:"Transaction Details"})]}),e.jsxs(I,{container:!0,spacing:3,children:[e.jsx(I,{item:!0,xs:12,sm:2,children:e.jsx(qe,{fullWidth:!0,sx:{"& .MuiInputBase-root":{height:"56px",borderRadius:1}},children:e.jsx(X,{select:!0,value:S,label:"Type",disabled:!0,sx:{"& .MuiInputBase-root":{background:s.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.02)"}},children:qx.map(h=>e.jsx(he,{value:h,children:e.jsxs(J,{direction:"row",alignItems:"center",gap:1,children:[h==="Payment"?e.jsx(sn,{}):e.jsx(Tt,{}),e.jsx("span",{children:h})]})},h))})})}),e.jsx(I,{item:!0,xs:12,sm:2.5,children:e.jsx(Xe,{label:"Transaction Date",value:f,format:"dd/MM/yyyy",views:["year","month","day"],maxDate:new Date,onChange:h=>{v(h||new Date),D.date&&P(b=>{const M={...b};return delete M.date,M})},slotProps:{textField:{fullWidth:!0,error:!!D.date,helperText:D.date,sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}}}})}),e.jsx(I,{item:!0,xs:12,sm:2.5,children:e.jsx(X,{fullWidth:!0,label:"Transaction Number",value:j,onChange:h=>{T(h.target.value),D.transactionNumber&&P(b=>{const M={...b};return delete M.transactionNumber,M})},error:!!D.transactionNumber,helperText:D.transactionNumber,placeholder:"e.g., TXN-001",sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}})}),e.jsx(I,{item:!0,xs:12,sm:2,children:e.jsx(X,{fullWidth:!0,label:"Amount",type:"number",value:w.amount||"",onChange:h=>O("amount",h.target.value),error:!!D.amount,helperText:D.amount,placeholder:"0.00",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(i,{variant:"h6",color:"primary",children:"₹"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,"&:hover":{borderColor:"primary.main"}},"& .MuiOutlinedInput-input":{fontWeight:500}}})}),e.jsx(I,{item:!0,xs:12,sm:3,children:e.jsx(J,{direction:"row",spacing:1,sx:{height:"100%",alignItems:"center"},children:u.map(h=>e.jsx(le,{title:`Select ${h.ledger_name}`,children:e.jsx(ee,{variant:w.customer===h.ledger_name?"contained":"outlined",onClick:()=>{O("customer",h.ledger_name)},sx:{borderRadius:1,px:2,py:3,textTransform:"none",fontWeight:600,minWidth:"auto",flex:1,transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:s.shadows[4]}},endIcon:w.customer===h.ledger_name?e.jsx(da,{}):null,children:h.ledger_name})},h._id))})})]}),e.jsx(Pe,{sx:{my:3}}),e.jsxs(I,{container:!0,spacing:3,children:[e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsx(qe,{fullWidth:!0,error:!!D.customer,children:e.jsxs(X,{select:!0,value:k,label:S==="Payment"?"Pay To":"Receive From",placeholder:`Select ${S==="Payment"?"receiver":"sender"}`,onChange:h=>{B(h.target.value),D.partyName&&P(b=>{const M={...b};return delete M.partyName,M})},error:!!D.partyName,helperText:D.partyName,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(At,{color:"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1}},children:[e.jsx(he,{value:"",children:e.jsx("em",{children:S==="Payment"?"Select Receiver":"Select Sender"})}),x==null?void 0:x.map(h=>e.jsx(he,{value:h.ledger_name,children:h.ledger_name},h._id))]})})}),e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsx(X,{fullWidth:!0,label:"Notes (Optional)",value:_,onChange:h=>K(h.target.value),placeholder:"Add transaction notes...",multiline:!0,rows:2,sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}})})]})]})})}),e.jsx(pr,{in:!0,timeout:1200,children:e.jsx(Ne,{elevation:0,sx:{borderRadius:1,border:"1px solid",borderColor:"divider",background:s.palette.background.paper},children:e.jsx(Me,{sx:{p:4},children:e.jsxs(I,{container:!0,spacing:3,alignItems:"center",children:[e.jsx(I,{item:!0,xs:12,md:6,children:e.jsxs(J,{spacing:2,children:[e.jsxs(J,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(ht,{color:"primary"}),e.jsx(i,{variant:"h6",sx:{color:"primary.main",fontWeight:600},children:"Transaction Summary"})]}),y>0&&e.jsxs(rt,{severity:"info",sx:{borderRadius:1,"& .MuiAlert-icon":{alignItems:"center"}},children:["This ",S.toLowerCase()," will be recorded for ",e.jsxs("strong",{children:["₹",y.toLocaleString()]})]})]})}),e.jsx(I,{item:!0,xs:12,md:6,children:e.jsxs(J,{spacing:2,direction:"row",alignItems:"center",justifyContent:"flex-end",children:[e.jsxs(ne,{elevation:0,sx:{px:2,py:1,background:s.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.02)",borderRadius:1,border:"1px solid",borderColor:"divider",display:"flex",gap:2,alignItems:"center",justifyContent:"center"},children:[e.jsx(i,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Total Amount"}),e.jsxs(i,{variant:"h4",sx:{color:"primary.main",fontWeight:700},children:["₹ ",y.toLocaleString()]})]}),e.jsx(ee,{variant:"contained",size:"large",startIcon:e.jsx(ia,{}),onClick:F,disabled:R||y===0,sx:{px:4,py:1.5,borderRadius:1,background:S==="Payment"?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",fontSize:"1.1rem",fontWeight:600,textTransform:"none",minWidth:200,boxShadow:s.shadows[4],"&:hover":{transform:"translateY(-2px)",boxShadow:s.shadows[8]},"&:disabled":{background:s.palette.action.disabledBackground,transform:"none",boxShadow:"none"}},children:R?"Processing...":`Submit ${S}`})]})})]})})})})]})})},Yx=()=>{var O,y,F,h,b,M,W,C,$,G,ge,Ae,ae,Y,re,Te;const t=we(),a=Ke(),n=yt(t.breakpoints.down("md")),{invoice_id:s}=ja(),r=Fe(),[o,p]=g.useState(!1),{current_company_id:c,user:x}=Ce(V=>V.auth),{invoiceData:u,isInvoiceFecthing:S}=Ce(V=>V.invoice),f=(O=x==null?void 0:x.company)==null?void 0:O.find(V=>V._id===c),v=(F=(y=f==null?void 0:f.company_settings)==null?void 0:y.features)==null?void 0:F.enable_tax,{init:j,setLoading:T,PDFViewModal:k,handleShare:B,handleDownload:_,handlePrint:K,isLoading:w}=Ri();async function N(V,z){try{T(!0);const de=await r((V.voucher_type==="Payment"?Pi:V.voucher_type==="Receipt"?Ai:v?Ti:Ii)({vouchar_id:V._id,company_id:c||""}));if(de.meta.requestStatus==="fulfilled"){const{pdfUrl:Ie}=de.payload,oe=await fetch(Ie).then(je=>je.blob()),ue=new File([oe],`${V._id}.pdf`,{type:"application/pdf"});j({file:ue,entityNumber:V.voucher_number,title:V.party_name,fileName:`${V.voucher_number}-vyapar-drishti`},z)}else{console.error("Failed to print invoice:",de.payload);return}}catch(de){console.error("Error printing invoice:",de)}finally{T(!1)}}const R=V=>{switch(V.toLowerCase()){case"paid":return"success";case"pending":return"warning";case"overdue":return"error";case"cancelled":return"default";default:return"default"}},L=V=>{switch(V.toLowerCase()){case"paid":return e.jsx(pt,{fontSize:"small"});case"pending":return e.jsx(As,{fontSize:"small"})}};g.useEffect(()=>{r(cr({vouchar_id:s||"",company_id:c||""}))},[c,r,s]);const D=(V,z)=>{(z==="Purchase"||z!=="Sales")&&a(`/invoices/update/${z.toLowerCase()}/${V}`)},P=V=>{r(ur({vouchar_id:V,company_id:(f==null?void 0:f._id)??""})).unwrap().then(()=>{Z.success("Invoice deleted successfully!"),a("/invoices")}).catch(z=>{Z.error(z||"An unexpected error occurred. Please try again later.")})},A=g.useMemo(()=>[...(u==null?void 0:u.inventory)??[]].sort((V,z)=>V.order_index-z.order_index),[u]);return e.jsxs(Je,{maxWidth:"xl",sx:{py:3},children:[e.jsx(ze,{in:!0,timeout:800,children:e.jsx(ne,{elevation:0,sx:{px:3,py:1,mb:2,background:`linear-gradient(135deg, ${d(t.palette.primary.main,.05)} 0%, ${d(t.palette.secondary.main,.05)} 100%)`,border:`1px solid ${d(t.palette.divider,.5)}`,borderRadius:1},children:e.jsxs(l,{sx:{display:"flex",flexDirection:n?"column":"row",justifyContent:"space-between",alignItems:n?"flex-start":"center",gap:2},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(l,{sx:{display:"flex",gap:2,alignItems:"center"},children:[e.jsx(zt,{icon:e.jsx(ma,{fontSize:"small"}),title:"Back",color:"primary",onClick:()=>a(-1)}),e.jsx($e,{sx:{bgcolor:t.palette.primary.main,width:40,height:40},children:e.jsx(Tt,{})})]}),e.jsx(l,{children:S?e.jsx(pe,{width:200,height:40}):e.jsxs(e.Fragment,{children:[e.jsxs(i,{variant:"h6",fontWeight:"bold",children:["Invoice ",(u==null?void 0:u.voucher_number)||"Loading..."]}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ps,{fontSize:"small",color:"action"}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Created on ",Nt((u==null?void 0:u.date)||"")]})]})]})})]}),e.jsxs(J,{direction:"row",spacing:1,flexWrap:"wrap",children:[e.jsx(zt,{icon:e.jsx(aa,{fontSize:"small"}),title:"Edit Invoice",color:"primary",onClick:()=>D((u==null?void 0:u._id)??"",(u==null?void 0:u.voucher_type)??"")}),e.jsx(zt,{icon:e.jsx(xi,{fontSize:"small"}),title:"Download Invoice",color:"info",onClick:()=>{N(u,()=>{_()})}}),e.jsx(zt,{icon:e.jsx(pi,{fontSize:"small"}),title:"Share Invoice",color:"warning",onClick:()=>{N(u,()=>{B()})}}),e.jsx(zt,{icon:e.jsx(Oa,{fontSize:"small"}),title:"Print Invoice",color:"success",onClick:()=>{N(u,()=>{K()})}}),e.jsx(zt,{icon:e.jsx(ut,{fontSize:"small"}),title:"Delete Invoice",color:"error",onClick:()=>P((u==null?void 0:u._id)??"")})]})]})})}),e.jsxs(I,{container:!0,spacing:3,children:[e.jsx(I,{item:!0,xs:12,lg:4,children:e.jsx(Ye,{in:!0,timeout:600,children:e.jsx(Ne,{variant:"outlined",children:e.jsxs(Me,{sx:{p:1},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(Sn,{color:"primary"}),e.jsx(i,{variant:"subtitle1",fontWeight:"bold",children:"Invoice Information"})]}),e.jsx(Pe,{sx:{mb:1}}),S?e.jsx(l,{sx:{"& > *":{mb:2}},children:[...Array(4)].map((V,z)=>e.jsx(pe,{height:60},z))}):e.jsxs(J,{spacing:2,children:[(u==null?void 0:u.payment_mode)&&e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Invoice Status"}),L((u==null?void 0:u.payment_mode)||"")?e.jsx(ve,{icon:L((u==null?void 0:u.payment_mode)||""),label:u==null?void 0:u.payment_mode.toUpperCase(),color:R((u==null?void 0:u.payment_mode)||""),variant:"filled",sx:{fontWeight:"bold"}}):e.jsx(ve,{label:u==null?void 0:u.payment_mode.toUpperCase(),color:R((u==null?void 0:u.payment_mode)||""),variant:"filled",sx:{fontWeight:"bold"}})]}),e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Invoice Date"}),e.jsx(i,{variant:"body1",fontWeight:"medium",children:Nt((u==null?void 0:u.date)||"")})]}),e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Last Updated"}),e.jsx(i,{variant:"body1",fontWeight:"medium",children:Nt((u==null?void 0:u.updated_at)||"")})]})]})]})]})})})}),e.jsx(I,{item:!0,xs:12,lg:4,children:e.jsx(Ye,{in:!0,timeout:800,children:e.jsx(Ne,{variant:"outlined",children:e.jsxs(Me,{sx:{p:1},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",mb:1,justifyContent:"space-between"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(At,{color:"primary"}),e.jsx(i,{variant:"subtitle1",fontWeight:"bold",children:"Bill To"})]}),e.jsx(i,{variant:"subtitle1",fontWeight:"bold",children:((h=u==null?void 0:u.party_details)==null?void 0:h.ledger_name)||""})]}),e.jsx(Pe,{sx:{mb:1}}),S?e.jsx(l,{sx:{"& > *":{mb:2}},children:[...Array(5)].map((V,z)=>e.jsx(pe,{height:40},z))}):e.jsxs(J,{spacing:2,children:[((b=u==null?void 0:u.party_details)==null?void 0:b.mailing_address)&&e.jsxs(l,{sx:{display:"flex",alignItems:"flex-start",gap:1},children:[e.jsx(La,{fontSize:"small",color:"action",sx:{mt:.5}}),e.jsxs(l,{children:[e.jsx(i,{variant:"body2",color:"text.secondary",children:((M=u==null?void 0:u.party_details)==null?void 0:M.mailing_address)||""}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:[(W=u==null?void 0:u.party_details)==null?void 0:W.mailing_state,", ",((C=u==null?void 0:u.party_details)==null?void 0:C.mailing_country)||""]})]})]}),((G=($=u==null?void 0:u.party_details)==null?void 0:$.phone)==null?void 0:G.number)&&e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ua,{fontSize:"small",color:"action"}),e.jsxs(i,{variant:"body2",children:[((Ae=(ge=u==null?void 0:u.party_details)==null?void 0:ge.phone)==null?void 0:Ae.code)||""," ",((Y=(ae=u==null?void 0:u.party_details)==null?void 0:ae.phone)==null?void 0:Y.number)||""]})]}),((re=u==null?void 0:u.party_details)==null?void 0:re.email)&&e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Bt,{fontSize:"small",color:"action"}),e.jsx(i,{variant:"body2",children:((Te=u==null?void 0:u.party_details)==null?void 0:Te.email)||""})]})]})]})})})}),e.jsx(I,{item:!0,xs:12,lg:4,children:e.jsx(Ye,{in:!0,timeout:1e3,children:e.jsx(Ne,{variant:"outlined",sx:{height:"100%",background:`linear-gradient(135deg, ${d(t.palette.success.main,.05)} 0%, ${d(t.palette.primary.main,.05)} 100%)`},children:e.jsxs(Me,{sx:{p:1},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(Mc,{color:"primary"}),e.jsx(i,{variant:"subtitle1",fontWeight:"bold",children:"Invoice Summary"})]}),e.jsx(Pe,{sx:{mb:1}}),S?e.jsx(l,{sx:{"& > *":{mb:2}},children:[...Array(6)].map((V,z)=>e.jsx(pe,{height:40},z))}):e.jsxs(J,{spacing:1,children:[[{label:"Total Amount",value:`₹ ${u==null?void 0:u.total}`},{label:"Total Tax",value:`₹ ${u==null?void 0:u.total_tax}`}].map((V,z)=>e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{variant:"inherit",color:"text.secondary",children:V.label}),e.jsx(i,{variant:"inherit",fontWeight:"medium",children:V.value})]},z)),e.jsx(Pe,{}),e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:d(t.palette.success.main,.1),borderRadius:1},children:[e.jsx(i,{variant:"h6",fontWeight:"bold",children:"Grand Total"}),e.jsxs(i,{variant:"h6",fontWeight:"bold",color:"success.main",children:["₹",Math.abs((u==null?void 0:u.grand_total)??0)]})]})]})]})})})}),e.jsx(I,{item:!0,xs:12,children:e.jsx(ze,{in:!0,timeout:1200,children:e.jsx(Ne,{variant:"outlined",children:e.jsxs(Me,{sx:{p:1},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(ca,{color:"primary"}),e.jsx(i,{variant:"h6",fontWeight:"bold",children:"Invoice Items"})]}),S?e.jsxs(e.Fragment,{children:[e.jsx(St,{sx:{mb:2}}),e.jsx(l,{sx:{"& > *":{mb:2}},children:[...Array(3)].map((V,z)=>e.jsx(pe,{height:60},z))})]}):e.jsx(nt,{component:ne,variant:"outlined",sx:{borderRadius:1,"& .MuiTableHead-root":{bgcolor:d(t.palette.primary.main,.05)}},children:e.jsxs(it,{stickyHeader:!0,size:n?"small":"medium",children:[e.jsx(ot,{children:e.jsxs(xe,{children:[e.jsx(m,{sx:{fontWeight:"bold"},children:"Product"}),v&&e.jsx(m,{align:"center",sx:{fontWeight:"bold"},children:"HSN/SAC"}),e.jsx(m,{align:"center",sx:{fontWeight:"bold"},children:"Qty"}),e.jsx(m,{align:"right",sx:{fontWeight:"bold"},children:"Rate (₹)"}),e.jsx(m,{align:"right",sx:{fontWeight:"bold"},children:"Price (₹)"}),v&&e.jsx(m,{align:"center",sx:{fontWeight:"bold"},children:"TAX %"}),v&&e.jsx(m,{align:"right",sx:{fontWeight:"bold"},children:"TAX (₹)"}),e.jsx(m,{align:"right",sx:{fontWeight:"bold"},children:"Total (₹)"})]})}),e.jsxs(st,{children:[A.map((V,z)=>e.jsxs(xe,{hover:!0,sx:{"&:hover":{bgcolor:d(t.palette.primary.main,.02)}},children:[e.jsx(m,{children:e.jsx(i,{variant:"body2",fontWeight:"medium",children:V.item})}),v&&e.jsx(m,{align:"center",children:e.jsx(ve,{label:V.hsn_code,size:"small",variant:"outlined"})}),e.jsx(m,{align:"center",children:e.jsx(i,{variant:"body2",fontWeight:"medium",children:V.quantity})}),e.jsxs(m,{align:"right",children:["₹",V.rate]}),e.jsxs(m,{align:"right",children:["₹",V.rate*V.quantity]}),v&&e.jsx(m,{align:"center",children:e.jsx(ve,{label:`${V.tax_rate}%`,size:"small",color:"info",variant:"filled"})}),v&&e.jsxs(m,{align:"right",children:["₹",(V.tax_amount??0).toFixed(2)]}),e.jsx(m,{align:"right",children:e.jsxs(i,{variant:"body1",fontWeight:"bold",color:"success.main",children:["₹",(V.amount??0).toFixed(2)]})})]},V._id+z)),e.jsxs(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{colSpan:v?7:4,align:"right"}),e.jsx(m,{align:"right"})]}),e.jsxs(xe,{sx:{bgcolor:d(t.palette.success.light,.05),"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{colSpan:v?7:4,align:"right",children:"Sub-Total:"}),e.jsxs(m,{align:"right",sx:{color:"success.main"},children:["₹",Math.abs((u==null?void 0:u.total_amount)||0)]})]}),e.jsxs(xe,{sx:{bgcolor:d(t.palette.success.light,.05),"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{colSpan:v?7:4,align:"right",children:"Discount Total:"}),e.jsxs(m,{align:"right",sx:{color:"success.main"},children:["₹",Math.abs((u==null?void 0:u.discount)||0)]})]}),e.jsxs(xe,{sx:{bgcolor:d(t.palette.success.light,.05),"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{colSpan:v?7:4,align:"right",children:"Total :"}),e.jsxs(m,{align:"right",sx:{color:"success.main"},children:["₹",Math.abs((u==null?void 0:u.total)||0)]})]}),e.jsxs(xe,{sx:{bgcolor:d(t.palette.success.light,.05),"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{colSpan:v?7:4,align:"right",children:"Total Tax:"}),e.jsxs(m,{align:"right",sx:{color:"success.main"},children:["₹",Math.abs((u==null?void 0:u.total_tax)||0)]})]}),e.jsxs(xe,{sx:{bgcolor:d(t.palette.success.light,.05),"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{colSpan:v?7:4,align:"right",children:"Additional Charges:"}),e.jsxs(m,{align:"right",sx:{color:"success.main"},children:["₹",Math.abs((u==null?void 0:u.additional_charge)||0)]})]}),e.jsxs(xe,{sx:{bgcolor:d(t.palette.success.main,.05)},children:[e.jsx(m,{colSpan:v?7:4,align:"right",sx:{fontWeight:"bold",fontSize:"1.1em"},children:"Grand Total:"}),e.jsxs(m,{align:"right",sx:{fontWeight:"bold",fontSize:"1.2em",color:"success.main"},children:["₹",Math.abs((u==null?void 0:u.grand_total)||0)]})]})]})]})})]})})})})]}),o&&e.jsx(k,{visible:o,setVisible:p}),e.jsx(Mi,{isLoading:w,text:"Generating and fetching pdf from server..."})]})},Jx=()=>{const[t]=Hs(),a=Ke(),n=we(),s=Fe(),[r,o]=g.useState({isVerified:!1,isVerifying:!0,error:null}),p=t.get("token"),c=t.get("email"),x=async()=>{if(!p||!c){o({isVerified:!1,isVerifying:!1,error:"Invalid verification link. Please check your email for a valid verification link."}),Z.error("Invalid verification link");return}o(k=>({...k,isVerifying:!0,error:null})),await s(Rn({email:c,token:p})).then(k=>{console.log("Email verification response:",k),k.meta.requestStatus==="fulfilled"?(o({isVerified:!0,isVerifying:!1,error:null}),Z.success("Email verified successfully!")):(o({isVerified:!1,isVerifying:!1,error:k.payload||"Email verification failed. Please try again."}),Z.error(k.payload||"Email verification failed. Please try again."))}).catch(k=>{o({isVerified:!1,isVerifying:!1,error:k||"An unexpected error occurred"})})},u=()=>{x()},S=()=>{a("/login")},f=()=>{a("/")};g.useEffect(()=>{x()},[p,c,s]);const v=()=>e.jsxs(J,{spacing:3,alignItems:"center",sx:{py:4},children:[e.jsxs(l,{sx:{position:"relative",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:[e.jsx(bt,{size:60,thickness:4,sx:{color:n.palette.primary.main}}),e.jsx(Bt,{sx:{position:"absolute",fontSize:24,color:n.palette.primary.main}})]}),e.jsx(i,{variant:"h5",component:"h1",fontWeight:"medium",children:"Verifying Your Email"}),e.jsx(i,{variant:"body1",color:"text.secondary",textAlign:"center",children:"Please wait while we verify your email address..."}),c&&e.jsxs(i,{variant:"body2",color:"text.secondary",textAlign:"center",children:["Verifying: ",e.jsx("strong",{children:c})]})]}),j=()=>e.jsxs(J,{spacing:3,alignItems:"center",sx:{py:4},children:[e.jsx(Si,{sx:{fontSize:80,color:n.palette.success.main}}),e.jsx(i,{variant:"h4",component:"h1",fontWeight:"bold",textAlign:"center",children:"Email Verified Successfully!"}),e.jsx(i,{variant:"body1",color:"text.secondary",textAlign:"center",children:"Your email address has been verified. You can now access your account with full functionality."}),c&&e.jsx(rt,{severity:"success",sx:{width:"100%"},children:e.jsxs(i,{variant:"body2",children:[e.jsx("strong",{children:c})," has been successfully verified"]})}),e.jsxs(J,{direction:{xs:"column",sm:"row"},spacing:2,sx:{width:"100%"},children:[e.jsx(ee,{variant:"contained",size:"large",onClick:S,sx:{flex:1},children:"Go to Login"}),e.jsx(ee,{variant:"outlined",size:"large",onClick:f,startIcon:e.jsx(Fo,{}),sx:{flex:1},children:"Go Home"})]})]}),T=()=>e.jsxs(J,{spacing:{xs:2,sm:3},alignItems:"center",sx:{py:{xs:2,sm:4}},children:[e.jsx(Rc,{sx:{fontSize:80,color:n.palette.error.main}}),e.jsx(i,{variant:"h5",component:"h1",fontWeight:"medium",textAlign:"center",children:"Email Verification Failed"}),e.jsx(i,{variant:"body1",color:"text.secondary",textAlign:"center",children:"We couldn't verify your email address. This might be due to an expired or invalid verification link."}),e.jsx(rt,{severity:"error",sx:{width:"100%",m:0},children:e.jsx(i,{variant:"body2",children:r.error})}),e.jsxs(J,{direction:{xs:"column",sm:"row"},sx:{width:"100%",gap:2},children:[e.jsx(ee,{variant:"contained",size:"large",onClick:u,startIcon:e.jsx(Os,{}),sx:{flex:1},children:"Try Again"}),e.jsx(ee,{variant:"outlined",size:"large",onClick:f,startIcon:e.jsx(Fo,{}),sx:{flex:1},children:"Go Home"})]}),e.jsx(i,{variant:"body2",color:"text.secondary",textAlign:"center",children:"If the problem persists, please contact our support team for assistance."})]});return e.jsx(l,{sx:{minHeight:"100vh",background:`linear-gradient(135deg, ${d(n.palette.primary.main,.1)} 0%, ${d(n.palette.secondary.main,.1)} 100%)`,display:"flex",alignItems:{sm:"center",xs:"flex-start"},py:{xs:2,sm:4,md:6,lg:8,xl:10}},children:e.jsx(Je,{maxWidth:"sm",children:e.jsx(ne,{elevation:8,sx:{borderRadius:3,overflow:"hidden",background:n.palette.background.paper,backdropFilter:"blur(10px)"},children:e.jsxs(l,{sx:{p:{xs:2,sm:4}},children:[r.isVerifying&&v(),!r.isVerifying&&r.isVerified&&j(),!r.isVerifying&&!r.isVerified&&T()]})})})})},jl="/assets/1-DOxi_lqJ.webp",vl="/assets/2-C1f6drRM.webp",Sl="/assets/3-KUKmkwoa.webp",_l="/assets/4-NJcHGNKM.webp",wl="/assets/5-BZkSIBDm.webp",Cl="/assets/6-I48HFh5i.webp",kl="/assets/7-BNZmrXLg.webp";function ji(...t){return Yc(Uc(t))}const Vx=()=>{const[t]=Hs(),a=t.get("token"),n=t.get("email"),s=yt(b=>b.breakpoints.down("md")),r=yt(b=>b.breakpoints.down("sm")),o=we(),p=Fe(),[c,x]=g.useState({email:n||"",password:"",confirmPassword:"",user_type:"user"}),[u,S]=g.useState({}),[f,v]=g.useState({}),[j,T]=g.useState(!1),[k,B]=g.useState(!1),[_,K]=g.useState(!1),w=Ke(),R=(b=>{let M=0;b.length>=8&&(M+=1),/[a-z]/.test(b)&&(M+=1),/[A-Z]/.test(b)&&(M+=1),/[0-9]/.test(b)&&(M+=1),/[^A-Za-z0-9]/.test(b)&&(M+=1);const W={0:{score:0,label:"Very Weak",color:"error"},1:{score:20,label:"Weak",color:"error"},2:{score:40,label:"Fair",color:"warning"},3:{score:60,label:"Good",color:"info"},4:{score:80,label:"Strong",color:"success"},5:{score:100,label:"Very Strong",color:"success"}};return W[M]||W[0]})(c.password),L=()=>{T(!j)},D=()=>{B(!k)},P=b=>{v(M=>({...M,[b]:!0})),A(b,c[b])},A=(b,M)=>{const W={...u};switch(b){case"email":M.trim()?/\S+@\S+\.\S+/.test(M)?delete W.email:W.email="Please enter a valid email address":W.email="Email is required";break;case"password":M.trim()?M.length<8?W.password="Password must be at least 8 characters long":R.score<60?W.password="Password is too weak. Include uppercase, lowercase, numbers, and symbols":delete W.password:W.password="Password is required",c.confirmPassword&&M!==c.confirmPassword?W.confirmPassword="Passwords do not match":c.confirmPassword&&M===c.confirmPassword&&delete W.confirmPassword;break;case"confirmPassword":M.trim()?M!==c.password?W.confirmPassword="Passwords do not match":delete W.confirmPassword:W.confirmPassword="Please confirm your password";break}return S(W),Object.keys(W).length===0},O=b=>{const{name:M,value:W}=b.target;x(C=>({...C,[M]:W})),f[M]&&A(M,W)},y=g.useCallback(()=>{const b=["email","password","confirmPassword"];let M=!0;b.forEach(C=>{const $=c[C];A(C,$)||(M=!1)});const W=b.reduce((C,$)=>(C[$]=!0,C),{});return v(W),M},[c,R]),F=async b=>{if(b.preventDefault(),!y()){Z.error("Please fix the validation errors before submitting.");return}K(!0),await p(Pn({email:c.email,new_password:c.password,token:a||""})).unwrap().then(M=>{console.log("Response Reset Password Form",M),p(Ia()),p(Jr()),Z.success("Password reset successfully!"),w("/")}).catch(M=>{console.error("Reset password error:",M),Z.error((M==null?void 0:M.message)||"An unexpected error occurred. Please try again later.")}).finally(()=>{K(!1)})},h=()=>[{text:"At least 8 characters",met:c.password.length>=8},{text:"One lowercase letter",met:/[a-z]/.test(c.password)},{text:"One uppercase letter",met:/[A-Z]/.test(c.password)},{text:"One number",met:/[0-9]/.test(c.password)},{text:"One special character",met:/[^A-Za-z0-9]/.test(c.password)}];return e.jsx(I,{item:!0,lg:12,sx:{display:"flex",width:"100%",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:{xs:1,sm:2,md:3,lg:4},minHeight:"100vh",backgroundColor:"background.default"},children:e.jsx(Je,{component:"main",maxWidth:"sm",children:e.jsx(ne,{elevation:0,sx:{padding:{xs:2,sm:2,md:3,lg:4},borderRadius:3,backgroundColor:"background.paper",border:"1px solid",borderColor:"divider"},children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",flexDirection:r?"column":"row",gap:1,mb:1},children:[e.jsx("img",{src:Ya,alt:"Logo",style:{height:s?"50px":"40px",borderRadius:"50%"}}),e.jsx("img",{src:zr,alt:"Logo Text",style:{height:s?"40px":r?"35px":"40px"}})]}),e.jsxs(l,{sx:{textAlign:"center",mb:2},children:[e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(tr,{color:"primary",sx:{fontSize:{xs:30,sm:40}}})}),e.jsx(i,{component:"h1",variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"Reset Password"}),e.jsx(i,{variant:"body1",color:"text.secondary",children:"Create a strong new password to secure your account"})]}),e.jsxs(l,{component:"form",onSubmit:F,sx:{width:"100%"},children:[e.jsx(X,{label:"Email Address",variant:"outlined",fullWidth:!0,disabled:!0,value:c.email,margin:"normal",id:"email",name:"email",error:f.email&&!!u.email,helperText:f.email&&u.email,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(At,{color:"action"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(X,{onChange:O,onBlur:()=>P("password"),margin:"normal",fullWidth:!0,required:!0,name:"password",variant:"outlined",value:c.password,label:"New Password",type:j?"text":"password",id:"password",placeholder:"Enter your new password",error:f.password&&!!u.password,helperText:f.password&&u.password,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(oi,{color:"action"})}),endAdornment:e.jsx(se,{position:"end",children:j?e.jsx(si,{onClick:L,sx:{cursor:"pointer",color:"action.active"}}):e.jsx(Tr,{onClick:L,sx:{cursor:"pointer",color:"action.active"}})})}}),c.password&&e.jsx(ze,{in:!!c.password,children:e.jsxs(l,{sx:{mt:1,mb:2},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:"Password Strength:"}),e.jsx(ve,{label:R.label,color:R.color,size:"small",variant:"outlined"})]}),e.jsx(St,{variant:"determinate",value:R.score,color:R.color,sx:{height:6,borderRadius:3}}),e.jsxs(l,{sx:{mt:2},children:[e.jsx(i,{variant:"caption",color:"text.secondary",gutterBottom:!0,children:"Password Requirements:"}),e.jsx(l,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:1},children:h().map((b,M)=>e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:.5},children:[b.met?e.jsx(pt,{sx:{fontSize:14,color:"success.main"}}):e.jsx(Ga,{sx:{fontSize:14,color:"error.main"}}),e.jsx(i,{variant:"caption",color:b.met?"success.main":"error.main",children:b.text})]},M))})]})]})}),e.jsx(X,{onChange:O,onBlur:()=>P("confirmPassword"),margin:"normal",fullWidth:!0,required:!0,name:"confirmPassword",variant:"outlined",value:c.confirmPassword,label:"Confirm New Password",type:k?"text":"password",id:"confirm-password",placeholder:"Confirm your new password",error:f.confirmPassword&&!!u.confirmPassword,helperText:f.confirmPassword&&u.confirmPassword,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(oi,{color:"action"})}),endAdornment:e.jsx(se,{position:"end",children:k?e.jsx(si,{onClick:D,sx:{cursor:"pointer",color:"action.active"}}):e.jsx(Tr,{onClick:D,sx:{cursor:"pointer",color:"action.active"}})})}}),c.confirmPassword&&c.password===c.confirmPassword&&!u.confirmPassword&&e.jsx(ze,{in:!0,children:e.jsx(rt,{severity:"success",sx:{mt:1,borderRadius:2},children:"Passwords match!"})}),e.jsx(ee,{type:"submit",fullWidth:!0,disabled:_||Object.keys(u).length>0,variant:"contained",size:"large",sx:{mt:1,mb:1,py:1.5,borderRadius:2,fontSize:"1.1rem",fontWeight:600,textTransform:"none",background:Object.keys(u).length===0&&!_?`linear-gradient(135deg, ${o.palette.primary.main}, ${o.palette.primary.dark})`:void 0,boxShadow:Object.keys(u).length===0&&!_?`0 4px 20px ${o.palette.primary.main}40`:void 0,"&:hover":{background:Object.keys(u).length===0&&!_?`linear-gradient(135deg, ${o.palette.primary.dark}, ${o.palette.primary.main})`:void 0,boxShadow:Object.keys(u).length===0&&!_?`0 6px 25px ${o.palette.primary.main}50`:void 0},"&:disabled":{background:o.palette.grey[300],color:o.palette.grey[500]}},children:_?e.jsxs(e.Fragment,{children:[e.jsx(St,{sx:{position:"absolute",top:0,left:0,right:0,borderRadius:2}}),"Updating Password..."]}):"Reset Password"}),e.jsx(rt,{severity:"info",sx:{mt:2,borderRadius:2},children:e.jsx(i,{variant:"body2",children:"For your security, you'll be automatically logged in after resetting your password."})})]})]})})})})},Qx=()=>{const t=g.useRef([]),a=yt(A=>A.breakpoints.down("md")),n=g.useRef(null),[s,r]=g.useState([]),[o,p]=g.useState(""),c=g.useId(),[x,u]=g.useState({width:0,height:0}),[S,f]=g.useState("sixToCenter"),v=9,j=0,T="silver",k=6,B=.5,_="#ffaa40",K="#9c40ff",w=0,N=0,R=0,L=0,D=0,P={x1:["10%","110%"],x2:["0%","100%"],y1:["0%","0%"],y2:["0%","0%"]};return g.useEffect(()=>{const A=()=>{if(t.current.length>=8){const F=t.current.slice(0,7).map(h=>{var Te;if(!h||!n.current)return"";const b=n.current.getBoundingClientRect(),M=h.getBoundingClientRect(),W=(Te=t.current[7])==null?void 0:Te.getBoundingClientRect();if(!W)return"";const C=b.width,$=b.height;u({width:C,height:$});const G=M.left-b.left+M.width/2+w,ge=M.top-b.top+M.height/2+N,Ae=W.left-b.left+W.width/2+R,ae=W.top-b.top+W.height/2+L,Y=ge-D;return`M ${G},${ge} Q ${(G+Ae)/2},${Y} ${Ae},${ae}`});r(F.filter(Boolean))}},O=()=>{var Y,re;if(!n.current)return"";const F=n.current.getBoundingClientRect(),h=(Y=t.current[7])==null?void 0:Y.getBoundingClientRect(),b=(re=t.current[8])==null?void 0:re.getBoundingClientRect();if(!b||!h)return"";const M=F.width,W=F.height;u({width:M,height:W});const C=h.left-F.left+h.width/2+w,$=h.top-F.top+h.height/2+N,G=b.left-F.left+b.width/2+R,ge=b.top-F.top+b.height/2+L,Ae=$-D,ae=`M ${C},${$} Q ${(C+G)/2},${Ae} ${G},${ge}`;p(ae)},y=new ResizeObserver(F=>{for(const h of F)console.log("ResizeObserver entry:",h),A(),O()});return n.current&&y.observe(n.current),A(),O(),()=>{y.disconnect()}},[]),g.useEffect(()=>{let A;return S==="sixToCenter"?A=setTimeout(()=>{f("centerToImage")},1500):S==="centerToImage"?A=setTimeout(()=>{f("slide")},1500):S==="slide"&&(A=setTimeout(()=>{f("sixToCenter")},1500)),()=>clearTimeout(A)},[S]),e.jsxs(I,{container:!0,sx:{height:"100vh",zIndex:1,position:"relative"},children:[e.jsx(I,{item:!0,xs:12,md:6,sx:{background:"linear-gradient(to right bottom, #26d2d2, #006E89, #004B6B)",color:"white",display:{sm:"none",xs:"none",md:"flex"},width:"100%",zIndex:1,justifyContent:"center",padding:{xs:0,sm:0,md:0,lg:"0 40px"},flexDirection:"column"},children:e.jsxs("div",{ref:n,style:{color:"white",position:"relative",display:"flex",width:"100%",margin:"0 auto",marginLeft:a?"130px":"20px",justifyContent:"space-between",alignItems:"center",flexDirection:"row",columnGap:a?"130px":"20px"},children:[e.jsxs("svg",{fill:"none",width:x.width,height:x.height,xmlns:"http://www.w3.org/2000/svg",className:ji("pointer-events-none absolute left-0 top-0 transform-gpu stroke-2"),viewBox:`0 0 ${x.width} ${x.height}`,children:[s.map((A,O)=>e.jsxs(Ft.Fragment,{children:[e.jsx("path",{d:A,stroke:T,strokeWidth:k,strokeOpacity:B,strokeLinecap:"round"}),e.jsx("path",{d:A,strokeWidth:k,stroke:`url(#${c})`,strokeOpacity:"1",strokeLinecap:"round"})]},O)),e.jsx("defs",{children:e.jsxs(yi.linearGradient,{className:"transform-gpu",id:c,gradientUnits:"userSpaceOnUse",initial:{x1:"0%",x2:"0%",y1:"0%",y2:"0%"},animate:{x1:P.x1,x2:P.x2,y1:P.y1,y2:P.y2},transition:{delay:j,duration:v,ease:[.16,1,.3,1],repeat:1/0,repeatDelay:3},children:[e.jsx("stop",{stopColor:_,stopOpacity:"0"}),e.jsx("stop",{stopColor:_}),e.jsx("stop",{offset:"32.5%",stopColor:K}),e.jsx("stop",{offset:"100%",stopColor:K,stopOpacity:"0"})]})})]}),e.jsxs("svg",{fill:"none",width:x.width,height:x.height,xmlns:"http://www.w3.org/2000/svg",className:ji("pointer-events-none absolute left-0 top-0 transform-gpu stroke-2"),viewBox:`0 0 ${x.width} ${x.height}`,children:[e.jsx("path",{d:o,stroke:T,strokeWidth:k,strokeOpacity:B,strokeLinecap:"round"}),e.jsx("path",{d:o,strokeWidth:k,stroke:`url(#${c})`,strokeOpacity:"1",strokeLinecap:"round"}),e.jsx("defs",{children:e.jsxs(yi.linearGradient,{className:"transform-gpu",id:c,gradientUnits:"userSpaceOnUse",initial:{x1:"0%",x2:"0%",y1:"0%",y2:"0%"},onAnimationComplete:()=>{f("slide")},animate:{x1:P.x1,x2:P.x2,y1:P.y1,y2:P.y2},transition:{delay:j,duration:v,ease:[.16,1,.3,1],repeat:1/0,repeatDelay:0},children:[e.jsx("stop",{stopColor:_,stopOpacity:"0"}),e.jsx("stop",{stopColor:_}),e.jsx("stop",{offset:"32.5%",stopColor:K}),e.jsx("stop",{offset:"100%",stopColor:K,stopOpacity:"0"})]})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[jl,vl,Sl,_l,wl,Cl,kl].map((A,O)=>e.jsx("div",{ref:y=>t.current[O]=y,style:{zIndex:10,height:a?"70px":"40px",width:a?"70px":"40px",marginTop:"10px",marginBottom:"10px"},children:e.jsx("img",{src:A,alt:`Logo${O+1}`,style:{borderRadius:"50%",zIndex:10,backgroundColor:"white",padding:"5px",objectFit:"contain"}})},O))}),e.jsx("div",{style:{zIndex:100,height:a?"100px":"50px",width:a?"100px":"50px",objectFit:"contain"},ref:A=>t.current[7]=A,children:e.jsx("img",{src:Ya,alt:"Logo",style:{borderRadius:"50%",height:a?"100px":"50px",width:"fit-content",objectFit:"contain",backgroundColor:"white"}})}),e.jsx("div",{ref:A=>t.current[8]=A,style:{position:"relative",display:"flex",flexDirection:"column",height:a?"200px":"150px",width:a?"200px":"150px",zIndex:100,overflow:"visible"},children:e.jsx("img",{src:So,alt:"Logo",style:{position:"absolute",top:"0",left:"0",filter:"drop-shadow(0px 0px 8px rgba(0, 0, 0, 0.25))",borderRadius:"10px",height:a?"200px":"150px",width:a?"200px":"150px",objectFit:"contain"}})})]})}),e.jsx(I,{item:!0,xs:12,sm:12,md:6,sx:{width:"100%",display:"flex",alignItems:"center",flexDirection:"row"},children:e.jsx(l,{sx:{width:"100%",display:"flex",justifyContent:"center",flexDirection:"row"},children:e.jsx(Vx,{})})})]})},Zx=()=>{const t=Fe(),a=we(),n=Ke(),[s,r]=g.useState(""),[o,p]=g.useState(!1),[c,x]=g.useState(!1),[u,S]=g.useState(""),f=k=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k),v=k=>{const B=k.target.value;r(B),B.trim()&&!f(B)?S("Please enter a valid email address"):S("")},j=async k=>{if(k.preventDefault(),!s.trim()){S("Email address is required");return}if(!f(s)){S("Please enter a valid email address");return}p(!0);try{const B=await t(An(s)).unwrap();console.log("Response Forget Password ",B),x(!0),Z.success("Password reset link sent to your email!")}catch(B){console.error("Forgot Password error:",B),Z.error(B||"An unexpected error occurred. Please try again later."),S("Failed to send reset link. Please try again.")}finally{p(!1)}},T=()=>{n("/login"),x(!1),r(""),S("")};return c?e.jsx(I,{item:!0,lg:8,md:6,sx:{display:"flex",width:"100%",flexDirection:"column",padding:4,minHeight:"100vh",justifyContent:"center"},children:e.jsx(Je,{component:"main",maxWidth:"sm",children:e.jsx(ze,{in:c,timeout:800,children:e.jsxs(ne,{elevation:0,sx:{padding:6,textAlign:"center",borderRadius:3,backgroundColor:d(a.palette.success.main,.05),border:`1px solid ${d(a.palette.success.main,.2)}`},children:[e.jsx(pt,{sx:{fontSize:64,color:a.palette.success.main,mb:3}}),e.jsx(i,{variant:"h4",gutterBottom:!0,sx:{fontWeight:600},children:"Check Your Email"}),e.jsxs(i,{variant:"body1",color:"text.secondary",sx:{mb:4,lineHeight:1.6},children:["We've sent a password reset link to ",e.jsx("strong",{children:s}),". Please check your inbox and spam folder and follow the instructions to reset your password."]}),e.jsx(ee,{onClick:T,startIcon:e.jsx(ma,{}),variant:"outlined",size:"large",sx:{borderRadius:2,textTransform:"none",fontWeight:500},children:"Back to Login"})]})})})}):e.jsx(I,{item:!0,lg:12,sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:{xs:2,sm:4},minHeight:"100vh",width:"100%"},children:e.jsx(Je,{component:"main",maxWidth:!1,sx:{width:{sm:"400px",xs:"100%",md:"550px",lg:"700px"}},children:e.jsx(ze,{in:!0,timeout:800,children:e.jsx(ne,{elevation:0,sx:{padding:{xs:3,sm:4,md:5},borderRadius:3,textAlign:"center",border:`1px solid ${a.palette.divider}`,background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)"},children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsxs(l,{sx:{display:"flex",width:"100%",mb:2,gap:2,justifyContent:"center",alignItems:"center"},children:[e.jsx("img",{src:Ya,alt:"Logo",style:{height:"40px",borderRadius:"8px"}}),e.jsx("img",{src:zr,alt:"Logo Text",style:{height:"32px"}})]}),e.jsxs(l,{sx:{textAlign:"center",mb:4},children:[e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:e.jsx(tr,{color:"primary",sx:{fontSize:40,mr:1}})}),e.jsx(i,{component:"h1",variant:"h4",sx:{fontWeight:700,background:`linear-gradient(135deg, ${a.palette.primary.main}, ${a.palette.primary.dark})`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Reset Password"}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{fontSize:"1.1rem",lineHeight:1.6},children:"Enter your email address and we'll send you a link to reset your password."})]}),e.jsxs(l,{component:"form",onSubmit:j,sx:{width:"100%"},children:[e.jsx(X,{fullWidth:!0,id:"email",name:"email",label:"Email Address",type:"email",value:s,onChange:v,error:!!u,helperText:u,autoFocus:!0,autoComplete:"email",disabled:o,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Bt,{color:u?"error":"action"})}),endAdornment:s&&e.jsx(se,{position:"end",children:s&&u?e.jsx(le,{title:"Clear Email field",children:e.jsx(ct,{onClick:()=>r(""),sx:{color:a.palette.error.main,fontSize:20,cursor:"pointer",":hover":{opacity:.8,transition:"opacity 0.2s ease-in-out"}}})}):e.jsx(da,{sx:{color:a.palette.success.main,fontSize:20}})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.3s ease","&:hover":{boxShadow:`0 0 0 2px ${a.palette.primary.main}20`},"&.Mui-focused":{boxShadow:`0 0 0 2px ${a.palette.primary.main}40`}}}}),e.jsx(ee,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:o||!s.trim(),sx:{mt:4,mb:1,py:1.5,borderRadius:2,fontSize:"1.1rem",fontWeight:600,textTransform:"none",background:!u&&!o?`linear-gradient(135deg, ${a.palette.primary.main}, ${a.palette.primary.dark})`:void 0,boxShadow:!u&&!o?`0 4px 20px ${a.palette.primary.main}40`:void 0,"&:hover":{background:!u&&!o?`linear-gradient(135deg, ${a.palette.primary.dark}, ${a.palette.primary.main})`:void 0,boxShadow:!u&&!o?`0 6px 25px ${a.palette.primary.main}50`:void 0},"&:disabled":{background:a.palette.grey[300],color:a.palette.grey[500]},transition:"all 0.2s ease-in-out"},children:o?e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(bt,{size:24,color:"inherit"}),"Sending Link..."]}):"Send Reset Link"}),e.jsxs(l,{sx:{textAlign:"center",mt:1},children:[e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Already remembered your password?"," ",e.jsx(ee,{onClick:T,sx:{fontSize:"inherit",fontWeight:600,textTransform:"none",p:0,minWidth:"auto","&:hover":{background:"transparent",textDecoration:"underline"}},children:"Back to Login"})]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Didn't have an account?"," ",e.jsx(ee,{onClick:()=>n("/signup"),sx:{fontSize:"inherit",fontWeight:600,textTransform:"none",p:0,minWidth:"auto","&:hover":{background:"transparent",textDecoration:"underline"}},children:"Sign Up"})]}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["By creating an account and using the platform, you agree to our"," ",e.jsx(ee,{onClick:()=>n("/terms"),sx:{fontSize:"inherit",p:0,minWidth:"auto",textTransform:"none",textDecoration:"underline","&:hover":{background:"transparent"}},children:"Terms of Service"})," ","and"," ",e.jsx(ee,{onClick:()=>n("/privacy"),sx:{fontSize:"inherit",p:0,minWidth:"auto",textTransform:"none",textDecoration:"underline","&:hover":{background:"transparent"}},children:"Privacy Policy"})]})]})]})]})})})})})},Xx=()=>{const t=g.useRef([]),a=g.useRef(null),[n,s]=g.useState([]),[r,o]=g.useState(""),p=g.useId(),[c,x]=g.useState({width:0,height:0}),[u,S]=g.useState("sixToCenter"),f=9,v=0,j="silver",T=6,k=.5,B="#ffaa40",_="#9c40ff",K=0,w=0,N=0,R=0,L=0,D={x1:["10%","110%"],x2:["0%","100%"],y1:["0%","0%"],y2:["0%","0%"]};return g.useEffect(()=>{const P=()=>{if(t.current.length>=8){const y=t.current.slice(0,7).map(F=>{var re;if(!F||!a.current)return"";const h=a.current.getBoundingClientRect(),b=F.getBoundingClientRect(),M=(re=t.current[7])==null?void 0:re.getBoundingClientRect();if(!M)return"";const W=h.width,C=h.height;x({width:W,height:C});const $=b.left-h.left+b.width/2+K,G=b.top-h.top+b.height/2+w,ge=M.left-h.left+M.width/2+N,Ae=M.top-h.top+M.height/2+R,ae=G-L;return`M ${$},${G} Q ${($+ge)/2},${ae} ${ge},${Ae}`});s(y.filter(Boolean))}},A=()=>{var ae,Y;if(!a.current)return"";const y=a.current.getBoundingClientRect(),F=(ae=t.current[7])==null?void 0:ae.getBoundingClientRect(),h=(Y=t.current[8])==null?void 0:Y.getBoundingClientRect();if(!h||!F)return"";const b=y.width,M=y.height;x({width:b,height:M});const W=F.left-y.left+F.width/2+K,C=F.top-y.top+F.height/2+w,$=h.left-y.left+h.width/2+N,G=h.top-y.top+h.height/2+R,ge=C-L,Ae=`M ${W},${C} Q ${(W+$)/2},${ge} ${$},${G}`;o(Ae)},O=new ResizeObserver(y=>{for(const F of y)console.log("ResizeObserver entry:",F),P(),A()});return a.current&&O.observe(a.current),P(),A(),()=>{O.disconnect()}},[]),g.useEffect(()=>{let P;return u==="sixToCenter"?P=setTimeout(()=>{S("centerToImage")},1500):u==="centerToImage"?P=setTimeout(()=>{S("slide")},1500):u==="slide"&&(P=setTimeout(()=>{S("sixToCenter")},1500)),()=>clearTimeout(P)},[u]),e.jsxs(I,{container:!0,sx:{height:"100vh",zIndex:1,position:"relative"},children:[e.jsx(I,{item:!0,xs:12,md:6,sx:{background:"linear-gradient(to right bottom, #26d2d2, #006E89, #004B6B)",color:"white",display:"flex",width:"100%",zIndex:1,justifyContent:"center",padding:"0 40px",flexDirection:"column"},children:e.jsxs("div",{ref:a,style:{color:"white",position:"relative",display:"flex",width:"100%",margin:"0 auto",marginLeft:"130px",justifyContent:"space-between",alignItems:"center",flexDirection:"row",columnGap:"130px"},children:[e.jsxs("svg",{fill:"none",width:c.width,height:c.height,xmlns:"http://www.w3.org/2000/svg",className:ji("pointer-events-none absolute left-0 top-0 transform-gpu stroke-2"),viewBox:`0 0 ${c.width} ${c.height}`,children:[n.map((P,A)=>e.jsxs(Ft.Fragment,{children:[e.jsx("path",{d:P,stroke:j,strokeWidth:T,strokeOpacity:k,strokeLinecap:"round"}),e.jsx("path",{d:P,strokeWidth:T,stroke:`url(#${p})`,strokeOpacity:"1",strokeLinecap:"round"})]},A)),e.jsx("defs",{children:e.jsxs(yi.linearGradient,{className:"transform-gpu",id:p,gradientUnits:"userSpaceOnUse",initial:{x1:"0%",x2:"0%",y1:"0%",y2:"0%"},animate:{x1:D.x1,x2:D.x2,y1:D.y1,y2:D.y2},transition:{delay:v,duration:f,ease:[.16,1,.3,1],repeat:1/0,repeatDelay:3},children:[e.jsx("stop",{stopColor:B,stopOpacity:"0"}),e.jsx("stop",{stopColor:B}),e.jsx("stop",{offset:"32.5%",stopColor:_}),e.jsx("stop",{offset:"100%",stopColor:_,stopOpacity:"0"})]})})]}),e.jsxs("svg",{fill:"none",width:c.width,height:c.height,xmlns:"http://www.w3.org/2000/svg",className:ji("pointer-events-none absolute left-0 top-0 transform-gpu stroke-2"),viewBox:`0 0 ${c.width} ${c.height}`,children:[e.jsx("path",{d:r,stroke:j,strokeWidth:T,strokeOpacity:k,strokeLinecap:"round"}),e.jsx("path",{d:r,strokeWidth:T,stroke:`url(#${p})`,strokeOpacity:"1",strokeLinecap:"round"}),e.jsx("defs",{children:e.jsxs(yi.linearGradient,{className:"transform-gpu",id:p,gradientUnits:"userSpaceOnUse",initial:{x1:"0%",x2:"0%",y1:"0%",y2:"0%"},onAnimationComplete:()=>{S("slide")},animate:{x1:D.x1,x2:D.x2,y1:D.y1,y2:D.y2},transition:{delay:v,duration:f,ease:[.16,1,.3,1],repeat:1/0,repeatDelay:0},children:[e.jsx("stop",{stopColor:B,stopOpacity:"0"}),e.jsx("stop",{stopColor:B}),e.jsx("stop",{offset:"32.5%",stopColor:_}),e.jsx("stop",{offset:"100%",stopColor:_,stopOpacity:"0"})]})})]}),e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[jl,vl,Sl,_l,wl,Cl,kl].map((P,A)=>e.jsx("div",{ref:O=>t.current[A]=O,style:{zIndex:10,height:"70px",width:"70px",marginTop:"10px",marginBottom:"10px"},children:e.jsx("img",{src:P,alt:`Logo${A+1}`,style:{borderRadius:"50%",zIndex:10,backgroundColor:"white",padding:"5px",objectFit:"contain"}})},A))}),e.jsx("div",{style:{zIndex:100,height:"100px",width:"100px",objectFit:"contain"},ref:P=>t.current[7]=P,children:e.jsx("img",{src:Ya,alt:"Logo",style:{borderRadius:"50%",height:"100px",width:"fit-content",objectFit:"contain",backgroundColor:"white"}})}),e.jsx("div",{ref:P=>t.current[8]=P,style:{position:"relative",display:"flex",flexDirection:"column",height:"200px",width:"200px",zIndex:100,overflow:"visible"},children:e.jsx("img",{src:So,alt:"Logo",style:{position:"absolute",top:"0",left:"0",filter:"drop-shadow(0px 0px 8px rgba(0, 0, 0, 0.25))",borderRadius:"10px",height:"200px",width:"200px",objectFit:"contain"}})})]})}),e.jsx(I,{item:!0,sm:12,md:6,sx:{width:"100%",display:"flex",alignItems:"center",flexDirection:"row"},children:e.jsx(l,{sx:{width:"100%",display:"flex",justifyContent:"center",flexDirection:"row"},children:e.jsx(Zx,{})})})]})},ai=ye("view/analytics/data",async({year:t,company_id:a},{rejectWithValue:n})=>{var s,r;try{const o=await be.get(`/invoices/get/analytics?company_id=${a}&financial_year=${t}`);return console.log("View Analytics Data API Response",o),o.data.success===!0?{statsData:o.data.data}:n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}}),ri=ye("view/monthly/data",async({year:t,company_id:a},{rejectWithValue:n})=>{var s,r;try{const o=await be.get(`/invoices/get/analytics/monthly?company_id=${a}&financial_year=${t}`);return console.log("View Monthly Data API Response",o),o.data.success===!0?{monthlyData:o.data.data}:n("Login Failed: No access token recieved.")}catch(o){return n((r=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:r.message)}}),ni=ye("view/daily/data",async({month:t,year:a,company_id:n},{rejectWithValue:s})=>{var r,o;try{const p=await be.get(`/invoices/get/analytics/daily?company_id=${n}&financial_month=${t}&financial_year=${a}`);return console.log("View Daily Data API Response",p),p.data.success===!0?{dailyData:p.data.data[0]}:s("Login Failed: No access token recieved.")}catch(p){return s((o=(r=p==null?void 0:p.response)==null?void 0:r.data)==null?void 0:o.message)}}),ep=[{label:"April",value:4},{label:"May",value:5},{label:"June",value:6},{label:"July",value:7},{label:"August",value:8},{label:"September",value:9},{label:"October",value:10},{label:"November",value:11},{label:"December",value:12},{label:"January",value:1},{label:"February",value:2},{label:"March",value:3}],tp=({month:t,year:a,onMonthChange:n,onYearChange:s,startYear:r=2e3,endYear:o=new Date().getFullYear()})=>e.jsxs(I,{container:!0,spacing:1,children:[e.jsx(I,{item:!0,xs:6,children:e.jsx(X,{fullWidth:!0,size:"small",label:"Month",name:"month",value:t.toString(),onChange:p=>{n(parseInt(p.target.value))},required:!0,select:!0,variant:"outlined",children:ep.map(p=>e.jsx(he,{value:p.value,children:p.label},p.value))})}),e.jsx(I,{item:!0,xs:6,children:e.jsx(X,{fullWidth:!0,size:"small",label:"Year",disabled:!0,name:"year",value:a.toString(),onChange:p=>{s(parseInt(p.target.value))},required:!0,select:!0,variant:"outlined",children:Array.from({length:o-r+1},(p,c)=>r+c).reverse().map(p=>e.jsx(he,{value:p,children:p},p))})})]});function ns({color:t,id:a}){return e.jsx("defs",{children:e.jsxs("linearGradient",{id:a,x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:t,stopOpacity:.5}),e.jsx("stop",{offset:"100%",stopColor:t,stopOpacity:0})]})})}function ap(t,a){const n=new Date(a,t,0),s=n.toLocaleDateString("en-US",{month:"short"}),r=n.getDate(),o=[];let p=1;for(;o.length<r;)o.push(`${s} ${p}`),p+=1;return o}const rp=()=>e.jsx(Ne,{sx:{height:"100%",minHeight:100},children:e.jsxs(Me,{children:[e.jsx(pe,{variant:"text",width:"60%",height:20}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",mt:1,gap:1},children:[e.jsx(pe,{variant:"text",width:30,height:40}),e.jsx(pe,{variant:"text",width:"70%",height:40})]})]})}),Gr=({title:t,value:a,loading:n,icon:s})=>{const r=we();return n?e.jsx(rp,{}):e.jsx(Ye,{in:!0,timeout:300,children:e.jsx(Ne,{sx:{height:"100%",minHeight:100,transition:"all 0.3s ease",background:a>0?`linear-gradient(135deg, ${d(r.palette.primary.main,.02)} 0%, ${d(r.palette.primary.main,.08)} 100%)`:`linear-gradient(135deg, ${d(r.palette.error.main,.02)} 0%, ${d(r.palette.error.main,.08)} 100%)`,border:a>0?`1px solid ${d(r.palette.primary.main,.12)}`:`1px solid ${d(r.palette.error.main,.12)}`},children:e.jsxs(Me,{children:[e.jsxs(J,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",sx:{mb:1},children:[e.jsx(i,{variant:"body2",sx:{fontWeight:600,color:a>0?r.palette.text.primary:r.palette.error.main},children:t}),s&&e.jsx(l,{sx:{color:r.palette.primary.main,opacity:.7,"& svg":{fontSize:20}},children:s})]}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(i,{variant:"h4",sx:{fontWeight:700,color:a>0?r.palette.text.primary:r.palette.error.main,fontSize:{xs:"1.2rem",sm:"1.5rem"}},children:"₹"}),e.jsx(i,{variant:"h4",component:"div",sx:{fontWeight:600,fontSize:{xs:"1.2rem",sm:"1.5rem"},color:a>0?r.palette.text.primary:r.palette.error.main},children:a||0})]})]})})})},is=({height:t=250})=>e.jsx(Ne,{variant:"outlined",sx:{width:"100%"},children:e.jsx(Me,{children:e.jsxs(J,{spacing:2,children:[e.jsxs(J,{direction:"row",justifyContent:"space-between",children:[e.jsxs(J,{spacing:1,children:[e.jsx(pe,{variant:"text",width:"40%",height:24}),e.jsxs(J,{direction:"row",gap:1,children:[e.jsx(pe,{variant:"text",width:80,height:32}),e.jsx(pe,{variant:"rectangular",width:100,height:24,sx:{borderRadius:1}})]})]}),e.jsxs(J,{direction:"row",gap:2,children:[e.jsx(pe,{variant:"rectangular",width:120,height:32}),e.jsx(pe,{variant:"rectangular",width:150,height:32})]})]}),e.jsxs(l,{sx:{position:"relative",height:t},children:[e.jsx(pe,{variant:"rectangular",width:"100%",height:"100%",sx:{borderRadius:1}}),e.jsx(l,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:e.jsx(bt,{size:40})})]})]})})}),np=()=>{var y,F,h,b,M,W,C,$,G,ge,Ae,ae,Y,re,Te,V;const t=we(),{monthlyData:a,dailyData:n,statsData:s}=Ce(z=>z.analytics),{user:r,current_company_id:o}=Ce(z=>z.auth),p=o||localStorage.getItem("current_company_id")||((y=r==null?void 0:r.user_settings)==null?void 0:y.current_company_id)||"",c=(F=r==null?void 0:r.company)==null?void 0:F.find(z=>z._id===p),x=Fe(),[u,S]=g.useState(new Date().getMonth()+1),[f,v]=g.useState(new Date().getFullYear()),[j,T]=g.useState(!0),[k,B]=g.useState(!0),[_,K]=g.useState(!0),[w,N]=g.useState(!0),R=["#c62828","#2e7d32","hsl(195, 85%, 40%)"],L=["January","February","March","April","May","June","July","August","September","October","November","December"],D=3,P=[...L.slice(D),...L.slice(0,D)],A=z=>{if(!Array.isArray(z))return[];const de=z.slice(0,L.length);return[...de.slice(D),...de.slice(0,D)].slice(0,P.length)},O=ap((n==null?void 0:n.month)??u,(n==null?void 0:n.year)??f);return g.useEffect(()=>{(async()=>{if(c!=null&&c._id){T(!0),B(!0);try{await Promise.all([x(ai({company_id:c._id,year:f})),x(ri({company_id:c._id,year:f}))])}finally{setTimeout(()=>{T(!1),B(!1)},w?1e3:300)}}})()},[c==null?void 0:c._id,f,x,w]),g.useEffect(()=>{(async()=>{if(c!=null&&c._id){K(!0);try{await x(ni({company_id:c._id,month:u,year:f}))}finally{setTimeout(()=>{K(!1),w&&N(!1)},w?1200:300)}}})()},[c==null?void 0:c._id,u,f,x,w]),e.jsx(ze,{in:!0,timeout:500,children:e.jsxs(l,{children:[e.jsx(Ja,{title:"Reports & Analytics",subtitle:"View comprehensive reports and analytics for better insights."}),e.jsxs(I,{container:!0,spacing:3,sx:{mb:2},children:[e.jsx(I,{item:!0,xs:12,sm:6,md:2.4,children:e.jsx(Gr,{title:"Opening Value (Yearly)",value:s==null?void 0:s.opening,loading:j})}),e.jsx(I,{item:!0,xs:12,sm:6,md:2.4,children:e.jsx(Gr,{title:"Net Purchases (Yearly)",value:s==null?void 0:s.purchase,loading:j})}),e.jsx(I,{item:!0,xs:12,sm:6,md:2.4,children:e.jsx(Gr,{title:"Net Sales (Yearly)",value:s==null?void 0:s.sales,loading:j})}),e.jsx(I,{item:!0,xs:12,sm:6,md:2.4,children:e.jsx(Gr,{title:"Net Profit (Yearly)",value:s==null?void 0:s.profit,loading:j})}),e.jsx(I,{item:!0,xs:12,sm:6,md:2.4,children:e.jsx(Gr,{title:"Current Remaining",value:s==null?void 0:s.current,loading:j})})]}),e.jsxs(I,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(I,{item:!0,xs:12,children:_?e.jsx(is,{height:320}):e.jsx(ze,{in:!0,timeout:600,children:e.jsx(Ne,{variant:"outlined",sx:{width:"100%",borderWidth:2,border:`1px solid ${d(t.palette.primary.main,.5)}`},children:e.jsxs(Me,{sx:{p:0},children:[e.jsxs(J,{direction:"row",alignItems:"center",sx:{justifyContent:"space-between",mb:3},children:[e.jsxs(J,{direction:"column",children:[e.jsxs(i,{component:"h2",variant:"h6",gutterBottom:!0,sx:{fontWeight:600,color:t.palette.text.primary},children:["Daily Financial Overview - ",iu(u)," ",(n==null?void 0:n.year)??f]}),e.jsxs(J,{direction:"row",alignItems:"center",gap:2,children:[e.jsxs(i,{variant:"h4",component:"p",sx:{fontWeight:600,color:t.palette.primary.main},children:["₹",(n==null?void 0:n.sales)??0]}),e.jsx(ve,{size:"small",color:"success",label:"Total Sales",sx:{fontWeight:500}})]})]}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",flexWrap:"wrap",gap:2,mr:1},children:[e.jsxs(J,{direction:"row",spacing:2,sx:{flexWrap:"wrap"},children:[e.jsxs(l,{sx:{display:"flex",gap:.5,alignItems:"center"},children:[e.jsx(Dr,{sx:{color:"#c62828",fontSize:12}}),e.jsx(i,{variant:"caption",sx:{fontWeight:500},children:"Sales"})]}),e.jsxs(l,{sx:{display:"flex",gap:.5,alignItems:"center"},children:[e.jsx(Dr,{sx:{color:"#2e7d32",fontSize:12}}),e.jsx(i,{variant:"caption",sx:{fontWeight:500},children:"Purchases"})]})]}),e.jsx(tp,{month:u,year:f,onMonthChange:S,onYearChange:v,startYear:2020,endYear:2030})]})]}),n&&e.jsx(Lo,{colors:R,xAxis:[{scaleType:"point",data:O,tickInterval:(z,de)=>(de+1)%2===0}],series:[{id:"sales",label:((b=(h=n==null?void 0:n.data)==null?void 0:h.find(z=>z.id==="sales"))==null?void 0:b.label)||"Daily Sales (₹)",showMark:!0,curve:"catmullRom",connectNulls:!0,area:!0,data:((W=(M=n==null?void 0:n.data)==null?void 0:M.find(z=>z.id==="sales"))==null?void 0:W.data.slice(0,O.length))||[]},{id:"purchase",label:(($=(C=n==null?void 0:n.data)==null?void 0:C.find(z=>z.id==="purchase"))==null?void 0:$.label)||"Daily Purchases (₹)",showMark:!0,curve:"catmullRom",connectNulls:!0,data:((ge=(G=n==null?void 0:n.data)==null?void 0:G.find(z=>z.id==="purchase"))==null?void 0:ge.data.slice(0,O.length))||[]}],height:280,margin:{left:60,right:20,top:20,bottom:40},grid:{horizontal:!0},sx:{"& .MuiAreaElement-series-sales":{fill:"url('#sales')"}},slotProps:{legend:{hidden:!0}},children:e.jsx(ns,{color:"#c62828",id:"sales"})})]})})})}),e.jsx(I,{item:!0,xs:12,children:k?e.jsx(is,{height:320}):e.jsx(ze,{in:!0,timeout:800,children:e.jsx(Ne,{variant:"outlined",sx:{width:"100%",borderWidth:2,border:`1px solid ${d(t.palette.primary.main,.5)}`},children:e.jsxs(Me,{sx:{p:0},children:[e.jsxs(J,{direction:"row",alignItems:"center",sx:{justifyContent:"space-between",mb:3},children:[e.jsxs(J,{direction:"column",children:[e.jsxs(i,{component:"h2",variant:"h6",gutterBottom:!0,sx:{fontWeight:600,color:t.palette.text.primary,mb:2},children:["Monthly Financial Overview - FY ",(a==null?void 0:a.year)??f]}),e.jsx(J,{sx:{justifyContent:"space-between",mb:3},children:e.jsxs(J,{direction:"row",alignItems:"center",gap:2,children:[e.jsxs(i,{variant:"h4",component:"p",sx:{fontWeight:600,color:t.palette.primary.main},children:["₹",a==null?void 0:a.sales]}),e.jsx(ve,{size:"small",color:"success",label:"Total Sales",sx:{fontWeight:500}})]})})]}),e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",flexWrap:"wrap",gap:2,mr:1},children:e.jsxs(J,{direction:"row",spacing:2,sx:{flexWrap:"wrap"},children:[e.jsxs(l,{sx:{display:"flex",gap:.5,alignItems:"center"},children:[e.jsx(Dr,{sx:{color:"#c62828",fontSize:12}}),e.jsx(i,{variant:"caption",sx:{fontWeight:500},children:"Sales"})]}),e.jsxs(l,{sx:{display:"flex",gap:.5,alignItems:"center"},children:[e.jsx(Dr,{sx:{color:"#2e7d32",fontSize:12}}),e.jsx(i,{variant:"caption",sx:{fontWeight:500},children:"Purchases"})]}),e.jsxs(l,{sx:{display:"flex",gap:.5,alignItems:"center"},children:[e.jsx(Dr,{sx:{color:"hsl(195, 85%, 40%)",fontSize:12}}),e.jsx(i,{variant:"caption",sx:{fontWeight:500},children:"Profit"})]})]})})]}),e.jsx(Lo,{colors:R,xAxis:[{scaleType:"point",data:P,tickInterval:(z,de)=>(de+1)%1===0}],series:[{id:"series-0",label:((Ae=a==null?void 0:a.data.find(z=>z.id==="sales"))==null?void 0:Ae.label)||"Monthly Sales (₹)",showMark:!0,curve:"catmullRom",connectNulls:!0,data:A((ae=a==null?void 0:a.data.find(z=>z.id==="sales"))==null?void 0:ae.data)},{id:"series-1",label:((Y=a==null?void 0:a.data.find(z=>z.id==="purchase"))==null?void 0:Y.label)||"Monthly Purchases (₹)",showMark:!0,curve:"catmullRom",connectNulls:!0,data:A((re=a==null?void 0:a.data.find(z=>z.id==="purchase"))==null?void 0:re.data)},{id:"profit",label:((Te=a==null?void 0:a.data.find(z=>z.id==="profit"))==null?void 0:Te.label)||"Monthly Profit (₹)",showMark:!0,curve:"catmullRom",connectNulls:!0,area:!0,data:A((V=a==null?void 0:a.data.find(z=>z.id==="profit"))==null?void 0:V.data)}],height:280,margin:{left:60,right:20,top:20,bottom:40},grid:{horizontal:!0},sx:{"& .MuiAreaElement-series-profit":{fill:"url('#series')"}},slotProps:{legend:{hidden:!0}},children:e.jsx(ns,{color:"hsl(195, 70%, 65%)",id:"series"})})]})})})})]})]})})};function ip(){return e.jsx(Je,{maxWidth:!1,sx:{p:3,width:"100%"},children:e.jsx(np,{})})}const op=Ge(xe)(({theme:t})=>({position:"relative",transition:"all 0.2s ease",cursor:"pointer","& .MuiTableCell-root":{padding:"8px 16px",borderBottom:`1px solid ${d(t.palette.divider,.06)}`,fontWeight:500,transition:"all 0.2s ease"},"&:hover":{backgroundColor:d(t.palette.primary.main,.04),transform:"translateX(4px)",transition:"all 0.2s ease","& .expand-button":{backgroundColor:d(t.palette.primary.main,.1),transform:"scale(1.1)"}},"&.expanded":{backgroundColor:d(t.palette.primary.main,.02)}})),sp=Ge(ke)(({theme:t})=>({transition:"all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)",borderRadius:t.spacing(1.5),padding:t.spacing(.8),backgroundColor:d(t.palette.grey[100],.6),"&:hover":{backgroundColor:d(t.palette.primary.main,.1),transform:"scale(1.1)"},"&.expanded":{backgroundColor:d(t.palette.primary.main,.1)}})),lp=Ge(l)(({theme:t})=>({display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:t.spacing(1),backgroundColor:d(t.palette.primary.main,.1),color:t.palette.primary.main,fontWeight:700,fontSize:"0.85rem",marginRight:t.spacing(1),transition:"all 0.3s ease"})),dp=Ge(it)(({theme:t})=>({backgroundColor:d(t.palette.background.paper,.6),backdropFilter:"blur(10px)",borderRadius:1,overflow:"hidden","& .MuiTableHead-root":{backgroundColor:d(t.palette.primary.main,.08),"& .MuiTableCell-head":{fontWeight:700,fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"0.5px",color:t.palette.text.primary,padding:t.spacing(1.5,2),borderBottom:`2px solid ${d(t.palette.primary.main,.1)}`}},"& .MuiTableBody-root":{"& .MuiTableRow-root":{transition:"all 0.2s ease","&:hover":{backgroundColor:d(t.palette.primary.main,.03),transform:"scale(1.002)"},"& .MuiTableCell-body":{padding:t.spacing(1.5,2),fontSize:"0.85rem",borderBottom:`1px solid ${d(t.palette.divider,.05)}`}}}})),cp=Ge(ve)(({theme:t})=>({borderRadius:t.spacing(1.5),fontWeight:600,"&.sales":{backgroundColor:d(t.palette.success.main,.1),color:t.palette.success.dark,border:`1px solid ${d(t.palette.success.main,.2)}`},"&.purchase":{backgroundColor:d(t.palette.info.main,.1),color:t.palette.info.dark,border:`1px solid ${d(t.palette.info.main,.2)}`}})),yn=Ge(l)(({theme:t})=>({display:"flex",whiteSpace:"nowrap",flexDirection:"column",alignItems:"flex-end","& .value":{fontWeight:700,fontSize:"0.95rem",lineHeight:1.2},"& .label":{fontSize:"0.7rem",color:t.palette.text.secondary,textTransform:"uppercase",letterSpacing:"0.5px",marginTop:t.spacing(.2)}})),up=Ge(xe)(({theme:t})=>({backgroundColor:d(t.palette.grey[50],.8),"& .MuiTableCell-root":{fontWeight:700,fontSize:"0.9rem",color:t.palette.text.primary,borderTop:`2px solid ${d(t.palette.primary.main,.1)}`,borderBottom:"none",padding:t.spacing(1.5,2)}})),xp=t=>{var T,k;const a=we(),n=Ke(),{row:s,serial:r}=t,[o,p]=g.useState(!1),[c,x]=g.useState(!1),u=g.useMemo(()=>{var B;return(B=s.invoices)!=null&&B.length?s.invoices.reduce((_,K)=>({totalAmount:_.totalAmount+(K.total_amount||0),taxableValue:_.taxableValue+(K.taxable_value||0),totalTax:_.totalTax+(K.total_tax||0),totalQty:_.totalQty+(K.quantity||0)}),{totalAmount:0,taxableValue:0,totalTax:0,totalQty:0}):{totalAmount:0,taxableValue:0,totalTax:0,totalQty:0}},[s.invoices]),S=B=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(B),f=B=>new Intl.NumberFormat("en-IN").format(B),v=()=>{p(!o)},j=(B,_)=>{_.stopPropagation(),n(`/invoices/${B}`)};return e.jsxs(e.Fragment,{children:[e.jsxs(op,{className:o?"expanded":"",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),onClick:v,children:[e.jsx(m,{children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(lp,{sx:{transform:c?"scale(1.1)":"scale(1)",backgroundColor:c?d(a.palette.primary.main,.2):d(a.palette.primary.main,.1)},children:r}),e.jsx(le,{title:o?"Collapse details":"Expand details",arrow:!0,children:e.jsx(sp,{className:`expand-button ${o?"expanded":""}`,size:"small",onClick:B=>{B.stopPropagation(),p(!o)},children:o?e.jsx(go,{}):e.jsx(bo,{})})}),((T=s.invoices)==null?void 0:T.length)>0&&e.jsx(Ka,{badgeContent:s.invoices.length,color:"primary",sx:{"& .MuiBadge-badge":{fontSize:"0.7rem",minWidth:18,height:18}},children:e.jsx(fi,{fontSize:"small",color:"action"})})]})}),e.jsx(m,{children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1.5,whiteSpace:"nowrap"},children:[e.jsx($e,{sx:{width:32,height:32,bgcolor:d(a.palette.secondary.main,.1),color:a.palette.secondary.main,fontSize:"0.8rem",fontWeight:700},children:((k=s.hsn_code)==null?void 0:k.substring(0,2))||"HS"}),e.jsxs(l,{children:[e.jsx(i,{variant:"body1",fontWeight:"600",color:"primary.main",children:s.hsn_code}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"HSN Code"})]})]})}),e.jsx(m,{children:e.jsx(l,{children:e.jsx(i,{variant:"body1",fontWeight:"600",sx:{whiteSpace:"nowrap",mb:.5,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:1.3},children:s.item})})}),e.jsx(m,{children:e.jsx(ve,{label:s.unit||"N/A",size:"small",color:"default",variant:"outlined",sx:{fontWeight:600,minWidth:50,fontSize:"0.75rem"}})}),e.jsx(m,{children:e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1,whiteSpace:"nowrap"},children:e.jsx(i,{variant:"h6",fontWeight:"700",color:"primary.main",children:f(s.quantity||0)})})}),e.jsx(m,{children:e.jsxs(yn,{children:[e.jsx(i,{className:"value",color:"success.main",children:S(s.total_value||0)}),e.jsx(i,{className:"label",children:"Total Value"})]})}),e.jsx(m,{children:e.jsxs(yn,{children:[e.jsx(i,{className:"value",color:"primary.main",children:S(s.taxable_value||0)}),e.jsx(i,{className:"label",children:"Taxable"})]})}),e.jsx(m,{children:e.jsxs(yn,{children:[e.jsxs(i,{className:"value",color:"primary.main",children:[S(s.tax_rate||0),"%"]}),e.jsx(i,{className:"label",children:"Tax Rate"})]})}),e.jsx(m,{children:e.jsxs(yn,{children:[e.jsx(i,{className:"value",color:"warning.main",children:S(s.tax_amount||0)}),e.jsx(i,{className:"label",children:"Tax Amount"}),s.taxable_value&&s.tax_amount&&e.jsx(St,{variant:"determinate",value:s.tax_amount/s.taxable_value*100,sx:{width:40,height:3,mt:.5,borderRadius:2,backgroundColor:d(a.palette.warning.main,.1),"& .MuiLinearProgress-bar":{backgroundColor:a.palette.warning.main}}})]})})]}),e.jsx(xe,{children:e.jsx(m,{style:{paddingBottom:0,paddingTop:0,borderTop:o?`2px solid ${d(a.palette.divider,.99)}`:"none",borderBottom:o?`2px solid ${d(a.palette.divider,.99)}`:"none"},colSpan:9,children:e.jsx(Xt,{in:o,timeout:500,children:e.jsx(l,{sx:{margin:1},children:e.jsx(ze,{in:o,children:e.jsxs(l,{children:[e.jsx(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,pb:1,borderBottom:`2px solid ${d(a.palette.divider,.1)}`},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx($e,{sx:{bgcolor:d(a.palette.primary.main,.1),color:"primary.main",width:48,height:48},children:e.jsx(rr,{})}),e.jsxs(l,{children:[e.jsx(i,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"Invoice Details"}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Complete transaction history for ",s.item]})]})]})}),e.jsx(ne,{elevation:0,sx:{borderRadius:1,border:`1px solid ${d(a.palette.divider,.8)}`,overflow:"hidden",mb:2},children:e.jsx(nt,{children:e.jsxs(dp,{children:[e.jsx(ot,{children:e.jsxs(xe,{children:[e.jsx(m,{children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(fo,{fontSize:"small"}),"Date"]})}),e.jsx(m,{children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Wc,{fontSize:"small"}),"Party Details"]})}),e.jsx(m,{children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(zc,{fontSize:"small"}),"TIN / GSTIN"]})}),e.jsx(m,{sx:{textAlign:"center"},children:"Type"}),e.jsx(m,{children:"Invoice No."}),e.jsx(m,{sx:{textAlign:"center"},children:"Unit"}),e.jsx(m,{sx:{textAlign:"right"},children:"QTY"}),e.jsx(m,{sx:{textAlign:"right",whiteSpace:"nowrap"},children:"Total Amount"}),e.jsx(m,{sx:{textAlign:"right",whiteSpace:"nowrap"},children:"Taxable Value"}),e.jsx(m,{sx:{textAlign:"right",whiteSpace:"nowrap"},children:"Tax Amount"})]})}),e.jsxs(st,{children:[s.invoices&&s.invoices.length>0?s.invoices.map((B,_)=>e.jsx(Ye,{in:o,style:{transitionDelay:`${_*100}ms`},children:e.jsxs(xe,{hover:!0,sx:{cursor:"pointer",transition:"all 0.2s ease","&:hover":{backgroundColor:d(a.palette.primary.main,.04),transform:"scale(1.01)",boxShadow:`0 2px 8px ${d(a.palette.primary.main,.15)}`}},children:[e.jsx(m,{children:e.jsxs(l,{sx:{whiteSpace:"nowrap"},children:[e.jsx(i,{variant:"body2",fontWeight:600,children:Nt(B.date)}),e.jsx(i,{variant:"caption",color:"text.secondary",children:new Date(B.date).toLocaleDateString("en-US",{weekday:"short"})})]})}),e.jsx(m,{children:e.jsxs(l,{children:[e.jsx(i,{variant:"body2",fontWeight:600,sx:{whiteSpace:"nowrap",display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden",mb:.5},children:B.party_name}),B.party_tin&&e.jsx(i,{variant:"caption",color:"text.secondary",children:B.party_tin})]})}),e.jsx(m,{children:e.jsx(ve,{label:B.party_tin||"N/A",size:"small",variant:"outlined",sx:{whiteSpace:"nowrap",fontSize:"0.7rem",maxWidth:"100%"}})}),e.jsx(m,{align:"center",children:e.jsx(cp,{label:"Sales",size:"small",className:"sales"})}),e.jsx(m,{children:e.jsxs(l,{sx:{display:"flex",whiteSpace:"nowrap",alignItems:"center",gap:1},children:[e.jsx(i,{variant:"body2",fontWeight:600,color:"primary.main",children:B.voucher_number}),e.jsx(ke,{size:"small",onClick:K=>j(B.voucher_id,K),sx:{opacity:.7,"&:hover":{opacity:1}},children:e.jsx(Es,{fontSize:"small"})})]})}),e.jsx(m,{align:"center",children:e.jsx(ve,{label:s.unit||"N/A",size:"small",color:"default",sx:{fontSize:"0.7rem",whiteSpace:"nowrap"}})}),e.jsx(m,{align:"right",sx:{whiteSpace:"nowrap"},children:e.jsx(i,{variant:"body2",fontWeight:600,children:f(B.quantity||0)})}),e.jsx(m,{align:"right",children:e.jsx(i,{variant:"body2",fontWeight:700,color:"success.main",children:S(B.total_amount||0)})}),e.jsx(m,{align:"right",children:e.jsx(i,{variant:"body2",fontWeight:600,color:"primary.main",children:S(B.taxable_value||0)})}),e.jsx(m,{align:"right",children:e.jsx(i,{variant:"body2",fontWeight:600,color:"warning.main",children:S(B.total_tax||0)})})]})},`${B.voucher_id}-${_}-${s.item_id}-${s.hsn_code}`)):e.jsx(xe,{children:e.jsx(m,{colSpan:10,align:"center",sx:{py:4},children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,color:"text.secondary"},children:[e.jsx(fi,{sx:{fontSize:48,opacity:.5}}),e.jsx(i,{variant:"body1",fontWeight:600,children:"No invoices found"}),e.jsx(i,{variant:"body2",children:"This item hasn't been used in any transactions yet."})]})})}),s.invoices&&s.invoices.length>0&&e.jsxs(up,{children:[e.jsx(m,{children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(rr,{fontSize:"small",color:"primary"}),e.jsx(i,{variant:"subtitle2",fontWeight:800,children:"Totals"})]})}),e.jsx(m,{}),e.jsx(m,{}),e.jsx(m,{align:"center",children:e.jsx(ve,{label:`${s.invoices.length} invoices`,size:"small",color:"primary",variant:"outlined"})}),e.jsx(m,{}),e.jsx(m,{}),e.jsx(m,{align:"right"}),e.jsx(m,{align:"right",children:e.jsx(i,{variant:"subtitle2",fontWeight:800,color:"success.main",children:S(u.totalAmount)})}),e.jsx(m,{align:"right",children:e.jsx(i,{variant:"subtitle2",fontWeight:800,color:"primary.main",children:S(u.taxableValue)})}),e.jsx(m,{align:"right",children:e.jsx(i,{variant:"subtitle2",fontWeight:800,color:"warning.main",children:S(u.totalTax)})})]})]})]})})})]})})})})})})]})},pp=Ge(nt)(({theme:t})=>({borderRadius:1,border:`1px solid ${d(t.palette.divider,.8)}`,background:`
        linear-gradient(135deg, 
            ${d("#ffffff",.95)} 0%, 
            ${d("#fafbfc",.95)} 100%
        )
    `,backdropFilter:"blur(20px)",overflowX:"scroll",transition:"all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:`linear-gradient(90deg, 
            ${t.palette.primary.main} 0%, 
            ${t.palette.secondary.main} 50%, 
            ${t.palette.primary.main} 100%
        )`,borderRadius:`${t.spacing(3)} ${t.spacing(3)} 0 0`}})),qi=Ge(Ue)(({theme:t})=>({display:"flex",alignItems:"center",gap:t.spacing(.5),"& .MuiTableSortLabel-icon":{color:t.palette.primary.main,opacity:.6,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:"scale(0.9)"},"&:hover":{color:t.palette.primary.main,"& .MuiTableSortLabel-icon":{opacity:1,transform:"scale(1.1)"}},"&.Mui-active":{color:t.palette.primary.main,fontWeight:700,"& .MuiTableSortLabel-icon":{color:t.palette.primary.main,opacity:1,transform:"scale(1.1)"}}})),hp=Ge(l)(({theme:t})=>({padding:t.spacing(10,6),textAlign:"center",background:`
        linear-gradient(135deg, 
            ${d(t.palette.grey[50],.8)} 0%, 
            ${d(t.palette.grey[100],.4)} 100%
        )
    `,borderRadius:t.spacing(3),margin:t.spacing(3),position:"relative",overflow:"hidden"})),mp=Ge(xe)(({theme:t})=>({background:`
        linear-gradient(135deg, 
            ${d(t.palette.primary.main,.08)} 0%, 
            ${d(t.palette.primary.main,.04)} 50%,
            ${d(t.palette.secondary.main,.06)} 100%
        )
    `,backdropFilter:"blur(10px)","& .MuiTableCell-root":{borderBottom:"none",borderTop:`2px solid ${d(t.palette.primary.main,.1)}`,fontWeight:800,padding:t.spacing(1,1),color:t.palette.text.primary}})),gp=t=>{const a=we(),n=Ke(),{summaryData:s,pageMeta:r,isLoading:o,limit:p,sortField:c,sortOrder:x,sortRequest:u,pageChange:S}=t,f=j=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(j),v=()=>e.jsx(l,{sx:{p:3},children:[1,2,3,4,5,6].map(j=>e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2,mb:2.5,p:2,borderRadius:2,bgcolor:d(a.palette.grey[50],.5)},children:[e.jsx(pe,{variant:"rectangular",width:40,height:20,sx:{borderRadius:1}}),e.jsx(pe,{variant:"text",width:"12%",height:24}),e.jsx(pe,{variant:"text",width:"25%",height:24}),e.jsx(pe,{variant:"text",width:"8%",height:24}),e.jsx(pe,{variant:"text",width:"10%",height:24}),e.jsx(pe,{variant:"text",width:"12%",height:24}),e.jsx(pe,{variant:"text",width:"12%",height:24}),e.jsx(pe,{variant:"text",width:"13%",height:24})]},j))});return e.jsxs(l,{sx:{width:"100%",mt:2},children:[e.jsx(ze,{in:!0,timeout:600,children:e.jsx(pp,{children:o?v():(s==null?void 0:s.length)===0?e.jsx(hp,{children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:3},children:[e.jsx(l,{sx:{p:3,borderRadius:"50%",bgcolor:d(a.palette.grey[200],.5),border:`2px dashed ${d(a.palette.grey[400],.5)}`},children:e.jsx(Ht,{sx:{fontSize:64,color:a.palette.text.secondary,opacity:.7}})}),e.jsxs(l,{sx:{textAlign:"center",maxWidth:400},children:[e.jsx(i,{variant:"h4",gutterBottom:!0,fontWeight:700,children:"No HSN/SAC Code found"}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:3,lineHeight:1.6},children:"Your inventory appears to be empty or no HSN/SAC match your current search criteria."}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Try adjusting your filters or add new products with HSN/SAC to get started."})]}),e.jsx(l,{sx:{display:"flex",gap:2,flexWrap:"wrap",justifyContent:"center"},children:e.jsx(ee,{variant:"outlined",startIcon:e.jsx(Ha,{}),sx:{borderRadius:1},onClick:()=>n("/products"),children:"View All Items"})})]})}):e.jsxs(it,{sx:{width:"100%"},stickyHeader:!0,children:[e.jsx(ot,{sx:{background:`
                                        linear-gradient(135deg, 
                                            ${d(a.palette.primary.main,.12)} 0%, 
                                            ${d(a.palette.primary.main,.06)} 50%,
                                            ${d(a.palette.secondary.main,.08)} 100%
                                        )
                                    `,"& .MuiTableCell-head":{borderBottom:"none",fontWeight:800,textTransform:"uppercase",color:a.palette.text.primary,background:"transparent",backdropFilter:"blur(15px)"}},children:e.jsxs(xe,{children:[e.jsx(m,{children:e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1,whiteSpace:"nowrap"},children:e.jsx(i,{variant:"inherit",children:"# Sr. No."})})}),e.jsx(m,{sx:{whiteSpace:"nowrap"},children:e.jsx(le,{title:"Sort by HSN/SAC Code",arrow:!0,placement:"top",TransitionComponent:Ye,children:e.jsx(qi,{active:c==="hsn_code",direction:c==="hsn_code"?x:"asc",onClick:()=>u("hsn_code"),children:"HSN Code"})})}),e.jsx(m,{children:e.jsx(le,{title:"Sort by Product Name",arrow:!0,placement:"top",TransitionComponent:Ye,children:e.jsx(qi,{active:c==="stock_item_name",direction:c==="stock_item_name"?x:"asc",onClick:()=>u("stock_item_name"),children:"Product"})})}),e.jsx(m,{children:"Unit"}),e.jsx(m,{children:e.jsx(le,{title:"Sort by Total Quantity",arrow:!0,placement:"top",TransitionComponent:Ye,children:e.jsx(qi,{active:c==="current_stock",direction:c==="current_stock"?x:"asc",onClick:()=>u("current_stock"),children:"Quantity"})})}),e.jsx(m,{sx:{textAlign:"right",whiteSpace:"nowrap"},children:e.jsx(i,{variant:"inherit",children:"Total Value"})}),e.jsx(m,{sx:{textAlign:"right",whiteSpace:"nowrap"},children:e.jsx(i,{variant:"inherit",children:"Taxable Value"})}),e.jsx(m,{sx:{textAlign:"right",whiteSpace:"nowrap"},children:e.jsxs(l,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(i,{variant:"inherit",children:"Tax Rate"}),e.jsx(le,{title:"Total Tax Rate e.g. CGST + SGST",arrow:!0,placement:"top",TransitionComponent:Ye,children:e.jsx(ht,{sx:{fontSize:20,color:a.palette.text.secondary,opacity:.7}})})]})}),e.jsx(m,{sx:{textAlign:"right",whiteSpace:"nowrap"},children:e.jsx(i,{variant:"inherit",children:"Tax Amount"})})]})}),e.jsxs(st,{children:[s==null?void 0:s.map((j,T)=>{const k=T+1+((r==null?void 0:r.page)-1)*p;return e.jsx(xp,{row:j,serial:k},`${j.hsn_code}-${j.item_id}-${T}`)}),e.jsx(xe,{children:e.jsx(m,{colSpan:8,sx:{padding:0,borderBottom:"none",height:a.spacing(2),background:`linear-gradient(90deg, 
                                            transparent 0%, 
                                            ${d(a.palette.divider,.1)} 50%, 
                                            transparent 100%
                                        )`}})}),e.jsxs(mp,{children:[e.jsx(m,{colSpan:3,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",width:"fit-content",gap:1.5,py:1,whiteSpace:"nowrap",px:2,borderRadius:1,bgcolor:d(a.palette.primary.main,.08),border:`1px solid ${d(a.palette.primary.main,.5)}`},children:[e.jsx(cn,{sx:{fontSize:20,color:"primary.main"}}),e.jsx(i,{variant:"subtitle1",fontWeight:800,children:"Grand Total"})]})}),e.jsx(m,{}),e.jsx(m,{}),e.jsx(m,{sx:{textAlign:"right"},children:e.jsxs(l,{sx:{whiteSpace:"nowrap",display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[e.jsx(i,{variant:"subtitle1",fontWeight:800,color:"success.main",children:f(r.total_value)}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Total Value"})]})}),e.jsx(m,{sx:{textAlign:"right"},children:e.jsxs(l,{sx:{whiteSpace:"nowrap",display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[e.jsx(i,{variant:"subtitle1",fontWeight:800,color:"primary.main",children:f(r.taxable_value)}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Total Taxable Value"})]})}),e.jsx(m,{}),e.jsx(m,{sx:{textAlign:"right"},children:e.jsxs(l,{sx:{whiteSpace:"nowrap",display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[e.jsx(i,{variant:"subtitle1",fontWeight:800,color:"warning.main",children:f(r.tax_amount)}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Total Tax"})]})})]})]})]})})}),!o&&(s==null?void 0:s.length)>0&&e.jsx(l,{sx:{mt:3},children:e.jsx(Dt,{total:r.total,item:"items",page:r==null?void 0:r.page,metaPage:r.page,rowsPerPage:p,onChange:S})})]})},bp=Ge(xe)(({theme:t})=>({position:"relative",transition:"all 0.2s ease",cursor:"pointer","& .MuiTableCell-root":{padding:"8px 16px",borderBottom:`1px solid ${d(t.palette.divider,.06)}`,fontWeight:500,transition:"all 0.2s ease"},"&:hover":{backgroundColor:d(t.palette.primary.main,.04),transform:"translateX(4px)",transition:"all 0.2s ease","& .expand-button":{backgroundColor:d(t.palette.primary.main,.1),transform:"scale(1.1)"}},"&.expanded":{backgroundColor:d(t.palette.primary.main,.02)}})),fp=Ge(ke)(({theme:t})=>({transition:"all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)",borderRadius:t.spacing(1.5),padding:t.spacing(.8),backgroundColor:d(t.palette.grey[100],.6),"&:hover":{backgroundColor:d(t.palette.primary.main,.1),transform:"scale(1.1)"},"&.expanded":{backgroundColor:d(t.palette.primary.main,.1)}})),yp=Ge(l)(({theme:t})=>({display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:t.spacing(1),backgroundColor:d(t.palette.primary.main,.1),color:t.palette.primary.main,fontWeight:700,fontSize:"0.85rem",marginRight:t.spacing(1),transition:"all 0.3s ease"})),jp=Ge(it)(({theme:t})=>({backgroundColor:d(t.palette.background.paper,.6),backdropFilter:"blur(10px)",borderRadius:1,overflow:"hidden","& .MuiTableHead-root":{backgroundColor:d(t.palette.primary.main,.08),"& .MuiTableCell-head":{fontWeight:700,fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"0.5px",color:t.palette.text.primary,padding:t.spacing(1.5,2),borderBottom:`2px solid ${d(t.palette.primary.main,.1)}`}},"& .MuiTableBody-root":{"& .MuiTableRow-root":{transition:"all 0.2s ease","&:hover":{backgroundColor:d(t.palette.primary.main,.03),transform:"scale(1.002)"},"& .MuiTableCell-body":{padding:t.spacing(1.5,2),fontSize:"0.85rem",borderBottom:`1px solid ${d(t.palette.divider,.05)}`}}}})),vp=Ge(ve)(({theme:t})=>({borderRadius:t.spacing(1.5),fontWeight:600,"&.sales":{backgroundColor:d(t.palette.success.main,.1),color:t.palette.success.dark,border:`1px solid ${d(t.palette.success.main,.2)}`},"&.purchase":{backgroundColor:d(t.palette.info.main,.1),color:t.palette.info.dark,border:`1px solid ${d(t.palette.info.main,.2)}`}})),Ui=Ge(l)(({theme:t})=>({display:"flex",whiteSpace:"nowrap",flexDirection:"column",alignItems:"flex-end","& .value":{fontWeight:700,fontSize:"0.95rem",lineHeight:1.2},"& .label":{fontSize:"0.7rem",color:t.palette.text.secondary,textTransform:"uppercase",letterSpacing:"0.5px",marginTop:t.spacing(.2)}})),Sp=Ge(xe)(({theme:t})=>({backgroundColor:d(t.palette.grey[50],.8),"& .MuiTableCell-root":{fontWeight:700,fontSize:"0.9rem",color:t.palette.text.primary,borderTop:`2px solid ${d(t.palette.primary.main,.1)}`,borderBottom:"none",padding:t.spacing(1.5,2)}})),_p=t=>{var T;const a=we(),n=Ke(),{row:s,serial:r}=t,[o,p]=g.useState(!1),[c,x]=g.useState(!1),u=g.useMemo(()=>{var k;return(k=s.invoices)!=null&&k.length?s.invoices.reduce((B,_)=>({totalAmount:B.totalAmount+(_.total_amount||0),taxableValue:B.taxableValue+(_.taxable_value||0),totalTax:B.totalTax+(_.total_tax||0),totalQty:B.totalQty+(_.quantity||0)}),{totalAmount:0,taxableValue:0,totalTax:0,totalQty:0}):{totalAmount:0,taxableValue:0,totalTax:0,totalQty:0}},[s.invoices]),S=k=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(k),f=k=>new Intl.NumberFormat("en-IN").format(k),v=()=>{p(!o)},j=(k,B)=>{B.stopPropagation(),n(`/invoices/${k}`)};return e.jsxs(e.Fragment,{children:[e.jsxs(bp,{className:o?"expanded":"",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),onClick:v,children:[e.jsx(m,{children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,whiteSpace:"nowrap"},children:[e.jsx(yp,{sx:{transform:c?"scale(1.1)":"scale(1)",backgroundColor:c?d(a.palette.primary.main,.2):d(a.palette.primary.main,.1)},children:r}),e.jsx(le,{title:o?"Collapse details":"Expand details",arrow:!0,children:e.jsx(fp,{className:`expand-button ${o?"expanded":""}`,size:"small",onClick:k=>{k.stopPropagation(),p(!o)},children:o?e.jsx(go,{}):e.jsx(bo,{})})}),((T=s.invoices)==null?void 0:T.length)>0&&e.jsx(Ka,{badgeContent:s.invoices.length,color:"primary",sx:{"& .MuiBadge-badge":{fontSize:"0.7rem",minWidth:18,height:18}},children:e.jsx(fi,{fontSize:"small",color:"action"})})]})}),e.jsx(m,{children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1.5,whiteSpace:"nowrap"},children:[e.jsx($e,{sx:{width:32,height:32,bgcolor:d(a.palette.secondary.main,.1),color:a.palette.secondary.main,fontSize:"0.8rem",fontWeight:700},children:ha(s.party_name)}),e.jsx(i,{variant:"body1",fontWeight:"600",sx:{mb:.5,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:1.3},children:s.party_name})]})}),e.jsx(m,{sx:{whiteSpace:"nowrap"},children:e.jsxs(l,{children:[e.jsx(i,{variant:"body1",fontWeight:"600",color:"primary.main",children:s.party_tin}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Customer GSTIN/TIN"})]})}),e.jsx(m,{children:e.jsx(l,{sx:{display:"flex",whiteSpace:"nowrap",alignItems:"center",gap:1},children:e.jsx(i,{variant:"h6",fontWeight:"700",color:"primary.main",children:f(s.quantity||0)})})}),e.jsx(m,{children:e.jsxs(Ui,{children:[e.jsx(i,{className:"value",color:"success.main",children:S(s.total_value||0)}),e.jsx(i,{className:"label",children:"Total Value"})]})}),e.jsx(m,{children:e.jsxs(Ui,{children:[e.jsx(i,{className:"value",color:"primary.main",children:S(s.taxable_value||0)}),e.jsx(i,{className:"label",children:"Taxable"})]})}),e.jsx(m,{children:e.jsxs(Ui,{children:[e.jsx(i,{className:"value",color:"warning.main",children:S(s.tax_amount||0)}),e.jsx(i,{className:"label",children:"Tax Amount"}),s.taxable_value&&s.tax_amount&&e.jsx(St,{variant:"determinate",value:s.tax_amount/s.taxable_value*100,sx:{width:40,height:3,mt:.5,borderRadius:2,backgroundColor:d(a.palette.warning.main,.1),"& .MuiLinearProgress-bar":{backgroundColor:a.palette.warning.main}}})]})})]}),e.jsx(xe,{children:e.jsx(m,{style:{paddingBottom:0,paddingTop:0,borderTop:o?`2px solid ${d(a.palette.divider,.99)}`:"none",borderBottom:o?`2px solid ${d(a.palette.divider,.99)}`:"none"},colSpan:8,children:e.jsx(Xt,{in:o,timeout:500,children:e.jsx(l,{sx:{margin:1},children:e.jsx(ze,{in:o,children:e.jsxs(l,{children:[e.jsx(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,pb:1,borderBottom:`2px solid ${d(a.palette.divider,.1)}`},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx($e,{sx:{bgcolor:d(a.palette.primary.main,.1),color:"primary.main",width:48,height:48},children:e.jsx(rr,{})}),e.jsxs(l,{children:[e.jsx(i,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"Invoices Detail"}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Complete transaction history for ",s.party_name]})]})]})}),e.jsx(ne,{elevation:0,sx:{borderRadius:1,border:`1px solid ${d(a.palette.divider,.8)}`,overflow:"hidden",mb:2},children:e.jsx(nt,{children:e.jsxs(jp,{children:[e.jsx(ot,{children:e.jsxs(xe,{children:[e.jsx(m,{children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",whiteSpace:"nowrap",gap:1},children:[e.jsx(fo,{fontSize:"small"}),"Date"]})}),e.jsx(m,{sx:{whiteSpace:"nowrap",textAlign:"center"},children:"Type"}),e.jsx(m,{children:"Invoice No."}),e.jsx(m,{sx:{whiteSpace:"nowrap",textAlign:"center"},children:"Total Items"}),e.jsx(m,{sx:{whiteSpace:"nowrap",textAlign:"right"},children:"QTY"}),e.jsx(m,{sx:{whiteSpace:"nowrap",textAlign:"right"},children:"Total Amount"}),e.jsx(m,{sx:{whiteSpace:"nowrap",textAlign:"right"},children:"Taxable Value"}),e.jsx(m,{sx:{whiteSpace:"nowrap",textAlign:"right"},children:"Tax Amount"})]})}),e.jsxs(st,{children:[s.invoices&&s.invoices.length>0?s.invoices.map((k,B)=>e.jsx(Ye,{in:o,style:{transitionDelay:`${B*100}ms`},children:e.jsxs(xe,{hover:!0,sx:{whiteSpace:"nowrap",cursor:"pointer",transition:"all 0.2s ease","&:hover":{backgroundColor:d(a.palette.primary.main,.04),transform:"scale(1.01)",boxShadow:`0 2px 8px ${d(a.palette.primary.main,.15)}`}},children:[e.jsx(m,{sx:{whiteSpace:"nowrap"},children:e.jsxs(l,{children:[e.jsx(i,{variant:"body2",fontWeight:600,children:Nt(k.date)}),e.jsx(i,{variant:"caption",color:"text.secondary",children:new Date(k.date).toLocaleDateString("en-US",{weekday:"short"})})]})}),e.jsx(m,{align:"center",children:e.jsx(vp,{label:"Sales",size:"small",className:"sales"})}),e.jsx(m,{children:e.jsxs(l,{sx:{whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:1},children:[e.jsx(i,{variant:"body2",fontWeight:600,color:"primary.main",children:k.voucher_number}),e.jsx(ke,{size:"small",onClick:_=>j(k.voucher_id,_),sx:{opacity:.7,"&:hover":{opacity:1}},children:e.jsx(Es,{fontSize:"small"})})]})}),e.jsx(m,{align:"center",sx:{whiteSpace:"nowrap"},children:e.jsx(i,{variant:"body2",fontWeight:600,children:f(k.items||0)})}),e.jsx(m,{align:"right",sx:{whiteSpace:"nowrap"},children:e.jsx(i,{variant:"body2",fontWeight:600,children:f(k.quantity||0)})}),e.jsx(m,{align:"right",sx:{whiteSpace:"nowrap"},children:e.jsx(i,{variant:"body2",fontWeight:700,color:"success.main",children:S(k.total_amount||0)})}),e.jsx(m,{align:"right",sx:{whiteSpace:"nowrap"},children:e.jsx(i,{variant:"body2",fontWeight:600,color:"primary.main",children:S(k.taxable_value||0)})}),e.jsx(m,{align:"right",sx:{whiteSpace:"nowrap"},children:e.jsx(i,{variant:"body2",fontWeight:600,color:"warning.main",children:S(k.total_tax||0)})})]})},`${k.voucher_id}-${B}-${k.voucher_number}`)):e.jsx(xe,{children:e.jsx(m,{colSpan:9,align:"center",sx:{py:4},children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,color:"text.secondary"},children:[e.jsx(fi,{sx:{fontSize:48,opacity:.5}}),e.jsx(i,{variant:"body1",fontWeight:600,children:"No invoices found"}),e.jsx(i,{variant:"body2",children:"This item hasn't been used in any transactions yet."})]})})}),s.invoices&&s.invoices.length>0&&e.jsxs(Sp,{children:[e.jsx(m,{children:e.jsxs(l,{sx:{whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:1},children:[e.jsx(rr,{fontSize:"small",color:"primary"}),e.jsx(i,{variant:"subtitle2",fontWeight:800,children:"Totals"})]})}),e.jsx(m,{}),e.jsx(m,{align:"center",children:e.jsx(ve,{label:`${s.invoices.length} invoices`,size:"small",color:"primary",variant:"outlined"})}),e.jsx(m,{}),e.jsx(m,{align:"right"}),e.jsx(m,{align:"right",sx:{whiteSpace:"nowrap"},children:e.jsx(i,{variant:"subtitle2",fontWeight:800,color:"success.main",children:S(u.totalAmount)})}),e.jsx(m,{align:"right",sx:{whiteSpace:"nowrap"},children:e.jsx(i,{variant:"subtitle2",fontWeight:800,color:"primary.main",children:S(u.taxableValue)})}),e.jsx(m,{align:"right",sx:{whiteSpace:"nowrap"},children:e.jsx(i,{variant:"subtitle2",fontWeight:800,color:"warning.main",children:S(u.totalTax)})})]})]})]})})})]})})})})})})]})},wp=Ge(nt)(({theme:t})=>({borderRadius:1,border:`1px solid ${d(t.palette.divider,.8)}`,background:`
        linear-gradient(135deg, 
            ${d("#ffffff",.95)} 0%, 
            ${d("#fafbfc",.95)} 100%
        )
    `,backdropFilter:"blur(20px)",overflowX:"scroll",transition:"all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:`linear-gradient(90deg, 
            ${t.palette.primary.main} 0%, 
            ${t.palette.secondary.main} 50%, 
            ${t.palette.primary.main} 100%
        )`,borderRadius:`${t.spacing(3)} ${t.spacing(3)} 0 0`}})),Yi=Ge(Ue)(({theme:t})=>({display:"flex",alignItems:"center",gap:t.spacing(.5),"& .MuiTableSortLabel-icon":{color:t.palette.primary.main,opacity:.6,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:"scale(0.9)"},"&:hover":{color:t.palette.primary.main,"& .MuiTableSortLabel-icon":{opacity:1,transform:"scale(1.1)"}},"&.Mui-active":{color:t.palette.primary.main,fontWeight:700,"& .MuiTableSortLabel-icon":{color:t.palette.primary.main,opacity:1,transform:"scale(1.1)"}}})),Cp=Ge(l)(({theme:t})=>({padding:t.spacing(10,6),textAlign:"center",background:`
        linear-gradient(135deg, 
            ${d(t.palette.grey[50],.8)} 0%, 
            ${d(t.palette.grey[100],.4)} 100%
        )
    `,borderRadius:t.spacing(3),margin:t.spacing(3),position:"relative",overflow:"hidden"})),kp=Ge(xe)(({theme:t})=>({background:`
        linear-gradient(135deg, 
            ${d(t.palette.primary.main,.08)} 0%, 
            ${d(t.palette.primary.main,.04)} 50%,
            ${d(t.palette.secondary.main,.06)} 100%
        )
    `,backdropFilter:"blur(10px)","& .MuiTableCell-root":{borderBottom:"none",borderTop:`2px solid ${d(t.palette.primary.main,.1)}`,fontWeight:800,padding:t.spacing(1,1),color:t.palette.text.primary}})),Ip=t=>{const a=we(),n=Ke(),{summaryData:s,pageMeta:r,isLoading:o,limit:p,sortField:c,sortOrder:x,sortRequest:u,pageChange:S}=t,f=j=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(j),v=()=>e.jsx(l,{sx:{p:3},children:[1,2,3,4,5,6].map(j=>e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2,mb:2.5,p:2,borderRadius:2,bgcolor:d(a.palette.grey[50],.5)},children:[e.jsx(pe,{variant:"rectangular",width:40,height:20,sx:{borderRadius:1}}),e.jsx(pe,{variant:"text",width:"12%",height:24}),e.jsx(pe,{variant:"text",width:"25%",height:24}),e.jsx(pe,{variant:"text",width:"8%",height:24}),e.jsx(pe,{variant:"text",width:"10%",height:24}),e.jsx(pe,{variant:"text",width:"12%",height:24}),e.jsx(pe,{variant:"text",width:"12%",height:24}),e.jsx(pe,{variant:"text",width:"13%",height:24})]},j))});return e.jsxs(l,{sx:{width:"100%",mt:2},children:[e.jsx(ze,{in:!0,timeout:600,children:e.jsx(wp,{children:o?v():(s==null?void 0:s.length)===0?e.jsx(Cp,{children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:3},children:[e.jsx(l,{sx:{p:3,borderRadius:"50%",bgcolor:d(a.palette.grey[200],.5),border:`2px dashed ${d(a.palette.grey[400],.5)}`},children:e.jsx(Ht,{sx:{fontSize:64,color:a.palette.text.secondary,opacity:.7}})}),e.jsxs(l,{sx:{textAlign:"center",maxWidth:400},children:[e.jsx(i,{variant:"h4",gutterBottom:!0,fontWeight:700,children:"No customer found"}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:3,lineHeight:1.6},children:"Your inventory appears to be empty or no customer match your current search criteria."}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Try adjusting your filters or add new customers to get started."})]}),e.jsx(l,{sx:{display:"flex",gap:2,flexWrap:"wrap",justifyContent:"center"},children:e.jsx(ee,{variant:"outlined",startIcon:e.jsx(Ha,{}),sx:{borderRadius:1},onClick:()=>n("/products"),children:"View All Customers"})})]})}):e.jsxs(it,{sx:{width:"100%"},stickyHeader:!0,children:[e.jsx(ot,{sx:{background:`
                                        linear-gradient(135deg, 
                                            ${d(a.palette.primary.main,.12)} 0%, 
                                            ${d(a.palette.primary.main,.06)} 50%,
                                            ${d(a.palette.secondary.main,.08)} 100%
                                        )
                                    `,"& .MuiTableCell-head":{borderBottom:"none",fontWeight:800,textTransform:"uppercase",color:a.palette.text.primary,background:"transparent",backdropFilter:"blur(15px)"}},children:e.jsxs(xe,{children:[e.jsx(m,{children:e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1,whiteSpace:"nowrap"},children:e.jsx(i,{variant:"inherit",children:"Sr. No."})})}),e.jsx(m,{sx:{whiteSpace:"nowrap"},children:e.jsx(le,{title:"Sort by Product Name",arrow:!0,placement:"top",TransitionComponent:Ye,children:e.jsx(Yi,{active:c==="stock_item_name",direction:c==="stock_item_name"?x:"asc",onClick:()=>u("stock_item_name"),children:"Customer Name"})})}),e.jsx(m,{sx:{whiteSpace:"nowrap"},children:e.jsx(le,{title:"Sort by HSN/SAC Code",arrow:!0,placement:"top",TransitionComponent:Ye,children:e.jsx(Yi,{active:c==="hsn_code",direction:c==="hsn_code"?x:"asc",onClick:()=>u("hsn_code"),children:"Customer TIN/GSTIN"})})}),e.jsx(m,{children:e.jsx(le,{title:"Sort by Total Quantity",arrow:!0,placement:"top",TransitionComponent:Ye,children:e.jsx(Yi,{active:c==="current_stock",direction:c==="current_stock"?x:"asc",onClick:()=>u("current_stock"),children:"Quantity"})})}),e.jsx(m,{sx:{textAlign:"right",whiteSpace:"nowrap"},children:e.jsx(i,{variant:"inherit",children:"Total Value"})}),e.jsx(m,{sx:{textAlign:"right",whiteSpace:"nowrap"},children:e.jsx(i,{variant:"inherit",children:"Taxable Value"})}),e.jsx(m,{sx:{textAlign:"right",whiteSpace:"nowrap"},children:e.jsx(i,{variant:"inherit",children:"Tax Amount"})})]})}),e.jsxs(st,{children:[s==null?void 0:s.map((j,T)=>{const k=T+1+((r==null?void 0:r.page)-1)*p;return e.jsx(_p,{row:j,serial:k},`${j.party_name}-${j.party_tin}-${T}`)}),e.jsx(xe,{children:e.jsx(m,{colSpan:8,sx:{padding:0,borderBottom:"none",height:a.spacing(2),background:`linear-gradient(90deg, 
                                            transparent 0%, 
                                            ${d(a.palette.divider,.1)} 50%, 
                                            transparent 100%
                                        )`}})}),e.jsxs(kp,{children:[e.jsx(m,{colSpan:3,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",width:"fit-content",gap:1.5,py:1,px:2,borderRadius:1,bgcolor:d(a.palette.primary.main,.08),border:`1px solid ${d(a.palette.primary.main,.5)}`},children:[e.jsx(cn,{sx:{fontSize:20,color:"primary.main"}}),e.jsx(i,{variant:"subtitle1",fontWeight:800,children:"Grand Total"})]})}),e.jsx(m,{}),e.jsx(m,{sx:{textAlign:"right"},children:e.jsxs(l,{sx:{whiteSpace:"nowrap",display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[e.jsx(i,{variant:"subtitle1",fontWeight:800,color:"success.main",children:f(r.total_value)}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Total Value"})]})}),e.jsx(m,{sx:{textAlign:"right"},children:e.jsxs(l,{sx:{whiteSpace:"nowrap",display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[e.jsx(i,{variant:"subtitle1",fontWeight:800,color:"primary.main",children:f(r.taxable_value)}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Total Taxable Value"})]})}),e.jsx(m,{sx:{textAlign:"right"},children:e.jsxs(l,{sx:{whiteSpace:"nowrap",display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[e.jsx(i,{variant:"subtitle1",fontWeight:800,color:"warning.main",children:f(r.tax_amount)}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Total Tax"})]})})]})]})]})})}),!o&&(s==null?void 0:s.length)>0&&e.jsx(l,{sx:{mt:3},children:e.jsx(Dt,{total:r.total,item:"items",page:r==null?void 0:r.page,metaPage:r.page,rowsPerPage:p,onChange:S})})]})},Tp=Ge(xe)(({theme:t})=>({position:"relative",transition:"all 0.2s ease","& .MuiTableCell-root":{padding:"8px 16px",borderBottom:`1px solid ${d(t.palette.divider,.06)}`,fontWeight:500,transition:"all 0.2s ease"},"&:hover":{backgroundColor:d(t.palette.primary.main,.04),transform:"translateX(4px)",transition:"all 0.2s ease","& .expand-button":{backgroundColor:d(t.palette.primary.main,.1),transform:"scale(1.1)"}},"&.expanded":{backgroundColor:d(t.palette.primary.main,.02)}})),Ap=Ge(l)(({theme:t})=>({display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:t.spacing(1),backgroundColor:d(t.palette.primary.main,.1),color:t.palette.primary.main,fontWeight:700,fontSize:"0.85rem",marginRight:t.spacing(1),transition:"all 0.3s ease"})),Ji=Ge(l)(({theme:t})=>({display:"flex",flexDirection:"column",alignItems:"flex-end",whiteSpace:"nowrap","& .value":{fontWeight:700,fontSize:"0.95rem",lineHeight:1.2},"& .label":{fontSize:"0.7rem",color:t.palette.text.secondary,textTransform:"uppercase",letterSpacing:"0.5px",marginTop:t.spacing(.2)}})),Pp=t=>{const a=we(),n=Ke(),{row:s,serial:r}=t,[o,p]=g.useState(!1),[c,x]=g.useState(!1),u=v=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(v),S=()=>{p(!o)},f=(v,j)=>{j.stopPropagation(),n(`/invoices/${v}`)};return e.jsx(e.Fragment,{children:e.jsxs(Tp,{className:o?"expanded":"",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),onClick:S,children:[e.jsx(m,{children:e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1},children:e.jsx(Ap,{sx:{transform:c?"scale(1.1)":"scale(1)",backgroundColor:c?d(a.palette.primary.main,.2):d(a.palette.primary.main,.1)},children:r})})}),e.jsx(m,{children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1.5,whiteSpace:"nowrap"},children:[e.jsxs(l,{children:[e.jsx(i,{variant:"body1",fontWeight:"600",color:"primary.main",children:s.voucher_number}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Invoice No."})]}),e.jsx(ke,{size:"small",onClick:v=>f(s._id,v),sx:{opacity:.7,"&:hover":{opacity:1}},children:e.jsx($c,{fontSize:"small"})})]})}),e.jsx(m,{children:e.jsxs(l,{sx:{whiteSpace:"nowrap"},children:[e.jsx(i,{variant:"body2",fontWeight:600,children:Nt(s.date)}),e.jsx(i,{variant:"caption",color:"text.secondary",children:new Date(s.date).toLocaleDateString("en-US",{weekday:"short"})})]})}),e.jsx(m,{children:e.jsx(l,{children:e.jsx(i,{variant:"body1",fontWeight:"600",sx:{whiteSpace:"nowrap",mb:.5,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:1.3},children:s.party_name})})}),e.jsx(m,{children:e.jsx(l,{children:e.jsx(i,{variant:"body1",fontWeight:"600",sx:{whiteSpace:"nowrap",mb:.5,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:1.3},children:s.party_tin})})}),e.jsx(m,{children:e.jsx(ve,{label:s.voucher_type||"Sales",size:"small",color:"default",variant:"outlined",sx:{whiteSpace:"nowrap",fontWeight:600,minWidth:50,fontSize:"0.75rem"}})}),e.jsx(m,{children:e.jsxs(Ji,{children:[e.jsx(i,{className:"value",color:"success.main",children:u(s.total_value||0)}),e.jsx(i,{className:"label",children:"Total Value"})]})}),e.jsx(m,{children:e.jsxs(Ji,{children:[e.jsx(i,{className:"value",color:"primary.main",children:u(s.taxable_value||0)}),e.jsx(i,{className:"label",children:"Taxable"})]})}),e.jsx(m,{children:e.jsxs(Ji,{children:[e.jsx(i,{className:"value",color:"warning.main",children:u(s.tax_amount||0)}),e.jsx(i,{className:"label",children:"Tax Amount"}),s.total_value&&s.tax_amount&&e.jsx(St,{variant:"determinate",value:s.tax_amount/s.total_value*100,sx:{width:40,height:3,mt:.5,borderRadius:2,backgroundColor:d(a.palette.warning.main,.1),"& .MuiLinearProgress-bar":{backgroundColor:a.palette.warning.main}}})]})})]})})},Mp=Ge(nt)(({theme:t})=>({borderRadius:1,border:`1px solid ${d(t.palette.divider,.8)}`,background:`
        linear-gradient(135deg, 
            ${d("#ffffff",.95)} 0%, 
            ${d("#fafbfc",.95)} 100%
        )
    `,backdropFilter:"blur(20px)",overflowX:"scroll",transition:"all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:`linear-gradient(90deg, 
            ${t.palette.primary.main} 0%, 
            ${t.palette.secondary.main} 50%, 
            ${t.palette.primary.main} 100%
        )`,borderRadius:`${t.spacing(3)} ${t.spacing(3)} 0 0`}})),jn=Ge(Ue)(({theme:t})=>({display:"flex",alignItems:"center",gap:t.spacing(.5),"& .MuiTableSortLabel-icon":{color:t.palette.primary.main,opacity:.6,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:"scale(0.9)"},"&:hover":{color:t.palette.primary.main,"& .MuiTableSortLabel-icon":{opacity:1,transform:"scale(1.1)"}},"&.Mui-active":{color:t.palette.primary.main,fontWeight:700,"& .MuiTableSortLabel-icon":{color:t.palette.primary.main,opacity:1,transform:"scale(1.1)"}}})),Rp=Ge(l)(({theme:t})=>({padding:t.spacing(10,6),textAlign:"center",background:`
        linear-gradient(135deg, 
            ${d(t.palette.grey[50],.8)} 0%, 
            ${d(t.palette.grey[100],.4)} 100%
        )
    `,borderRadius:t.spacing(3),margin:t.spacing(3),position:"relative",overflow:"hidden"})),Wp=Ge(xe)(({theme:t})=>({background:`
        linear-gradient(135deg, 
            ${d(t.palette.primary.main,.08)} 0%, 
            ${d(t.palette.primary.main,.04)} 50%,
            ${d(t.palette.secondary.main,.06)} 100%
        )
    `,backdropFilter:"blur(10px)","& .MuiTableCell-root":{borderBottom:"none",borderTop:`2px solid ${d(t.palette.primary.main,.1)}`,fontWeight:800,padding:t.spacing(1,1),color:t.palette.text.primary}})),zp=t=>{const a=we(),n=Ke(),{summaryData:s,pageMeta:r,isLoading:o,limit:p,sortField:c,sortOrder:x,sortRequest:u,pageChange:S}=t,f=j=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(j),v=()=>e.jsx(l,{sx:{p:3},children:[1,2,3,4,5,6].map(j=>e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2,mb:2.5,p:2,borderRadius:2,bgcolor:d(a.palette.grey[50],.5)},children:[e.jsx(pe,{variant:"rectangular",width:40,height:20,sx:{borderRadius:1}}),e.jsx(pe,{variant:"text",width:"12%",height:24}),e.jsx(pe,{variant:"text",width:"25%",height:24}),e.jsx(pe,{variant:"text",width:"8%",height:24}),e.jsx(pe,{variant:"text",width:"10%",height:24}),e.jsx(pe,{variant:"text",width:"12%",height:24}),e.jsx(pe,{variant:"text",width:"12%",height:24}),e.jsx(pe,{variant:"text",width:"13%",height:24})]},j))});return e.jsxs(l,{sx:{width:"100%",mt:2},children:[e.jsx(ze,{in:!0,timeout:600,children:e.jsx(Mp,{children:o?v():(s==null?void 0:s.length)===0?e.jsx(Rp,{children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:3},children:[e.jsx(l,{sx:{p:3,borderRadius:"50%",bgcolor:d(a.palette.grey[200],.5),border:`2px dashed ${d(a.palette.grey[400],.5)}`},children:e.jsx(Ht,{sx:{fontSize:64,color:a.palette.text.secondary,opacity:.7}})}),e.jsxs(l,{sx:{textAlign:"center",maxWidth:400},children:[e.jsx(i,{variant:"h4",gutterBottom:!0,fontWeight:700,children:"No Invoices found"}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:3,lineHeight:1.6},children:"Your inventory appears to be empty or no invoices match your current search criteria."}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Try adjusting your filters or add new invoices to get started."})]}),e.jsx(l,{sx:{display:"flex",gap:2,flexWrap:"wrap",justifyContent:"center"},children:e.jsx(ee,{variant:"outlined",startIcon:e.jsx(Ha,{}),sx:{borderRadius:1},onClick:()=>n("/invoices"),children:"View All Invoices"})})]})}):e.jsxs(it,{sx:{width:"100%"},stickyHeader:!0,children:[e.jsx(ot,{sx:{background:`
                                        linear-gradient(135deg, 
                                            ${d(a.palette.primary.main,.12)} 0%, 
                                            ${d(a.palette.primary.main,.06)} 50%,
                                            ${d(a.palette.secondary.main,.08)} 100%
                                        )
                                    `,"& .MuiTableCell-head":{borderBottom:"none",fontWeight:800,textTransform:"uppercase",color:a.palette.text.primary,background:"transparent",backdropFilter:"blur(15px)"}},children:e.jsxs(xe,{children:[e.jsx(m,{children:e.jsx(l,{sx:{whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:1},children:e.jsx(i,{variant:"inherit",children:"# Sr. No."})})}),e.jsx(m,{sx:{whiteSpace:"nowrap"},children:e.jsx(le,{title:"Sort by HSN/SAC Code",arrow:!0,placement:"top",TransitionComponent:Ye,children:e.jsx(jn,{active:c==="hsn_code",direction:c==="hsn_code"?x:"asc",onClick:()=>u("hsn_code"),children:"Invoice No."})})}),e.jsx(m,{sx:{whiteSpace:"nowrap"},children:e.jsx(le,{title:"Sort by HSN/SAC Code",arrow:!0,placement:"top",TransitionComponent:Ye,children:e.jsxs(jn,{active:c==="hsn_code",direction:c==="hsn_code"?x:"asc",onClick:()=>u("hsn_code"),children:[e.jsx(fo,{fontSize:"small"}),"Date"]})})}),e.jsx(m,{sx:{whiteSpace:"nowrap"},children:e.jsx(le,{title:"Sort by Product Name",arrow:!0,placement:"top",TransitionComponent:Ye,children:e.jsx(jn,{active:c==="stock_item_name",direction:c==="stock_item_name"?x:"asc",onClick:()=>u("stock_item_name"),children:"Customer Details"})})}),e.jsx(m,{sx:{whiteSpace:"nowrap"},children:e.jsx(le,{title:"Sort by Product Name",arrow:!0,placement:"top",TransitionComponent:Ye,children:e.jsx(jn,{active:c==="stock_item_name",direction:c==="stock_item_name"?x:"asc",onClick:()=>u("stock_item_name"),children:"Customer TIN/GSTIN"})})}),e.jsx(m,{sx:{whiteSpace:"nowrap",textAlign:"right"},children:e.jsx(i,{variant:"inherit",children:"Type"})}),e.jsx(m,{sx:{whiteSpace:"nowrap",textAlign:"right"},children:e.jsx(i,{variant:"inherit",children:"Total Value"})}),e.jsx(m,{sx:{whiteSpace:"nowrap",textAlign:"right"},children:e.jsx(i,{variant:"inherit",children:"Taxable Value"})}),e.jsx(m,{sx:{whiteSpace:"nowrap",textAlign:"right"},children:e.jsx(i,{variant:"inherit",children:"Tax Amount"})})]})}),e.jsxs(st,{children:[s==null?void 0:s.map((j,T)=>{const k=T+1+((r==null?void 0:r.page)-1)*p;return e.jsx(Pp,{row:j,serial:k},`${j.voucher_number}-${j._id}-${T}`)}),e.jsx(xe,{children:e.jsx(m,{colSpan:8,sx:{padding:0,borderBottom:"none",height:a.spacing(2),background:`linear-gradient(90deg, 
                                            transparent 0%, 
                                            ${d(a.palette.divider,.1)} 50%, 
                                            transparent 100%
                                        )`}})}),e.jsxs(Wp,{children:[e.jsx(m,{colSpan:3,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",width:"fit-content",gap:1.5,py:1,whiteSpace:"nowrap",px:2,borderRadius:1,bgcolor:d(a.palette.primary.main,.08),border:`1px solid ${d(a.palette.primary.main,.5)}`},children:[e.jsx(cn,{sx:{fontSize:20,color:"primary.main"}}),e.jsx(i,{variant:"subtitle1",fontWeight:800,children:"Grand Total"})]})}),e.jsx(m,{}),e.jsx(m,{}),e.jsx(m,{}),e.jsx(m,{sx:{textAlign:"right"},children:e.jsxs(l,{sx:{whiteSpace:"nowrap",display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[e.jsx(i,{variant:"subtitle1",fontWeight:800,color:"success.main",children:f(r.total_value)}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Total Value"})]})}),e.jsx(m,{sx:{textAlign:"right"},children:e.jsxs(l,{sx:{whiteSpace:"nowrap",display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[e.jsx(i,{variant:"subtitle1",fontWeight:800,color:"primary.main",children:f(r.taxable_value)}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Total Taxable Value"})]})}),e.jsx(m,{sx:{textAlign:"right"},children:e.jsxs(l,{sx:{whiteSpace:"nowrap",display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[e.jsx(i,{variant:"subtitle1",fontWeight:800,color:"warning.main",children:f(r.tax_amount)}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Total Tax"})]})})]})]})]})})}),!o&&(s==null?void 0:s.length)>0&&e.jsx(l,{sx:{mt:3},children:e.jsx(Dt,{total:r.total,item:"items",page:r==null?void 0:r.page,metaPage:r.page,rowsPerPage:p,onChange:S})})]})},$p=Ge(ne)(({theme:t})=>({padding:t.spacing(3),height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden","&:hover":{transform:"translateY(-4px)",boxShadow:t.shadows[8]},borderRadius:16,"&::before":{content:'""',position:"absolute",top:0,right:0,width:"100px",height:"100px",borderRadius:"50%",opacity:.1,transition:"all 0.3s ease"},"&:hover::before":{transform:"scale(1.2)",opacity:.15}})),Np=Ge(ee,{shouldForwardProp:t=>t!=="active"})(({theme:t,active:a})=>({borderRadius:12,padding:t.spacing(1,2),textTransform:"none",fontWeight:600,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",backgroundColor:a?t.palette.primary.main:d(t.palette.primary.main,.08),color:a?t.palette.primary.contrastText:t.palette.primary.main,border:`2px solid ${a?t.palette.primary.main:d(t.palette.primary.main,.2)}`,"&:hover":{backgroundColor:a?t.palette.primary.dark:d(t.palette.primary.main,.15),transform:"translateY(-2px)",boxShadow:t.shadows[4]}})),Vi=[{key:"hsn",label:"HSN-wise",icon:e.jsx(_s,{})},{key:"party",label:"Customer-wise",icon:e.jsx(Gs,{})},{key:"bill",label:"Bill-wise",icon:e.jsx(Tt,{})}],Dp=()=>{var re,Te,V;const t=we(),a=Ke(),n=Fe(),[s,r]=g.useState(!1),[o,p]=g.useState(""),[c,x]=g.useState(!1),{hsnSummaryData:u,partySummaryData:S,hsnPageMeta:f,partyPageMeta:v,summaryStats:j,invoiceSummaryData:T,invoicePageMeta:k}=Ce(z=>z.inventory),{user:B,current_company_id:_}=Ce(z=>z.auth),K=_||localStorage.getItem("current_company_id")||((re=B==null?void 0:B.user_settings)==null?void 0:re.current_company_id)||"",[w,N]=g.useState("hsn"),[R,L]=g.useState({search:"",category:"all",group:"all",page_no:1,limit:10,startDate:new Date("2025-04-01"),endDate:new Date("2026-03-31"),sortField:"date",sortOrder:"asc"}),{search:D,category:P,page_no:A,startDate:O,endDate:y,limit:F,sortField:h,sortOrder:b}=R,M=g.useCallback(async()=>{r(!0),n(Yn({search:o,page_no:A,company_id:K,category:P==="all"?"":P,limit:F,startDate:O.toISOString(),endDate:y.toISOString(),sortField:h,sortOrder:b})).unwrap().then(()=>{r(!1)}).catch(z=>{r(!1),Z.error("Error fetching summary"),console.error("Error fetching summary:",z)})},[n,o,A,F,O,K,P,y,h,b]),W=g.useCallback(async()=>{r(!0),n(Vn({search:o,page_no:A,company_id:K,limit:F,startDate:O.toISOString(),endDate:y.toISOString(),sortField:h,sortOrder:b})).unwrap().then(()=>{r(!1)}).catch(z=>{r(!1),Z.error("Error fetching summary"),console.error("Error fetching summary:",z)})},[n,o,A,F,O,K,y,h,b]),C=g.useCallback(async()=>{r(!0),n(Qn({search:o,page_no:A,company_id:K,limit:F,startDate:O.toISOString(),endDate:y.toISOString(),sortField:h,sortOrder:b})).unwrap().then(()=>{r(!1)}).catch(z=>{r(!1),Z.error("Error fetching summary"),console.error("Error fetching summary:",z)})},[n,o,A,F,O,K,y,h,b]),$=g.useCallback(async()=>{x(!0),n(Jn({company_id:K,startDate:O.toISOString(),endDate:y.toISOString()})).unwrap().then(()=>{x(!1)}).catch(z=>{x(!1),Z.error("Error fetching summary Stats"),console.error("Error fetching summary Stats:",z)})},[n,O,K,y]);g.useEffect(()=>{const z=setTimeout(()=>{p(D)},300);return()=>clearTimeout(z)},[D]);const G=z=>{const de=h===z&&b==="asc";L(Ie=>({...Ie,sortOrder:de?"desc":"asc",sortField:z}))},ge=g.useCallback(()=>{L({search:"",category:"all",group:"all",page_no:1,limit:10,startDate:new Date("2025-04-01"),endDate:new Date("2026-03-31"),sortField:"created_at",sortOrder:"asc"})},[]),Ae=(z,de)=>{L(Ie=>({...Ie,page_no:de}))},ae=(z,de)=>{z==="limit"&&L(Ie=>({...Ie,page_no:1,[z]:de})),L(Ie=>({...Ie,[z]:de}))},Y=z=>{N(z),z==="party"&&W(),z==="bill"&&C()};return g.useEffect(()=>{M()},[]),g.useEffect(()=>{w==="hsn"?M():w==="party"?W():w==="bill"&&C()},[w,n,y,F,A,P,o,h,K,b,O,M,W,C]),g.useEffect(()=>{$()},[n,y,K,O,$]),e.jsx(Pt,{dateAdapter:Lt,children:e.jsxs(Je,{maxWidth:!1,sx:{mt:3,width:"100%",scrollBehavior:"smooth"},children:[e.jsx(Ne,{sx:{mb:2,p:2,borderRadius:1},children:e.jsxs(l,{sx:{display:"flex",gap:2,alignItems:"center",mb:1},children:[e.jsx(zt,{icon:e.jsx(ma,{fontSize:"small"}),title:"Back",color:"primary",onClick:()=>a(-1)}),e.jsxs(l,{sx:{width:"100%"},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(i,{variant:"h6",fontWeight:"600",sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(rr,{color:"primary"}),"Summary Type"]}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(i,{variant:"body2",color:"text.secondary",children:"Active View:"}),e.jsx(ve,{label:(Te=Vi.find(z=>z.key===w))==null?void 0:Te.label,color:"primary",size:"small",icon:(V=Vi.find(z=>z.key===w))==null?void 0:V.icon})]})]}),e.jsx(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2},children:e.jsx(l,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:Vi.map((z,de)=>e.jsx(ze,{in:!0,timeout:600+de*100,children:e.jsx(Np,{active:w===z.key,onClick:()=>Y(z.key),startIcon:z.icon,children:z.label})},z.key))})})]})]})}),c?e.jsxs(I,{container:!0,spacing:2,sx:{mb:2},children:[e.jsx(ga,{color:"#ffebee",border:"5px solid #c62828"}),e.jsx(ga,{color:"hsl(45, 92%, 90%)",border:"5px solid hsl(45, 90%, 40%)"}),e.jsx(ga,{color:"#e8f5e9",border:"5px solid #2e7d32"}),e.jsx(ga,{color:"#e8f4fd",border:"5px solid #1976d2"}),e.jsx(ga,{color:"#fff8e1",border:"5px solid #ff9800"})]}):e.jsx(I,{container:!0,spacing:2,sx:{mb:2},children:[{title:"Total HSN/SAC Codes",value:`${j.total_hsn} HSN/SAC Codes`,desc:"Total unique HSN/SAC Codes in your inventory",color:"#ffebee",borderColor:"#c62828",icon:e.jsx(Ht,{sx:{fontSize:40,opacity:.3}}),trend:"+12%"},{title:"Total Invoices",value:`${j.total_invoices} Invoices`,desc:"Total invoices generated from your inventory",color:"hsl(45, 92%, 90%)",borderColor:"hsl(45, 90%, 40%)",icon:e.jsx(rr,{sx:{fontSize:40,opacity:.3}}),trend:"+8%"},{title:"Total Customers",value:`${j.total_party} Customers`,desc:"Total customers who have made purchases or sales",color:"#e8f5e9",borderColor:"#2e7d32",icon:e.jsx(Gs,{sx:{fontSize:40,opacity:.3}}),trend:"+5%"},{title:"Monthly Revenue",value:`₹${j.total_revenue}`,desc:"Total revenue generated in this period",color:"#e8f4fd",borderColor:"#1976d2",icon:e.jsx(cn,{sx:{fontSize:40,opacity:.3}}),trend:"+15%"},{title:"Tax Amount",value:`₹${j.total_tax}`,desc:"Total tax amount for this period",color:"#fff8e1",borderColor:"#ff9800",icon:e.jsx(rr,{sx:{fontSize:40,opacity:.3}}),trend:"+10%"}].map((z,de)=>e.jsx(I,{item:!0,xs:12,sm:6,md:2.4,children:e.jsx(ze,{in:!0,timeout:800+de*100,children:e.jsxs($p,{sx:{bgcolor:z.color,borderLeft:`5px solid ${z.borderColor}`,position:"relative"},children:[e.jsx(l,{sx:{position:"absolute",top:0,right:0,color:z.borderColor}}),e.jsxs(l,{children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx(i,{variant:"subtitle2",sx:{color:t.palette.grey[600],fontWeight:600},children:z.title}),e.jsx(l,{sx:{color:z.borderColor},children:z.icon})]}),e.jsx(i,{variant:"h5",component:"div",fontWeight:"700",sx:{color:z.borderColor},children:z.value}),e.jsx(i,{variant:"caption",sx:{color:t.palette.grey[600]},children:z.desc})]})]})})},de))}),e.jsxs(I,{container:!0,spacing:2,justifyContent:"space-between",alignItems:"center",children:[e.jsx(I,{item:!0,xs:12,md:6,children:e.jsx(X,{placeholder:"Search by product name, HSN, or category...",variant:"outlined",fullWidth:!0,value:D,onChange:z=>ae("search",z.target.value),size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:1,backgroundColor:d(t.palette.primary.main,.02),transition:"all 0.2s ease","&:hover":{backgroundColor:d(t.palette.primary.main,.05)},"&.Mui-focused":{backgroundColor:d(t.palette.primary.main,.08)}}},InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(ki,{color:"primary"})}),endAdornment:D&&e.jsx(se,{position:"end",children:e.jsx(ke,{size:"small",onClick:()=>ae("search",""),"aria-label":"clear search",children:e.jsx(bi,{fontSize:"small"})})})}})}),e.jsx(I,{item:!0,children:e.jsx(Xe,{label:"Start Date",value:new Date(O),format:"dd/MM/yyyy",views:["year","month","day"],onChange:z=>ae("startDate",z),slotProps:{textField:{size:"small",sx:{"& .MuiOutlinedInput-root":{width:"150px",borderRadius:"8px"},"& .MuiInputAdornment-root .MuiButtonBase-root":{border:"none",boxShadow:"none"}}}}})}),e.jsx(I,{item:!0,children:e.jsx(Xe,{label:"End Date",value:y,format:"dd/MM/yyyy",views:["year","month","day"],onChange:z=>ae("endDate",z),slotProps:{textField:{size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px",width:"150px"},"& .MuiInputAdornment-root .MuiButtonBase-root":{border:"none",boxShadow:"none"}}}}})}),e.jsx(I,{item:!0,xs:12,md:1.5,children:e.jsxs(X,{select:!0,label:"Show",fullWidth:!0,value:F,onChange:z=>ae("limit",z.target.value),size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:1}},children:[e.jsx(he,{value:5,children:"5"}),e.jsx(he,{value:10,children:"10"}),e.jsx(he,{value:25,children:"25"}),e.jsx(he,{value:50,children:"50"})]})}),e.jsx(I,{item:!0,xs:12,md:1.5,children:e.jsx(ee,{fullWidth:!0,variant:"outlined",color:"error",size:"small",startIcon:e.jsx(Ds,{}),onClick:ge,sx:{borderRadius:1,textTransform:"none",fontWeight:600,height:"40px",transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)"}},children:"Reset Filters"})})]}),e.jsxs(l,{children:[w==="hsn"&&e.jsx(gp,{summaryData:u,sortRequest:G,isLoading:s,stateChange:ae,pageChange:Ae,limit:F,sortField:h,sortOrder:b,pageMeta:f}),w==="party"&&e.jsx(Ip,{summaryData:S,sortRequest:G,isLoading:s,stateChange:ae,pageChange:Ae,limit:F,sortField:h,sortOrder:b,pageMeta:v}),w==="bill"&&e.jsx(zp,{summaryData:T,sortRequest:G,isLoading:s,stateChange:ae,pageChange:Ae,limit:F,sortField:h,sortOrder:b,pageMeta:k})]})]})})},Bp=({cus:t,onDelete:a,onView:n,index:s})=>{const r=we(),o=Fe(),[p,c]=g.useState(!1),[x,u]=g.useState(!1),{invoiceGroups:S}=Ce(y=>y.invoice),[f,v]=g.useState(!1),[j,T]=Ft.useState(null),k=!!j,[B,_]=g.useState(!1),[K,w]=g.useState("payment"),[N,R]=g.useState({_id:"",ledger_name:"",balance:0}),L=y=>{T(y.currentTarget)},D=()=>{T(null)},P=()=>{a((t==null?void 0:t._id)??""),c(!1)},A=y=>y?y.split(" ").map(F=>F.charAt(0)).join("").toUpperCase().slice(0,2):"",O=y=>{const F=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"],b=(y||"").length%F.length;return F[b]};return e.jsxs(e.Fragment,{children:[e.jsx(ze,{in:!0,timeout:300+s*100,children:e.jsxs(xe,{onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),sx:{"& .MuiTableCell-root":{padding:"8px 16px"},cursor:"pointer",width:"100%",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:f?"translateY(-2px)":"translateY(0)",boxShadow:f?`0 8px 25px ${d(r.palette.primary.main,.15)}`:"none","&:hover":{bgcolor:d(r.palette.primary.main,.02)},borderLeft:`4px solid ${f?r.palette.primary.main:"transparent"}`},onClick:y=>{n(t),y.stopPropagation()},children:[e.jsx(m,{align:"left",children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start"},children:[e.jsx(Ut,{sx:{mr:.5,fontSize:".9rem",color:r.palette.text.secondary}}),e.jsx(i,{variant:"body1",sx:{fontWeight:700,color:r.palette.text.primary},children:Nt(t.created_at)||"N/A"})]})}),e.jsx(m,{sx:{pl:3,pr:1},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start"},children:[e.jsx($e,{sx:{width:36,height:36,mr:2,objectFit:"contain",bgcolor:O(t.ledger_name),fontSize:".9rem",fontWeight:700,boxShadow:`0 4px 12px ${d(O(t.ledger_name),.3)}`,transition:"all 0.3s ease",transform:f?"scale(1.1)":"scale(1)"},src:typeof(t==null?void 0:t.image)=="string"?t.image:(t==null?void 0:t.image)instanceof File?URL.createObjectURL(t.image):"",children:A(t.ledger_name)}),e.jsxs(l,{sx:{flex:1},children:[e.jsx(i,{variant:"body1",sx:{fontWeight:600,color:r.palette.text.primary,mb:.5,transition:"color 0.3s ease"},children:t.ledger_name}),t.alias&&e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1},children:e.jsx(ve,{icon:e.jsx(ya,{}),label:t.alias,size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:"20px",borderRadius:"10px",bgcolor:d(r.palette.primary.main,.08),borderColor:d(r.palette.primary.main,.2),color:r.palette.primary.main}})})]})]})}),e.jsx(m,{align:"center",children:e.jsx(i,{variant:"body1",sx:{fontWeight:700,color:r.palette.text.primary},children:t.account_holder||"-"})}),e.jsx(m,{align:"center",children:e.jsx(i,{variant:"body1",sx:{fontWeight:700,color:r.palette.text.primary},children:t.account_number||"-"})}),e.jsx(m,{align:"right",children:e.jsx(i,{variant:"body1",sx:{fontWeight:700,color:t.total_amount>0?r.palette.success.main:r.palette.error.main},children:t.total_amount===0?"":t.total_amount>0?`${Math.abs(t.total_amount)} ₹`:"-"})}),e.jsx(m,{align:"right",sx:{px:1},children:e.jsx(i,{variant:"body1",sx:{fontWeight:700,color:t.total_amount>0?r.palette.success.main:r.palette.error.main},children:t.total_amount===0?"":t.total_amount>0?"-":`${Math.abs(t.total_amount)} ₹`})}),e.jsx(m,{align:"right",sx:{pr:2},children:e.jsx(Ye,{appear:!0,in:!0,timeout:200,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:.5,justifyContent:"flex-end"},children:[e.jsx(xn,{"data-screenshot":"toggle-mode",onClick:y=>{L(y),y.stopPropagation()},disableRipple:!0,size:"small","aria-label":"Open notifications","aria-controls":k?"notifications-menu":void 0,"aria-haspopup":"true","aria-expanded":k?"true":void 0,children:e.jsx(ln,{})}),e.jsxs(Mr,{anchorEl:j,id:"notifications-menu",open:k,onClose:D,onClick:y=>{y.stopPropagation(),D()},slotProps:{paper:{variant:"outlined",elevation:0,sx:{my:"4px",maxHeight:"400px",overflowY:"auto",borderColor:r.palette.primary.main}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[e.jsxs(he,{sx:{display:"flex",alignItems:"center",gap:1,py:.5},onClick:y=>{D(),n(t),y.stopPropagation()},children:[e.jsx(Ha,{fontSize:"small",sx:{color:r.palette.info.main}}),e.jsx(i,{fontSize:"small",variant:"subtitle1",sx:{fontWeight:"bold",color:r.palette.info.main},children:"View"})]}),e.jsxs(he,{sx:{display:"flex",alignItems:"center",gap:1,py:.5},onClick:y=>{D(),u(!0),y.stopPropagation()},children:[e.jsx(on,{fontSize:"small",sx:{color:r.palette.info.main}}),e.jsx(i,{fontSize:"small",variant:"subtitle1",sx:{fontWeight:"bold",color:r.palette.info.main},children:"Transfer funds"})]}),e.jsxs(he,{sx:{display:"flex",alignItems:"center",gap:1,py:.5},onClick:y=>{var F;o(Ca(((F=S.find(h=>h.name.includes("Receipt")))==null?void 0:F._id)||"")),D(),R({_id:t._id,ledger_name:t.ledger_name,balance:t.total_amount}),w("receipt"),_(!0),y.stopPropagation()},children:[e.jsx(Rs,{fontSize:"small",sx:{color:r.palette.success.main}}),e.jsx(i,{fontSize:"small",variant:"subtitle1",sx:{fontWeight:"bold",color:r.palette.success.main},children:"You Got"})]}),e.jsxs(he,{sx:{display:"flex",alignItems:"center",gap:1,py:.5},onClick:y=>{var F;D(),o(Ca(((F=S.find(h=>h.name.includes("Payment")))==null?void 0:F._id)||"")),R({_id:t._id,ledger_name:t.ledger_name,balance:t.total_amount}),w("payment"),_(!0),y.stopPropagation()},children:[e.jsx(Ws,{fontSize:"small",sx:{color:r.palette.error.light}}),e.jsx(i,{fontSize:"small",variant:"subtitle1",sx:{fontWeight:"bold",color:r.palette.error.light},children:"You give"})]}),e.jsxs(he,{sx:{display:"flex",alignItems:"center",gap:1,py:.5},onClick:y=>{c(!0),y.stopPropagation()},children:[e.jsx(mt,{fontSize:"small"}),e.jsx(i,{fontSize:"small",variant:"subtitle1",sx:{fontWeight:"bold"},children:"Delete"})]})]})]})})})]})}),e.jsxs(Pa,{open:p,onClose:()=>c(!1),"aria-labelledby":"delete-dialog-title",PaperProps:{sx:{borderRadius:1,boxShadow:`0 24px 50px ${d(r.palette.error.main,.2)}`}},children:[e.jsxs(ba,{id:"delete-dialog-title",sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:2,color:r.palette.error.main,fontWeight:600},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(mt,{}),"Delete ",t.ledger_name,"?"]}),e.jsx(le,{title:"Close",arrow:!0,children:e.jsx(ke,{size:"medium",onClick:y=>{y.stopPropagation(),c(!1)},sx:{bgcolor:d(r.palette.warning.main,.1),color:r.palette.warning.main,transition:"all 0.3s ease","&:hover":{bgcolor:d(r.palette.warning.main,.2),transform:"scale(1.1)"}},children:e.jsx(ct,{fontSize:"medium"})})})]}),e.jsxs(fa,{children:[e.jsx(rt,{severity:"warning",sx:{mb:2},children:"This action cannot be undone. This customer will be permanently removed from your company database if it is not attached to any other bills."}),e.jsxs(i,{children:['Are you sure you want to delete "',e.jsx("strong",{children:t.ledger_name}),'"?']})]}),e.jsxs(Ma,{sx:{p:3,gap:1},children:[e.jsx(ee,{onClick:()=>c(!1),variant:"outlined",sx:{borderRadius:2},children:"Cancel"}),e.jsxs(ee,{onClick:P,color:"error",variant:"contained",sx:{borderRadius:2},startIcon:e.jsx(mt,{}),children:["Delete ",e.jsx("strong",{children:t.ledger_name})]})]})]}),B&&e.jsx(gl,{open:B,onClose:()=>{R({_id:"",ledger_name:"",balance:0}),w("payment"),_(!1)},entity:"Accounts",type:K,bankAccount:N}),x&&e.jsx(yl,{open:x,onClose:()=>u(!1),contraId:null})]})},Fp=()=>{var b,M,W;const{customers:t,pageMeta:a,loading:n}=Ce(C=>C.customersLedger),{accountingGroups:s}=Ce(C=>C.accountingGroup),{user:r,current_company_id:o}=Ce(C=>C.auth),p=o||localStorage.getItem("current_company_id")||((b=r==null?void 0:r.user_settings)==null?void 0:b.current_company_id)||"",c=(M=r==null?void 0:r.company)==null?void 0:M.find(C=>C._id===p),x=Ke(),u=we(),S=Fe(),[f,v]=g.useState(""),[j,T]=g.useState({searchQuery:"",filterState:"All-States",is_deleted:!1,type:"Accounts",page:1,rowsPerPage:10,sortField:"created_at",sortOrder:"asc"}),{searchQuery:k,filterState:B,page:_,is_deleted:K,rowsPerPage:w,type:N,sortField:R,sortOrder:L}=j,D=g.useCallback(async()=>{S(en({searchQuery:k,filterState:B,company_id:p||"",type:N,is_deleted:K,pageNumber:_,limit:w,sortField:R,sortOrder:L}))},[S,k,B,N,p,K,_,w,R,L]);g.useEffect(()=>{D(),S(Ba(p||"")),S(lr({company_id:p,customerTypes:["Bank Accounts","Cash-in-Hand"]}))},[]),g.useEffect(()=>{const C=setTimeout(()=>{v(k)},500);return()=>{clearTimeout(C)}},[k]),g.useEffect(()=>{D()},[f,_,w,K,R,B,L,S,D]),g.useEffect(()=>{S(kr(p||""))},[p,S]);const P=C=>{const $=R===C&&L==="asc";T(G=>({...G,sortOrder:$?"desc":"asc",sortField:C}))},A=(C,$)=>{T(G=>({...G,page:$}))},O=g.useCallback(()=>{T({searchQuery:"",filterState:"All-States",is_deleted:!1,type:"Accounts",page:1,rowsPerPage:10,sortField:"created_at",sortOrder:"asc"})},[]),y=(C,$)=>{T(G=>({...G,[C]:$}))},F=C=>{x(`/accounts/${C._id}`)},h=t;return e.jsxs(l,{sx:{p:3,width:"100%"},children:[e.jsx(Ja,{title:"Accounts Directory",subtitle:"Manage your accounts, view their details, and perform actions like adding, editing, or deleting accounts."}),e.jsxs(l,{sx:{display:"flex",mb:3,gap:2,flexWrap:"wrap"},children:[e.jsx(X,{sx:{flexGrow:1,minWidth:"250px"},variant:"outlined",size:"small",placeholder:"Search by name, city, or email...",value:k,onChange:C=>y("searchQuery",C.target.value),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(qa,{})})}}),e.jsx(qe,{sx:{minWidth:"150px"},children:e.jsxs(X,{select:!0,size:"small",value:B,label:"Filter by State",placeholder:"Filter by State",onChange:C=>y("filterState",C.target.value),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ea,{})})},children:[e.jsx(he,{selected:!0,value:"All-States",children:e.jsx("em",{children:"All States"})}),(W=a.unique)==null?void 0:W.map(C=>e.jsx(he,{value:C,children:C},C))]})}),e.jsx(qe,{sx:{minWidth:"150px"},children:e.jsxs(X,{select:!0,size:"small",value:N,label:"Filter by Type",placeholder:"Filter by Type",onChange:C=>y("type",C.target.value),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ea,{})})},children:[e.jsx(he,{selected:!0,value:"Customers",children:e.jsx("em",{children:"All Types"})}),e.jsx(he,{value:"Debtors",children:"Debtors"}),e.jsx(he,{value:"Creditors",children:"Creditors"})]})}),e.jsx(qe,{children:e.jsx(X,{select:!0,size:"small",value:w.toString(),label:"Show",onChange:C=>{y("rowsPerPage",parseInt(C.target.value,10)),y("page",1)},children:[10,15,20].map(C=>e.jsxs(he,{value:C.toString(),children:[C," rows"]},C))})}),e.jsx(ee,{variant:"outlined",color:"primary",size:"medium",startIcon:e.jsx(Ua,{}),onClick:O,sx:{fontWeight:"bold",py:1.5},children:"Reset Filters"})]}),e.jsx(nt,{component:ne,elevation:0,sx:{width:"100%",borderRadius:1,border:`1px solid ${d(u.palette.divider,1)}`,boxShadow:`0 4px 20px ${d("#000",.05)}`},children:e.jsxs(it,{sx:{width:"100%"},children:[e.jsx(ot,{children:e.jsxs(xe,{sx:{bgcolor:d(u.palette.grey[50],.8),width:"100%","& .MuiTableCell-root":{padding:"8px 16px"},"& .MuiTableCell-head":{borderBottom:`2px solid ${d(u.palette.primary.main,.1)}`}},children:[e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by Date",arrow:!0,children:e.jsx(Ue,{active:R==="created_at",direction:R==="created_at"?L:"asc",onClick:()=>P("created_at"),children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:1},children:[e.jsx(Ut,{fontSize:"small"}),e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:u.palette.text.primary,fontSize:"0.85rem"},children:"Created on"})]})})})}),e.jsx(m,{sx:{pl:3,pr:1},children:e.jsx(le,{title:"Sort by Name",children:e.jsx(Ue,{active:R==="name",direction:R==="name"?L:"asc",onClick:()=>P("name"),children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:u.palette.text.primary,fontSize:"0.85rem"},children:"Account Information"})})})}),e.jsx(m,{align:"center",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:u.palette.text.primary,fontSize:"0.85rem"},children:"Account Name"})}),e.jsx(m,{align:"center",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:u.palette.text.primary,fontSize:"0.85rem"},children:"Account Number"})}),e.jsx(m,{align:"right",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:u.palette.text.primary,fontSize:"0.85rem"},children:"Debit"})}),e.jsx(m,{align:"right",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:u.palette.text.primary,fontSize:"0.85rem"},children:"Credit"})}),e.jsx(m,{align:"right",sx:{pr:3},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:u.palette.text.primary,fontSize:"0.85rem"},children:"Actions"})})]})}),e.jsx(st,{children:n?Array([1,2,3,4,5]).map((C,$)=>e.jsx(hl,{},`skeleton-${$}`)):(h==null?void 0:h.length)>0?h.map((C,$)=>e.jsx(Bp,{cus:C,index:$+1+(_-1)*w,onView:()=>F(C),onEdit:()=>{S(mr(C)),x(`/accounts/edit/${C.parent.toLowerCase()}`)},onDelete:async()=>{await S(Cr(C._id)).unwrap().then(()=>{S(mr(null)),D(),Z.success(`${C.ledger_name} deleted successfully.`)}).catch(G=>{Z.error(G||"An unexpected error occurred while deleting the customer."),console.error("Failed to delete customer:",G)})}},C._id)):e.jsx(xe,{children:e.jsx(m,{colSpan:6,sx:{textAlign:"center",py:8},children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx(ya,{sx:{fontSize:"4rem",color:u.palette.text.disabled}}),e.jsx(i,{variant:"h5",color:"text.secondary",sx:{fontWeight:600},children:"No accounts found"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Try adjusting your search or filter criteria, or add your first account"}),e.jsx(I,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs(l,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(ft,{startIcon:e.jsx(Zt,{}),onClick:()=>{var C;if(!(c!=null&&c._id)){Z.error("Please create a company first.");return}x("/customers/create/debtors"),S(er(((C=s.find($=>$.name.includes("Debtors")))==null?void 0:C._id)||""))},text:"Add Debtors"}),e.jsx(ta,{startIcon:e.jsx(Zt,{}),onClick:()=>{var C;if(!(c!=null&&c._id)){Z.error("Please create a company first.");return}x("/customers/create/creditors"),S(er(((C=s.find($=>$.name.includes("Creditors")))==null?void 0:C._id)||""))},text:"Add Creditors"})]})})]})})})})]})}),e.jsx(Dt,{total:a.total,item:"accounts",page:_,metaPage:a.page,rowsPerPage:w,onChange:A})]})},Lp=({inv:t,index:a,selected:n,onSelect:s})=>{const r=we(),[o,p]=g.useState(!1);return e.jsx(e.Fragment,{children:e.jsx(ze,{in:!0,timeout:300+a*100,children:e.jsxs(xe,{onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),sx:{cursor:"pointer",width:"100%",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:o?"translateY(-2px)":"translateY(0)",boxShadow:o?`0 8px 25px ${d(r.palette.primary.main,.15)}`:"none","&:hover":{bgcolor:d(r.palette.primary.main,.02)},"& .MuiTableCell-root":{padding:"8px 16px"},borderLeft:`4px solid ${o?r.palette.primary.main:"transparent"}`},onClick:()=>{s&&s(!n)},children:[e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(Aa,{checked:!!n,onChange:(c,x)=>{c.stopPropagation(),s&&s(x)}})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start"},children:[e.jsx(Ut,{sx:{mr:.5,color:r.palette.text.secondary}}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,color:r.palette.text.primary},children:Nt(t.date)||"N/A"})]})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600,color:r.palette.text.primary,mb:.5,transition:"color 0.3s ease"},children:t==null?void 0:t.customer})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(i,{variant:"body1",sx:{fontWeight:700,color:r.palette.text.primary},children:t.voucher_type})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsxs(l,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",gap:1},children:[["Purchase","Sales"].includes(t.voucher_type)&&t.grand_total===t.paid_amount&&e.jsx(Si,{sx:{mr:.5,color:r.palette.success.main}}),["Purchase","Sales"].includes(t.voucher_type)&&t.paid_amount===0&&e.jsx(Bs,{sx:{mr:.5,color:r.palette.error.main}}),["Purchase","Sales"].includes(t.voucher_type)&&t.grand_total>t.paid_amount&&t.paid_amount>0&&e.jsx(Fs,{sx:{mr:.5,color:r.palette.warning.main}}),e.jsx(i,{variant:"body1",sx:{fontWeight:700,color:["Purchase","Sales"].includes(t.voucher_type)&&t.grand_total===t.paid_amount?r.palette.success.main:t.paid_amount===0?r.palette.error.main:t.grand_total>t.paid_amount&&t.paid_amount>0?r.palette.warning.main:r.palette.text.primary},children:["Purchase","Sales"].includes(t.voucher_type)&&(t.grand_total===t.paid_amount?"Paid":t.paid_amount===0?"Unpaid":"Partially Paid")})]})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(i,{variant:"body1",sx:{fontWeight:600,color:r.palette.text.secondary},children:t.voucher_number?`${t.voucher_number}`:" N/A"})}),e.jsx(m,{align:"right",sx:{px:1},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[t.amount>0&&e.jsx(i,{variant:"body1",sx:{fontWeight:700,mr:.5,color:r.palette.success.main},children:"₹"}),e.jsx(i,{variant:"body1",sx:{fontWeight:700,color:r.palette.success.main},children:t.amount>0?Math.abs(t.amount):" "})]})}),e.jsx(m,{align:"right",sx:{px:1},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[!(t.amount>0)&&e.jsx(i,{variant:"body1",sx:{fontWeight:700,mr:.5,color:r.palette.error.main},children:"₹"}),e.jsx(i,{variant:"body1",sx:{fontWeight:700,color:r.palette.error.main},children:t.amount>0?"":Math.abs(t.amount)})]})})]})})})},Op=()=>{var F;const{account:t,loading:a,customerInvoices:n,customerInvoicesMeta:s}=Ce(h=>h.customersLedger),{user:r,current_company_id:o}=Ce(h=>h.auth),p=o||localStorage.getItem("current_company_id")||((F=r==null?void 0:r.user_settings)==null?void 0:F.current_company_id)||"",[c,x]=g.useState([]),u=Fe(),S=Ke(),{account_id:f}=ja(),v=we(),{searchQuery:j,page:T,rowsPerPage:k,startDate:B,endDate:_,type:K,sortField:w,sortOrder:N}=Ce(h=>h.customersLedger.customersFilters),[R,L]=g.useState(""),D=g.useCallback(async()=>{u(an({searchQuery:R,company_id:p||"",customer_id:f||"",pageNumber:T,type:K,limit:k,sortField:w,sortOrder:N,start_date:$t(B),end_date:$t(_)}))},[p,f,u,_,T,k,R,w,N,B,K]);g.useEffect(()=>{f&&u(ei({id:f,start_date:$t(B),end_date:$t(_)}))},[u,f,B,_]),g.useEffect(()=>{D()},[]),g.useEffect(()=>{const h=setTimeout(()=>{L(j)},300);return()=>{clearTimeout(h)}},[j]),g.useEffect(()=>{D()},[p,f,u,_,T,k,R,w,N,B,K,D]);const P=h=>{u(Na({sortOrder:w===h&&N==="asc"?"desc":"asc",sortField:h}))},A=(h,b)=>{u(Na({page:b}))},O=(h,b)=>{u(Na({[h]:b}))},y=g.useCallback(()=>{u(Na({searchQuery:"",type:"all",page:1,startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString(),endDate:new Date().toISOString(),rowsPerPage:10,sortField:"created_at",sortOrder:"desc"}))},[]);return t?e.jsx(Pt,{dateAdapter:Lt,children:e.jsxs(l,{sx:{px:3,marginTop:"2rem",width:"100%"},children:[e.jsx(Ne,{sx:{mb:3,p:2},children:e.jsx(Me,{children:e.jsx(ne,{sx:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",background:"transparent"},children:e.jsxs(I,{item:!0,sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx(zt,{icon:e.jsx(ma,{fontSize:"small"}),title:"Back",color:"primary",onClick:()=>S(-1)}),e.jsx($e,{sx:{mx:2,width:48,height:48},children:ha(t.ledger_name)}),e.jsxs(l,{children:[e.jsx(i,{variant:"h6",children:t.ledger_name}),e.jsx(ve,{size:"small",label:t.parent,style:{color:v.palette.primary.main}})]})]})})})}),e.jsxs(l,{sx:{display:"flex",my:3,gap:2,flexWrap:"wrap"},children:[e.jsx(X,{sx:{flexGrow:1,minWidth:"250px"},variant:"outlined",size:"small",label:"Search",placeholder:"Search by name, type...",value:j,onChange:h=>O("searchQuery",h.target.value),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(ao,{})})}}),e.jsx(Xe,{label:"Start Date",value:new Date(B),format:"dd/MM/yyyy",views:["year","month","day"],onChange:h=>O("startDate",h?h.toISOString():""),slotProps:{textField:{size:"small",sx:{"& .MuiOutlinedInput-root":{width:"150px",borderRadius:"8px"},"& .MuiInputAdornment-root .MuiButtonBase-root":{border:"none",boxShadow:"none"}}}}}),e.jsx(Xe,{label:"End Date",value:new Date(_),format:"dd/MM/yyyy",views:["year","month","day"],onChange:h=>O("endDate",h?h.toISOString():""),slotProps:{textField:{size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px",width:"150px"},"& .MuiInputAdornment-root .MuiButtonBase-root":{border:"none",boxShadow:"none"}}}}}),e.jsx(qe,{sx:{minWidth:"150px"},children:e.jsxs(X,{select:!0,size:"small",value:K,label:"Filter by invoice Types",placeholder:"Filter by invoice Types",onChange:h=>O("type",h.target.value),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ls,{})})},children:[e.jsx(he,{selected:!0,value:"all",children:e.jsx("em",{children:"All"})}),e.jsx(he,{value:"Sales",children:"Sales"}),e.jsx(he,{value:"Purchase",children:"Purchase"}),e.jsx(he,{value:"Payment",children:"Payment"}),e.jsx(he,{value:"Receipt",children:"Receipt"})]})}),e.jsx(qe,{children:e.jsx(X,{select:!0,size:"small",value:k.toString(),label:"Show",onChange:h=>{O("rowsPerPage",parseInt(h.target.value,10)),O("page",1)},children:[10,15,20].map(h=>e.jsxs(he,{value:h.toString(),children:[h," rows"]},h))})}),e.jsx(ee,{variant:"outlined",color:"primary",size:"medium",startIcon:e.jsx(Ua,{}),onClick:y,sx:{fontWeight:"bold",py:1.5},children:"Reset Filters"})]}),e.jsx(nt,{component:ne,elevation:0,sx:{width:"100%",borderRadius:1,border:`1px solid ${d(v.palette.divider,1)}`,boxShadow:`0 4px 20px ${d("#000",.05)}`},children:e.jsxs(it,{sx:{width:"100%"},children:[e.jsx(ot,{children:e.jsxs(xe,{sx:{bgcolor:d(v.palette.grey[50],.8),width:"100%","& .MuiTableCell-head":{borderBottom:`2px solid ${d(v.palette.primary.main,.1)}`},"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(Aa,{indeterminate:c.length>0&&c.length<n.length,checked:n.length>0&&c.length===n.length,onChange:(h,b)=>{x(b?n.map(M=>M.vouchar_id):[])}})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by State",arrow:!0,children:e.jsx(Ue,{active:w==="state",direction:w==="state"?N:"asc",onClick:()=>P("state"),children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(Ut,{fontSize:"small"}),e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:v.palette.text.primary,fontSize:"0.85rem"},children:"Invoice Date"})]})})})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by Name",children:e.jsx(Ue,{active:w==="name",direction:w==="name"?N:"asc",onClick:()=>P("name"),children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:v.palette.text.primary,fontSize:"0.85rem"},children:"Particulars"})})})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by Item Quantity",arrow:!0,children:e.jsx(Ue,{active:w==="name",direction:w==="name"?N:"asc",onClick:()=>P("name"),children:e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:v.palette.text.primary,fontSize:"0.85rem"},children:"Invoice Type"})})})})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by Item Quantity",arrow:!0,children:e.jsx(Ue,{active:w==="name",direction:w==="name"?N:"asc",onClick:()=>P("name"),children:e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:v.palette.text.primary,fontSize:"0.85rem"},children:"Payment Status"})})})})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by State",arrow:!0,children:e.jsx(Ue,{active:w==="state",direction:w==="state"?N:"asc",onClick:()=>P("state"),children:e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:v.palette.text.primary,fontSize:"0.85rem"},children:"Invoice No."})})})})}),e.jsx(m,{align:"right",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:v.palette.text.primary,fontSize:"0.85rem"},children:"Debit"})}),e.jsx(m,{align:"right",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:v.palette.text.primary,fontSize:"0.85rem"},children:"Credit"})})]})}),e.jsxs(st,{children:[a?Array([1,2,3,4,5]).map((h,b)=>e.jsx(to,{},`skeleton-${b}`)):(n==null?void 0:n.length)>0?n==null?void 0:n.map((h,b)=>e.jsx(Lp,{inv:h,selected:c.includes(h.vouchar_id),onSelect:M=>{x(W=>M?[...W,h.vouchar_id]:W.filter(C=>C!==h.vouchar_id))},index:b+1+(T-1)*k,onView:()=>{S(`/invoices/${h.vouchar_id}`)}},`${h.vouchar_id}-${b}`)):e.jsx(xe,{children:e.jsx(m,{colSpan:8,sx:{textAlign:"center",py:8},children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx(ya,{sx:{fontSize:"4rem",color:v.palette.text.disabled}}),e.jsx(i,{variant:"h5",color:"text.secondary",sx:{fontWeight:600},children:"There are no invoices for this account in the current month."}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"You can create a new invoice from the invoices page."})]})})}),!a&&e.jsxs(e.Fragment,{children:[e.jsx(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px",bgcolor:d(v.palette.grey[50],.8)}},children:e.jsx(m,{colSpan:8})}),e.jsxs(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{colSpan:5,sx:{textAlign:"center"}}),e.jsx(m,{colSpan:1,sx:{textAlign:"left"},children:e.jsx(i,{variant:"body1",color:"text.primary",sx:{fontWeight:600,textDecoration:"underline",whiteSpace:"nowrap"},children:"Opening Balance"})}),e.jsx(m,{align:"right",colSpan:1,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[t.opening_balance>0&&e.jsx(i,{variant:"body1",sx:{fontWeight:700,mr:.5,color:v.palette.success.main},children:"₹"}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,color:v.palette.success.main},children:t.opening_balance>0?Math.abs(t.opening_balance):""})]})}),e.jsx(m,{align:"right",colSpan:1,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[!(t.opening_balance>0)&&e.jsx(i,{variant:"body1",sx:{fontWeight:700,mr:.5,color:v.palette.error.main},children:"₹"}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,color:v.palette.error.main},children:t.opening_balance>0?"":Math.abs(t.opening_balance)})]})})]}),e.jsxs(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{colSpan:5,sx:{textAlign:"center"}}),e.jsx(m,{colSpan:1,sx:{textAlign:"left"},children:e.jsx(i,{variant:"body1",color:"text.primary",sx:{fontWeight:600,textDecoration:"underline"},children:"Current Total"})}),e.jsx(m,{align:"right",colSpan:1,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[e.jsx(i,{variant:"body1",sx:{fontWeight:700,mr:.5,color:v.palette.success.main},children:"₹"}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,color:v.palette.success.main},children:Math.abs(t.total_credit)})]})}),e.jsx(m,{align:"right",colSpan:1,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[e.jsx(i,{variant:"body1",sx:{fontWeight:700,mr:.5,color:v.palette.error.main},children:"₹"}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,color:v.palette.error.main},children:Math.abs(t.total_debit)})]})})]}),e.jsxs(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{colSpan:5,sx:{textAlign:"center"}}),e.jsx(m,{colSpan:1,sx:{textAlign:"left"},children:e.jsx(i,{variant:"body1",color:"text.primary",sx:{fontWeight:600,textDecoration:"underline",whiteSpace:"nowrap"},children:"Closing Balance"})}),e.jsx(m,{align:"right",colSpan:1,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[t.closing_balance>0&&e.jsx(i,{variant:"body1",sx:{fontWeight:700,mr:.5,color:v.palette.success.main},children:"₹"}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,color:v.palette.success.main},children:t.closing_balance>0?Math.abs(t.closing_balance):""})]})}),e.jsx(m,{align:"right",colSpan:1,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[!(t.closing_balance>0)&&e.jsx(i,{variant:"body1",sx:{fontWeight:700,mr:.5,color:v.palette.error.main},children:"₹"}),e.jsx(i,{variant:"body1",sx:{fontWeight:600,color:v.palette.error.main},children:t.closing_balance>0?"":Math.abs(t.closing_balance)})]})})]})]})]})]})}),e.jsx(Dt,{total:(s==null?void 0:s.total)||0,item:"invoices",page:T,metaPage:(s==null?void 0:s.page)||1,rowsPerPage:k,onChange:A})]})}):e.jsx("p",{children:"Customer Profile not found"})},ii=ye("get/users",async({search:t,pageNumber:a,limit:n,sortField:s,sortOrder:r},{rejectWithValue:o})=>{var p,c;try{const x=await Vr.get(`/view/all/users?search=${t}&start_date=&end_date=&page_no=${a}&limit=${n}&sortField=${s}&sortOrder=${r==="asc"?"1":"-1"}`);if(console.log("getUsers response:",x),x.data.success===!0){const u=x.data.data.docs,S=x.data.data.meta;return{usersList:u,pageMeta:S}}else return o("Login Failed: No access token recieved.")}catch(x){return o((c=(p=x==null?void 0:x.response)==null?void 0:p.data)==null?void 0:c.message)}}),vn=({title:t,value:a,subtitle:n,icon:s,color:r,trend:o})=>e.jsx(Ye,{in:!0,timeout:300,children:e.jsx(Ne,{elevation:0,sx:{height:"100%",background:`linear-gradient(135deg, ${d(r,.05)} 0%, ${d(r,.02)} 100%)`,border:`1px solid ${d(r,.1)}`,transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:`0 8px 24px ${d(r,.15)}`,border:`1px solid ${d(r,.2)}`}},children:e.jsx(Me,{sx:{p:3},children:e.jsxs(l,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[e.jsxs(l,{flex:1,children:[e.jsx(i,{variant:"body2",color:"text.secondary",sx:{fontWeight:500,letterSpacing:"0.5px",textTransform:"uppercase",fontSize:"0.75rem",mb:1},children:t}),e.jsx(i,{variant:"h3",fontWeight:"700",sx:{color:r,mb:.5,fontSize:{xs:"1.75rem",sm:"2.25rem"}},children:a}),n&&e.jsxs(l,{display:"flex",alignItems:"center",gap:.5,children:[o&&(o>0?e.jsx(js,{sx:{fontSize:14,color:"success.main"}}):e.jsx(Nc,{sx:{fontSize:14,color:"error.main"}})),e.jsx(i,{variant:"caption",sx:{color:o>0?"success.main":"text.secondary",fontWeight:500},children:n})]})]}),e.jsx($e,{sx:{bgcolor:d(r,.1),width:56,height:56},children:s})]})})})}),os=t=>t.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2),ss=()=>{const t=we(),[a,n]=g.useState(0),[s,r]=g.useState(!1),[o,p]=g.useState(""),[c,x]=g.useState(null),[u,S]=g.useState(null),f=Fe(),{usersList:v}=Ce(y=>y.admin),[j,T]=g.useState({search:"",page:1,startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1),endDate:new Date,rowsPerPage:1e3,sortField:"created_at",sortOrder:"desc"}),{search:k,page:B,rowsPerPage:_,startDate:K,endDate:w,sortField:N,sortOrder:R}=j,L=g.useMemo(()=>{const y=v.length,F=v.filter($=>$.is_verified).length,h=v.filter($=>$.companies.length>0).length,b=v.filter($=>$.user_type==="admin").length,M=v.reduce(($,G)=>$+G.companies.length,0),W=v.reduce(($,G)=>(G.companies.forEach(ge=>{$[ge.state]=($[ge.state]||0)+1}),$),{}),C=v.reduce(($,G)=>{const ge=G.user_settings.last_login_device.split("|")[0].trim();return $[ge]=($[ge]||0)+1,$},{});return{total:y,verified:F,withCompanies:h,admins:b,totalCompanies:M,stateDistribution:W,deviceTypes:C}},[v]),D=y=>new Date(y).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),P=(y,F)=>{x(y.currentTarget),S(F)},A=()=>{x(null),S(null)},O=(y,F)=>{T(h=>({...h,[y]:F}))};return g.useEffect(()=>{const y=setTimeout(()=>{p(k)},500);return()=>{clearTimeout(y)}},[k]),g.useEffect(()=>{f(ii({search:o,pageNumber:B,limit:_,sortField:N,sortOrder:R}))},[f,w,B,_,o,N,R,K]),e.jsxs(l,{sx:{minHeight:"100vh",width:"100%",bgcolor:"#fafbfc",p:{xs:2,md:3}},children:[e.jsxs(l,{sx:{mx:"auto"},children:[e.jsx(l,{mb:4,children:e.jsxs(l,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[e.jsxs(l,{display:"flex",alignItems:"center",gap:2,children:[e.jsx($e,{sx:{bgcolor:t.palette.primary.main,width:48,height:48},children:e.jsx(fs,{})}),e.jsxs(l,{children:[e.jsx(i,{variant:"h4",fontWeight:"700",sx:{background:`linear-gradient(135deg, ${t.palette.primary.main} 0%, ${t.palette.secondary.main} 100%)`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",mb:.5},children:"User Management"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Monitor and manage all user accounts"})]})]}),e.jsxs(l,{display:"flex",gap:1,children:[e.jsx(le,{title:"Refresh Data",children:e.jsx(ke,{color:"primary",sx:{bgcolor:d(t.palette.primary.main,.1),"&:hover":{bgcolor:d(t.palette.primary.main,.2)}},children:e.jsx(Os,{})})}),e.jsx(le,{title:"Export Data",children:e.jsx(ke,{color:"primary",sx:{bgcolor:d(t.palette.primary.main,.1),"&:hover":{bgcolor:d(t.palette.primary.main,.2)}},children:e.jsx(xi,{})})})]})]})}),e.jsxs(I,{container:!0,spacing:3,mb:4,children:[e.jsx(I,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(vn,{title:"Total Users",value:L.total,subtitle:"Active accounts",icon:e.jsx(Kr,{sx:{color:"#1976d2",fontSize:28}}),color:"#1976d2"})}),e.jsx(I,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(vn,{title:"Verified Users",value:L.verified,subtitle:`${(L.verified/L.total*100).toFixed(1)}% verified`,icon:e.jsx(di,{sx:{color:"#4caf50",fontSize:28}}),color:"#4caf50",trend:5})}),e.jsx(I,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(vn,{title:"Total Companies",value:L.totalCompanies,subtitle:`${L.withCompanies} users with companies`,icon:e.jsx(ca,{sx:{color:"#ff9800",fontSize:28}}),color:"#ff9800"})}),e.jsx(I,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(vn,{title:"Admin Users",value:L.admins,subtitle:`${(L.admins/L.total*100).toFixed(1)}% of total`,icon:e.jsx(na,{sx:{color:"#9c27b0",fontSize:28}}),color:"#9c27b0"})})]}),e.jsx(ze,{in:!0,timeout:500,children:e.jsxs(ne,{elevation:0,sx:{mb:3,border:`1px solid ${d(t.palette.divider,.1)}`,borderRadius:2,overflow:"hidden"},children:[e.jsx(l,{p:3,children:e.jsxs(I,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(I,{item:!0,xs:12,md:8,children:e.jsx(X,{fullWidth:!0,placeholder:"Search by name, email, or phone...",value:k,onChange:y=>O("search",y.target.value),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(qa,{color:"action"})})},sx:{"& .MuiOutlinedInput-root":{bgcolor:d(t.palette.primary.main,.02),"&:hover":{bgcolor:d(t.palette.primary.main,.04)},"&.Mui-focused":{bgcolor:"background.paper"}}}})}),e.jsx(I,{item:!0,xs:12,md:4,children:e.jsx(l,{display:"flex",gap:1,justifyContent:{xs:"flex-start",md:"flex-end"},children:e.jsx(ee,{variant:"outlined",startIcon:e.jsx(Ea,{}),sx:{borderRadius:2,textTransform:"none",fontWeight:600},children:"Filters"})})})]})}),e.jsxs(Wr,{value:a,onChange:(y,F)=>n(F),sx:{px:3,borderTop:`1px solid ${d(t.palette.divider,.1)}`,"& .MuiTab-root":{textTransform:"none",fontWeight:600,fontSize:"0.95rem",minHeight:56}},children:[e.jsx(dt,{label:"User Overview"}),e.jsx(dt,{label:"Detailed View"}),e.jsx(dt,{label:"Analytics"})]})]})}),s&&e.jsx(St,{sx:{mb:2,borderRadius:1}}),a===0&&e.jsx(ze,{in:!0,timeout:500,children:e.jsx(nt,{component:ne,elevation:0,sx:{border:`1px solid ${d(t.palette.divider,.1)}`,borderRadius:2},children:e.jsxs(it,{children:[e.jsx(ot,{children:e.jsxs(xe,{sx:{bgcolor:d(t.palette.primary.main,.02),"& .MuiTableCell-head":{borderBottom:`2px solid ${d(t.palette.primary.main,.1)}`,fontWeight:700,color:t.palette.text.primary,py:2}},children:[e.jsx(m,{children:"User"}),e.jsx(m,{children:"Contact"}),e.jsx(m,{children:"Status"}),e.jsx(m,{children:"Companies"}),e.jsx(m,{children:"Joined"}),e.jsx(m,{children:"Last Active"}),e.jsx(m,{align:"right",children:"Actions"})]})}),e.jsx(st,{children:v.length===0?e.jsx(xe,{children:e.jsxs(m,{colSpan:7,align:"center",sx:{py:8},children:[e.jsx(ya,{sx:{fontSize:64,color:"text.disabled",mb:2}}),e.jsx(i,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No users found"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Try adjusting your search or filter criteria"})]})}):v.map(y=>e.jsxs(xe,{hover:!0,sx:{"&:hover":{bgcolor:d(t.palette.primary.main,.02)},transition:"background-color 0.2s"},children:[e.jsx(m,{children:e.jsxs(l,{display:"flex",alignItems:"center",children:[e.jsx($e,{sx:{bgcolor:t.palette.primary.main,mr:2,fontWeight:700},children:os(`${y.name.first} ${y.name.last}`)}),e.jsxs(l,{children:[e.jsxs(i,{variant:"body2",fontWeight:"600",children:[y.name.first," ",y.name.last]}),e.jsx(ve,{label:y.user_type,size:"small",color:y.user_type==="admin"?"secondary":"default",sx:{mt:.5,height:20,fontSize:"0.7rem",fontWeight:600}})]})]})}),e.jsx(m,{children:e.jsxs(l,{display:"flex",flexDirection:"column",gap:.5,children:[e.jsxs(l,{display:"flex",alignItems:"center",children:[e.jsx(Bt,{sx:{fontSize:14,mr:.5,color:"text.secondary"}}),e.jsx(i,{variant:"body2",fontSize:"0.85rem",children:y.email})]}),e.jsxs(l,{display:"flex",alignItems:"center",children:[e.jsx(ua,{sx:{fontSize:14,mr:.5,color:"text.secondary"}}),e.jsxs(i,{variant:"body2",color:"text.secondary",fontSize:"0.85rem",children:[y.phone.code," ",y.phone.number]})]})]})}),e.jsx(m,{children:y.is_verified?e.jsx(ve,{icon:e.jsx(pt,{sx:{fontSize:16}}),label:"Verified",color:"success",size:"small",sx:{fontWeight:600}}):e.jsx(ve,{icon:e.jsx(Ga,{sx:{fontSize:16}}),label:"Unverified",size:"small",sx:{fontWeight:600}})}),e.jsx(m,{children:e.jsx(l,{display:"flex",alignItems:"center",children:e.jsx(Ka,{badgeContent:y.companies.length,color:"primary",sx:{"& .MuiBadge-badge":{fontWeight:700}},children:e.jsx(ca,{color:"action"})})})}),e.jsx(m,{children:e.jsx(i,{variant:"body2",fontSize:"0.85rem",children:D(y.created_at)})}),e.jsxs(m,{children:[e.jsx(i,{variant:"body2",fontSize:"0.85rem",fontWeight:"500",children:y.latest_invoice_created_at?D(y.latest_invoice_created_at):"-"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:y.companies.length>0?`${y.total_invoices_created} invoices`:"No activity"})]}),e.jsx(m,{align:"right",children:e.jsx(ke,{size:"small",onClick:F=>P(F,y._id),children:e.jsx(ln,{})})})]},y._id))})]})})}),a===1&&e.jsx(I,{container:!0,spacing:3,children:v.map(y=>e.jsx(I,{item:!0,xs:12,md:6,lg:4,children:e.jsx(Ye,{in:!0,timeout:300,children:e.jsx(Ne,{elevation:0,sx:{height:"100%",border:`1px solid ${d(t.palette.divider,.1)}`,transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:`0 8px 24px ${d(t.palette.common.black,.1)}`}},children:e.jsxs(Me,{sx:{p:3},children:[e.jsxs(l,{display:"flex",alignItems:"center",mb:3,children:[e.jsx($e,{sx:{bgcolor:t.palette.primary.main,width:56,height:56,mr:2,fontWeight:700,fontSize:"1.25rem"},children:os(`${y.name.first} ${y.name.last}`)}),e.jsxs(l,{flex:1,children:[e.jsxs(i,{variant:"h6",fontWeight:"700",mb:.5,children:[y.name.first," ",y.name.last]}),e.jsx(ve,{label:y.user_type,color:y.user_type==="admin"?"secondary":"primary",size:"small",sx:{fontWeight:600}})]}),e.jsx(ke,{size:"small",children:e.jsx(ln,{})})]}),e.jsx(Pe,{sx:{mb:2}}),e.jsxs(l,{sx:{"& > *:not(:last-child)":{mb:2}},children:[e.jsxs(l,{display:"flex",alignItems:"center",children:[e.jsx(Bt,{sx:{fontSize:18,mr:1,color:"text.secondary"}}),e.jsx(i,{variant:"body2",fontSize:"0.85rem",children:y.email})]}),e.jsxs(l,{display:"flex",alignItems:"center",children:[e.jsx(ua,{sx:{fontSize:18,mr:1,color:"text.secondary"}}),e.jsxs(i,{variant:"body2",fontSize:"0.85rem",children:[y.phone.code," ",y.phone.number]})]}),e.jsxs(l,{display:"flex",alignItems:"center",children:[e.jsx(Oo,{sx:{fontSize:18,mr:1,color:"text.secondary"}}),e.jsx(i,{variant:"body2",fontSize:"0.85rem",children:y.user_settings.last_login_device})]}),e.jsxs(l,{display:"flex",alignItems:"center",children:[e.jsx(Da,{sx:{fontSize:18,mr:1,color:"text.secondary"}}),e.jsx(i,{variant:"body2",fontSize:"0.85rem",children:D(y.user_settings.last_login)})]}),y.companies.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Pe,{sx:{my:2}}),e.jsxs(i,{variant:"body2",fontWeight:"700",mb:1.5,display:"flex",alignItems:"center",children:[e.jsx(ca,{sx:{fontSize:18,mr:.5}}),"Companies (",y.companies.length,")"]}),y.companies.map(F=>e.jsxs(ne,{sx:{bgcolor:d(t.palette.primary.main,.04),p:1.5,border:`1px solid ${d(t.palette.primary.main,.1)}`,borderRadius:1},children:[e.jsx(i,{variant:"body2",fontWeight:"600",mb:.5,children:F.company_name}),e.jsxs(l,{display:"flex",alignItems:"center",mb:.5,children:[e.jsx(La,{sx:{fontSize:14,mr:.5,color:"text.secondary"}}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:[F.state,", ",F.country]})]}),F.bank_details.account_number&&e.jsxs(l,{display:"flex",alignItems:"center",children:[e.jsx(xt,{sx:{fontSize:14,mr:.5,color:"text.secondary"}}),e.jsx(i,{variant:"caption",color:"text.secondary",children:F.bank_details.bank_name})]})]},F._id))]})]})]})})})},y._id))}),a===2&&e.jsx(ze,{in:!0,timeout:500,children:e.jsxs(l,{children:[e.jsx(Ne,{elevation:0,sx:{mb:3,border:`1px solid ${d(t.palette.divider,.1)}`,borderRadius:2},children:e.jsxs(Me,{sx:{p:3},children:[e.jsxs(l,{display:"flex",alignItems:"center",mb:3,children:[e.jsx(La,{sx:{mr:1,color:"primary.main"}}),e.jsx(i,{variant:"h6",fontWeight:"700",children:"Companies by State"})]}),e.jsx(I,{container:!0,spacing:2,children:Object.entries(L.stateDistribution).sort(([,y],[,F])=>F-y).map(([y,F])=>e.jsx(I,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(ne,{sx:{p:2.5,display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:d(t.palette.primary.main,.02),border:`1px solid ${d(t.palette.primary.main,.1)}`,transition:"all 0.2s","&:hover":{bgcolor:d(t.palette.primary.main,.04),transform:"translateY(-2px)"}},children:[e.jsxs(l,{children:[e.jsx(i,{variant:"body2",fontWeight:"700",mb:.5,children:y}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:[(F/L.totalCompanies*100).toFixed(1),"% of total"]})]}),e.jsx($e,{sx:{bgcolor:t.palette.primary.main,width:48,height:48,fontWeight:700,fontSize:"1.1rem"},children:F})]})},y))})]})}),e.jsx(Ne,{elevation:0,sx:{mb:3,border:`1px solid ${d(t.palette.divider,.1)}`,borderRadius:2},children:e.jsxs(Me,{sx:{p:3},children:[e.jsxs(l,{display:"flex",alignItems:"center",mb:3,children:[e.jsx(Oo,{sx:{mr:1,color:"primary.main"}}),e.jsx(i,{variant:"h6",fontWeight:"700",children:"Device Distribution"})]}),e.jsx(I,{container:!0,spacing:3,children:Object.entries(L.deviceTypes).sort(([,y],[,F])=>F-y).map(([y,F])=>e.jsx(I,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(ne,{sx:{p:3,bgcolor:d(t.palette.secondary.main,.02),border:`1px solid ${d(t.palette.secondary.main,.1)}`,transition:"all 0.2s","&:hover":{bgcolor:d(t.palette.secondary.main,.04)}},children:[e.jsx(i,{variant:"h4",fontWeight:"700",color:"secondary.main",mb:1,children:F}),e.jsx(i,{variant:"body2",color:"text.secondary",mb:2,fontWeight:"500",children:y}),e.jsx(St,{variant:"determinate",value:F/L.total*100,sx:{height:8,borderRadius:4,bgcolor:d(t.palette.secondary.main,.1),"& .MuiLinearProgress-bar":{borderRadius:4,bgcolor:t.palette.secondary.main}}}),e.jsxs(i,{variant:"caption",color:"text.secondary",mt:1,display:"block",children:[(F/L.total*100).toFixed(1),"% of users"]})]})},y))})]})}),e.jsx(Ne,{elevation:0,sx:{border:`1px solid ${d(t.palette.divider,.1)}`,borderRadius:2,background:`linear-gradient(135deg, ${d(t.palette.success.main,.02)} 0%, ${d(t.palette.info.main,.02)} 100%)`},children:e.jsxs(Me,{sx:{p:3},children:[e.jsxs(l,{display:"flex",alignItems:"center",mb:3,children:[e.jsx(na,{sx:{mr:1,color:"primary.main"}}),e.jsx(i,{variant:"h6",fontWeight:"700",children:"User Activity Summary"})]}),e.jsxs(I,{container:!0,spacing:3,children:[e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsxs(ne,{sx:{p:2.5,bgcolor:"background.paper",border:`1px solid ${d(t.palette.divider,.1)}`},children:[e.jsx(i,{variant:"body2",color:"text.secondary",mb:1,children:"Average Companies per User"}),e.jsx(i,{variant:"h4",fontWeight:"700",color:"primary.main",children:(L.totalCompanies/L.total).toFixed(2)})]})}),e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsxs(ne,{sx:{p:2.5,bgcolor:"background.paper",border:`1px solid ${d(t.palette.divider,.1)}`},children:[e.jsx(i,{variant:"body2",color:"text.secondary",mb:1,children:"Verification Rate"}),e.jsxs(i,{variant:"h4",fontWeight:"700",color:"success.main",children:[(L.verified/L.total*100).toFixed(1),"%"]})]})}),e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsxs(ne,{sx:{p:2.5,bgcolor:"background.paper",border:`1px solid ${d(t.palette.divider,.1)}`},children:[e.jsx(i,{variant:"body2",color:"text.secondary",mb:1,children:"Users with Companies"}),e.jsxs(i,{variant:"h4",fontWeight:"700",color:"info.main",children:[L.withCompanies," / ",L.total]})]})}),e.jsx(I,{item:!0,xs:12,sm:6,children:e.jsxs(ne,{sx:{p:2.5,bgcolor:"background.paper",border:`1px solid ${d(t.palette.divider,.1)}`},children:[e.jsx(i,{variant:"body2",color:"text.secondary",mb:1,children:"Admin to User Ratio"}),e.jsxs(i,{variant:"h4",fontWeight:"700",color:"secondary.main",children:["1:",((L.total-L.admins)/L.admins).toFixed(1)]})]})})]})]})})]})})]}),e.jsxs(Mr,{anchorEl:c,open:!!c,onClose:A,PaperProps:{elevation:3,sx:{minWidth:180,borderRadius:2,mt:1}},children:[e.jsxs(he,{onClick:A,children:[e.jsx(vt,{children:e.jsx(Tr,{fontSize:"small"})}),e.jsx(tt,{children:"View Details"})]}),e.jsxs(he,{onClick:A,children:[e.jsx(vt,{children:e.jsx(aa,{fontSize:"small"})}),e.jsx(tt,{children:"Edit User"})]}),e.jsx(Pe,{}),e.jsxs(he,{onClick:A,sx:{color:"error.main"},children:[e.jsx(vt,{children:e.jsx(ut,{fontSize:"small",color:"error"})}),e.jsx(tt,{children:"Delete User"})]})]})]})},Ep=({company:t,onEditToggle:a})=>{const n=we(),s=()=>{if(!(t!=null&&t.name))return"TK";const[r,o]=t.name.split(" ");return`${(r==null?void 0:r[0])??""}${(o==null?void 0:o[0])??""}`.toUpperCase()};return e.jsx(Ne,{elevation:0,sx:{background:`linear-gradient(135deg, ${n.palette.primary.main} 0%, ${n.palette.primary.dark} 100%)`,color:"white",borderRadius:4,overflow:"hidden",position:"relative",width:"100%","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"radial-gradient(circle at 30% 50%, rgba(255,255,255,0.1) 0%, transparent 50%)",pointerEvents:"none"}},children:e.jsx(Me,{sx:{p:4,position:"relative",zIndex:1},children:e.jsxs(l,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:4,children:[e.jsxs(l,{display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:"center",gap:4,children:[e.jsx(l,{position:"relative",children:e.jsx(Ka,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:e.jsx($e,{sx:{bgcolor:n.palette.success.main,width:36,height:36,border:"3px solid white"},children:e.jsx(di,{sx:{fontSize:20}})}),children:(t==null?void 0:t.image)!==""&&typeof(t==null?void 0:t.image)=="string"?e.jsx("img",{src:t.image,alt:t.name||"",style:{width:140,height:140,borderRadius:"50%",objectFit:"cover",border:"4px solid rgba(255,255,255,0.3)",boxShadow:"0 12px 40px rgba(0,0,0,0.4)"}}):e.jsx($e,{alt:(t==null?void 0:t.name)||"",sx:{width:140,height:140,bgcolor:n.palette.primary.dark,color:"white",fontSize:"3rem",border:"4px solid rgba(255,255,255,0.3)",boxShadow:"0 12px 40px rgba(0,0,0,0.4)",transition:"all 0.3s ease","&:hover":{transform:"scale(1.05)",boxShadow:"0 16px 50px rgba(0,0,0,0.5)"}},children:s()})})}),e.jsxs(l,{flex:1,textAlign:{xs:"center",md:"left"},children:[e.jsx(i,{variant:"h4",sx:{fontWeight:800,mb:1,letterSpacing:-1},children:t==null?void 0:t.name}),e.jsx(J,{direction:"row",spacing:1,justifyContent:{xs:"center",md:"flex-start"},children:[{Icon:Cs,color:"#0077B5",label:"LinkedIn",href:"company?.linkedin"},{Icon:ks,color:"#1877F2",label:"Facebook",href:"company?.facebook"},{Icon:no,color:"#4CAF50",label:"Website",href:(t==null?void 0:t.website)||"#"}].map(({Icon:r,color:o,label:p,href:c},x)=>e.jsx(le,{title:p,arrow:!0,children:e.jsx(ke,{component:"a",href:c,target:"_blank",rel:"noopener noreferrer",sx:{bgcolor:d("hsl(0, 0%, 100%)",.15),color:"white",width:48,height:48,backdropFilter:"blur(10px)",border:`1px solid ${d("hsl(0, 0%, 100%)",.2)}`,transition:"all 0.3s ease","&:hover":{bgcolor:d(o,.2),transform:"translateY(-2px) scale(1.05)",boxShadow:`0 8px 20px ${d(o,.3)}`}},children:e.jsx(r,{})})},x))})]})]}),e.jsxs(ws,{variant:"contained",sx:{display:{xs:"none",md:"flex"},flexDirection:"column",gap:1},children:[e.jsx(ee,{startIcon:e.jsx(pi,{}),sx:{fontWeight:600,px:3},children:"Share"}),e.jsx(ee,{onClick:a,startIcon:e.jsx(aa,{}),sx:{fontWeight:600,px:3},children:"Edit Profile"})]}),e.jsx(ke,{size:"large",onClick:a,sx:{transition:"all 0.2s ease",display:{xs:"flex",md:"none"},color:"white",bgcolor:d("hsl(0, 0%, 100%)",.15),backdropFilter:"blur(10px)","&:hover":{bgcolor:d("hsl(0, 0%, 100%)",.25),transform:"scale(1.05)"}},children:e.jsx(aa,{fontSize:"medium"})})]})})})},Gp=({open:t,onClose:a})=>{const n=we(),s=Fe(),r=Ke(),o=yt(n.breakpoints.down("sm")),{current_company_id:p}=Ce(w=>w.auth),[c,x]=g.useState(!1),[u,S]=g.useState({}),[f,v]=g.useState({bank_account_number:"",bank_account_holder:"",bank_ifsc:"",bank_name:"",bank_branch:"",opening_balance:0}),[j,T]=g.useState("Debit"),k=()=>{const w={};return f.bank_account_holder.trim()||(w.bank_account_holder="Account holder name is required"),f.bank_ifsc.trim()||(w.bank_ifsc="IFSC code is required"),f.bank_name.trim()||(w.bank_name="Bank name is required"),f.bank_branch.trim()||(w.bank_branch="Bank branch is required"),f.bank_account_number.trim()||(w.bank_account_number="Account number is required"),S(w),Object.keys(w).length===0},B=(w,N)=>{v(R=>({...R,[w]:N})),u[w]&&S(R=>({...R,[w]:""}))},_=()=>{v({bank_account_number:"",bank_account_holder:"",bank_ifsc:"",bank_name:"",bank_branch:"",opening_balance:0}),S({})},K=async()=>{if(!k()){const R=Object.keys(u)[0];Z.error(u[R]);return}x(!0);const w={company_id:p||"",opening_balance:j==="Debit"?f.opening_balance:-f.opening_balance,bank_account_number:f.bank_account_number,bank_account_holder:f.bank_account_holder,bank_ifsc:f.bank_ifsc,bank_name:f.bank_name,bank_branch:f.bank_branch,name:`${f.bank_name} - ${f.bank_account_number}`,parent:"Bank Accounts",parent_id:"caea08ac-37fe-4f3b-9577-a6ed78777fa3"},N=new FormData;Object.entries(w).forEach(([R,L])=>{N.append(R,L)}),s(dr(N)).then(()=>{Z.success("Accounts created successfully!"),_(),a(),x(!1),r("/accounts")}).catch(R=>{x(!1),Z.error(R||"Failed to add account. 🚫")}).finally(()=>{x(!1)})};return e.jsxs(e.Fragment,{children:[e.jsxs(Mt,{anchor:"right",PaperProps:{sx:{width:{xs:"100%",sm:650,md:750},backgroundColor:n.palette.background.default,backgroundImage:`linear-gradient(135deg, ${n.palette.background.default} 0%, ${n.palette.background.paper} 100%)`,overflow:"hidden"}},sx:{"& .MuiBackdrop-root":{backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)"}},open:t,onClose:a,transitionDuration:300,children:[e.jsxs(l,{sx:{px:3,py:2,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`2px solid ${n.palette.success.main}`,background:`linear-gradient(135deg, ${n.palette.success.main}20 0%, ${n.palette.success.light}15 100%)`,backdropFilter:"blur(20px)",position:"sticky",top:0,zIndex:100},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(le,{title:"Close",arrow:!0,children:e.jsx(ke,{onClick:a,sx:{backgroundColor:n.palette.background.paper,boxShadow:n.shadows[2],"&:hover":{backgroundColor:n.palette.action.hover,transform:"scale(1.1) rotate(90deg)",boxShadow:n.shadows[4]},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:e.jsx(ct,{})})}),e.jsx(l,{children:e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1},children:e.jsx(i,{variant:"h6",fontWeight:700,children:"Add Bank Account"})})})]}),!o&&e.jsx(ve,{icon:e.jsx(ht,{}),label:"Fill required fields",size:"small",variant:"outlined",sx:{borderColor:n.palette.success.main,color:n.palette.success.main}})]}),e.jsx(l,{sx:{flex:1,overflow:"auto",position:"relative","&::-webkit-scrollbar":{width:8},"&::-webkit-scrollbar-track":{backgroundColor:n.palette.background.default},"&::-webkit-scrollbar-thumb":{backgroundColor:n.palette.divider,borderRadius:1,"&:hover":{backgroundColor:n.palette.action.hover}}},children:e.jsx(l,{sx:{p:3},children:e.jsx(ne,{elevation:1,sx:{px:3,py:3,mb:3,borderRadius:2,background:`linear-gradient(135deg, ${n.palette.background.paper} 0%, ${n.palette.action.hover}20 100%)`,border:`1px solid ${n.palette.divider}`},children:e.jsxs(J,{spacing:3,children:[e.jsxs(l,{sx:{display:"flex",gap:2},children:[e.jsx(X,{fullWidth:!0,placeholder:"Enter Account Holder Name",label:"Account Holder Name",value:f.bank_account_holder,onChange:w=>B("bank_account_holder",w.target.value),error:!!u.bank_account_holder,helperText:u.bank_account_holder,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ee,{fontSize:"small"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}}),e.jsx(X,{fullWidth:!0,placeholder:"Enter Account Number",label:"Account Number",value:f.bank_account_number,onChange:w=>B("bank_account_number",w.target.value),error:!!u.bank_account_number,helperText:u.bank_account_number,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ee,{fontSize:"small"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}})]}),e.jsx(l,{sx:{display:"flex",gap:2},children:e.jsx(X,{fullWidth:!0,placeholder:"Enter Bank Name",label:"Bank Name",value:f.bank_name,onChange:w=>B("bank_name",w.target.value),error:!!u.bank_name,helperText:u.bank_name,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ee,{fontSize:"small"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}})}),e.jsxs(l,{sx:{display:"flex",gap:2},children:[e.jsx(X,{fullWidth:!0,placeholder:"Enter Bank IFSC",label:"Bank IFSC",value:f.bank_ifsc,onChange:w=>B("bank_ifsc",w.target.value),error:!!u.bank_ifsc,helperText:u.bank_ifsc,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ee,{fontSize:"small"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}}),e.jsx(X,{fullWidth:!0,placeholder:"Enter Branch Name",label:"Branch Name",value:f.bank_branch,onChange:w=>B("bank_branch",w.target.value),error:!!u.bank_branch,helperText:u.bank_branch,InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ee,{fontSize:"small"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}})]}),e.jsx(X,{fullWidth:!0,label:"Opening Balance",type:"number",placeholder:"Enter Opening Balance",value:f.opening_balance,onChange:w=>B("opening_balance",w.target.value),error:!!u.opening_balance,helperText:u.opening_balance||"Enter the opening balance for this account",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ee,{fontSize:"small"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:1,transition:"all 0.3s ease"}}}),e.jsx(J,{direction:"row",spacing:1,sx:{height:"100%",alignItems:"center"},children:["Debit","Credit"].map(w=>e.jsx(le,{title:`You ${w==="Debit"?"have":"owe"} ${f.opening_balance}`,arrow:!0,children:e.jsx(ee,{variant:j===w?"contained":"outlined",onClick:()=>{T(w)},sx:{borderRadius:1,px:2,py:3,textTransform:"none",fontWeight:600,minWidth:"auto",flex:1,transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:n.shadows[4]}},endIcon:j===w?e.jsx(da,{}):null,children:w==="Debit"?"You have":"You owe"})},w))})]})})})}),e.jsx(l,{sx:{p:3,borderTop:`1px solid ${n.palette.divider}`,backgroundColor:n.palette.background.paper,background:`linear-gradient(135deg, ${n.palette.background.paper} 0%, ${n.palette.action.hover}20 100%)`,backdropFilter:"blur(20px)"},children:e.jsx(J,{direction:o?"column":"row",spacing:2,justifyContent:"space-between",alignItems:"center",children:e.jsxs(J,{direction:o?"column":"row",spacing:2,sx:{width:o?"100%":"auto"},children:[e.jsx(ee,{variant:"outlined",onClick:_,disabled:c,fullWidth:o,sx:{textTransform:"none",borderRadius:1,px:3,py:1.5,fontWeight:600,transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:n.shadows[4]}},children:"Reset Form"}),e.jsx(ft,{onClick:K,startIcon:c?e.jsx(qt,{className:"animate-spin"}):e.jsx(pa,{}),disabled:c,text:c?"Adding bank...":"Add bank"})]})})})]}),e.jsx(Mi,{isLoading:c,text:"Adding Bank Account..."})]})},Kp=()=>{var R,L,D,P,A,O,y,F,h,b,M,W,C,$,G,ge,Ae,ae,Y,re;const t=we(),{company_id:a}=ja(),n=Fe(),{mode:s}=wi(),{user:r,current_company_id:o}=Ce(Te=>Te.auth),p=o||localStorage.getItem("current_company_id")||((R=r==null?void 0:r.user_settings)==null?void 0:R.current_company_id)||"",c=(L=r==null?void 0:r.company)==null?void 0:L.find(Te=>Te._id===p),{company:x}=Ce(Te=>Te.company),[u,S]=g.useState(!1),[f,v]=g.useState(!1),[j,T]=g.useState(null),[k,B]=g.useState(0),_=(Te,V)=>{B(V)},K=g.useCallback(()=>{n(vr())},[n]);Ft.useEffect(()=>{K()},[K]);const w=()=>{T(c),S(!0)},N=()=>{if(!x){Z.error("Company data is not available.");return}v(!0)};return g.useEffect(()=>{n($n(a??""))},[a]),e.jsxs(l,{sx:{minHeight:"100vh",width:"100%"},children:[e.jsx(Je,{maxWidth:!1,sx:{position:"relative",width:"100%",maxWidth:"100%",zIndex:1,py:4},children:e.jsxs(J,{spacing:3,children:[e.jsx(Ep,{company:x,onEditToggle:w}),e.jsx(ne,{elevation:0,sx:{borderRadius:2,bgcolor:d(t.palette.background.paper,.8),backdropFilter:"blur(20px)",border:`1px solid ${d(t.palette.divider,.1)}`},children:e.jsxs(Wr,{value:k,onChange:_,variant:"fullWidth",sx:{"& .MuiTab-root":{fontWeight:600,textTransform:"none",fontSize:"1rem",py:2,transition:"all 0.3s ease"},"& .Mui-selected":{color:t.palette.primary.main}},children:[e.jsx(dt,{label:"Overview",icon:e.jsx(ci,{}),iconPosition:"start"}),e.jsx(dt,{label:"Address Details",icon:e.jsx(La,{}),iconPosition:"start"}),e.jsx(dt,{label:"Templates",icon:e.jsx(Oa,{}),iconPosition:"start"}),e.jsx(dt,{label:"Settings",icon:e.jsx(wa,{}),iconPosition:"start"})]})}),k===0&&e.jsxs(I,{container:!0,gap:2,sx:{mt:2},children:[e.jsx(I,{item:!0,xs:12,lg:4,children:e.jsx(gt,{title:"Company Information",icon:e.jsx(br,{}),children:e.jsxs(J,{spacing:2,children:[e.jsx(Ze,{icon:e.jsx(br,{}),label:"Email Address",value:e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1},children:(x==null?void 0:x.email)||"Not provided"})}),e.jsx(Ze,{icon:e.jsx(Dc,{}),label:"Phone Number",value:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[((D=x==null?void 0:x.phone)==null?void 0:D.code)||""," "," ",((P=x==null?void 0:x.phone)==null?void 0:P.number)||"Not provided"]})}),e.jsx(Ze,{icon:e.jsx(br,{}),label:"Web Site",value:e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1},children:(x==null?void 0:x.website)||"Not provided"})})]})})}),e.jsx(I,{item:!0,xs:12,lg:7,children:e.jsx(gt,{title:"Default Bank",icon:e.jsx(Ni,{}),children:e.jsx(J,{spacing:3,sx:{p:1},children:e.jsxs(l,{children:[e.jsx(i,{variant:"h6",sx:{mb:2,fontWeight:600,textDecoration:"underline",textUnderlineOffset:"4px"},children:(x==null?void 0:x.bank_name)||"No Default Bank"}),e.jsx(ne,{elevation:0,sx:{p:3,borderRadius:1,bgcolor:s==="light"?d(t.palette.success.main,.05):d(t.palette.success.light,.1),border:`1px solid ${d(t.palette.success.main,.5)}`},children:e.jsxs(l,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(l,{display:"flex",alignItems:"center",children:e.jsxs(l,{children:[e.jsxs(i,{variant:"subtitle2",sx:{fontWeight:600},children:["Account Number: ",(x==null?void 0:x.account_number)||"N/A"]}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["IFSC Code: ",(x==null?void 0:x.bank_ifsc)||"N/A"]})]})}),e.jsx(l,{display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(ee,{variant:"contained",color:"success",startIcon:e.jsx(Ni,{}),sx:{background:s==="light"?d(t.palette.success.main,.5):d(t.palette.success.light,.5),"&:hover":{background:s==="light"?d(t.palette.success.main,1):d(t.palette.success.light,1)},fontWeight:600,whiteSpace:"nowrap",px:3},onClick:N,children:x!=null&&x.bank_name?"Change":"Add"})})]})})]})})})})]}),k===1&&e.jsxs(I,{container:!0,gap:2,sx:{mt:2},children:[e.jsx(I,{item:!0,xs:12,lg:4,children:e.jsx(gt,{title:"Address Information",icon:e.jsx(La,{}),children:e.jsxs(J,{spacing:2,children:[e.jsx(Ze,{icon:e.jsx(br,{}),label:"Address Line 1",value:e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1},children:(x==null?void 0:x.address_1)||"Not provided"})}),(x==null?void 0:x.address_2)&&e.jsx(Ze,{icon:e.jsx(br,{}),label:"Address Line 2",value:e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1},children:x==null?void 0:x.address_2})}),e.jsx(Ze,{icon:e.jsx(br,{}),label:"State, Country - Pin Code",value:e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1},children:`${(x==null?void 0:x.state)||""}, ${(x==null?void 0:x.country)||""} - ${(x==null?void 0:x.pinCode)||""}`})})]})})}),e.jsx(I,{item:!0,xs:12,lg:7,children:e.jsx(gt,{title:"Tax Information",icon:e.jsx(Ni,{}),children:e.jsx(J,{spacing:3,sx:{p:1},children:e.jsxs(l,{children:[e.jsx(i,{variant:"h6",sx:{mb:2,fontWeight:600,textDecoration:"underline",textUnderlineOffset:"4px"},children:x!=null&&x.tin?"Tax Information":"No Tax Information Added"}),e.jsx(ne,{elevation:0,sx:{p:3,borderRadius:1,bgcolor:s==="light"?d(t.palette.success.main,.05):d(t.palette.success.light,.1),border:`1px solid ${d(t.palette.success.main,.5)}`},children:e.jsxs(l,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(l,{display:"flex",alignItems:"center",children:e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600},children:"GSTIN/TIN Number"}),e.jsx(i,{variant:"caption",sx:{fontWeight:600},children:(x==null?void 0:x.tin)||"N/A"})]})}),e.jsxs(l,{display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center",children:[e.jsxs(i,{variant:"caption",color:"text.secondary",children:["Registration Type: ",(x==null?void 0:x.bank_ifsc)||"N/A"]}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["Registered State: ",(x==null?void 0:x.state)||"N/A"]})]})]})})]})})})})]}),k===2&&e.jsxs(I,{container:!0,justifyContent:"space-between",children:[e.jsx(I,{item:!0,xs:12,lg:5.8,children:e.jsx(gt,{title:"Sales Template Information",icon:e.jsx(Ts,{}),children:e.jsx(J,{spacing:2,children:e.jsx(Ze,{icon:e.jsx(ui,{}),label:"Comming Soon",value:e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1},children:"Template features will be available soon."})})})})}),e.jsx(I,{item:!0,xs:12,lg:5.8,children:e.jsx(gt,{title:"Purchase Template Information",icon:e.jsx(ro,{}),children:e.jsx(J,{spacing:2,children:e.jsx(Ze,{icon:e.jsx(ui,{}),label:"Comming Soon",value:e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1},children:"Template features will be available soon."})})})})})]}),k===3&&e.jsxs(I,{container:!0,justifyContent:"space-between",children:[e.jsx(I,{item:!0,xs:12,lg:5.8,children:e.jsx(gt,{title:"Account Settings",icon:e.jsx(At,{}),children:e.jsxs(J,{spacing:3,children:[e.jsx(Ze,{icon:e.jsx(At,{}),label:"Account Type",value:e.jsx(l,{sx:{display:"flex",alignItems:"center",gap:1},children:e.jsx(ne,{elevation:0,sx:{px:2,bgcolor:d(t.palette.primary.main,.1),border:`1px solid ${d(t.palette.primary.main,.3)}`,borderRadius:1},children:e.jsx(i,{variant:"caption",sx:{color:t.palette.primary.main,textTransform:"capitalize"},children:(r==null?void 0:r.user_type)||"User"})})})}),e.jsx(Pe,{}),e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Permissions"}),e.jsx(J,{spacing:2,children:e.jsx(jt,{control:e.jsx(kt,{checked:((O=(A=r==null?void 0:r.user_settings)==null?void 0:A.permissions)==null?void 0:O.create_vouchers)||!1,disabled:!0,color:"primary"}),label:e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600},children:"Create Vouchers"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Permission to create and manage vouchers"})]}),sx:{width:"100%",margin:0}})})]}),e.jsx(Pe,{}),e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Session Information"}),e.jsxs(J,{spacing:1.5,children:[e.jsx(Ze,{icon:e.jsx(Da,{}),label:"Last Login",value:e.jsx(i,{variant:"body2",children:(y=r==null?void 0:r.user_settings)!=null&&y.last_login?nr(r.user_settings.last_login.toString()):"Never"})}),e.jsx(Ze,{icon:e.jsx(ua,{}),label:"Device",value:e.jsx(i,{variant:"body2",children:((F=r==null?void 0:r.user_settings)==null?void 0:F.last_login_device)||"Unknown"})}),e.jsx(Ze,{icon:e.jsx(Ur,{}),label:"IP Address",value:e.jsx(i,{variant:"body2",sx:{fontFamily:"monospace"},children:((h=r==null?void 0:r.user_settings)==null?void 0:h.last_login_ip)||"Unknown"})})]})]})]})})}),e.jsx(I,{item:!0,xs:12,lg:5.8,children:e.jsx(gt,{title:"Company Settings",icon:e.jsx(ci,{}),children:e.jsxs(J,{spacing:3,children:[e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Current Company"}),c?e.jsx(ne,{elevation:0,sx:{p:2.5,borderRadius:1,bgcolor:d(t.palette.primary.main,.05),border:`1px solid ${d(t.palette.primary.main,.2)}`},children:e.jsxs(l,{display:"flex",alignItems:"center",gap:2,children:[(c==null?void 0:c.image)&&e.jsx(l,{component:"img",src:c==null?void 0:c.image,alt:"Company Logo",sx:{width:48,height:48,borderRadius:1,objectFit:"cover",border:`2px solid ${d(t.palette.primary.main,.3)}`}}),e.jsxs(l,{flex:1,children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600},children:c==null?void 0:c.company_name}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:[c==null?void 0:c.state,", ",c==null?void 0:c.country]})]}),e.jsx(ne,{elevation:0,sx:{px:1.5,py:.5,bgcolor:d(t.palette.success.main,.1),border:`1px solid ${d(t.palette.success.main,.3)}`,borderRadius:1},children:e.jsx(i,{variant:"caption",sx:{color:t.palette.success.main,fontWeight:600},children:"CHANGE"})})]})}):e.jsx(i,{variant:"body2",color:"text.secondary",children:"No company selected or Created yet."})]}),e.jsx(Pe,{}),e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Features"}),e.jsx(J,{direction:"row",spacing:2,children:c!=null&&c.company_settings?e.jsxs(e.Fragment,{children:[e.jsx(jt,{control:e.jsx(kt,{checked:((M=(b=c==null?void 0:c.company_settings)==null?void 0:b.features)==null?void 0:M.enable_tax)||!1,disabled:!0,color:"primary"}),label:e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600},children:"TAX Management"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Tax calculation and TAX return filing"})]}),sx:{width:"100%",margin:0}}),e.jsx(jt,{control:e.jsx(kt,{checked:((C=(W=c==null?void 0:c.company_settings)==null?void 0:W.features)==null?void 0:C.enable_inventory)||!1,disabled:!0,color:"primary"}),label:e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600},children:"Inventory Management"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Stock tracking and inventory control"})]}),sx:{width:"100%",margin:0}})]}):e.jsx(i,{variant:"body2",color:"text.secondary",children:"Please create or select a company from the list."})})]}),e.jsx(Pe,{}),e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Financial Info"}),c?e.jsxs(J,{spacing:1.5,children:[((G=($=c==null?void 0:c.company_settings)==null?void 0:$.tax_details)==null?void 0:G.tin)&&e.jsx(Ze,{icon:e.jsx(Ur,{}),label:"TIN",value:e.jsx(i,{variant:"body2",sx:{fontFamily:"monospace"},children:(Ae=(ge=c==null?void 0:c.company_settings)==null?void 0:ge.tax_details)==null?void 0:Ae.tin})}),((ae=c==null?void 0:c.company_settings)==null?void 0:ae.books_start_date)&&e.jsx(Ze,{icon:e.jsx(Da,{}),label:"Books Start Date",value:e.jsx(i,{variant:"body2",children:(Y=c==null?void 0:c.company_settings)!=null&&Y.books_start_date?nr(((re=c==null?void 0:c.company_settings)==null?void 0:re.books_start_date.toString())||""):"Not Set"})})]}):e.jsx(i,{variant:"body2",color:"text.secondary",children:"No company selected or Created yet."})]})]})})}),e.jsx(I,{item:!0,xs:12,sx:{mt:3},children:e.jsx(gt,{title:"Data Management",icon:e.jsx(wa,{}),children:e.jsxs(I,{container:!0,spacing:3,children:[e.jsx(I,{item:!0,xs:12,md:6,children:e.jsx(ne,{elevation:0,sx:{p:3,borderRadius:1,bgcolor:d(t.palette.info.main,.05),border:`1px solid ${d(t.palette.info.main,.2)}`},children:e.jsxs(l,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(l,{display:"flex",alignItems:"center",children:[e.jsx(l,{sx:{p:1,borderRadius:1,bgcolor:d(t.palette.info.main,.1),color:t.palette.info.main,mr:2},children:e.jsx(Oa,{})}),e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600},children:"Export Data"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Download your account and company data"})]})]}),e.jsx(ee,{variant:"contained",color:"info",disabled:!0,sx:{background:d(t.palette.info.main,.8),cursor:"not-allowed",fontWeight:600,whiteSpace:"nowrap",px:3},children:"Available Soon"})]})})}),e.jsx(I,{item:!0,xs:12,md:6,children:e.jsx(ne,{elevation:0,sx:{p:3,borderRadius:1,bgcolor:d(t.palette.warning.main,.05),border:`1px solid ${d(t.palette.warning.main,.2)}`},children:e.jsxs(l,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(l,{display:"flex",alignItems:"center",children:[e.jsx(l,{sx:{p:1,borderRadius:1,bgcolor:d(t.palette.warning.main,.1),color:t.palette.warning.main,mr:2},children:e.jsx(wa,{})}),e.jsxs(l,{children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600},children:"Reset Settings"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Reset all preferences to default values"})]})]}),e.jsx(ee,{variant:"contained",color:"warning",startIcon:e.jsx(wa,{}),sx:{background:d(t.palette.warning.main,.8),"&:hover":{background:t.palette.warning.main},fontWeight:600,whiteSpace:"nowrap",px:3},children:"Reset"})]})})})]})})})]})]})}),e.jsx(yo,{open:u,onClose:()=>{S(!1)},company:j,onUpdated:async()=>{K()}}),e.jsx(Gp,{open:f,onClose:()=>v(!1)})]})};function ls({open:t,title:a,search:n,onClose:s,buttonText:r,categories:o=[],onAddCategory:p,onEditCategory:c,onDeleteCategory:x}){const u=we(),[S,f]=g.useState(o),[v,j]=g.useState(""),[T,k]=g.useState(null),[B,_]=g.useState(!1),[K,w]=g.useState("");g.useEffect(()=>{f(o)},[o]);const N=()=>{B||(_(!0),k(null),w(""))},R=()=>{const y=K.trim();if(!y)return;const F={_id:Date.now().toString(),ledger_name:y};f([F,...S]),_(!1),w(""),p&&p(F)},L=(y,F)=>{k(y),_(!1),w(F)},D=y=>{const F=K.trim();if(!F)return;const h=S.map(M=>M._id===y?{...M,ledger_name:F}:M);f(h),k(null),w("");const b=h.find(M=>M._id===y);b&&c&&c(b)},P=()=>{k(null),w(""),_(!1)},A=y=>{const F=S.find(h=>h._id===y);F&&x&&x(F)},O=S.filter(y=>y.ledger_name.toLowerCase().includes(v.toLowerCase()));return e.jsxs(Mt,{anchor:"right",PaperProps:{sx:{width:{xs:"100%",sm:600,md:700},backgroundColor:u.palette.background.default,backgroundImage:"none"}},sx:{"& .MuiBackdrop-root":{backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)"},zIndex:1300},open:t,onClose:s,transitionDuration:400,children:[e.jsxs(ba,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #e0e0e0",pb:2,mb:2},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ke,{onClick:s,size:"small",children:e.jsx(Bc,{})}),e.jsxs(i,{variant:"h6",component:"span",sx:{fontWeight:600},children:[a," list"]})]}),e.jsx(ee,{variant:"contained",onClick:N,sx:{textTransform:"none",borderRadius:1.5,px:3,py:1,bgcolor:"#2563eb","&:hover":{bgcolor:"#1d4ed8"}},children:r})]}),e.jsxs(fa,{sx:{p:3},children:[e.jsx(X,{fullWidth:!0,size:"small",placeholder:n,value:v,onChange:y=>j(y.target.value),InputProps:{startAdornment:e.jsx(ki,{sx:{color:"#9ca3af",mr:1}})},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:1}}}),e.jsx(nt,{component:ne,elevation:0,children:e.jsxs(it,{children:[e.jsx(ot,{children:e.jsxs(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{sx:{fontWeight:600,color:"#6b7280",fontSize:"0.875rem",borderBottom:"2px solid #e5e7eb"},children:"Name"}),e.jsx(m,{align:"right",sx:{fontWeight:600,color:"#6b7280",fontSize:"0.875rem",borderBottom:"2px solid #e5e7eb"},children:"Action"})]})}),e.jsxs(st,{children:[B&&e.jsxs(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{sx:{py:2},children:e.jsx(X,{fullWidth:!0,value:K,onChange:y=>w(y.target.value),onKeyPress:y=>y.key==="Enter"&&R(),autoFocus:!0,variant:"outlined",size:"small",placeholder:"Enter category name",sx:{"& .MuiOutlinedInput-root":{borderRadius:1,bgcolor:"white"}}})}),e.jsx(m,{align:"right",children:e.jsxs(l,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(ft,{onClick:R,startIcon:e.jsx(Eo,{}),text:"Create",size:"small"}),e.jsx(ta,{onClick:P,startIcon:e.jsx(bi,{}),text:"Cancel",size:"small"})]})})]}),O.length>0?O.map(y=>e.jsxs(xe,{sx:{"&:hover":{bgcolor:"#f9fafb"},"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{sx:{py:2},children:T===y._id?e.jsx(X,{fullWidth:!0,value:K,onChange:F=>w(F.target.value),onKeyPress:F=>{F.key==="Enter"&&D(y._id)},autoFocus:!0,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:1,bgcolor:"white"}}}):y.ledger_name}),e.jsx(m,{align:"right",children:e.jsx(l,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:T===y._id?e.jsxs(e.Fragment,{children:[e.jsx(ft,{onClick:()=>D(y._id),startIcon:e.jsx(Eo,{}),text:"Update",size:"small"}),e.jsx(ta,{onClick:P,startIcon:e.jsx(bi,{}),text:"Cancel",size:"small"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ft,{onClick:()=>L(y._id,y.ledger_name),startIcon:e.jsx(Rr,{}),text:"Edit",size:"small"}),e.jsx(ta,{onClick:()=>A(y._id),startIcon:e.jsx(mt,{}),text:"Delete",size:"small"})]})})})]},y._id)):e.jsx(xe,{children:e.jsx(m,{colSpan:2,sx:{textAlign:"center",py:8},children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx(Fc,{sx:{fontSize:"4rem",color:u.palette.text.disabled}}),e.jsxs(i,{variant:"h5",color:"text.secondary",sx:{fontWeight:600},children:["No ",a.toLowerCase()," created yet"]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Try adjusting your search or filter criteria, or create your very first ",a.toLowerCase()," for today"]})]})})})]})]})})]})]})}const Hp=()=>{var je,q,E,te;const t=Ke(),a=we(),n=Fe(),[s,r]=g.useState(!1),[o,p]=g.useState([]),[c,x]=g.useState(),[u,S]=g.useState(!1),[f,v]=g.useState(),[j,T]=g.useState(!1),{expenses:k,loading:B,expensePageMeta:_}=Ce(U=>U.invoice),{user:K,current_company_id:w}=Ce(U=>U.auth),N=w||localStorage.getItem("current_company_id")||((je=K==null?void 0:K.user_settings)==null?void 0:je.current_company_id)||"",R=(q=K==null?void 0:K.company)==null?void 0:q.find(U=>U._id===N),L=(te=(E=R==null?void 0:R.company_settings)==null?void 0:E.features)==null?void 0:te.enable_tax,{searchQuery:D,filterState:P,page:A,rowsPerPage:O,startDate:y,endDate:F,type:h,sortField:b,sortOrder:M}=Ce(U=>U.invoice.invoicesFilters),[W,C]=g.useState(D),$=g.useCallback(async()=>{n(ti({searchQuery:W,company_id:N||"",type:"Expenses",start_date:$t(y),end_date:$t(F),pageNumber:A,limit:O,sortField:b,sortOrder:M}))},[n,W,N,y,F,A,O,b,M]),{init:G,setLoading:ge,PDFViewModal:Ae}=Ri();async function ae(U,H){try{ge(!0);const ie=await n((U.voucher_type==="Payment"?Pi:U.voucher_type==="Receipt"?Ai:L?Ti:Ii)({vouchar_id:U._id,company_id:w||""}));if(ie.meta.requestStatus==="fulfilled"){const{pdfUrl:me}=ie.payload,Q=await fetch(me).then(De=>De.blob()),ce=new File([Q],`${U._id}.pdf`,{type:"application/pdf"});G({file:ce,entityNumber:U.voucher_number,title:U.party_name,fileName:`${U.voucher_number}-vyapar-drishti`},H)}else{console.error("Failed to print invoice:",ie.payload);return}}catch(ie){console.error("Error printing invoice:",ie)}finally{ge(!1)}}g.useEffect(()=>{$()},[]),g.useEffect(()=>{const U=setTimeout(()=>{C(D)},300);return()=>{clearTimeout(U)}},[D]),g.useEffect(()=>{$()},[W,A,O,b,P,M,n,N,$]),g.useEffect(()=>{n(Ba(N||""))},[N,n]);const Y=U=>{n($a({sortOrder:b===U&&M==="asc"?"desc":"asc",sortField:U}))},re=(U,H)=>{n($a({page:H}))},Te=()=>{n($a({searchQuery:"",filterState:"All-States",type:"Invoices",page:1,startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString(),endDate:new Date().toISOString(),rowsPerPage:10,sortField:"date",sortOrder:"desc"}))},V=(U,H)=>{n($a({[U]:H}))},z=U=>{t(`/invoices/${U._id}`)},de=U=>{n(ur({vouchar_id:U._id,company_id:N})).unwrap().then(()=>{Z.success("Invoice deleted successfully!"),$()}).catch(H=>{Z.error(H||"An unexpected error occurred. Please try again later.")})},Ie=U=>{n(Cr(U._id)).unwrap().then(()=>{Z.success(`${U.ledger_name} deleted successfully.`),n(la({company_id:w??"",customerType:"Indirect Expenses"})).then(H=>{if(H.meta.requestStatus==="fulfilled"){const ie=H.payload;v(ie.map(me=>({_id:me._id,ledger_name:me.ledger_name,parent:me.parent,total_amount:me.total_amount})))}}).catch(H=>{console.log("Error",H)})}).catch(H=>{Z.error(H||"An unexpected error occurred while deleting the customer."),console.error("Failed to delete customer:",H)})},oe=U=>{const H=new FormData;Object.entries(U).forEach(([ie,me])=>{H.append(ie,me)}),H.append("user_id",K._id),H.append("name",U.ledger_name),H.append("parent",c?"Direct Expenses":"Indirect Expenses"),H.append("parent_id",c?"979e7155-7bbc-4d98-8b00-8794279f4186":"8d4ed7ad-c461-414d-ab3b-95b9d0b9ff91"),H.append("company_id",w??""),n(dr(H)).then(ie=>{ie.meta.requestStatus==="fulfilled"&&(Z.success(`${U.ledger_name} created successfully.`),n(la({company_id:w??"",customerType:c?"Direct Expenses":"Indirect Expenses"})).then(me=>{if(me.meta.requestStatus==="fulfilled"){const Q=me.payload;c?x(Q.map(ce=>({_id:ce._id,ledger_name:ce.ledger_name,parent:ce.parent,total_amount:ce.total_amount}))):v(Q.map(ce=>({_id:ce._id,ledger_name:ce.ledger_name,parent:ce.parent,total_amount:ce.total_amount})))}}).catch(me=>{Z.error(me||`An unexpected error occurred while creating the ${U.ledger_name}.`),console.log("Error",me)}))})},ue=U=>{n(mx({ledger_details:{ledger_name:U.ledger_name},id:U._id})).then(H=>{H.meta.requestStatus==="fulfilled"&&(Z.success(`${U.ledger_name} updated successfully.`),n(la({company_id:w??"",customerType:c?"Direct Expenses":"Indirect Expenses"})).then(ie=>{if(ie.meta.requestStatus==="fulfilled"){const me=ie.payload;c?x(me.map(Q=>({_id:Q._id,ledger_name:Q.ledger_name,parent:Q.parent,total_amount:Q.total_amount}))):v(me.map(Q=>({_id:Q._id,ledger_name:Q.ledger_name,parent:Q.parent,total_amount:Q.total_amount})))}}).catch(ie=>{Z.error(ie||`An unexpected error occurred while updating the ${U.ledger_name}.`),console.log("Error",ie)}))})};return e.jsx(Pt,{dateAdapter:Lt,children:e.jsxs(l,{sx:{p:3,width:"100%",position:"relative"},children:[e.jsx(Ja,{title:"Expenses Directory",subtitle:`${_.total} Expense entries available in your database after applying filters`,children:e.jsxs(e.Fragment,{children:[e.jsx(ee,{variant:"outlined",color:"primary",size:"medium",onClick:()=>{n(la({company_id:w??"",customerType:"Indirect Expenses"})).then(U=>{if(U.meta.requestStatus==="fulfilled"){const H=U.payload;v(H.map(ie=>({_id:ie._id,ledger_name:ie.ledger_name,parent:ie.parent,total_amount:ie.total_amount}))),T(!0)}}).catch(U=>{console.log("Error",U)})},sx:{fontWeight:"bold",py:1.5},children:"Indirect Expenses"}),e.jsx(ee,{variant:"outlined",color:"primary",size:"medium",onClick:()=>{n(la({company_id:w??"",customerType:"Direct Expenses"})).then(U=>{if(U.meta.requestStatus==="fulfilled"){const H=U.payload;x(H.map(ie=>({_id:ie._id,ledger_name:ie.ledger_name,parent:ie.parent,total_amount:ie.total_amount}))),S(!0)}}).catch(U=>{console.log("Error",U)})},sx:{fontWeight:"bold",py:1.5},children:"Direct Expenses"})]})}),e.jsxs(l,{sx:{display:"flex",mb:3,gap:2,flexWrap:"wrap"},children:[e.jsx(X,{sx:{flexGrow:1,minWidth:"250px"},variant:"outlined",size:"small",label:"Search",placeholder:"Search by name, type...",value:D,onChange:U=>V("searchQuery",U.target.value),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(qa,{})})}}),e.jsx(Xe,{label:"Start Date",value:new Date(y),format:"dd/MM/yyyy",views:["year","month","day"],onChange:U=>V("startDate",(U==null?void 0:U.toISOString())??""),slotProps:{textField:{size:"small",sx:{"& .MuiOutlinedInput-root":{width:"150px",borderRadius:"8px"},"& .MuiInputAdornment-root .MuiButtonBase-root":{border:"none",boxShadow:"none"}}}}}),e.jsx(Xe,{label:"End Date",value:new Date(F),format:"dd/MM/yyyy",views:["year","month","day"],onChange:U=>V("endDate",(U==null?void 0:U.toISOString())??""),slotProps:{textField:{size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px",width:"150px"},"& .MuiInputAdornment-root .MuiButtonBase-root":{border:"none",boxShadow:"none"}}}}}),e.jsx(qe,{sx:{minWidth:"150px"},children:e.jsxs(X,{select:!0,size:"small",value:h,label:"Filter by invoice Types",placeholder:"Filter by invoice Types",onChange:U=>V("type",U.target.value),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Ea,{})})},children:[e.jsx(he,{selected:!0,value:"Invoices",children:e.jsx("em",{children:"All"})}),e.jsx(he,{value:"Sales",children:"Sales"}),e.jsx(he,{value:"Purchase",children:"Purchase"})]})}),e.jsx(qe,{children:e.jsx(X,{select:!0,size:"small",value:O.toString(),label:"Show",onChange:U=>{V("rowsPerPage",parseInt(U.target.value,10)),V("page",1)},children:[10,20,50,100,200].map(U=>e.jsxs(he,{value:U.toString(),children:[U," rows"]},U))})}),e.jsx(ee,{variant:"outlined",color:"primary",size:"medium",startIcon:e.jsx(Ua,{}),onClick:Te,sx:{fontWeight:"bold",py:1.5},children:"Reset Filters"})]}),e.jsx(nt,{component:ne,elevation:0,sx:{width:"100%",borderRadius:1,border:`1px solid ${d(a.palette.divider,1)}`,boxShadow:`0 4px 20px ${d("#000",.05)}`},children:e.jsxs(it,{sx:{width:"100%"},children:[e.jsx(ot,{children:e.jsxs(xe,{sx:{bgcolor:d(a.palette.grey[50],.8),width:"100%","& .MuiTableCell-head":{borderBottom:`2px solid ${d(a.palette.primary.main,.1)}`},"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(Aa,{indeterminate:o.length>0&&o.length<k.length,checked:k.length>0&&o.length===k.length,onChange:(U,H)=>{p(H?k.map(ie=>ie._id):[])}})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by State",arrow:!0,children:e.jsx(Ue,{active:b==="date",direction:b==="date"?M:"asc",onClick:()=>Y("date"),children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(Ut,{fontSize:"small"}),e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:a.palette.text.primary,fontSize:"0.85rem"},children:"Invoice Date"})]})})})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by Name",children:e.jsx(Ue,{active:b==="party_name",direction:b==="party_name"?M:"asc",onClick:()=>Y("party_name"),children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:a.palette.text.primary,fontSize:"0.85rem"},children:"Expense Information"})})})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by Invoice Type",arrow:!0,children:e.jsx(Ue,{active:b==="voucher_type",direction:b==="voucher_type"?M:"asc",onClick:()=>Y("voucher_type"),children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:a.palette.text.primary,fontSize:"0.85rem"},children:"Invoice Type"})})})}),e.jsx(m,{align:"left",sx:{px:1},children:e.jsx(le,{title:"Sort by Expense Number",arrow:!0,sx:{mx:"auto"},children:e.jsx(Ue,{active:b==="voucher_number",direction:b==="voucher_number"?M:"asc",onClick:()=>Y("voucher_number"),sx:{mx:"auto"},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:a.palette.text.primary,fontSize:"0.85rem",mx:"auto"},children:"Expense No."})})})}),e.jsx(m,{align:"right",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:a.palette.text.primary,fontSize:"0.85rem"},children:"Debit"})}),e.jsx(m,{align:"right",sx:{px:1},children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:a.palette.text.primary,fontSize:"0.85rem"},children:"Credit"})}),e.jsx(m,{align:"center",children:e.jsx(i,{variant:"subtitle2",sx:{fontWeight:700,color:a.palette.text.primary,fontSize:"0.85rem"},children:"Actions"})})]})}),e.jsxs(st,{children:[B?Array([1,2,3,4,5]).map((U,H)=>e.jsx(dn,{},`skeleton-${H}`)):(k==null?void 0:k.length)>0?k.map((U,H)=>e.jsx(_o,{inv:U,selected:o.includes(U._id),onSelect:ie=>{p(me=>ie?[...me,U._id]:me.filter(Q=>Q!==U._id))},index:H+1+(A-1)*O,onView:()=>z(U),onEdit:()=>{t(`/invoices/update/${U.voucher_type.toLowerCase()}/${U._id}`)},onDelete:()=>de(U),onPrint:()=>{ae(U,()=>{r(!0)})}},U._id)):e.jsx(xe,{children:e.jsx(m,{colSpan:8,sx:{textAlign:"center",py:8},children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx(ya,{sx:{fontSize:"4rem",color:a.palette.text.disabled}}),e.jsx(i,{variant:"h5",color:"text.secondary",sx:{fontWeight:600},children:"No expenses created today"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Try adjusting your search or filter criteria, or create your first expense for today"})]})})}),B?Array([1,2,3,4,5]).map((U,H)=>e.jsx(dn,{},`skeleton1-${H}`)):(k==null?void 0:k.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px",bgcolor:d(a.palette.grey[50],.8)}},children:e.jsx(m,{colSpan:8})}),e.jsxs(xe,{sx:{"& .MuiTableCell-root":{padding:"8px 16px"}},children:[e.jsx(m,{colSpan:1,sx:{textAlign:"center"}}),e.jsx(m,{colSpan:1,sx:{textAlign:"left"},children:e.jsx(i,{variant:"subtitle1",color:"text.primary",sx:{fontWeight:600,textDecoration:"underline"},children:"Total"})}),e.jsx(m,{colSpan:3,sx:{textAlign:"center"}}),e.jsx(m,{align:"right",colSpan:1,children:_.total_expense!==0&&e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:700,mr:.5,color:a.palette.success.main},children:"₹"}),e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600,color:a.palette.success.main},children:Math.abs(_.total_expense)})]})}),e.jsx(m,{align:"right",colSpan:1}),e.jsx(m,{colSpan:1,sx:{textAlign:"center"}})]})]})]})]})}),e.jsx(Dt,{total:_.total,item:"expenses",page:A,metaPage:_.page,rowsPerPage:O,onChange:re}),s&&e.jsx(Ae,{visible:s,setVisible:r}),j&&e.jsx(ls,{open:j,search:"Search using name",buttonText:"Create New",title:"Indirect Expenses",onClose:()=>T(!1),onAddCategory:U=>{console.log("Add category:",U),oe(U)},onEditCategory:U=>{console.log("Edit category:",U),ue(U)},onDeleteCategory:U=>{console.log("Delete category:",U),Ie(U)},categories:f}),c&&e.jsx(ls,{open:u,search:"Search using name",buttonText:"Create New",title:"Direct Expenses",onClose:()=>S(!1),onAddCategory:U=>{console.log("Add category:",U),oe(U)},onEditCategory:U=>{console.log("Edit category:",U),ue(U)},onDeleteCategory:U=>{console.log("Delete category:",U),Ie(U)},categories:c})]})})},qp={...tl,...al,...rl,...nl},Up=t=>{var j,T,k,B;const{authState:a,user:n,isUserFetched:s,switchCompanyLoading:r,deleteCompanyLoading:o,current_company_id:p}=Ce(_=>_.auth),c=p||localStorage.getItem("current_company_id")||((j=n==null?void 0:n.user_settings)==null?void 0:j.current_company_id)||"",x=(T=n==null?void 0:n.company)==null?void 0:T.find(_=>_._id===c),u=(B=(k=x==null?void 0:x.company_settings)==null?void 0:k.features)==null?void 0:B.enable_tax,S=Fe(),f=g.useRef(!1);g.useEffect(()=>{if(f.current)return;f.current=!0,(async()=>{const K=localStorage.getItem("accessToken");if(!K){S(Bi({authState:Ve.IDLE}));return}if(!s&&K)try{await S(Ia()).unwrap().then(()=>{S(Bi({authState:Ve.AUTHENTICATED}))}).catch(w=>{Z.error(w||"An unexpected error occurred. Please try again later.")})}catch{localStorage.removeItem("accessToken"),S(Bi({authState:Ve.IDLE}))}})()},[S,s]);const v=un();return g.useEffect(()=>{window.scrollTo(0,0)},[v]),e.jsxs(el,{...t,themeComponents:qp,children:[e.jsx(ms,{enableColorScheme:!0}),e.jsx(Ks,{children:a===Ve.AUTHENTICATED?e.jsxs(e.Fragment,{children:[(n==null?void 0:n.user_type)===hr.ADMIN&&e.jsxs(We,{element:e.jsx(Uo,{}),children:[e.jsx(We,{path:"/dashboard",element:e.jsx(ss,{})}),e.jsx(We,{path:"/",element:e.jsx(ss,{})}),e.jsx(We,{path:"/profile",element:e.jsx(Fr,{})}),e.jsx(We,{path:"/",element:e.jsx(Fr,{})}),e.jsx(We,{path:"/products/:id",element:e.jsx(Zo,{})}),e.jsx(We,{path:"/products",element:e.jsx(Vo,{})}),e.jsx(We,{path:"/about",element:e.jsx(Kn,{})})]}),(n==null?void 0:n.user_type)===hr.USER&&e.jsxs(We,{element:e.jsx(Uo,{}),children:[e.jsx(We,{path:"/profile",element:e.jsx(Fr,{})}),e.jsx(We,{path:"/profile/company/:company_id",element:e.jsx(Kp,{})}),e.jsx(We,{path:"/",element:e.jsx(Fr,{})}),e.jsx(We,{path:"/account",element:e.jsx(Fr,{})}),e.jsx(We,{path:"/products/:id",element:e.jsx(Zo,{})}),e.jsx(We,{path:"/products",element:e.jsx(Vo,{})}),e.jsx(We,{path:"/warehouses",element:e.jsx(Ox,{})}),e.jsx(We,{path:"/timeline",element:e.jsx(lx,{})}),e.jsx(We,{path:"/about",element:e.jsx(Kn,{})}),e.jsx(We,{path:"/customers",element:e.jsx(kx,{})}),e.jsx(We,{path:"/accounts",element:e.jsx(Fp,{})}),e.jsx(We,{path:"/accounts/:account_id",element:e.jsx(Op,{})}),e.jsx(We,{path:"/customers/:customer_id",element:e.jsx(Kx,{})}),e.jsx(We,{path:"/customers/create/:type",element:e.jsx(rs,{})}),e.jsx(We,{path:"/customers/edit/:type",element:e.jsx(rs,{})}),e.jsx(We,{path:"/transactions",element:e.jsx(Nx,{})}),e.jsx(We,{path:"/transactions/create/:type",element:e.jsx(Wx,{})}),e.jsx(We,{path:"/transactions/update/:type/:voucher_id",element:e.jsx(Ux,{})}),e.jsx(We,{path:"/expenses",element:e.jsx(Hp,{})}),e.jsx(We,{path:"/invoices",element:e.jsx(Tx,{})}),e.jsx(We,{path:"/invoices/:invoice_id",element:e.jsx(Yx,{})}),e.jsx(We,{path:"/invoices/create/:type",element:e.jsx(Mx,{})}),e.jsx(We,{path:"/invoices/update/:type/:voucher_id",element:e.jsx($x,{})}),e.jsx(We,{path:"/reports",element:e.jsx(ip,{})}),u&&e.jsx(We,{path:"/summary",element:e.jsx(Dp,{})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(We,{path:"/",element:e.jsx(sx,{}),children:[e.jsx(We,{path:"/about",element:e.jsx(Kn,{})}),e.jsx(We,{path:"/contact",element:e.jsx(xl,{})}),e.jsx(We,{path:"/pricing",element:e.jsx(ul,{})}),e.jsx(We,{path:"/privacy",element:e.jsx(ll,{})}),e.jsx(We,{path:"/terms",element:e.jsx(cl,{})}),e.jsx(We,{path:"/security",element:e.jsx(dl,{})}),e.jsx(We,{path:"/cookies",element:e.jsx(sl,{})})]}),e.jsx(We,{path:"/login",element:e.jsx(Go,{})}),e.jsx(We,{path:"/admin",element:e.jsx(Go,{})}),e.jsx(We,{path:"/reset-password",element:e.jsx(Qx,{})}),e.jsx(We,{path:"/forgot-password",element:e.jsx(Xx,{})}),e.jsx(We,{path:"/signup",element:e.jsx(cx,{})}),e.jsx(We,{path:"/verify",element:e.jsx(Jx,{})})]})}),!f.current&&e.jsx(fn,{size:80}),a===Ve.INITIALIZING&&n===null&&e.jsx(fn,{size:80}),r&&e.jsx(fn,{size:80}),o&&e.jsx(fn,{size:80})]})},Yp={name:"",accessToken:localStorage.getItem("accessToken")?localStorage.getItem("accessToken"):null,pageMeta:{page:0,limit:0,total:0,unique:[]},loading:!1,error:null},Jp=oa({name:"user",initialState:Yp,reducers:{},extraReducers:t=>{t.addCase(Nn.pending,a=>{a.error=null,a.loading=!0}).addCase(Nn.fulfilled,(a,n)=>{a.name=n.payload.name,a.loading=!1}).addCase(Nn.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Oi.pending,a=>{a.error=null,a.loading=!0}).addCase(Oi.fulfilled,a=>{a.loading=!1}).addCase(Oi.rejected,(a,n)=>{a.error=n.payload,a.loading=!1})}}),Vp=Jp.reducer,Qp={company:null,companies:[],loading:!1,error:null},Zp=oa({name:"company",initialState:Qp,reducers:{},extraReducers:t=>{t.addCase(zn.pending,a=>{a.error=null,a.loading=!0}).addCase(zn.fulfilled,a=>{a.loading=!1}).addCase(zn.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Jr.pending,a=>{a.error=null,a.loading=!0}).addCase(Jr.fulfilled,(a,n)=>{a.company=n.payload.company,a.loading=!1}).addCase(Jr.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase($n.pending,a=>{a.error=null,a.loading=!0}).addCase($n.fulfilled,(a,n)=>{a.company=n.payload.company,a.loading=!1}).addCase($n.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(vr.pending,a=>{a.error=null,a.loading=!0}).addCase(vr.fulfilled,(a,n)=>{a.companies=n.payload.companies,a.loading=!1}).addCase(vr.rejected,(a,n)=>{a.error=n.payload,a.loading=!1})}}),Xp=Zp.reducer,eh={authState:Ve.INITIALIZING,productsData:[],stockItems:[],productData:null,product:null,item:null,timeline:null,uploadData:null,loading:!1,deletionModal:!1,productId:"",pageMeta:{page:0,limit:0,total:0,unique:[]},stockItemsMeta:{page:0,limit:0,total:0,unique_groups:[],unique_categories:[]},error:null},th=oa({name:"product",initialState:eh,reducers:{setProductId(t,a){t.productId=a.payload.productId,t.deletionModal=!t.deletionModal},setProductDataNull(t){t.productData=null}},extraReducers:t=>{t.addCase(Dn.pending,a=>{a.error=null,a.loading=!0}).addCase(Dn.fulfilled,a=>{a.loading=!1}).addCase(Dn.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Sr.pending,a=>{a.error=null,a.loading=!0}).addCase(Sr.fulfilled,(a,n)=>{a.product=n.payload.product,a.loading=!1}).addCase(Sr.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Fn.pending,a=>{a.error=null,a.loading=!0}).addCase(Fn.fulfilled,(a,n)=>{a.item=n.payload.item,a.loading=!1}).addCase(Fn.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Ln.pending,a=>{a.error=null,a.loading=!0}).addCase(Ln.fulfilled,(a,n)=>{a.timeline=n.payload.timeline,a.loading=!1}).addCase(Ln.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Ei.pending,a=>{a.error=null,a.loading=!0}).addCase(Ei.fulfilled,(a,n)=>{a.productsData=n.payload.productsData,a.pageMeta=n.payload.pageMeta,a.loading=!1}).addCase(Ei.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Bn.pending,a=>{a.error=null,a.loading=!0}).addCase(Bn.fulfilled,(a,n)=>{a.stockItems=n.payload.stockItems,a.stockItemsMeta=n.payload.stockItemsMeta,a.loading=!1}).addCase(Bn.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(On.pending,a=>{a.error=null,a.loading=!0}).addCase(On.fulfilled,(a,n)=>{a.loading=!1}).addCase(On.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Qr.pending,a=>{a.error=null,a.loading=!0}).addCase(Qr.fulfilled,(a,n)=>{a.loading=!1}).addCase(Qr.rejected,(a,n)=>{a.error=n.payload,a.loading=!1})}}),ah=th.reducer,rh={authState:Ve.INITIALIZING,productsData:[],categoryLists:[],categories:[],productData:null,uploadData:null,loading:!1,deletionModal:!1,productId:"",pageMeta:{page:0,limit:0,total:0,unique:[]},error:null},nh=oa({name:"category",initialState:rh,reducers:{setProductId(t,a){t.productId=a.payload.productId,t.deletionModal=!t.deletionModal},setProductDataNull(t){t.productData=null}},extraReducers:t=>{t.addCase(ir.pending,a=>{a.error=null,a.loading=!0}).addCase(ir.fulfilled,a=>{a.loading=!1}).addCase(ir.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(_r.pending,a=>{a.error=null,a.loading=!0}).addCase(_r.fulfilled,(a,n)=>{a.productData=n.payload.productData,a.loading=!1}).addCase(_r.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Zr.pending,a=>{a.error=null,a.loading=!0}).addCase(Zr.fulfilled,(a,n)=>{a.categoryLists=n.payload.categoryLists,a.loading=!1}).addCase(Zr.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(En.pending,a=>{a.error=null,a.loading=!0}).addCase(En.fulfilled,(a,n)=>{a.categories=n.payload.categories,a.pageMeta=n.payload.pageMeta,a.loading=!1}).addCase(En.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(or.pending,a=>{a.error=null,a.loading=!0}).addCase(or.fulfilled,(a,n)=>{a.loading=!1}).addCase(or.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(sr.pending,a=>{a.error=null,a.loading=!0}).addCase(sr.fulfilled,(a,n)=>{a.loading=!1}).addCase(sr.rejected,(a,n)=>{a.error=n.payload,a.loading=!1})}}),ih=nh.reducer,oh={authState:Ve.INITIALIZING,stockMovement:[],InventoryItems:[],hsnSummaryData:[],partySummaryData:[],invoiceSummaryData:[],timelinePageMeta:{page:0,limit:0,total:0,opening_val:0,inwards_val:0,outwards_val:0,closing_val:0,gross_profit:0,profit_percent:0},inventoryPageMeta:{page:0,limit:0,total:0,unique_groups:[],unique_categories:[]},hsnPageMeta:{page:0,limit:0,total:0,total_value:0,taxable_value:0,tax_amount:0},partyPageMeta:{page:0,limit:0,total:0,total_value:0,taxable_value:0,tax_amount:0},invoicePageMeta:{page:0,limit:0,total:0,total_value:0,taxable_value:0,tax_amount:0},statsData:{sale_value:0,purchase_value:0,positive_stock:0,negative_stock:0,zero_stock:0,low_stock:0},summaryStats:{total_hsn:0,total_party:0,total_invoices:0,total_revenue:0,total_tax:0},loading:!1,error:null},sh=oa({name:"inventory",initialState:oh,reducers:{},extraReducers:t=>{t.addCase(Hn.pending,a=>{a.error=null,a.loading=!0}).addCase(Hn.fulfilled,(a,n)=>{a.stockMovement=n.payload.stockMovement,a.timelinePageMeta=n.payload.timelinePageMeta,a.loading=!1}).addCase(Hn.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Yn.pending,a=>{a.error=null,a.loading=!0}).addCase(Yn.fulfilled,(a,n)=>{a.hsnSummaryData=n.payload.hsnSummaryData,a.hsnPageMeta=n.payload.hsnPageMeta,a.loading=!1}).addCase(Yn.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Jn.pending,a=>{a.error=null,a.loading=!0}).addCase(Jn.fulfilled,(a,n)=>{a.summaryStats=n.payload.summaryStats,a.loading=!1}).addCase(Jn.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Vn.pending,a=>{a.error=null,a.loading=!0}).addCase(Vn.fulfilled,(a,n)=>{a.partySummaryData=n.payload.partySummaryData,a.partyPageMeta=n.payload.partyPageMeta,a.loading=!1}).addCase(Vn.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Qn.pending,a=>{a.error=null,a.loading=!0}).addCase(Qn.fulfilled,(a,n)=>{a.invoiceSummaryData=n.payload.invoiceSummaryData,a.invoicePageMeta=n.payload.invoicePageMeta,a.loading=!1}).addCase(Qn.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Un.pending,a=>{a.error=null,a.loading=!0}).addCase(Un.fulfilled,(a,n)=>{a.InventoryItems=n.payload.InventoryItems,a.inventoryPageMeta=n.payload.inventoryPageMeta,a.loading=!1}).addCase(Un.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(qn.pending,a=>{a.error=null,a.loading=!0}).addCase(qn.fulfilled,(a,n)=>{a.statsData=n.payload.statsData,a.loading=!1}).addCase(qn.rejected,(a,n)=>{a.error=n.payload,a.loading=!1})}}),lh=sh.reducer,dh={authState:Ve.INITIALIZING,loading:!1,error:null,monthlyData:null,dailyData:null,statsData:{opening:0,purchase:0,sales:0,current:0,profit:0,profit_percent:0}},ch=oa({name:"analytics",initialState:dh,reducers:{},extraReducers:t=>{t.addCase(ai.pending,a=>{a.error=null,a.loading=!0}).addCase(ai.fulfilled,(a,n)=>{a.statsData=n.payload.statsData,a.loading=!1}).addCase(ai.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(ri.pending,a=>{a.error=null,a.loading=!0}).addCase(ri.fulfilled,(a,n)=>{a.monthlyData=n.payload.monthlyData,a.loading=!1}).addCase(ri.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(ni.pending,a=>{a.error=null,a.loading=!0}).addCase(ni.fulfilled,(a,n)=>{a.dailyData=n.payload.dailyData,a.loading=!1}).addCase(ni.rejected,(a,n)=>{a.error=n.payload,a.loading=!1})}}),uh=ch.reducer,xh={accountingGroups:[],customerGroups:[],defaultAccountingGroup:[],accountingGroupPageMeta:{page:0,limit:0,total:0,unique:[]},loading:!1,error:null},ph=oa({name:"accountingGroup",initialState:xh,reducers:{},extraReducers:t=>{t.addCase(Ki.pending,a=>{a.error=null,a.loading=!0}).addCase(Ki.fulfilled,(a,n)=>{a.customerGroups=n.payload.customerGroups,a.accountingGroupPageMeta=n.payload.accountingGroupPageMeta,a.loading=!1}).addCase(Ki.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(kr.pending,a=>{a.error=null,a.loading=!0}).addCase(kr.fulfilled,(a,n)=>{a.accountingGroups=n.payload.accountingGroups,a.loading=!1}).addCase(kr.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Hi.pending,a=>{a.error=null,a.loading=!0}).addCase(Hi.fulfilled,(a,n)=>{a.defaultAccountingGroup=n.payload.defaultAccountingGroup,a.loading=!1}).addCase(Hi.rejected,(a,n)=>{a.error=n.payload,a.loading=!1})}}),hh=ph.reducer,mh={productsData:[],inventoryGroupLists:[],inventoryGroups:[],productData:null,uploadData:null,loading:!1,deletionModal:!1,productId:"",inventoryGroupPageMeta:{page:0,limit:0,total:0,unique:[]},error:null},gh=oa({name:"inventoryGroup",initialState:mh,reducers:{setProductId(t,a){t.productId=a.payload.productId,t.deletionModal=!t.deletionModal},setProductDataNull(t){t.productData=null}},extraReducers:t=>{t.addCase(ir.pending,a=>{a.error=null,a.loading=!0}).addCase(ir.fulfilled,a=>{a.loading=!1}).addCase(ir.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(_r.pending,a=>{a.error=null,a.loading=!0}).addCase(_r.fulfilled,(a,n)=>{a.productData=n.payload.productData,a.loading=!1}).addCase(_r.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(wr.pending,a=>{a.error=null,a.loading=!0}).addCase(wr.fulfilled,(a,n)=>{a.inventoryGroupLists=n.payload.inventoryGroupLists,a.loading=!1}).addCase(wr.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(Gn.pending,a=>{a.error=null,a.loading=!0}).addCase(Gn.fulfilled,(a,n)=>{a.inventoryGroups=n.payload.inventoryGroups,a.inventoryGroupPageMeta=n.payload.inventoryGroupPageMeta,a.loading=!1}).addCase(Gn.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(or.pending,a=>{a.error=null,a.loading=!0}).addCase(or.fulfilled,(a,n)=>{a.loading=!1}).addCase(or.rejected,(a,n)=>{a.error=n.payload,a.loading=!1}).addCase(sr.pending,a=>{a.error=null,a.loading=!0}).addCase(sr.fulfilled,(a,n)=>{a.loading=!1}).addCase(sr.rejected,(a,n)=>{a.error=n.payload,a.loading=!1})}}),bh=gh.reducer,fh={usersList:[],pageMeta:{page:0,limit:0,total:0},loading:!1,error:null},yh=oa({name:"admin",initialState:fh,reducers:{},extraReducers:t=>{t.addCase(ii.pending,a=>{a.error=null,a.loading=!0}).addCase(ii.fulfilled,(a,n)=>{a.usersList=n.payload.usersList,a.pageMeta=n.payload.pageMeta,a.loading=!1}).addCase(ii.rejected,(a,n)=>{a.error=n.payload,a.loading=!1})}}),jh=yh.reducer,vh=Pl({reducer:{product:ah,category:ih,company:Xp,accountingGroup:hh,inventoryGroup:bh,customersLedger:wx,admin:jh,auth:Qc,user:Vp,inventory:lh,invoice:yx,analytics:uh}});Tl.createRoot(document.getElementById("root")).render(e.jsx(g.StrictMode,{children:e.jsx(Al,{store:vh,children:e.jsx(Ec,{children:e.jsxs(Lc,{injectFirst:!0,children:[e.jsx(Up,{}),e.jsx(Ml,{position:"top-center",reverseOrder:!1,gutter:8,containerClassName:"",containerStyle:{},toastOptions:{className:"",duration:3500,removeDelay:1e3,style:{background:"#fff",color:"#000",zIndex:"1000",textAlign:"center"},error:{duration:4e3,style:{zIndex:"1000",textAlign:"center",padding:"2px 10px",display:"flex",flexDirection:"row-reverse",alignItems:"center",justifyContent:"center",background:"#f44336",color:"#fff"},iconTheme:{primary:"#fff",secondary:"#f44336"}},success:{duration:3e3,iconTheme:{primary:"green",secondary:"white"}}}})]})})})}));
